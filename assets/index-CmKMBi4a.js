(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();function Uf(n){let t=n.querySelectorAll(".seam-allowance");if(t.length===0&&(t=n.querySelectorAll(".seam")),t.length===0)return null;let e=1/0,i=1/0,s=-1/0,a=-1/0;const l=document.createElementNS("http://www.w3.org/2000/svg","svg");return l.style.position="absolute",l.style.visibility="hidden",l.style.width="0",l.style.height="0",document.body.appendChild(l),t.forEach(h=>{const f=h.cloneNode(!0);l.appendChild(f);const d=f.getBBox();e=Math.min(e,d.x),i=Math.min(i,d.y),s=Math.max(s,d.x+d.width),a=Math.max(a,d.y+d.height),l.removeChild(f)}),document.body.removeChild(l),{x:e,y:i,width:s-e,height:a-i}}function Wf(n){const t=n.querySelectorAll("path.seam-allowance"),e=n.querySelectorAll("g"),i=[];return e.forEach((s,a)=>{if(s.parentElement.tagName==="g")return;const l=Uf(s);l&&l.width>0&&l.height>0&&i.push({index:a,element:s,className:s.getAttribute("class")||"",id:s.getAttribute("id")||"",boundingBox:l,width:l.width,height:l.height})}),t.length>0&&i.forEach(s=>{if(s.element.querySelectorAll("path.seam"),s.element.querySelectorAll("path.seam-allowance").length>0){const l=sf(s.element);l&&l.width>0&&l.height>0&&(s.width,s.height,{...s.boundingBox},s.boundingBox=l,s.width=l.width,s.height=l.height)}}),i}function Ol(n,t){const e=Wf(n),i=[];if(e.length===0)return{pages:[],unplacedUnits:[]};const s=[...e].sort((h,f)=>{const d=h.width*h.height;return f.width*f.height-d}),a=new Set;for(let h=0;h<e.length;h++)for(let f=h+1;f<e.length;f++){const d=e[h],y=e[f],w={x:d.boundingBox.x,y:d.boundingBox.y,width:d.width,height:d.height},P={x:y.boundingBox.x,y:y.boundingBox.y,width:y.width,height:y.height};dh(w,P)&&(a.add(`${d.index}-${y.index}`),d.originallyOverlapping=!0,y.originallyOverlapping=!0)}const l=[];for(const h of s){let f=!1;for(const d of i)if(wu(h,d,t,a)){f=!0;break}if(!f){const d=Hf(i.length,t);wu(h,d,t,a)?(i.push(d),f=!0):l.push(h)}}return{pages:i,unplacedUnits:l,totalUnits:e.length,placedUnits:e.length-l.length}}function Hf(n,t){return{index:n,units:[],occupiedAreas:[],width:t.printableWidth,height:t.printableHeight}}function wu(n,t,e,i){if(n.originallyOverlapping&&i)for(const f of t.units){const d=`${n.index}-${f.index}`,y=`${f.index}-${n.index}`;if(i.has(d)||i.has(y))return!1}const s=n.element.querySelector("path.seam-allowance")!==null,a=e.seamAllowance||0,l=s?a*2+2:2;if(n.width>t.width||n.height>t.height)return!1;const h=Vf(n,t,l);return h?(t.units.push({...n,x:h.x,y:h.y}),t.occupiedAreas.push({x:h.x,y:h.y,width:n.width+l,height:n.height+l}),!0):!1}function Vf(n,t,e){const i=n.width+e,s=n.height+e,a=10,l=10;for(let h=0;h<=t.height-s;h+=l)for(let f=0;f<=t.width-i;f+=a)if(xu(f,h,i,s,t.occupiedAreas))return{x:f,y:h};for(let h=0;h<=t.height-s;h+=1)for(let f=0;f<=t.width-i;f+=1)if(xu(f,h,i,s,t.occupiedAreas))return{x:f,y:h};return null}function xu(n,t,e,i,s){const a={x:n,y:t,width:e,height:i};for(const l of s)if(dh(a,l))return!1;return!0}function dh(n,t){return!(n.x+n.width<=t.x||t.x+t.width<=n.x||n.y+n.height<=t.y||t.y+t.height<=n.y)}function mh(n,t,e){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");n.viewBox.baseVal,i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("viewBox",`0 0 ${e.printableWidth} ${e.printableHeight}`),i.setAttribute("width",`${e.printableWidth}mm`),i.setAttribute("height",`${e.printableHeight}mm`);const s=n.querySelector("defs");s&&i.appendChild(s.cloneNode(!0));for(const a of t.units){const l=a.element.cloneNode(!0),h=l.getAttribute("transform")||"",f=`translate(${a.x-a.boundingBox.x}, ${a.y-a.boundingBox.y}) ${h}`;l.setAttribute("transform",f.trim()),i.appendChild(l)}return i}var xd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vo(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jo={exports:{}},Pu;function Gf(){return Pu||(Pu=1,function(n){(function(){var t={};t.version="6.4.2.2",t.use_lines=!0,t.use_xyz=!1;var e=!1;n.exports?(n.exports=t,e=!0):typeof document<"u"?window.ClipperLib=t:self.ClipperLib=t;var i;if(e){var s="chrome";i="Netscape"}else{var s=navigator.userAgent.toString().toLowerCase();i=navigator.appName}var a={};s.indexOf("chrome")!=-1&&s.indexOf("chromium")==-1?a.chrome=1:a.chrome=0,s.indexOf("chromium")!=-1?a.chromium=1:a.chromium=0,s.indexOf("safari")!=-1&&s.indexOf("chrome")==-1&&s.indexOf("chromium")==-1?a.safari=1:a.safari=0,s.indexOf("firefox")!=-1?a.firefox=1:a.firefox=0,s.indexOf("firefox/17")!=-1?a.firefox17=1:a.firefox17=0,s.indexOf("firefox/15")!=-1?a.firefox15=1:a.firefox15=0,s.indexOf("firefox/3")!=-1?a.firefox3=1:a.firefox3=0,s.indexOf("opera")!=-1?a.opera=1:a.opera=0,s.indexOf("msie 10")!=-1?a.msie10=1:a.msie10=0,s.indexOf("msie 9")!=-1?a.msie9=1:a.msie9=0,s.indexOf("msie 8")!=-1?a.msie8=1:a.msie8=0,s.indexOf("msie 7")!=-1?a.msie7=1:a.msie7=0,s.indexOf("msie ")!=-1?a.msie=1:a.msie=0,t.biginteger_used=null;var l;function h(r,o,c){t.biginteger_used=1,r!=null&&(typeof r=="number"&&typeof o>"u"?this.fromInt(r):typeof r=="number"?this.fromNumber(r,o,c):o==null&&typeof r!="string"?this.fromString(r,256):this.fromString(r,o))}function f(){return new h(null,void 0,void 0)}function d(r,o,c,m,x,_){for(;--_>=0;){var B=o*this[r++]+c[m]+x;x=Math.floor(B/67108864),c[m++]=B&67108863}return x}function y(r,o,c,m,x,_){for(var B=o&32767,H=o>>15;--_>=0;){var V=this[r]&32767,ct=this[r++]>>15,Tt=H*V+ct*B;V=B*V+((Tt&32767)<<15)+c[m]+(x&1073741823),x=(V>>>30)+(Tt>>>15)+H*ct+(x>>>30),c[m++]=V&1073741823}return x}function w(r,o,c,m,x,_){for(var B=o&16383,H=o>>14;--_>=0;){var V=this[r]&16383,ct=this[r++]>>14,Tt=H*V+ct*B;V=B*V+((Tt&16383)<<14)+c[m]+x,x=(V>>28)+(Tt>>14)+H*ct,c[m++]=V&268435455}return x}i=="Microsoft Internet Explorer"?(h.prototype.am=y,l=30):i!="Netscape"?(h.prototype.am=d,l=26):(h.prototype.am=w,l=28),h.prototype.DB=l,h.prototype.DM=(1<<l)-1,h.prototype.DV=1<<l;var P=52;h.prototype.FV=Math.pow(2,P),h.prototype.F1=P-l,h.prototype.F2=2*l-P;var g="0123456789abcdefghijklmnopqrstuvwxyz",N=new Array,A,T;for(A=48,T=0;T<=9;++T)N[A++]=T;for(A=97,T=10;T<36;++T)N[A++]=T;for(A=65,T=10;T<36;++T)N[A++]=T;function L(r){return g.charAt(r)}function F(r,o){var c=N[r.charCodeAt(o)];return c??-1}function Y(r){for(var o=this.t-1;o>=0;--o)r[o]=this[o];r.t=this.t,r.s=this.s}function it(r){this.t=1,this.s=r<0?-1:0,r>0?this[0]=r:r<-1?this[0]=r+this.DV:this.t=0}function $(r){var o=f();return o.fromInt(r),o}function vt(r,o){var c;if(o==16)c=4;else if(o==8)c=3;else if(o==256)c=8;else if(o==2)c=1;else if(o==32)c=5;else if(o==4)c=2;else{this.fromRadix(r,o);return}this.t=0,this.s=0;for(var m=r.length,x=!1,_=0;--m>=0;){var B=c==8?r[m]&255:F(r,m);if(B<0){r.charAt(m)=="-"&&(x=!0);continue}x=!1,_==0?this[this.t++]=B:_+c>this.DB?(this[this.t-1]|=(B&(1<<this.DB-_)-1)<<_,this[this.t++]=B>>this.DB-_):this[this.t-1]|=B<<_,_+=c,_>=this.DB&&(_-=this.DB)}c==8&&(r[0]&128)!=0&&(this.s=-1,_>0&&(this[this.t-1]|=(1<<this.DB-_)-1<<_)),this.clamp(),x&&h.ZERO.subTo(this,this)}function ot(){for(var r=this.s&this.DM;this.t>0&&this[this.t-1]==r;)--this.t}function J(r){if(this.s<0)return"-"+this.negate().toString(r);var o;if(r==16)o=4;else if(r==8)o=3;else if(r==2)o=1;else if(r==32)o=5;else if(r==4)o=2;else return this.toRadix(r);var c=(1<<o)-1,m,x=!1,_="",B=this.t,H=this.DB-B*this.DB%o;if(B-- >0)for(H<this.DB&&(m=this[B]>>H)>0&&(x=!0,_=L(m));B>=0;)H<o?(m=(this[B]&(1<<H)-1)<<o-H,m|=this[--B]>>(H+=this.DB-o)):(m=this[B]>>(H-=o)&c,H<=0&&(H+=this.DB,--B)),m>0&&(x=!0),x&&(_+=L(m));return x?_:"0"}function lt(){var r=f();return h.ZERO.subTo(this,r),r}function yt(){return this.s<0?this.negate():this}function q(r){var o=this.s-r.s;if(o!=0)return o;var c=this.t;if(o=c-r.t,o!=0)return this.s<0?-o:o;for(;--c>=0;)if((o=this[c]-r[c])!=0)return o;return 0}function R(r){var o=1,c;return(c=r>>>16)!=0&&(r=c,o+=16),(c=r>>8)!=0&&(r=c,o+=8),(c=r>>4)!=0&&(r=c,o+=4),(c=r>>2)!=0&&(r=c,o+=2),(c=r>>1)!=0&&(r=c,o+=1),o}function Z(){return this.t<=0?0:this.DB*(this.t-1)+R(this[this.t-1]^this.s&this.DM)}function G(r,o){var c;for(c=this.t-1;c>=0;--c)o[c+r]=this[c];for(c=r-1;c>=0;--c)o[c]=0;o.t=this.t+r,o.s=this.s}function bt(r,o){for(var c=r;c<this.t;++c)o[c-r]=this[c];o.t=Math.max(this.t-r,0),o.s=this.s}function gt(r,o){var c=r%this.DB,m=this.DB-c,x=(1<<m)-1,_=Math.floor(r/this.DB),B=this.s<<c&this.DM,H;for(H=this.t-1;H>=0;--H)o[H+_+1]=this[H]>>m|B,B=(this[H]&x)<<c;for(H=_-1;H>=0;--H)o[H]=0;o[_]=B,o.t=this.t+_+1,o.s=this.s,o.clamp()}function St(r,o){o.s=this.s;var c=Math.floor(r/this.DB);if(c>=this.t){o.t=0;return}var m=r%this.DB,x=this.DB-m,_=(1<<m)-1;o[0]=this[c]>>m;for(var B=c+1;B<this.t;++B)o[B-c-1]|=(this[B]&_)<<x,o[B-c]=this[B]>>m;m>0&&(o[this.t-c-1]|=(this.s&_)<<x),o.t=this.t-c,o.clamp()}function ut(r,o){for(var c=0,m=0,x=Math.min(r.t,this.t);c<x;)m+=this[c]-r[c],o[c++]=m&this.DM,m>>=this.DB;if(r.t<this.t){for(m-=r.s;c<this.t;)m+=this[c],o[c++]=m&this.DM,m>>=this.DB;m+=this.s}else{for(m+=this.s;c<r.t;)m-=r[c],o[c++]=m&this.DM,m>>=this.DB;m-=r.s}o.s=m<0?-1:0,m<-1?o[c++]=this.DV+m:m>0&&(o[c++]=m),o.t=c,o.clamp()}function wt(r,o){var c=this.abs(),m=r.abs(),x=c.t;for(o.t=x+m.t;--x>=0;)o[x]=0;for(x=0;x<m.t;++x)o[x+c.t]=c.am(0,m[x],o,x,0,c.t);o.s=0,o.clamp(),this.s!=r.s&&h.ZERO.subTo(o,o)}function Pt(r){for(var o=this.abs(),c=r.t=2*o.t;--c>=0;)r[c]=0;for(c=0;c<o.t-1;++c){var m=o.am(c,o[c],r,2*c,0,1);(r[c+o.t]+=o.am(c+1,2*o[c],r,2*c+1,m,o.t-c-1))>=o.DV&&(r[c+o.t]-=o.DV,r[c+o.t+1]=1)}r.t>0&&(r[r.t-1]+=o.am(c,o[c],r,2*c,0,1)),r.s=0,r.clamp()}function Yt(r,o,c){var m=r.abs();if(!(m.t<=0)){var x=this.abs();if(x.t<m.t){o?.fromInt(0),c!=null&&this.copyTo(c);return}c==null&&(c=f());var _=f(),B=this.s,H=r.s,V=this.DB-R(m[m.t-1]);V>0?(m.lShiftTo(V,_),x.lShiftTo(V,c)):(m.copyTo(_),x.copyTo(c));var ct=_.t,Tt=_[ct-1];if(Tt!=0){var Nt=Tt*(1<<this.F1)+(ct>1?_[ct-2]>>this.F2:0),Dt=this.FV/Nt,Kt=(1<<this.F1)/Nt,fe=1<<this.F2,ye=c.t,ce=ye-ct,gr=o??f();for(_.dlShiftTo(ce,gr),c.compareTo(gr)>=0&&(c[c.t++]=1,c.subTo(gr,c)),h.ONE.dlShiftTo(ct,gr),gr.subTo(_,_);_.t<ct;)_[_.t++]=0;for(;--ce>=0;){var Mr=c[--ye]==Tt?this.DM:Math.floor(c[ye]*Dt+(c[ye-1]+fe)*Kt);if((c[ye]+=_.am(0,Mr,c,ce,0,ct))<Mr)for(_.dlShiftTo(ce,gr),c.subTo(gr,c);c[ye]<--Mr;)c.subTo(gr,c)}o!=null&&(c.drShiftTo(ct,o),B!=H&&h.ZERO.subTo(o,o)),c.t=ct,c.clamp(),V>0&&c.rShiftTo(V,c),B<0&&h.ZERO.subTo(c,c)}}}function M(r){var o=f();return this.abs().divRemTo(r,null,o),this.s<0&&o.compareTo(h.ZERO)>0&&r.subTo(o,o),o}function X(r){this.m=r}function U(r){return r.s<0||r.compareTo(this.m)>=0?r.mod(this.m):r}function Q(r){return r}function nt(r){r.divRemTo(this.m,null,r)}function pt(r,o,c){r.multiplyTo(o,c),this.reduce(c)}function dt(r,o){r.squareTo(o),this.reduce(o)}X.prototype.convert=U,X.prototype.revert=Q,X.prototype.reduce=nt,X.prototype.mulTo=pt,X.prototype.sqrTo=dt;function mt(){if(this.t<1)return 0;var r=this[0];if((r&1)==0)return 0;var o=r&3;return o=o*(2-(r&15)*o)&15,o=o*(2-(r&255)*o)&255,o=o*(2-((r&65535)*o&65535))&65535,o=o*(2-r*o%this.DV)%this.DV,o>0?this.DV-o:-o}function Et(r){this.m=r,this.mp=r.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<r.DB-15)-1,this.mt2=2*r.t}function Bt(r){var o=f();return r.abs().dlShiftTo(this.m.t,o),o.divRemTo(this.m,null,o),r.s<0&&o.compareTo(h.ZERO)>0&&this.m.subTo(o,o),o}function zt(r){var o=f();return r.copyTo(o),this.reduce(o),o}function jt(r){for(;r.t<=this.mt2;)r[r.t++]=0;for(var o=0;o<this.m.t;++o){var c=r[o]&32767,m=c*this.mpl+((c*this.mph+(r[o]>>15)*this.mpl&this.um)<<15)&r.DM;for(c=o+this.m.t,r[c]+=this.m.am(0,m,r,o,0,this.m.t);r[c]>=r.DV;)r[c]-=r.DV,r[++c]++}r.clamp(),r.drShiftTo(this.m.t,r),r.compareTo(this.m)>=0&&r.subTo(this.m,r)}function se(r,o){r.squareTo(o),this.reduce(o)}function Lt(r,o,c){r.multiplyTo(o,c),this.reduce(c)}Et.prototype.convert=Bt,Et.prototype.revert=zt,Et.prototype.reduce=jt,Et.prototype.mulTo=Lt,Et.prototype.sqrTo=se;function W(){return(this.t>0?this[0]&1:this.s)==0}function he(r,o){if(r>4294967295||r<1)return h.ONE;var c=f(),m=f(),x=o.convert(this),_=R(r)-1;for(x.copyTo(c);--_>=0;)if(o.sqrTo(c,m),(r&1<<_)>0)o.mulTo(m,x,c);else{var B=c;c=m,m=B}return o.revert(c)}function Jt(r,o){var c;return r<256||o.isEven()?c=new X(o):c=new Et(o),this.exp(r,c)}h.prototype.copyTo=Y,h.prototype.fromInt=it,h.prototype.fromString=vt,h.prototype.clamp=ot,h.prototype.dlShiftTo=G,h.prototype.drShiftTo=bt,h.prototype.lShiftTo=gt,h.prototype.rShiftTo=St,h.prototype.subTo=ut,h.prototype.multiplyTo=wt,h.prototype.squareTo=Pt,h.prototype.divRemTo=Yt,h.prototype.invDigit=mt,h.prototype.isEven=W,h.prototype.exp=he,h.prototype.toString=J,h.prototype.negate=lt,h.prototype.abs=yt,h.prototype.compareTo=q,h.prototype.bitLength=Z,h.prototype.mod=M,h.prototype.modPowInt=Jt,h.ZERO=$(0),h.ONE=$(1);function Mt(){var r=f();return this.copyTo(r),r}function qt(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Wt(){return this.t==0?this.s:this[0]<<24>>24}function Xt(){return this.t==0?this.s:this[0]<<16>>16}function Zt(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}function le(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function me(r){if(r==null&&(r=10),this.signum()==0||r<2||r>36)return"0";var o=this.chunkSize(r),c=Math.pow(r,o),m=$(c),x=f(),_=f(),B="";for(this.divRemTo(m,x,_);x.signum()>0;)B=(c+_.intValue()).toString(r).substr(1)+B,x.divRemTo(m,x,_);return _.intValue().toString(r)+B}function we(r,o){this.fromInt(0),o==null&&(o=10);for(var c=this.chunkSize(o),m=Math.pow(o,c),x=!1,_=0,B=0,H=0;H<r.length;++H){var V=F(r,H);if(V<0){r.charAt(H)=="-"&&this.signum()==0&&(x=!0);continue}B=o*B+V,++_>=c&&(this.dMultiply(m),this.dAddOffset(B,0),_=0,B=0)}_>0&&(this.dMultiply(Math.pow(o,_)),this.dAddOffset(B,0)),x&&h.ZERO.subTo(this,this)}function Se(r,o,c){if(typeof o=="number")if(r<2)this.fromInt(1);else for(this.fromNumber(r,c),this.testBit(r-1)||this.bitwiseTo(h.ONE.shiftLeft(r-1),Ie,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(o);)this.dAddOffset(2,0),this.bitLength()>r&&this.subTo(h.ONE.shiftLeft(r-1),this);else{var m=new Array,x=r&7;m.length=(r>>3)+1,o.nextBytes(m),x>0?m[0]&=(1<<x)-1:m[0]=0,this.fromString(m,256)}}function Fe(){var r=this.t,o=new Array;o[0]=this.s;var c=this.DB-r*this.DB%8,m,x=0;if(r-- >0)for(c<this.DB&&(m=this[r]>>c)!=(this.s&this.DM)>>c&&(o[x++]=m|this.s<<this.DB-c);r>=0;)c<8?(m=(this[r]&(1<<c)-1)<<8-c,m|=this[--r]>>(c+=this.DB-8)):(m=this[r]>>(c-=8)&255,c<=0&&(c+=this.DB,--r)),(m&128)!=0&&(m|=-256),x==0&&(this.s&128)!=(m&128)&&++x,(x>0||m!=this.s)&&(o[x++]=m);return o}function ae(r){return this.compareTo(r)==0}function xe(r){return this.compareTo(r)<0?this:r}function Ht(r){return this.compareTo(r)>0?this:r}function dr(r,o,c){var m,x,_=Math.min(r.t,this.t);for(m=0;m<_;++m)c[m]=o(this[m],r[m]);if(r.t<this.t){for(x=r.s&this.DM,m=_;m<this.t;++m)c[m]=o(this[m],x);c.t=this.t}else{for(x=this.s&this.DM,m=_;m<r.t;++m)c[m]=o(x,r[m]);c.t=r.t}c.s=o(this.s,r.s),c.clamp()}function Ae(r,o){return r&o}function zr(r){var o=f();return this.bitwiseTo(r,Ae,o),o}function Ie(r,o){return r|o}function Ye(r){var o=f();return this.bitwiseTo(r,Ie,o),o}function Ur(r,o){return r^o}function _e(r){var o=f();return this.bitwiseTo(r,Ur,o),o}function Ci(r,o){return r&~o}function He(r){var o=f();return this.bitwiseTo(r,Ci,o),o}function Wr(){for(var r=f(),o=0;o<this.t;++o)r[o]=this.DM&~this[o];return r.t=this.t,r.s=~this.s,r}function mi(r){var o=f();return r<0?this.rShiftTo(-r,o):this.lShiftTo(r,o),o}function Ve(r){var o=f();return r<0?this.lShiftTo(-r,o):this.rShiftTo(r,o),o}function ue(r){if(r==0)return-1;var o=0;return(r&65535)==0&&(r>>=16,o+=16),(r&255)==0&&(r>>=8,o+=8),(r&15)==0&&(r>>=4,o+=4),(r&3)==0&&(r>>=2,o+=2),(r&1)==0&&++o,o}function Ce(){for(var r=0;r<this.t;++r)if(this[r]!=0)return r*this.DB+ue(this[r]);return this.s<0?this.t*this.DB:-1}function Di(r){for(var o=0;r!=0;)r&=r-1,++o;return o}function hr(){for(var r=0,o=this.s&this.DM,c=0;c<this.t;++c)r+=Di(this[c]^o);return r}function ii(r){var o=Math.floor(r/this.DB);return o>=this.t?this.s!=0:(this[o]&1<<r%this.DB)!=0}function ni(r,o){var c=h.ONE.shiftLeft(r);return this.bitwiseTo(c,o,c),c}function ee(r){return this.changeBit(r,Ie)}function Hr(r){return this.changeBit(r,Ci)}function si(r){return this.changeBit(r,Ur)}function Nr(r,o){for(var c=0,m=0,x=Math.min(r.t,this.t);c<x;)m+=this[c]+r[c],o[c++]=m&this.DM,m>>=this.DB;if(r.t<this.t){for(m+=r.s;c<this.t;)m+=this[c],o[c++]=m&this.DM,m>>=this.DB;m+=this.s}else{for(m+=this.s;c<r.t;)m+=r[c],o[c++]=m&this.DM,m>>=this.DB;m+=r.s}o.s=m<0?-1:0,m>0?o[c++]=m:m<-1&&(o[c++]=this.DV+m),o.t=c,o.clamp()}function er(r){var o=f();return this.addTo(r,o),o}function Je(r){var o=f();return this.subTo(r,o),o}function Er(r){var o=f();return this.multiplyTo(r,o),o}function Ki(){var r=f();return this.squareTo(r),r}function gi(r){var o=f();return this.divRemTo(r,o,null),o}function Vr(r){var o=f();return this.divRemTo(r,null,o),o}function Gr(r){var o=f(),c=f();return this.divRemTo(r,o,c),new Array(o,c)}function $r(r){this[this.t]=this.am(0,r-1,this,0,0,this.t),++this.t,this.clamp()}function ai(r,o){if(r!=0){for(;this.t<=o;)this[this.t++]=0;for(this[o]+=r;this[o]>=this.DV;)this[o]-=this.DV,++o>=this.t&&(this[this.t++]=0),++this[o]}}function mr(){}function Jr(r){return r}function qi(r,o,c){r.multiplyTo(o,c)}function Qi(r,o){r.squareTo(o)}mr.prototype.convert=Jr,mr.prototype.revert=Jr,mr.prototype.mulTo=qi,mr.prototype.sqrTo=Qi;function tn(r){return this.exp(r,new mr)}function en(r,o,c){var m=Math.min(this.t+r.t,o);for(c.s=0,c.t=m;m>0;)c[--m]=0;var x;for(x=c.t-this.t;m<x;++m)c[m+this.t]=this.am(0,r[m],c,m,0,this.t);for(x=Math.min(r.t,o);m<x;++m)this.am(0,r[m],c,m,0,o-m);c.clamp()}function rn(r,o,c){--o;var m=c.t=this.t+r.t-o;for(c.s=0;--m>=0;)c[m]=0;for(m=Math.max(o-this.t,0);m<r.t;++m)c[this.t+m-o]=this.am(o-m,r[m],c,0,0,this.t+m-o);c.clamp(),c.drShiftTo(1,c)}function vi(r){this.r2=f(),this.q3=f(),h.ONE.dlShiftTo(2*r.t,this.r2),this.mu=this.r2.divide(r),this.m=r}function Fs(r){if(r.s<0||r.t>2*this.m.t)return r.mod(this.m);if(r.compareTo(this.m)<0)return r;var o=f();return r.copyTo(o),this.reduce(o),o}function ks(r){return r}function nn(r){for(r.drShiftTo(this.m.t-1,this.r2),r.t>this.m.t+1&&(r.t=this.m.t+1,r.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);r.compareTo(this.r2)<0;)r.dAddOffset(1,this.m.t+1);for(r.subTo(this.r2,r);r.compareTo(this.m)>=0;)r.subTo(this.m,r)}function Jn(r,o){r.squareTo(o),this.reduce(o)}function Es(r,o,c){r.multiplyTo(o,c),this.reduce(c)}vi.prototype.convert=Fs,vi.prototype.revert=ks,vi.prototype.reduce=nn,vi.prototype.mulTo=Es,vi.prototype.sqrTo=Jn;function Fn(r,o){var c=r.bitLength(),m,x=$(1),_;if(c<=0)return x;c<18?m=1:c<48?m=3:c<144?m=4:c<768?m=5:m=6,c<8?_=new X(o):o.isEven()?_=new vi(o):_=new Et(o);var B=new Array,H=3,V=m-1,ct=(1<<m)-1;if(B[1]=_.convert(this),m>1){var Tt=f();for(_.sqrTo(B[1],Tt);H<=ct;)B[H]=f(),_.mulTo(Tt,B[H-2],B[H]),H+=2}var Nt=r.t-1,Dt,Kt=!0,fe=f(),ye;for(c=R(r[Nt])-1;Nt>=0;){for(c>=V?Dt=r[Nt]>>c-V&ct:(Dt=(r[Nt]&(1<<c+1)-1)<<V-c,Nt>0&&(Dt|=r[Nt-1]>>this.DB+c-V)),H=m;(Dt&1)==0;)Dt>>=1,--H;if((c-=H)<0&&(c+=this.DB,--Nt),Kt)B[Dt].copyTo(x),Kt=!1;else{for(;H>1;)_.sqrTo(x,fe),_.sqrTo(fe,x),H-=2;H>0?_.sqrTo(x,fe):(ye=x,x=fe,fe=ye),_.mulTo(fe,B[Dt],x)}for(;Nt>=0&&(r[Nt]&1<<c)==0;)_.sqrTo(x,fe),ye=x,x=fe,fe=ye,--c<0&&(c=this.DB-1,--Nt)}return _.revert(x)}function Ms(r){var o=this.s<0?this.negate():this.clone(),c=r.s<0?r.negate():r.clone();if(o.compareTo(c)<0){var m=o;o=c,c=m}var x=o.getLowestSetBit(),_=c.getLowestSetBit();if(_<0)return o;for(x<_&&(_=x),_>0&&(o.rShiftTo(_,o),c.rShiftTo(_,c));o.signum()>0;)(x=o.getLowestSetBit())>0&&o.rShiftTo(x,o),(x=c.getLowestSetBit())>0&&c.rShiftTo(x,c),o.compareTo(c)>=0?(o.subTo(c,o),o.rShiftTo(1,o)):(c.subTo(o,c),c.rShiftTo(1,c));return _>0&&c.lShiftTo(_,c),c}function Zn(r){if(r<=0)return 0;var o=this.DV%r,c=this.s<0?r-1:0;if(this.t>0)if(o==0)c=this[0]%r;else for(var m=this.t-1;m>=0;--m)c=(o*c+this[m])%r;return c}function Os(r){var o=r.isEven();if(this.isEven()&&o||r.signum()==0)return h.ZERO;for(var c=r.clone(),m=this.clone(),x=$(1),_=$(0),B=$(0),H=$(1);c.signum()!=0;){for(;c.isEven();)c.rShiftTo(1,c),o?((!x.isEven()||!_.isEven())&&(x.addTo(this,x),_.subTo(r,_)),x.rShiftTo(1,x)):_.isEven()||_.subTo(r,_),_.rShiftTo(1,_);for(;m.isEven();)m.rShiftTo(1,m),o?((!B.isEven()||!H.isEven())&&(B.addTo(this,B),H.subTo(r,H)),B.rShiftTo(1,B)):H.isEven()||H.subTo(r,H),H.rShiftTo(1,H);c.compareTo(m)>=0?(c.subTo(m,c),o&&x.subTo(B,x),_.subTo(H,_)):(m.subTo(c,m),o&&B.subTo(x,B),H.subTo(_,H))}if(m.compareTo(h.ONE)!=0)return h.ZERO;if(H.compareTo(r)>=0)return H.subtract(r);if(H.signum()<0)H.addTo(r,H);else return H;return H.signum()<0?H.add(r):H}var Ze=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Bs=(1<<26)/Ze[Ze.length-1];function Ge(r){var o,c=this.abs();if(c.t==1&&c[0]<=Ze[Ze.length-1]){for(o=0;o<Ze.length;++o)if(c[0]==Ze[o])return!0;return!1}if(c.isEven())return!1;for(o=1;o<Ze.length;){for(var m=Ze[o],x=o+1;x<Ze.length&&m<Bs;)m*=Ze[x++];for(m=c.modInt(m);o<x;)if(m%Ze[o++]==0)return!1}return c.millerRabin(r)}function Kn(r){var o=this.subtract(h.ONE),c=o.getLowestSetBit();if(c<=0)return!1;var m=o.shiftRight(c);r=r+1>>1,r>Ze.length&&(r=Ze.length);for(var x=f(),_=0;_<r;++_){x.fromInt(Ze[Math.floor(Math.random()*Ze.length)]);var B=x.modPow(m,this);if(B.compareTo(h.ONE)!=0&&B.compareTo(o)!=0){for(var H=1;H++<c&&B.compareTo(o)!=0;)if(B=B.modPowInt(2,this),B.compareTo(h.ONE)==0)return!1;if(B.compareTo(o)!=0)return!1}}return!0}h.prototype.chunkSize=Zt,h.prototype.toRadix=me,h.prototype.fromRadix=we,h.prototype.fromNumber=Se,h.prototype.bitwiseTo=dr,h.prototype.changeBit=ni,h.prototype.addTo=Nr,h.prototype.dMultiply=$r,h.prototype.dAddOffset=ai,h.prototype.multiplyLowerTo=en,h.prototype.multiplyUpperTo=rn,h.prototype.modInt=Zn,h.prototype.millerRabin=Kn,h.prototype.clone=Mt,h.prototype.intValue=qt,h.prototype.byteValue=Wt,h.prototype.shortValue=Xt,h.prototype.signum=le,h.prototype.toByteArray=Fe,h.prototype.equals=ae,h.prototype.min=xe,h.prototype.max=Ht,h.prototype.and=zr,h.prototype.or=Ye,h.prototype.xor=_e,h.prototype.andNot=He,h.prototype.not=Wr,h.prototype.shiftLeft=mi,h.prototype.shiftRight=Ve,h.prototype.getLowestSetBit=Ce,h.prototype.bitCount=hr,h.prototype.testBit=ii,h.prototype.setBit=ee,h.prototype.clearBit=Hr,h.prototype.flipBit=si,h.prototype.add=er,h.prototype.subtract=Je,h.prototype.multiply=Er,h.prototype.divide=gi,h.prototype.remainder=Vr,h.prototype.divideAndRemainder=Gr,h.prototype.modPow=Fn,h.prototype.modInverse=Os,h.prototype.pow=tn,h.prototype.gcd=Ms,h.prototype.isProbablePrime=Ge,h.prototype.square=Ki;var ge=h;ge.prototype.IsNegative=function(){return this.compareTo(ge.ZERO)==-1},ge.op_Equality=function(r,o){return r.compareTo(o)==0},ge.op_Inequality=function(r,o){return r.compareTo(o)!=0},ge.op_GreaterThan=function(r,o){return r.compareTo(o)>0},ge.op_LessThan=function(r,o){return r.compareTo(o)<0},ge.op_Addition=function(r,o){return new ge(r,void 0,void 0).add(new ge(o,void 0,void 0))},ge.op_Subtraction=function(r,o){return new ge(r,void 0,void 0).subtract(new ge(o,void 0,void 0))},ge.Int128Mul=function(r,o){return new ge(r,void 0,void 0).multiply(new ge(o,void 0,void 0))},ge.op_Division=function(r,o){return r.divide(o)},ge.prototype.ToDouble=function(){return parseFloat(this.toString())};var kn=function(r,o){var c;if(typeof Object.getOwnPropertyNames>"u"){for(c in o.prototype)(typeof r.prototype[c]>"u"||r.prototype[c]===Object.prototype[c])&&(r.prototype[c]=o.prototype[c]);for(c in o)typeof r[c]>"u"&&(r[c]=o[c]);r.$baseCtor=o}else{for(var m=Object.getOwnPropertyNames(o.prototype),x=0;x<m.length;x++)typeof Object.getOwnPropertyDescriptor(r.prototype,m[x])>"u"&&Object.defineProperty(r.prototype,m[x],Object.getOwnPropertyDescriptor(o.prototype,m[x]));for(c in o)typeof r[c]>"u"&&(r[c]=o[c]);r.$baseCtor=o}};t.Path=function(){return[]},t.Path.prototype.push=Array.prototype.push,t.Paths=function(){return[]},t.Paths.prototype.push=Array.prototype.push,t.DoublePoint=function(){var r=arguments;this.X=0,this.Y=0,r.length===1?(this.X=r[0].X,this.Y=r[0].Y):r.length===2&&(this.X=r[0],this.Y=r[1])},t.DoublePoint0=function(){this.X=0,this.Y=0},t.DoublePoint0.prototype=t.DoublePoint.prototype,t.DoublePoint1=function(r){this.X=r.X,this.Y=r.Y},t.DoublePoint1.prototype=t.DoublePoint.prototype,t.DoublePoint2=function(r,o){this.X=r,this.Y=o},t.DoublePoint2.prototype=t.DoublePoint.prototype,t.PolyNode=function(){this.m_Parent=null,this.m_polygon=new t.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},t.PolyNode.prototype.IsHoleNode=function(){for(var r=!0,o=this.m_Parent;o!==null;)r=!r,o=o.m_Parent;return r},t.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},t.PolyNode.prototype.Contour=function(){return this.m_polygon},t.PolyNode.prototype.AddChild=function(r){var o=this.m_Childs.length;this.m_Childs.push(r),r.m_Parent=this,r.m_Index=o},t.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},t.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},t.PolyNode.prototype.Childs=function(){return this.m_Childs},t.PolyNode.prototype.Parent=function(){return this.m_Parent},t.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},t.PolyTree=function(){this.m_AllPolys=[],t.PolyNode.call(this)},t.PolyTree.prototype.Clear=function(){for(var r=0,o=this.m_AllPolys.length;r<o;r++)this.m_AllPolys[r]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},t.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},t.PolyTree.prototype.Total=function(){var r=this.m_AllPolys.length;return r>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&r--,r},kn(t.PolyTree,t.PolyNode),t.Math_Abs_Int64=t.Math_Abs_Int32=t.Math_Abs_Double=function(r){return Math.abs(r)},t.Math_Max_Int32_Int32=function(r,o){return Math.max(r,o)},a.msie||a.opera||a.safari?t.Cast_Int32=function(r){return r|0}:t.Cast_Int32=function(r){return~~r},typeof Number.toInteger>"u"&&(Number.toInteger=null),a.chrome?t.Cast_Int64=function(r){return r<-2147483648||r>2147483647?r<0?Math.ceil(r):Math.floor(r):~~r}:a.firefox&&typeof Number.toInteger=="function"?t.Cast_Int64=function(r){return Number.toInteger(r)}:a.msie7||a.msie8?t.Cast_Int64=function(r){return parseInt(r,10)}:a.msie?t.Cast_Int64=function(r){return r<-2147483648||r>2147483647?r<0?Math.ceil(r):Math.floor(r):r|0}:t.Cast_Int64=function(r){return r<0?Math.ceil(r):Math.floor(r)},t.Clear=function(r){r.length=0},t.PI=3.141592653589793,t.PI2=2*3.141592653589793,t.IntPoint=function(){var r=arguments,o=r.length;if(this.X=0,this.Y=0,t.use_xyz)if(this.Z=0,o===3)this.X=r[0],this.Y=r[1],this.Z=r[2];else if(o===2)this.X=r[0],this.Y=r[1],this.Z=0;else if(o===1)if(r[0]instanceof t.DoublePoint){var c=r[0];this.X=t.Clipper.Round(c.X),this.Y=t.Clipper.Round(c.Y),this.Z=0}else{var m=r[0];typeof m.Z>"u"&&(m.Z=0),this.X=m.X,this.Y=m.Y,this.Z=m.Z}else this.X=0,this.Y=0,this.Z=0;else if(o===2)this.X=r[0],this.Y=r[1];else if(o===1)if(r[0]instanceof t.DoublePoint){var c=r[0];this.X=t.Clipper.Round(c.X),this.Y=t.Clipper.Round(c.Y)}else{var m=r[0];this.X=m.X,this.Y=m.Y}else this.X=0,this.Y=0},t.IntPoint.op_Equality=function(r,o){return r.X===o.X&&r.Y===o.Y},t.IntPoint.op_Inequality=function(r,o){return r.X!==o.X||r.Y!==o.Y},t.IntPoint0=function(){this.X=0,this.Y=0,t.use_xyz&&(this.Z=0)},t.IntPoint0.prototype=t.IntPoint.prototype,t.IntPoint1=function(r){this.X=r.X,this.Y=r.Y,t.use_xyz&&(typeof r.Z>"u"?this.Z=0:this.Z=r.Z)},t.IntPoint1.prototype=t.IntPoint.prototype,t.IntPoint1dp=function(r){this.X=t.Clipper.Round(r.X),this.Y=t.Clipper.Round(r.Y),t.use_xyz&&(this.Z=0)},t.IntPoint1dp.prototype=t.IntPoint.prototype,t.IntPoint2=function(r,o,c){this.X=r,this.Y=o,t.use_xyz&&(typeof c>"u"?this.Z=0:this.Z=c)},t.IntPoint2.prototype=t.IntPoint.prototype,t.IntRect=function(){var r=arguments,o=r.length;if(o===4)this.left=r[0],this.top=r[1],this.right=r[2],this.bottom=r[3];else if(o===1){var c=r[0];this.left=c.left,this.top=c.top,this.right=c.right,this.bottom=c.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},t.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},t.IntRect0.prototype=t.IntRect.prototype,t.IntRect1=function(r){this.left=r.left,this.top=r.top,this.right=r.right,this.bottom=r.bottom},t.IntRect1.prototype=t.IntRect.prototype,t.IntRect4=function(r,o,c,m){this.left=r,this.top=o,this.right=c,this.bottom=m},t.IntRect4.prototype=t.IntRect.prototype,t.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},t.PolyType={ptSubject:0,ptClip:1},t.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},t.JoinType={jtSquare:0,jtRound:1,jtMiter:2},t.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},t.EdgeSide={esLeft:0,esRight:1},t.Direction={dRightToLeft:0,dLeftToRight:1},t.TEdge=function(){this.Bot=new t.IntPoint0,this.Curr=new t.IntPoint0,this.Top=new t.IntPoint0,this.Delta=new t.IntPoint0,this.Dx=0,this.PolyTyp=t.PolyType.ptSubject,this.Side=t.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},t.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new t.IntPoint0},t.MyIntersectNodeSort=function(){},t.MyIntersectNodeSort.Compare=function(r,o){var c=o.Pt.Y-r.Pt.Y;return c>0?1:c<0?-1:0},t.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},t.Scanbeam=function(){this.Y=0,this.Next=null},t.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},t.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},t.OutPt=function(){this.Idx=0,this.Pt=new t.IntPoint0,this.Next=null,this.Prev=null},t.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new t.IntPoint0},t.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},t.ClipperBase.horizontal=-9007199254740992,t.ClipperBase.Skip=-2,t.ClipperBase.Unassigned=-1,t.ClipperBase.tolerance=1e-20,t.ClipperBase.loRange=47453132,t.ClipperBase.hiRange=0xfffffffffffff,t.ClipperBase.near_zero=function(r){return r>-t.ClipperBase.tolerance&&r<t.ClipperBase.tolerance},t.ClipperBase.IsHorizontal=function(r){return r.Delta.Y===0},t.ClipperBase.prototype.PointIsVertex=function(r,o){var c=o;do{if(t.IntPoint.op_Equality(c.Pt,r))return!0;c=c.Next}while(c!==o);return!1},t.ClipperBase.prototype.PointOnLineSegment=function(r,o,c,m){return m?r.X===o.X&&r.Y===o.Y||r.X===c.X&&r.Y===c.Y||r.X>o.X==r.X<c.X&&r.Y>o.Y==r.Y<c.Y&&ge.op_Equality(ge.Int128Mul(r.X-o.X,c.Y-o.Y),ge.Int128Mul(c.X-o.X,r.Y-o.Y)):r.X===o.X&&r.Y===o.Y||r.X===c.X&&r.Y===c.Y||r.X>o.X==r.X<c.X&&r.Y>o.Y==r.Y<c.Y&&(r.X-o.X)*(c.Y-o.Y)===(c.X-o.X)*(r.Y-o.Y)},t.ClipperBase.prototype.PointOnPolygon=function(r,o,c){for(var m=o;;){if(this.PointOnLineSegment(r,m.Pt,m.Next.Pt,c))return!0;if(m=m.Next,m===o)break}return!1},t.ClipperBase.prototype.SlopesEqual=t.ClipperBase.SlopesEqual=function(){var r=arguments,o=r.length,c,m,x,_,B,H,V;return o===3?(c=r[0],m=r[1],V=r[2],V?ge.op_Equality(ge.Int128Mul(c.Delta.Y,m.Delta.X),ge.Int128Mul(c.Delta.X,m.Delta.Y)):t.Cast_Int64(c.Delta.Y*m.Delta.X)===t.Cast_Int64(c.Delta.X*m.Delta.Y)):o===4?(x=r[0],_=r[1],B=r[2],V=r[3],V?ge.op_Equality(ge.Int128Mul(x.Y-_.Y,_.X-B.X),ge.Int128Mul(x.X-_.X,_.Y-B.Y)):t.Cast_Int64((x.Y-_.Y)*(_.X-B.X))-t.Cast_Int64((x.X-_.X)*(_.Y-B.Y))===0):(x=r[0],_=r[1],B=r[2],H=r[3],V=r[4],V?ge.op_Equality(ge.Int128Mul(x.Y-_.Y,B.X-H.X),ge.Int128Mul(x.X-_.X,B.Y-H.Y)):t.Cast_Int64((x.Y-_.Y)*(B.X-H.X))-t.Cast_Int64((x.X-_.X)*(B.Y-H.Y))===0)},t.ClipperBase.SlopesEqual3=function(r,o,c){return c?ge.op_Equality(ge.Int128Mul(r.Delta.Y,o.Delta.X),ge.Int128Mul(r.Delta.X,o.Delta.Y)):t.Cast_Int64(r.Delta.Y*o.Delta.X)===t.Cast_Int64(r.Delta.X*o.Delta.Y)},t.ClipperBase.SlopesEqual4=function(r,o,c,m){return m?ge.op_Equality(ge.Int128Mul(r.Y-o.Y,o.X-c.X),ge.Int128Mul(r.X-o.X,o.Y-c.Y)):t.Cast_Int64((r.Y-o.Y)*(o.X-c.X))-t.Cast_Int64((r.X-o.X)*(o.Y-c.Y))===0},t.ClipperBase.SlopesEqual5=function(r,o,c,m,x){return x?ge.op_Equality(ge.Int128Mul(r.Y-o.Y,c.X-m.X),ge.Int128Mul(r.X-o.X,c.Y-m.Y)):t.Cast_Int64((r.Y-o.Y)*(c.X-m.X))-t.Cast_Int64((r.X-o.X)*(c.Y-m.Y))===0},t.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var r=0,o=this.m_edges.length;r<o;++r){for(var c=0,m=this.m_edges[r].length;c<m;++c)this.m_edges[r][c]=null;t.Clear(this.m_edges[r])}t.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},t.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var r=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=r}this.m_CurrentLM=null},t.ClipperBase.prototype.RangeTest=function(r,o){o.Value?(r.X>t.ClipperBase.hiRange||r.Y>t.ClipperBase.hiRange||-r.X>t.ClipperBase.hiRange||-r.Y>t.ClipperBase.hiRange)&&t.Error("Coordinate outside allowed range in RangeTest()."):(r.X>t.ClipperBase.loRange||r.Y>t.ClipperBase.loRange||-r.X>t.ClipperBase.loRange||-r.Y>t.ClipperBase.loRange)&&(o.Value=!0,this.RangeTest(r,o))},t.ClipperBase.prototype.InitEdge=function(r,o,c,m){r.Next=o,r.Prev=c,r.Curr.X=m.X,r.Curr.Y=m.Y,t.use_xyz&&(r.Curr.Z=m.Z),r.OutIdx=-1},t.ClipperBase.prototype.InitEdge2=function(r,o){r.Curr.Y>=r.Next.Curr.Y?(r.Bot.X=r.Curr.X,r.Bot.Y=r.Curr.Y,t.use_xyz&&(r.Bot.Z=r.Curr.Z),r.Top.X=r.Next.Curr.X,r.Top.Y=r.Next.Curr.Y,t.use_xyz&&(r.Top.Z=r.Next.Curr.Z)):(r.Top.X=r.Curr.X,r.Top.Y=r.Curr.Y,t.use_xyz&&(r.Top.Z=r.Curr.Z),r.Bot.X=r.Next.Curr.X,r.Bot.Y=r.Next.Curr.Y,t.use_xyz&&(r.Bot.Z=r.Next.Curr.Z)),this.SetDx(r),r.PolyTyp=o},t.ClipperBase.prototype.FindNextLocMin=function(r){for(var o;;){for(;t.IntPoint.op_Inequality(r.Bot,r.Prev.Bot)||t.IntPoint.op_Equality(r.Curr,r.Top);)r=r.Next;if(r.Dx!==t.ClipperBase.horizontal&&r.Prev.Dx!==t.ClipperBase.horizontal)break;for(;r.Prev.Dx===t.ClipperBase.horizontal;)r=r.Prev;for(o=r;r.Dx===t.ClipperBase.horizontal;)r=r.Next;if(r.Top.Y!==r.Prev.Bot.Y){o.Prev.Bot.X<r.Bot.X&&(r=o);break}}return r},t.ClipperBase.prototype.ProcessBound=function(r,o){var c,m=r,x;if(m.OutIdx===t.ClipperBase.Skip){if(r=m,o){for(;r.Top.Y===r.Next.Bot.Y;)r=r.Next;for(;r!==m&&r.Dx===t.ClipperBase.horizontal;)r=r.Prev}else{for(;r.Top.Y===r.Prev.Bot.Y;)r=r.Prev;for(;r!==m&&r.Dx===t.ClipperBase.horizontal;)r=r.Next}if(r===m)o?m=r.Next:m=r.Prev;else{o?r=m.Next:r=m.Prev;var _=new t.LocalMinima;_.Next=null,_.Y=r.Bot.Y,_.LeftBound=null,_.RightBound=r,r.WindDelta=0,m=this.ProcessBound(r,o),this.InsertLocalMinima(_)}return m}if(r.Dx===t.ClipperBase.horizontal&&(o?c=r.Prev:c=r.Next,c.Dx===t.ClipperBase.horizontal?c.Bot.X!==r.Bot.X&&c.Top.X!==r.Bot.X&&this.ReverseHorizontal(r):c.Bot.X!==r.Bot.X&&this.ReverseHorizontal(r)),c=r,o){for(;m.Top.Y===m.Next.Bot.Y&&m.Next.OutIdx!==t.ClipperBase.Skip;)m=m.Next;if(m.Dx===t.ClipperBase.horizontal&&m.Next.OutIdx!==t.ClipperBase.Skip){for(x=m;x.Prev.Dx===t.ClipperBase.horizontal;)x=x.Prev;x.Prev.Top.X>m.Next.Top.X&&(m=x.Prev)}for(;r!==m;)r.NextInLML=r.Next,r.Dx===t.ClipperBase.horizontal&&r!==c&&r.Bot.X!==r.Prev.Top.X&&this.ReverseHorizontal(r),r=r.Next;r.Dx===t.ClipperBase.horizontal&&r!==c&&r.Bot.X!==r.Prev.Top.X&&this.ReverseHorizontal(r),m=m.Next}else{for(;m.Top.Y===m.Prev.Bot.Y&&m.Prev.OutIdx!==t.ClipperBase.Skip;)m=m.Prev;if(m.Dx===t.ClipperBase.horizontal&&m.Prev.OutIdx!==t.ClipperBase.Skip){for(x=m;x.Next.Dx===t.ClipperBase.horizontal;)x=x.Next;(x.Next.Top.X===m.Prev.Top.X||x.Next.Top.X>m.Prev.Top.X)&&(m=x.Next)}for(;r!==m;)r.NextInLML=r.Prev,r.Dx===t.ClipperBase.horizontal&&r!==c&&r.Bot.X!==r.Next.Top.X&&this.ReverseHorizontal(r),r=r.Prev;r.Dx===t.ClipperBase.horizontal&&r!==c&&r.Bot.X!==r.Next.Top.X&&this.ReverseHorizontal(r),m=m.Prev}return m},t.ClipperBase.prototype.AddPath=function(r,o,c){t.use_lines?!c&&o===t.PolyType.ptClip&&t.Error("AddPath: Open paths must be subject."):c||t.Error("AddPath: Open paths have been disabled.");var m=r.length-1;if(c)for(;m>0&&t.IntPoint.op_Equality(r[m],r[0]);)--m;for(;m>0&&t.IntPoint.op_Equality(r[m],r[m-1]);)--m;if(c&&m<2||!c&&m<1)return!1;for(var x=new Array,_=0;_<=m;_++)x.push(new t.TEdge);var B=!0;x[1].Curr.X=r[1].X,x[1].Curr.Y=r[1].Y,t.use_xyz&&(x[1].Curr.Z=r[1].Z);var H={Value:this.m_UseFullRange};this.RangeTest(r[0],H),this.m_UseFullRange=H.Value,H.Value=this.m_UseFullRange,this.RangeTest(r[m],H),this.m_UseFullRange=H.Value,this.InitEdge(x[0],x[1],x[m],r[0]),this.InitEdge(x[m],x[0],x[m-1],r[m]);for(var _=m-1;_>=1;--_)H.Value=this.m_UseFullRange,this.RangeTest(r[_],H),this.m_UseFullRange=H.Value,this.InitEdge(x[_],x[_+1],x[_-1],r[_]);for(var V=x[0],ct=V,Tt=V;;){if(ct.Curr===ct.Next.Curr&&(c||ct.Next!==V)){if(ct===ct.Next)break;ct===V&&(V=ct.Next),ct=this.RemoveEdge(ct),Tt=ct;continue}if(ct.Prev===ct.Next)break;if(c&&t.ClipperBase.SlopesEqual4(ct.Prev.Curr,ct.Curr,ct.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(ct.Prev.Curr,ct.Curr,ct.Next.Curr))){ct===V&&(V=ct.Next),ct=this.RemoveEdge(ct),ct=ct.Prev,Tt=ct;continue}if(ct=ct.Next,ct===Tt||!c&&ct.Next===V)break}if(!c&&ct===ct.Next||c&&ct.Prev===ct.Next)return!1;c||(this.m_HasOpenPaths=!0,V.Prev.OutIdx=t.ClipperBase.Skip),ct=V;do this.InitEdge2(ct,o),ct=ct.Next,B&&ct.Curr.Y!==V.Curr.Y&&(B=!1);while(ct!==V);if(B){if(c)return!1;ct.Prev.OutIdx=t.ClipperBase.Skip;var Nt=new t.LocalMinima;for(Nt.Next=null,Nt.Y=ct.Bot.Y,Nt.LeftBound=null,Nt.RightBound=ct,Nt.RightBound.Side=t.EdgeSide.esRight,Nt.RightBound.WindDelta=0;ct.Bot.X!==ct.Prev.Top.X&&this.ReverseHorizontal(ct),ct.Next.OutIdx!==t.ClipperBase.Skip;)ct.NextInLML=ct.Next,ct=ct.Next;return this.InsertLocalMinima(Nt),this.m_edges.push(x),!0}this.m_edges.push(x);var Dt,Kt=null;for(t.IntPoint.op_Equality(ct.Prev.Bot,ct.Prev.Top)&&(ct=ct.Next);ct=this.FindNextLocMin(ct),ct!==Kt;){Kt===null&&(Kt=ct);var Nt=new t.LocalMinima;Nt.Next=null,Nt.Y=ct.Bot.Y,ct.Dx<ct.Prev.Dx?(Nt.LeftBound=ct.Prev,Nt.RightBound=ct,Dt=!1):(Nt.LeftBound=ct,Nt.RightBound=ct.Prev,Dt=!0),Nt.LeftBound.Side=t.EdgeSide.esLeft,Nt.RightBound.Side=t.EdgeSide.esRight,c?Nt.LeftBound.Next===Nt.RightBound?Nt.LeftBound.WindDelta=-1:Nt.LeftBound.WindDelta=1:Nt.LeftBound.WindDelta=0,Nt.RightBound.WindDelta=-Nt.LeftBound.WindDelta,ct=this.ProcessBound(Nt.LeftBound,Dt),ct.OutIdx===t.ClipperBase.Skip&&(ct=this.ProcessBound(ct,Dt));var fe=this.ProcessBound(Nt.RightBound,!Dt);fe.OutIdx===t.ClipperBase.Skip&&(fe=this.ProcessBound(fe,!Dt)),Nt.LeftBound.OutIdx===t.ClipperBase.Skip?Nt.LeftBound=null:Nt.RightBound.OutIdx===t.ClipperBase.Skip&&(Nt.RightBound=null),this.InsertLocalMinima(Nt),Dt||(ct=fe)}return!0},t.ClipperBase.prototype.AddPaths=function(r,o,c){for(var m=!1,x=0,_=r.length;x<_;++x)this.AddPath(r[x],o,c)&&(m=!0);return m},t.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(r,o,c){return t.IntPoint.op_Equality(r,c)||t.IntPoint.op_Equality(r,o)||t.IntPoint.op_Equality(c,o)?!1:r.X!==c.X?o.X>r.X==o.X<c.X:o.Y>r.Y==o.Y<c.Y},t.ClipperBase.prototype.RemoveEdge=function(r){r.Prev.Next=r.Next,r.Next.Prev=r.Prev;var o=r.Next;return r.Prev=null,o},t.ClipperBase.prototype.SetDx=function(r){r.Delta.X=r.Top.X-r.Bot.X,r.Delta.Y=r.Top.Y-r.Bot.Y,r.Delta.Y===0?r.Dx=t.ClipperBase.horizontal:r.Dx=r.Delta.X/r.Delta.Y},t.ClipperBase.prototype.InsertLocalMinima=function(r){if(this.m_MinimaList===null)this.m_MinimaList=r;else if(r.Y>=this.m_MinimaList.Y)r.Next=this.m_MinimaList,this.m_MinimaList=r;else{for(var o=this.m_MinimaList;o.Next!==null&&r.Y<o.Next.Y;)o=o.Next;r.Next=o.Next,o.Next=r}},t.ClipperBase.prototype.PopLocalMinima=function(r,o){return o.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===r?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1},t.ClipperBase.prototype.ReverseHorizontal=function(r){var o=r.Top.X;r.Top.X=r.Bot.X,r.Bot.X=o,t.use_xyz&&(o=r.Top.Z,r.Top.Z=r.Bot.Z,r.Bot.Z=o)},t.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var r=this.m_MinimaList;r!==null;){this.InsertScanbeam(r.Y);var o=r.LeftBound;o!==null&&(o.Curr.X=o.Bot.X,o.Curr.Y=o.Bot.Y,t.use_xyz&&(o.Curr.Z=o.Bot.Z),o.OutIdx=t.ClipperBase.Unassigned),o=r.RightBound,o!==null&&(o.Curr.X=o.Bot.X,o.Curr.Y=o.Bot.Y,t.use_xyz&&(o.Curr.Z=o.Bot.Z),o.OutIdx=t.ClipperBase.Unassigned),r=r.Next}this.m_ActiveEdges=null}},t.ClipperBase.prototype.InsertScanbeam=function(r){if(this.m_Scanbeam===null)this.m_Scanbeam=new t.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=r;else if(r>this.m_Scanbeam.Y){var o=new t.Scanbeam;o.Y=r,o.Next=this.m_Scanbeam,this.m_Scanbeam=o}else{for(var c=this.m_Scanbeam;c.Next!==null&&r<=c.Next.Y;)c=c.Next;if(r===c.Y)return;var m=new t.Scanbeam;m.Y=r,m.Next=c.Next,c.Next=m}},t.ClipperBase.prototype.PopScanbeam=function(r){return this.m_Scanbeam===null?(r.v=0,!1):(r.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},t.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null},t.ClipperBase.prototype.CreateOutRec=function(){var r=new t.OutRec;return r.Idx=t.ClipperBase.Unassigned,r.IsHole=!1,r.IsOpen=!1,r.FirstLeft=null,r.Pts=null,r.BottomPt=null,r.PolyNode=null,this.m_PolyOuts.push(r),r.Idx=this.m_PolyOuts.length-1,r},t.ClipperBase.prototype.DisposeOutRec=function(r){var o=this.m_PolyOuts[r];o.Pts=null,o=null,this.m_PolyOuts[r]=null},t.ClipperBase.prototype.UpdateEdgeIntoAEL=function(r){r.NextInLML===null&&t.Error("UpdateEdgeIntoAEL: invalid call");var o=r.PrevInAEL,c=r.NextInAEL;return r.NextInLML.OutIdx=r.OutIdx,o!==null?o.NextInAEL=r.NextInLML:this.m_ActiveEdges=r.NextInLML,c!==null&&(c.PrevInAEL=r.NextInLML),r.NextInLML.Side=r.Side,r.NextInLML.WindDelta=r.WindDelta,r.NextInLML.WindCnt=r.WindCnt,r.NextInLML.WindCnt2=r.WindCnt2,r=r.NextInLML,r.Curr.X=r.Bot.X,r.Curr.Y=r.Bot.Y,r.PrevInAEL=o,r.NextInAEL=c,t.ClipperBase.IsHorizontal(r)||this.InsertScanbeam(r.Top.Y),r},t.ClipperBase.prototype.SwapPositionsInAEL=function(r,o){if(!(r.NextInAEL===r.PrevInAEL||o.NextInAEL===o.PrevInAEL)){if(r.NextInAEL===o){var c=o.NextInAEL;c!==null&&(c.PrevInAEL=r);var m=r.PrevInAEL;m!==null&&(m.NextInAEL=o),o.PrevInAEL=m,o.NextInAEL=r,r.PrevInAEL=o,r.NextInAEL=c}else if(o.NextInAEL===r){var x=r.NextInAEL;x!==null&&(x.PrevInAEL=o);var _=o.PrevInAEL;_!==null&&(_.NextInAEL=r),r.PrevInAEL=_,r.NextInAEL=o,o.PrevInAEL=r,o.NextInAEL=x}else{var B=r.NextInAEL,H=r.PrevInAEL;r.NextInAEL=o.NextInAEL,r.NextInAEL!==null&&(r.NextInAEL.PrevInAEL=r),r.PrevInAEL=o.PrevInAEL,r.PrevInAEL!==null&&(r.PrevInAEL.NextInAEL=r),o.NextInAEL=B,o.NextInAEL!==null&&(o.NextInAEL.PrevInAEL=o),o.PrevInAEL=H,o.PrevInAEL!==null&&(o.PrevInAEL.NextInAEL=o)}r.PrevInAEL===null?this.m_ActiveEdges=r:o.PrevInAEL===null&&(this.m_ActiveEdges=o)}},t.ClipperBase.prototype.DeleteFromAEL=function(r){var o=r.PrevInAEL,c=r.NextInAEL;o===null&&c===null&&r!==this.m_ActiveEdges||(o!==null?o.NextInAEL=c:this.m_ActiveEdges=c,c!==null&&(c.PrevInAEL=o),r.NextInAEL=null,r.PrevInAEL=null)},t.Clipper=function(r){typeof r>"u"&&(r=0),this.m_PolyOuts=null,this.m_ClipType=t.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=t.PolyFillType.pftEvenOdd,this.m_SubjFillType=t.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,t.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=t.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&r)!==0,this.StrictlySimple=(2&r)!==0,this.PreserveCollinear=(4&r)!==0,t.use_xyz&&(this.ZFillFunction=null)},t.Clipper.ioReverseSolution=1,t.Clipper.ioStrictlySimple=2,t.Clipper.ioPreserveCollinear=4,t.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),t.ClipperBase.prototype.Clear.call(this))},t.Clipper.prototype.InsertMaxima=function(r){var o=new t.Maxima;if(o.X=r,this.m_Maxima===null)this.m_Maxima=o,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(r<this.m_Maxima.X)o.Next=this.m_Maxima,o.Prev=null,this.m_Maxima=o;else{for(var c=this.m_Maxima;c.Next!==null&&r>=c.Next.X;)c=c.Next;if(r===c.X)return;o.Next=c.Next,o.Prev=c,c.Next!==null&&(c.Next.Prev=o),c.Next=o}},t.Clipper.prototype.Execute=function(){var r=arguments,o=r.length,c=r[1]instanceof t.PolyTree;if(o===4&&!c){var m=r[0],x=r[1],_=r[2],B=r[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&t.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,t.Clear(x),this.m_SubjFillType=_,this.m_ClipFillType=B,this.m_ClipType=m,this.m_UsingPolyTree=!1;try{var H=this.ExecuteInternal();H&&this.BuildResult(x)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return H}else if(o===4&&c){var m=r[0],V=r[1],_=r[2],B=r[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=_,this.m_ClipFillType=B,this.m_ClipType=m,this.m_UsingPolyTree=!0;try{var H=this.ExecuteInternal();H&&this.BuildResult2(V)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return H}else if(o===2&&!c){var m=r[0],x=r[1];return this.Execute(m,x,t.PolyFillType.pftEvenOdd,t.PolyFillType.pftEvenOdd)}else if(o===2&&c){var m=r[0],V=r[1];return this.Execute(m,V,t.PolyFillType.pftEvenOdd,t.PolyFillType.pftEvenOdd)}},t.Clipper.prototype.FixHoleLinkage=function(r){if(!(r.FirstLeft===null||r.IsHole!==r.FirstLeft.IsHole&&r.FirstLeft.Pts!==null)){for(var o=r.FirstLeft;o!==null&&(o.IsHole===r.IsHole||o.Pts===null);)o=o.FirstLeft;r.FirstLeft=o}},t.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var r={},o={};if(!this.PopScanbeam(r))return!1;for(this.InsertLocalMinimaIntoAEL(r.v);this.PopScanbeam(o)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(o.v))return!1;this.ProcessEdgesAtTopOfScanbeam(o.v),r.v=o.v,this.InsertLocalMinimaIntoAEL(r.v)}var c,m,x;for(m=0,x=this.m_PolyOuts.length;m<x;m++)c=this.m_PolyOuts[m],!(c.Pts===null||c.IsOpen)&&(c.IsHole^this.ReverseSolution)==this.Area$1(c)>0&&this.ReversePolyPtLinks(c.Pts);for(this.JoinCommonEdges(),m=0,x=this.m_PolyOuts.length;m<x;m++)c=this.m_PolyOuts[m],c.Pts!==null&&(c.IsOpen?this.FixupOutPolyline(c):this.FixupOutPolygon(c));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},t.Clipper.prototype.DisposeAllPolyPts=function(){for(var r=0,o=this.m_PolyOuts.length;r<o;++r)this.DisposeOutRec(r);t.Clear(this.m_PolyOuts)},t.Clipper.prototype.AddJoin=function(r,o,c){var m=new t.Join;m.OutPt1=r,m.OutPt2=o,m.OffPt.X=c.X,m.OffPt.Y=c.Y,t.use_xyz&&(m.OffPt.Z=c.Z),this.m_Joins.push(m)},t.Clipper.prototype.AddGhostJoin=function(r,o){var c=new t.Join;c.OutPt1=r,c.OffPt.X=o.X,c.OffPt.Y=o.Y,t.use_xyz&&(c.OffPt.Z=o.Z),this.m_GhostJoins.push(c)},t.Clipper.prototype.SetZ=function(r,o,c){if(this.ZFillFunction!==null){if(r.Z!==0||this.ZFillFunction===null)return;t.IntPoint.op_Equality(r,o.Bot)?r.Z=o.Bot.Z:t.IntPoint.op_Equality(r,o.Top)?r.Z=o.Top.Z:t.IntPoint.op_Equality(r,c.Bot)?r.Z=c.Bot.Z:t.IntPoint.op_Equality(r,c.Top)?r.Z=c.Top.Z:this.ZFillFunction(o.Bot,o.Top,c.Bot,c.Top,r)}},t.Clipper.prototype.InsertLocalMinimaIntoAEL=function(r){for(var o={},c,m;this.PopLocalMinima(r,o);){c=o.v.LeftBound,m=o.v.RightBound;var x=null;if(c===null?(this.InsertEdgeIntoAEL(m,null),this.SetWindingCount(m),this.IsContributing(m)&&(x=this.AddOutPt(m,m.Bot))):m===null?(this.InsertEdgeIntoAEL(c,null),this.SetWindingCount(c),this.IsContributing(c)&&(x=this.AddOutPt(c,c.Bot)),this.InsertScanbeam(c.Top.Y)):(this.InsertEdgeIntoAEL(c,null),this.InsertEdgeIntoAEL(m,c),this.SetWindingCount(c),m.WindCnt=c.WindCnt,m.WindCnt2=c.WindCnt2,this.IsContributing(c)&&(x=this.AddLocalMinPoly(c,m,c.Bot)),this.InsertScanbeam(c.Top.Y)),m!==null&&(t.ClipperBase.IsHorizontal(m)?(m.NextInLML!==null&&this.InsertScanbeam(m.NextInLML.Top.Y),this.AddEdgeToSEL(m)):this.InsertScanbeam(m.Top.Y)),!(c===null||m===null)){if(x!==null&&t.ClipperBase.IsHorizontal(m)&&this.m_GhostJoins.length>0&&m.WindDelta!==0)for(var _=0,B=this.m_GhostJoins.length;_<B;_++){var H=this.m_GhostJoins[_];this.HorzSegmentsOverlap(H.OutPt1.Pt.X,H.OffPt.X,m.Bot.X,m.Top.X)&&this.AddJoin(H.OutPt1,x,H.OffPt)}if(c.OutIdx>=0&&c.PrevInAEL!==null&&c.PrevInAEL.Curr.X===c.Bot.X&&c.PrevInAEL.OutIdx>=0&&t.ClipperBase.SlopesEqual5(c.PrevInAEL.Curr,c.PrevInAEL.Top,c.Curr,c.Top,this.m_UseFullRange)&&c.WindDelta!==0&&c.PrevInAEL.WindDelta!==0){var V=this.AddOutPt(c.PrevInAEL,c.Bot);this.AddJoin(x,V,c.Top)}if(c.NextInAEL!==m){if(m.OutIdx>=0&&m.PrevInAEL.OutIdx>=0&&t.ClipperBase.SlopesEqual5(m.PrevInAEL.Curr,m.PrevInAEL.Top,m.Curr,m.Top,this.m_UseFullRange)&&m.WindDelta!==0&&m.PrevInAEL.WindDelta!==0){var V=this.AddOutPt(m.PrevInAEL,m.Bot);this.AddJoin(x,V,m.Top)}var ct=c.NextInAEL;if(ct!==null)for(;ct!==m;)this.IntersectEdges(m,ct,c.Curr),ct=ct.NextInAEL}}}},t.Clipper.prototype.InsertEdgeIntoAEL=function(r,o){if(this.m_ActiveEdges===null)r.PrevInAEL=null,r.NextInAEL=null,this.m_ActiveEdges=r;else if(o===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,r))r.PrevInAEL=null,r.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=r,this.m_ActiveEdges=r;else{for(o===null&&(o=this.m_ActiveEdges);o.NextInAEL!==null&&!this.E2InsertsBeforeE1(o.NextInAEL,r);)o=o.NextInAEL;r.NextInAEL=o.NextInAEL,o.NextInAEL!==null&&(o.NextInAEL.PrevInAEL=r),r.PrevInAEL=o,o.NextInAEL=r}},t.Clipper.prototype.E2InsertsBeforeE1=function(r,o){return o.Curr.X===r.Curr.X?o.Top.Y>r.Top.Y?o.Top.X<t.Clipper.TopX(r,o.Top.Y):r.Top.X>t.Clipper.TopX(o,r.Top.Y):o.Curr.X<r.Curr.X},t.Clipper.prototype.IsEvenOddFillType=function(r){return r.PolyTyp===t.PolyType.ptSubject?this.m_SubjFillType===t.PolyFillType.pftEvenOdd:this.m_ClipFillType===t.PolyFillType.pftEvenOdd},t.Clipper.prototype.IsEvenOddAltFillType=function(r){return r.PolyTyp===t.PolyType.ptSubject?this.m_ClipFillType===t.PolyFillType.pftEvenOdd:this.m_SubjFillType===t.PolyFillType.pftEvenOdd},t.Clipper.prototype.IsContributing=function(r){var o,c;switch(r.PolyTyp===t.PolyType.ptSubject?(o=this.m_SubjFillType,c=this.m_ClipFillType):(o=this.m_ClipFillType,c=this.m_SubjFillType),o){case t.PolyFillType.pftEvenOdd:if(r.WindDelta===0&&r.WindCnt!==1)return!1;break;case t.PolyFillType.pftNonZero:if(Math.abs(r.WindCnt)!==1)return!1;break;case t.PolyFillType.pftPositive:if(r.WindCnt!==1)return!1;break;default:if(r.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case t.ClipType.ctIntersection:switch(c){case t.PolyFillType.pftEvenOdd:case t.PolyFillType.pftNonZero:return r.WindCnt2!==0;case t.PolyFillType.pftPositive:return r.WindCnt2>0;default:return r.WindCnt2<0}case t.ClipType.ctUnion:switch(c){case t.PolyFillType.pftEvenOdd:case t.PolyFillType.pftNonZero:return r.WindCnt2===0;case t.PolyFillType.pftPositive:return r.WindCnt2<=0;default:return r.WindCnt2>=0}case t.ClipType.ctDifference:if(r.PolyTyp===t.PolyType.ptSubject)switch(c){case t.PolyFillType.pftEvenOdd:case t.PolyFillType.pftNonZero:return r.WindCnt2===0;case t.PolyFillType.pftPositive:return r.WindCnt2<=0;default:return r.WindCnt2>=0}else switch(c){case t.PolyFillType.pftEvenOdd:case t.PolyFillType.pftNonZero:return r.WindCnt2!==0;case t.PolyFillType.pftPositive:return r.WindCnt2>0;default:return r.WindCnt2<0}case t.ClipType.ctXor:if(r.WindDelta===0)switch(c){case t.PolyFillType.pftEvenOdd:case t.PolyFillType.pftNonZero:return r.WindCnt2===0;case t.PolyFillType.pftPositive:return r.WindCnt2<=0;default:return r.WindCnt2>=0}else return!0}return!0},t.Clipper.prototype.SetWindingCount=function(r){for(var o=r.PrevInAEL;o!==null&&(o.PolyTyp!==r.PolyTyp||o.WindDelta===0);)o=o.PrevInAEL;if(o===null){var c=r.PolyTyp===t.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;r.WindDelta===0?r.WindCnt=c===t.PolyFillType.pftNegative?-1:1:r.WindCnt=r.WindDelta,r.WindCnt2=0,o=this.m_ActiveEdges}else if(r.WindDelta===0&&this.m_ClipType!==t.ClipType.ctUnion)r.WindCnt=1,r.WindCnt2=o.WindCnt2,o=o.NextInAEL;else if(this.IsEvenOddFillType(r)){if(r.WindDelta===0){for(var m=!0,x=o.PrevInAEL;x!==null;)x.PolyTyp===o.PolyTyp&&x.WindDelta!==0&&(m=!m),x=x.PrevInAEL;r.WindCnt=m?0:1}else r.WindCnt=r.WindDelta;r.WindCnt2=o.WindCnt2,o=o.NextInAEL}else o.WindCnt*o.WindDelta<0?Math.abs(o.WindCnt)>1?o.WindDelta*r.WindDelta<0?r.WindCnt=o.WindCnt:r.WindCnt=o.WindCnt+r.WindDelta:r.WindCnt=r.WindDelta===0?1:r.WindDelta:r.WindDelta===0?r.WindCnt=o.WindCnt<0?o.WindCnt-1:o.WindCnt+1:o.WindDelta*r.WindDelta<0?r.WindCnt=o.WindCnt:r.WindCnt=o.WindCnt+r.WindDelta,r.WindCnt2=o.WindCnt2,o=o.NextInAEL;if(this.IsEvenOddAltFillType(r))for(;o!==r;)o.WindDelta!==0&&(r.WindCnt2=r.WindCnt2===0?1:0),o=o.NextInAEL;else for(;o!==r;)r.WindCnt2+=o.WindDelta,o=o.NextInAEL},t.Clipper.prototype.AddEdgeToSEL=function(r){this.m_SortedEdges===null?(this.m_SortedEdges=r,r.PrevInSEL=null,r.NextInSEL=null):(r.NextInSEL=this.m_SortedEdges,r.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=r,this.m_SortedEdges=r)},t.Clipper.prototype.PopEdgeFromSEL=function(r){if(r.v=this.m_SortedEdges,r.v===null)return!1;var o=r.v;return this.m_SortedEdges=r.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),o.NextInSEL=null,o.PrevInSEL=null,!0},t.Clipper.prototype.CopyAELToSEL=function(){var r=this.m_ActiveEdges;for(this.m_SortedEdges=r;r!==null;)r.PrevInSEL=r.PrevInAEL,r.NextInSEL=r.NextInAEL,r=r.NextInAEL},t.Clipper.prototype.SwapPositionsInSEL=function(r,o){if(!(r.NextInSEL===null&&r.PrevInSEL===null)&&!(o.NextInSEL===null&&o.PrevInSEL===null)){if(r.NextInSEL===o){var c=o.NextInSEL;c!==null&&(c.PrevInSEL=r);var m=r.PrevInSEL;m!==null&&(m.NextInSEL=o),o.PrevInSEL=m,o.NextInSEL=r,r.PrevInSEL=o,r.NextInSEL=c}else if(o.NextInSEL===r){var c=r.NextInSEL;c!==null&&(c.PrevInSEL=o);var m=o.PrevInSEL;m!==null&&(m.NextInSEL=r),r.PrevInSEL=m,r.NextInSEL=o,o.PrevInSEL=r,o.NextInSEL=c}else{var c=r.NextInSEL,m=r.PrevInSEL;r.NextInSEL=o.NextInSEL,r.NextInSEL!==null&&(r.NextInSEL.PrevInSEL=r),r.PrevInSEL=o.PrevInSEL,r.PrevInSEL!==null&&(r.PrevInSEL.NextInSEL=r),o.NextInSEL=c,o.NextInSEL!==null&&(o.NextInSEL.PrevInSEL=o),o.PrevInSEL=m,o.PrevInSEL!==null&&(o.PrevInSEL.NextInSEL=o)}r.PrevInSEL===null?this.m_SortedEdges=r:o.PrevInSEL===null&&(this.m_SortedEdges=o)}},t.Clipper.prototype.AddLocalMaxPoly=function(r,o,c){this.AddOutPt(r,c),o.WindDelta===0&&this.AddOutPt(o,c),r.OutIdx===o.OutIdx?(r.OutIdx=-1,o.OutIdx=-1):r.OutIdx<o.OutIdx?this.AppendPolygon(r,o):this.AppendPolygon(o,r)},t.Clipper.prototype.AddLocalMinPoly=function(r,o,c){var m,x,_;if(t.ClipperBase.IsHorizontal(o)||r.Dx>o.Dx?(m=this.AddOutPt(r,c),o.OutIdx=r.OutIdx,r.Side=t.EdgeSide.esLeft,o.Side=t.EdgeSide.esRight,x=r,x.PrevInAEL===o?_=o.PrevInAEL:_=x.PrevInAEL):(m=this.AddOutPt(o,c),r.OutIdx=o.OutIdx,r.Side=t.EdgeSide.esRight,o.Side=t.EdgeSide.esLeft,x=o,x.PrevInAEL===r?_=r.PrevInAEL:_=x.PrevInAEL),_!==null&&_.OutIdx>=0&&_.Top.Y<c.Y&&x.Top.Y<c.Y){var B=t.Clipper.TopX(_,c.Y),H=t.Clipper.TopX(x,c.Y);if(B===H&&x.WindDelta!==0&&_.WindDelta!==0&&t.ClipperBase.SlopesEqual5(new t.IntPoint2(B,c.Y),_.Top,new t.IntPoint2(H,c.Y),x.Top,this.m_UseFullRange)){var V=this.AddOutPt(_,c);this.AddJoin(m,V,x.Top)}}return m},t.Clipper.prototype.AddOutPt=function(r,o){if(r.OutIdx<0){var c=this.CreateOutRec();c.IsOpen=r.WindDelta===0;var m=new t.OutPt;return c.Pts=m,m.Idx=c.Idx,m.Pt.X=o.X,m.Pt.Y=o.Y,t.use_xyz&&(m.Pt.Z=o.Z),m.Next=m,m.Prev=m,c.IsOpen||this.SetHoleState(r,c),r.OutIdx=c.Idx,m}else{var c=this.m_PolyOuts[r.OutIdx],x=c.Pts,_=r.Side===t.EdgeSide.esLeft;if(_&&t.IntPoint.op_Equality(o,x.Pt))return x;if(!_&&t.IntPoint.op_Equality(o,x.Prev.Pt))return x.Prev;var m=new t.OutPt;return m.Idx=c.Idx,m.Pt.X=o.X,m.Pt.Y=o.Y,t.use_xyz&&(m.Pt.Z=o.Z),m.Next=x,m.Prev=x.Prev,m.Prev.Next=m,x.Prev=m,_&&(c.Pts=m),m}},t.Clipper.prototype.GetLastOutPt=function(r){var o=this.m_PolyOuts[r.OutIdx];return r.Side===t.EdgeSide.esLeft?o.Pts:o.Pts.Prev},t.Clipper.prototype.SwapPoints=function(r,o){var c=new t.IntPoint1(r.Value);r.Value.X=o.Value.X,r.Value.Y=o.Value.Y,t.use_xyz&&(r.Value.Z=o.Value.Z),o.Value.X=c.X,o.Value.Y=c.Y,t.use_xyz&&(o.Value.Z=c.Z)},t.Clipper.prototype.HorzSegmentsOverlap=function(r,o,c,m){var x;return r>o&&(x=r,r=o,o=x),c>m&&(x=c,c=m,m=x),r<m&&c<o},t.Clipper.prototype.SetHoleState=function(r,o){for(var c=r.PrevInAEL,m=null;c!==null;)c.OutIdx>=0&&c.WindDelta!==0&&(m===null?m=c:m.OutIdx===c.OutIdx&&(m=null)),c=c.PrevInAEL;m===null?(o.FirstLeft=null,o.IsHole=!1):(o.FirstLeft=this.m_PolyOuts[m.OutIdx],o.IsHole=!o.FirstLeft.IsHole)},t.Clipper.prototype.GetDx=function(r,o){return r.Y===o.Y?t.ClipperBase.horizontal:(o.X-r.X)/(o.Y-r.Y)},t.Clipper.prototype.FirstIsBottomPt=function(r,o){for(var c=r.Prev;t.IntPoint.op_Equality(c.Pt,r.Pt)&&c!==r;)c=c.Prev;var m=Math.abs(this.GetDx(r.Pt,c.Pt));for(c=r.Next;t.IntPoint.op_Equality(c.Pt,r.Pt)&&c!==r;)c=c.Next;var x=Math.abs(this.GetDx(r.Pt,c.Pt));for(c=o.Prev;t.IntPoint.op_Equality(c.Pt,o.Pt)&&c!==o;)c=c.Prev;var _=Math.abs(this.GetDx(o.Pt,c.Pt));for(c=o.Next;t.IntPoint.op_Equality(c.Pt,o.Pt)&&c!==o;)c=c.Next;var B=Math.abs(this.GetDx(o.Pt,c.Pt));return Math.max(m,x)===Math.max(_,B)&&Math.min(m,x)===Math.min(_,B)?this.Area(r)>0:m>=_&&m>=B||x>=_&&x>=B},t.Clipper.prototype.GetBottomPt=function(r){for(var o=null,c=r.Next;c!==r;)c.Pt.Y>r.Pt.Y?(r=c,o=null):c.Pt.Y===r.Pt.Y&&c.Pt.X<=r.Pt.X&&(c.Pt.X<r.Pt.X?(o=null,r=c):c.Next!==r&&c.Prev!==r&&(o=c)),c=c.Next;if(o!==null)for(;o!==c;)for(this.FirstIsBottomPt(c,o)||(r=o),o=o.Next;t.IntPoint.op_Inequality(o.Pt,r.Pt);)o=o.Next;return r},t.Clipper.prototype.GetLowermostRec=function(r,o){r.BottomPt===null&&(r.BottomPt=this.GetBottomPt(r.Pts)),o.BottomPt===null&&(o.BottomPt=this.GetBottomPt(o.Pts));var c=r.BottomPt,m=o.BottomPt;return c.Pt.Y>m.Pt.Y?r:c.Pt.Y<m.Pt.Y?o:c.Pt.X<m.Pt.X?r:c.Pt.X>m.Pt.X||c.Next===c?o:m.Next===m||this.FirstIsBottomPt(c,m)?r:o},t.Clipper.prototype.OutRec1RightOfOutRec2=function(r,o){do if(r=r.FirstLeft,r===o)return!0;while(r!==null);return!1},t.Clipper.prototype.GetOutRec=function(r){for(var o=this.m_PolyOuts[r];o!==this.m_PolyOuts[o.Idx];)o=this.m_PolyOuts[o.Idx];return o},t.Clipper.prototype.AppendPolygon=function(r,o){var c=this.m_PolyOuts[r.OutIdx],m=this.m_PolyOuts[o.OutIdx],x;this.OutRec1RightOfOutRec2(c,m)?x=m:this.OutRec1RightOfOutRec2(m,c)?x=c:x=this.GetLowermostRec(c,m);var _=c.Pts,B=_.Prev,H=m.Pts,V=H.Prev;r.Side===t.EdgeSide.esLeft?o.Side===t.EdgeSide.esLeft?(this.ReversePolyPtLinks(H),H.Next=_,_.Prev=H,B.Next=V,V.Prev=B,c.Pts=V):(V.Next=_,_.Prev=V,H.Prev=B,B.Next=H,c.Pts=H):o.Side===t.EdgeSide.esRight?(this.ReversePolyPtLinks(H),B.Next=V,V.Prev=B,H.Next=_,_.Prev=H):(B.Next=H,H.Prev=B,_.Prev=V,V.Next=_),c.BottomPt=null,x===m&&(m.FirstLeft!==c&&(c.FirstLeft=m.FirstLeft),c.IsHole=m.IsHole),m.Pts=null,m.BottomPt=null,m.FirstLeft=c;var ct=r.OutIdx,Tt=o.OutIdx;r.OutIdx=-1,o.OutIdx=-1;for(var Nt=this.m_ActiveEdges;Nt!==null;){if(Nt.OutIdx===Tt){Nt.OutIdx=ct,Nt.Side=r.Side;break}Nt=Nt.NextInAEL}m.Idx=c.Idx},t.Clipper.prototype.ReversePolyPtLinks=function(r){if(r!==null){var o,c;o=r;do c=o.Next,o.Next=o.Prev,o.Prev=c,o=c;while(o!==r)}},t.Clipper.SwapSides=function(r,o){var c=r.Side;r.Side=o.Side,o.Side=c},t.Clipper.SwapPolyIndexes=function(r,o){var c=r.OutIdx;r.OutIdx=o.OutIdx,o.OutIdx=c},t.Clipper.prototype.IntersectEdges=function(r,o,c){var m=r.OutIdx>=0,x=o.OutIdx>=0;if(t.use_xyz&&this.SetZ(c,r,o),t.use_lines&&(r.WindDelta===0||o.WindDelta===0)){if(r.WindDelta===0&&o.WindDelta===0)return;r.PolyTyp===o.PolyTyp&&r.WindDelta!==o.WindDelta&&this.m_ClipType===t.ClipType.ctUnion?r.WindDelta===0?x&&(this.AddOutPt(r,c),m&&(r.OutIdx=-1)):m&&(this.AddOutPt(o,c),x&&(o.OutIdx=-1)):r.PolyTyp!==o.PolyTyp&&(r.WindDelta===0&&Math.abs(o.WindCnt)===1&&(this.m_ClipType!==t.ClipType.ctUnion||o.WindCnt2===0)?(this.AddOutPt(r,c),m&&(r.OutIdx=-1)):o.WindDelta===0&&Math.abs(r.WindCnt)===1&&(this.m_ClipType!==t.ClipType.ctUnion||r.WindCnt2===0)&&(this.AddOutPt(o,c),x&&(o.OutIdx=-1)));return}if(r.PolyTyp===o.PolyTyp)if(this.IsEvenOddFillType(r)){var _=r.WindCnt;r.WindCnt=o.WindCnt,o.WindCnt=_}else r.WindCnt+o.WindDelta===0?r.WindCnt=-r.WindCnt:r.WindCnt+=o.WindDelta,o.WindCnt-r.WindDelta===0?o.WindCnt=-o.WindCnt:o.WindCnt-=r.WindDelta;else this.IsEvenOddFillType(o)?r.WindCnt2=r.WindCnt2===0?1:0:r.WindCnt2+=o.WindDelta,this.IsEvenOddFillType(r)?o.WindCnt2=o.WindCnt2===0?1:0:o.WindCnt2-=r.WindDelta;var B,H,V,ct;r.PolyTyp===t.PolyType.ptSubject?(B=this.m_SubjFillType,V=this.m_ClipFillType):(B=this.m_ClipFillType,V=this.m_SubjFillType),o.PolyTyp===t.PolyType.ptSubject?(H=this.m_SubjFillType,ct=this.m_ClipFillType):(H=this.m_ClipFillType,ct=this.m_SubjFillType);var Tt,Nt;switch(B){case t.PolyFillType.pftPositive:Tt=r.WindCnt;break;case t.PolyFillType.pftNegative:Tt=-r.WindCnt;break;default:Tt=Math.abs(r.WindCnt);break}switch(H){case t.PolyFillType.pftPositive:Nt=o.WindCnt;break;case t.PolyFillType.pftNegative:Nt=-o.WindCnt;break;default:Nt=Math.abs(o.WindCnt);break}if(m&&x)Tt!==0&&Tt!==1||Nt!==0&&Nt!==1||r.PolyTyp!==o.PolyTyp&&this.m_ClipType!==t.ClipType.ctXor?this.AddLocalMaxPoly(r,o,c):(this.AddOutPt(r,c),this.AddOutPt(o,c),t.Clipper.SwapSides(r,o),t.Clipper.SwapPolyIndexes(r,o));else if(m)(Nt===0||Nt===1)&&(this.AddOutPt(r,c),t.Clipper.SwapSides(r,o),t.Clipper.SwapPolyIndexes(r,o));else if(x)(Tt===0||Tt===1)&&(this.AddOutPt(o,c),t.Clipper.SwapSides(r,o),t.Clipper.SwapPolyIndexes(r,o));else if((Tt===0||Tt===1)&&(Nt===0||Nt===1)){var Dt,Kt;switch(V){case t.PolyFillType.pftPositive:Dt=r.WindCnt2;break;case t.PolyFillType.pftNegative:Dt=-r.WindCnt2;break;default:Dt=Math.abs(r.WindCnt2);break}switch(ct){case t.PolyFillType.pftPositive:Kt=o.WindCnt2;break;case t.PolyFillType.pftNegative:Kt=-o.WindCnt2;break;default:Kt=Math.abs(o.WindCnt2);break}if(r.PolyTyp!==o.PolyTyp)this.AddLocalMinPoly(r,o,c);else if(Tt===1&&Nt===1)switch(this.m_ClipType){case t.ClipType.ctIntersection:Dt>0&&Kt>0&&this.AddLocalMinPoly(r,o,c);break;case t.ClipType.ctUnion:Dt<=0&&Kt<=0&&this.AddLocalMinPoly(r,o,c);break;case t.ClipType.ctDifference:(r.PolyTyp===t.PolyType.ptClip&&Dt>0&&Kt>0||r.PolyTyp===t.PolyType.ptSubject&&Dt<=0&&Kt<=0)&&this.AddLocalMinPoly(r,o,c);break;case t.ClipType.ctXor:this.AddLocalMinPoly(r,o,c);break}else t.Clipper.SwapSides(r,o)}},t.Clipper.prototype.DeleteFromSEL=function(r){var o=r.PrevInSEL,c=r.NextInSEL;o===null&&c===null&&r!==this.m_SortedEdges||(o!==null?o.NextInSEL=c:this.m_SortedEdges=c,c!==null&&(c.PrevInSEL=o),r.NextInSEL=null,r.PrevInSEL=null)},t.Clipper.prototype.ProcessHorizontals=function(){for(var r={};this.PopEdgeFromSEL(r);)this.ProcessHorizontal(r.v)},t.Clipper.prototype.GetHorzDirection=function(r,o){r.Bot.X<r.Top.X?(o.Left=r.Bot.X,o.Right=r.Top.X,o.Dir=t.Direction.dLeftToRight):(o.Left=r.Top.X,o.Right=r.Bot.X,o.Dir=t.Direction.dRightToLeft)},t.Clipper.prototype.ProcessHorizontal=function(r){var o={Dir:null,Left:null,Right:null};this.GetHorzDirection(r,o);for(var c=o.Dir,m=o.Left,x=o.Right,_=r.WindDelta===0,B=r,H=null;B.NextInLML!==null&&t.ClipperBase.IsHorizontal(B.NextInLML);)B=B.NextInLML;B.NextInLML===null&&(H=this.GetMaximaPair(B));var V=this.m_Maxima;if(V!==null)if(c===t.Direction.dLeftToRight){for(;V!==null&&V.X<=r.Bot.X;)V=V.Next;V!==null&&V.X>=B.Top.X&&(V=null)}else{for(;V.Next!==null&&V.Next.X<r.Bot.X;)V=V.Next;V.X<=B.Top.X&&(V=null)}for(var ct=null;;){for(var Tt=r===B,Nt=this.GetNextInAEL(r,c);Nt!==null;){if(V!==null)if(c===t.Direction.dLeftToRight)for(;V!==null&&V.X<Nt.Curr.X;)r.OutIdx>=0&&!_&&this.AddOutPt(r,new t.IntPoint2(V.X,r.Bot.Y)),V=V.Next;else for(;V!==null&&V.X>Nt.Curr.X;)r.OutIdx>=0&&!_&&this.AddOutPt(r,new t.IntPoint2(V.X,r.Bot.Y)),V=V.Prev;if(c===t.Direction.dLeftToRight&&Nt.Curr.X>x||c===t.Direction.dRightToLeft&&Nt.Curr.X<m||Nt.Curr.X===r.Top.X&&r.NextInLML!==null&&Nt.Dx<r.NextInLML.Dx)break;if(r.OutIdx>=0&&!_){t.use_xyz&&(c===t.Direction.dLeftToRight?this.SetZ(Nt.Curr,r,Nt):this.SetZ(Nt.Curr,Nt,r)),ct=this.AddOutPt(r,Nt.Curr);for(var Dt=this.m_SortedEdges;Dt!==null;){if(Dt.OutIdx>=0&&this.HorzSegmentsOverlap(r.Bot.X,r.Top.X,Dt.Bot.X,Dt.Top.X)){var Kt=this.GetLastOutPt(Dt);this.AddJoin(Kt,ct,Dt.Top)}Dt=Dt.NextInSEL}this.AddGhostJoin(ct,r.Bot)}if(Nt===H&&Tt){r.OutIdx>=0&&this.AddLocalMaxPoly(r,H,r.Top),this.DeleteFromAEL(r),this.DeleteFromAEL(H);return}if(c===t.Direction.dLeftToRight){var fe=new t.IntPoint2(Nt.Curr.X,r.Curr.Y);this.IntersectEdges(r,Nt,fe)}else{var fe=new t.IntPoint2(Nt.Curr.X,r.Curr.Y);this.IntersectEdges(Nt,r,fe)}var ye=this.GetNextInAEL(Nt,c);this.SwapPositionsInAEL(r,Nt),Nt=ye}if(r.NextInLML===null||!t.ClipperBase.IsHorizontal(r.NextInLML))break;r=this.UpdateEdgeIntoAEL(r),r.OutIdx>=0&&this.AddOutPt(r,r.Bot),o={Dir:c,Left:m,Right:x},this.GetHorzDirection(r,o),c=o.Dir,m=o.Left,x=o.Right}if(r.OutIdx>=0&&ct===null){ct=this.GetLastOutPt(r);for(var Dt=this.m_SortedEdges;Dt!==null;){if(Dt.OutIdx>=0&&this.HorzSegmentsOverlap(r.Bot.X,r.Top.X,Dt.Bot.X,Dt.Top.X)){var Kt=this.GetLastOutPt(Dt);this.AddJoin(Kt,ct,Dt.Top)}Dt=Dt.NextInSEL}this.AddGhostJoin(ct,r.Top)}if(r.NextInLML!==null)if(r.OutIdx>=0){if(ct=this.AddOutPt(r,r.Top),r=this.UpdateEdgeIntoAEL(r),r.WindDelta===0)return;var ce=r.PrevInAEL,ye=r.NextInAEL;if(ce!==null&&ce.Curr.X===r.Bot.X&&ce.Curr.Y===r.Bot.Y&&ce.WindDelta===0&&ce.OutIdx>=0&&ce.Curr.Y>ce.Top.Y&&t.ClipperBase.SlopesEqual3(r,ce,this.m_UseFullRange)){var Kt=this.AddOutPt(ce,r.Bot);this.AddJoin(ct,Kt,r.Top)}else if(ye!==null&&ye.Curr.X===r.Bot.X&&ye.Curr.Y===r.Bot.Y&&ye.WindDelta!==0&&ye.OutIdx>=0&&ye.Curr.Y>ye.Top.Y&&t.ClipperBase.SlopesEqual3(r,ye,this.m_UseFullRange)){var Kt=this.AddOutPt(ye,r.Bot);this.AddJoin(ct,Kt,r.Top)}}else r=this.UpdateEdgeIntoAEL(r);else r.OutIdx>=0&&this.AddOutPt(r,r.Top),this.DeleteFromAEL(r)},t.Clipper.prototype.GetNextInAEL=function(r,o){return o===t.Direction.dLeftToRight?r.NextInAEL:r.PrevInAEL},t.Clipper.prototype.IsMinima=function(r){return r!==null&&r.Prev.NextInLML!==r&&r.Next.NextInLML!==r},t.Clipper.prototype.IsMaxima=function(r,o){return r!==null&&r.Top.Y===o&&r.NextInLML===null},t.Clipper.prototype.IsIntermediate=function(r,o){return r.Top.Y===o&&r.NextInLML!==null},t.Clipper.prototype.GetMaximaPair=function(r){return t.IntPoint.op_Equality(r.Next.Top,r.Top)&&r.Next.NextInLML===null?r.Next:t.IntPoint.op_Equality(r.Prev.Top,r.Top)&&r.Prev.NextInLML===null?r.Prev:null},t.Clipper.prototype.GetMaximaPairEx=function(r){var o=this.GetMaximaPair(r);return o===null||o.OutIdx===t.ClipperBase.Skip||o.NextInAEL===o.PrevInAEL&&!t.ClipperBase.IsHorizontal(o)?null:o},t.Clipper.prototype.ProcessIntersections=function(r){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(r),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,t.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},t.Clipper.prototype.BuildIntersectList=function(r){if(this.m_ActiveEdges!==null){var o=this.m_ActiveEdges;for(this.m_SortedEdges=o;o!==null;)o.PrevInSEL=o.PrevInAEL,o.NextInSEL=o.NextInAEL,o.Curr.X=t.Clipper.TopX(o,r),o=o.NextInAEL;for(var c=!0;c&&this.m_SortedEdges!==null;){for(c=!1,o=this.m_SortedEdges;o.NextInSEL!==null;){var m=o.NextInSEL,x=new t.IntPoint0;if(o.Curr.X>m.Curr.X){this.IntersectPoint(o,m,x),x.Y<r&&(x=new t.IntPoint2(t.Clipper.TopX(o,r),r));var _=new t.IntersectNode;_.Edge1=o,_.Edge2=m,_.Pt.X=x.X,_.Pt.Y=x.Y,t.use_xyz&&(_.Pt.Z=x.Z),this.m_IntersectList.push(_),this.SwapPositionsInSEL(o,m),c=!0}else o=m}if(o.PrevInSEL!==null)o.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},t.Clipper.prototype.EdgesAdjacent=function(r){return r.Edge1.NextInSEL===r.Edge2||r.Edge1.PrevInSEL===r.Edge2},t.Clipper.IntersectNodeSort=function(r,o){return o.Pt.Y-r.Pt.Y},t.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var r=this.m_IntersectList.length,o=0;o<r;o++){if(!this.EdgesAdjacent(this.m_IntersectList[o])){for(var c=o+1;c<r&&!this.EdgesAdjacent(this.m_IntersectList[c]);)c++;if(c===r)return!1;var m=this.m_IntersectList[o];this.m_IntersectList[o]=this.m_IntersectList[c],this.m_IntersectList[c]=m}this.SwapPositionsInSEL(this.m_IntersectList[o].Edge1,this.m_IntersectList[o].Edge2)}return!0},t.Clipper.prototype.ProcessIntersectList=function(){for(var r=0,o=this.m_IntersectList.length;r<o;r++){var c=this.m_IntersectList[r];this.IntersectEdges(c.Edge1,c.Edge2,c.Pt),this.SwapPositionsInAEL(c.Edge1,c.Edge2)}this.m_IntersectList.length=0};var En=function(r){return r<0?Math.ceil(r-.5):Math.round(r)},Ds=function(r){return r<0?Math.ceil(r-.5):Math.floor(r+.5)},Zr=function(r){return r<0?-Math.round(Math.abs(r)):Math.round(r)},sn=function(r){return r<0?(r-=.5,r<-2147483648?Math.ceil(r):r|0):(r+=.5,r>2147483647?Math.floor(r):r|0)};a.msie?t.Clipper.Round=En:a.chromium?t.Clipper.Round=Zr:a.safari?t.Clipper.Round=sn:t.Clipper.Round=Ds,t.Clipper.TopX=function(r,o){return o===r.Top.Y?r.Top.X:r.Bot.X+t.Clipper.Round(r.Dx*(o-r.Bot.Y))},t.Clipper.prototype.IntersectPoint=function(r,o,c){c.X=0,c.Y=0;var m,x;if(r.Dx===o.Dx){c.Y=r.Curr.Y,c.X=t.Clipper.TopX(r,c.Y);return}if(r.Delta.X===0)c.X=r.Bot.X,t.ClipperBase.IsHorizontal(o)?c.Y=o.Bot.Y:(x=o.Bot.Y-o.Bot.X/o.Dx,c.Y=t.Clipper.Round(c.X/o.Dx+x));else if(o.Delta.X===0)c.X=o.Bot.X,t.ClipperBase.IsHorizontal(r)?c.Y=r.Bot.Y:(m=r.Bot.Y-r.Bot.X/r.Dx,c.Y=t.Clipper.Round(c.X/r.Dx+m));else{m=r.Bot.X-r.Bot.Y*r.Dx,x=o.Bot.X-o.Bot.Y*o.Dx;var _=(x-m)/(r.Dx-o.Dx);c.Y=t.Clipper.Round(_),Math.abs(r.Dx)<Math.abs(o.Dx)?c.X=t.Clipper.Round(r.Dx*_+m):c.X=t.Clipper.Round(o.Dx*_+x)}if(c.Y<r.Top.Y||c.Y<o.Top.Y){if(r.Top.Y>o.Top.Y)return c.Y=r.Top.Y,c.X=t.Clipper.TopX(o,r.Top.Y),c.X<r.Top.X;c.Y=o.Top.Y,Math.abs(r.Dx)<Math.abs(o.Dx)?c.X=t.Clipper.TopX(r,c.Y):c.X=t.Clipper.TopX(o,c.Y)}c.Y>r.Curr.Y&&(c.Y=r.Curr.Y,Math.abs(r.Dx)>Math.abs(o.Dx)?c.X=t.Clipper.TopX(o,c.Y):c.X=t.Clipper.TopX(r,c.Y))},t.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(r){for(var o=this.m_ActiveEdges;o!==null;){var c=this.IsMaxima(o,r);if(c){var m=this.GetMaximaPairEx(o);c=m===null||!t.ClipperBase.IsHorizontal(m)}if(c){this.StrictlySimple&&this.InsertMaxima(o.Top.X);var x=o.PrevInAEL;this.DoMaxima(o),x===null?o=this.m_ActiveEdges:o=x.NextInAEL}else{if(this.IsIntermediate(o,r)&&t.ClipperBase.IsHorizontal(o.NextInLML)?(o=this.UpdateEdgeIntoAEL(o),o.OutIdx>=0&&this.AddOutPt(o,o.Bot),this.AddEdgeToSEL(o)):(o.Curr.X=t.Clipper.TopX(o,r),o.Curr.Y=r),t.use_xyz&&(o.Top.Y===r?o.Curr.Z=o.Top.Z:o.Bot.Y===r?o.Curr.Z=o.Bot.Z:o.Curr.Z=0),this.StrictlySimple){var x=o.PrevInAEL;if(o.OutIdx>=0&&o.WindDelta!==0&&x!==null&&x.OutIdx>=0&&x.Curr.X===o.Curr.X&&x.WindDelta!==0){var _=new t.IntPoint1(o.Curr);t.use_xyz&&this.SetZ(_,x,o);var B=this.AddOutPt(x,_),H=this.AddOutPt(o,_);this.AddJoin(B,H,_)}}o=o.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,o=this.m_ActiveEdges;o!==null;){if(this.IsIntermediate(o,r)){var B=null;o.OutIdx>=0&&(B=this.AddOutPt(o,o.Top)),o=this.UpdateEdgeIntoAEL(o);var x=o.PrevInAEL,V=o.NextInAEL;if(x!==null&&x.Curr.X===o.Bot.X&&x.Curr.Y===o.Bot.Y&&B!==null&&x.OutIdx>=0&&x.Curr.Y===x.Top.Y&&t.ClipperBase.SlopesEqual5(o.Curr,o.Top,x.Curr,x.Top,this.m_UseFullRange)&&o.WindDelta!==0&&x.WindDelta!==0){var H=this.AddOutPt(ePrev2,o.Bot);this.AddJoin(B,H,o.Top)}else if(V!==null&&V.Curr.X===o.Bot.X&&V.Curr.Y===o.Bot.Y&&B!==null&&V.OutIdx>=0&&V.Curr.Y===V.Top.Y&&t.ClipperBase.SlopesEqual5(o.Curr,o.Top,V.Curr,V.Top,this.m_UseFullRange)&&o.WindDelta!==0&&V.WindDelta!==0){var H=this.AddOutPt(V,o.Bot);this.AddJoin(B,H,o.Top)}}o=o.NextInAEL}},t.Clipper.prototype.DoMaxima=function(r){var o=this.GetMaximaPairEx(r);if(o===null){r.OutIdx>=0&&this.AddOutPt(r,r.Top),this.DeleteFromAEL(r);return}for(var c=r.NextInAEL;c!==null&&c!==o;)this.IntersectEdges(r,c,r.Top),this.SwapPositionsInAEL(r,c),c=r.NextInAEL;r.OutIdx===-1&&o.OutIdx===-1?(this.DeleteFromAEL(r),this.DeleteFromAEL(o)):r.OutIdx>=0&&o.OutIdx>=0?(r.OutIdx>=0&&this.AddLocalMaxPoly(r,o,r.Top),this.DeleteFromAEL(r),this.DeleteFromAEL(o)):t.use_lines&&r.WindDelta===0?(r.OutIdx>=0&&(this.AddOutPt(r,r.Top),r.OutIdx=t.ClipperBase.Unassigned),this.DeleteFromAEL(r),o.OutIdx>=0&&(this.AddOutPt(o,r.Top),o.OutIdx=t.ClipperBase.Unassigned),this.DeleteFromAEL(o)):t.Error("DoMaxima error")},t.Clipper.ReversePaths=function(r){for(var o=0,c=r.length;o<c;o++)r[o].reverse()},t.Clipper.Orientation=function(r){return t.Clipper.Area(r)>=0},t.Clipper.prototype.PointCount=function(r){if(r===null)return 0;var o=0,c=r;do o++,c=c.Next;while(c!==r);return o},t.Clipper.prototype.BuildResult=function(r){t.Clear(r);for(var o=0,c=this.m_PolyOuts.length;o<c;o++){var m=this.m_PolyOuts[o];if(m.Pts!==null){var x=m.Pts.Prev,_=this.PointCount(x);if(!(_<2)){for(var B=new Array(_),H=0;H<_;H++)B[H]=x.Pt,x=x.Prev;r.push(B)}}}},t.Clipper.prototype.BuildResult2=function(r){r.Clear();for(var o=0,c=this.m_PolyOuts.length;o<c;o++){var m=this.m_PolyOuts[o],x=this.PointCount(m.Pts);if(!(m.IsOpen&&x<2||!m.IsOpen&&x<3)){this.FixHoleLinkage(m);var _=new t.PolyNode;r.m_AllPolys.push(_),m.PolyNode=_,_.m_polygon.length=x;for(var B=m.Pts.Prev,H=0;H<x;H++)_.m_polygon[H]=B.Pt,B=B.Prev}}for(var o=0,c=this.m_PolyOuts.length;o<c;o++){var m=this.m_PolyOuts[o];m.PolyNode!==null&&(m.IsOpen?(m.PolyNode.IsOpen=!0,r.AddChild(m.PolyNode)):m.FirstLeft!==null&&m.FirstLeft.PolyNode!==null?m.FirstLeft.PolyNode.AddChild(m.PolyNode):r.AddChild(m.PolyNode))}},t.Clipper.prototype.FixupOutPolyline=function(r){for(var o=r.Pts,c=o.Prev;o!==c;)if(o=o.Next,t.IntPoint.op_Equality(o.Pt,o.Prev.Pt)){o===c&&(c=o.Prev);var m=o.Prev;m.Next=o.Next,o.Next.Prev=m,o=m}o===o.Prev&&(r.Pts=null)},t.Clipper.prototype.FixupOutPolygon=function(r){var o=null;r.BottomPt=null;for(var c=r.Pts,m=this.PreserveCollinear||this.StrictlySimple;;){if(c.Prev===c||c.Prev===c.Next){r.Pts=null;return}if(t.IntPoint.op_Equality(c.Pt,c.Next.Pt)||t.IntPoint.op_Equality(c.Pt,c.Prev.Pt)||t.ClipperBase.SlopesEqual4(c.Prev.Pt,c.Pt,c.Next.Pt,this.m_UseFullRange)&&(!m||!this.Pt2IsBetweenPt1AndPt3(c.Prev.Pt,c.Pt,c.Next.Pt)))o=null,c.Prev.Next=c.Next,c.Next.Prev=c.Prev,c=c.Prev;else{if(c===o)break;o===null&&(o=c),c=c.Next}}r.Pts=c},t.Clipper.prototype.DupOutPt=function(r,o){var c=new t.OutPt;return c.Pt.X=r.Pt.X,c.Pt.Y=r.Pt.Y,t.use_xyz&&(c.Pt.Z=r.Pt.Z),c.Idx=r.Idx,o?(c.Next=r.Next,c.Prev=r,r.Next.Prev=c,r.Next=c):(c.Prev=r.Prev,c.Next=r,r.Prev.Next=c,r.Prev=c),c},t.Clipper.prototype.GetOverlap=function(r,o,c,m,x){return r<o?c<m?(x.Left=Math.max(r,c),x.Right=Math.min(o,m)):(x.Left=Math.max(r,m),x.Right=Math.min(o,c)):c<m?(x.Left=Math.max(o,c),x.Right=Math.min(r,m)):(x.Left=Math.max(o,m),x.Right=Math.min(r,c)),x.Left<x.Right},t.Clipper.prototype.JoinHorz=function(r,o,c,m,x,_){var B=r.Pt.X>o.Pt.X?t.Direction.dRightToLeft:t.Direction.dLeftToRight,H=c.Pt.X>m.Pt.X?t.Direction.dRightToLeft:t.Direction.dLeftToRight;if(B===H)return!1;if(B===t.Direction.dLeftToRight){for(;r.Next.Pt.X<=x.X&&r.Next.Pt.X>=r.Pt.X&&r.Next.Pt.Y===x.Y;)r=r.Next;_&&r.Pt.X!==x.X&&(r=r.Next),o=this.DupOutPt(r,!_),t.IntPoint.op_Inequality(o.Pt,x)&&(r=o,r.Pt.X=x.X,r.Pt.Y=x.Y,t.use_xyz&&(r.Pt.Z=x.Z),o=this.DupOutPt(r,!_))}else{for(;r.Next.Pt.X>=x.X&&r.Next.Pt.X<=r.Pt.X&&r.Next.Pt.Y===x.Y;)r=r.Next;!_&&r.Pt.X!==x.X&&(r=r.Next),o=this.DupOutPt(r,_),t.IntPoint.op_Inequality(o.Pt,x)&&(r=o,r.Pt.X=x.X,r.Pt.Y=x.Y,t.use_xyz&&(r.Pt.Z=x.Z),o=this.DupOutPt(r,_))}if(H===t.Direction.dLeftToRight){for(;c.Next.Pt.X<=x.X&&c.Next.Pt.X>=c.Pt.X&&c.Next.Pt.Y===x.Y;)c=c.Next;_&&c.Pt.X!==x.X&&(c=c.Next),m=this.DupOutPt(c,!_),t.IntPoint.op_Inequality(m.Pt,x)&&(c=m,c.Pt.X=x.X,c.Pt.Y=x.Y,t.use_xyz&&(c.Pt.Z=x.Z),m=this.DupOutPt(c,!_))}else{for(;c.Next.Pt.X>=x.X&&c.Next.Pt.X<=c.Pt.X&&c.Next.Pt.Y===x.Y;)c=c.Next;!_&&c.Pt.X!==x.X&&(c=c.Next),m=this.DupOutPt(c,_),t.IntPoint.op_Inequality(m.Pt,x)&&(c=m,c.Pt.X=x.X,c.Pt.Y=x.Y,t.use_xyz&&(c.Pt.Z=x.Z),m=this.DupOutPt(c,_))}return B===t.Direction.dLeftToRight===_?(r.Prev=c,c.Next=r,o.Next=m,m.Prev=o):(r.Next=c,c.Prev=r,o.Prev=m,m.Next=o),!0},t.Clipper.prototype.JoinPoints=function(r,o,c){var m=r.OutPt1,x=new t.OutPt,_=r.OutPt2,B=new t.OutPt,H=r.OutPt1.Pt.Y===r.OffPt.Y;if(H&&t.IntPoint.op_Equality(r.OffPt,r.OutPt1.Pt)&&t.IntPoint.op_Equality(r.OffPt,r.OutPt2.Pt)){if(o!==c)return!1;for(x=r.OutPt1.Next;x!==m&&t.IntPoint.op_Equality(x.Pt,r.OffPt);)x=x.Next;var V=x.Pt.Y>r.OffPt.Y;for(B=r.OutPt2.Next;B!==_&&t.IntPoint.op_Equality(B.Pt,r.OffPt);)B=B.Next;var ct=B.Pt.Y>r.OffPt.Y;return V===ct?!1:V?(x=this.DupOutPt(m,!1),B=this.DupOutPt(_,!0),m.Prev=_,_.Next=m,x.Next=B,B.Prev=x,r.OutPt1=m,r.OutPt2=x,!0):(x=this.DupOutPt(m,!0),B=this.DupOutPt(_,!1),m.Next=_,_.Prev=m,x.Prev=B,B.Next=x,r.OutPt1=m,r.OutPt2=x,!0)}else if(H){for(x=m;m.Prev.Pt.Y===m.Pt.Y&&m.Prev!==x&&m.Prev!==_;)m=m.Prev;for(;x.Next.Pt.Y===x.Pt.Y&&x.Next!==m&&x.Next!==_;)x=x.Next;if(x.Next===m||x.Next===_)return!1;for(B=_;_.Prev.Pt.Y===_.Pt.Y&&_.Prev!==B&&_.Prev!==x;)_=_.Prev;for(;B.Next.Pt.Y===B.Pt.Y&&B.Next!==_&&B.Next!==m;)B=B.Next;if(B.Next===_||B.Next===m)return!1;var Tt={Left:null,Right:null};if(!this.GetOverlap(m.Pt.X,x.Pt.X,_.Pt.X,B.Pt.X,Tt))return!1;var Nt=Tt.Left,Dt=Tt.Right,Kt=new t.IntPoint0,fe;return m.Pt.X>=Nt&&m.Pt.X<=Dt?(Kt.X=m.Pt.X,Kt.Y=m.Pt.Y,t.use_xyz&&(Kt.Z=m.Pt.Z),fe=m.Pt.X>x.Pt.X):_.Pt.X>=Nt&&_.Pt.X<=Dt?(Kt.X=_.Pt.X,Kt.Y=_.Pt.Y,t.use_xyz&&(Kt.Z=_.Pt.Z),fe=_.Pt.X>B.Pt.X):x.Pt.X>=Nt&&x.Pt.X<=Dt?(Kt.X=x.Pt.X,Kt.Y=x.Pt.Y,t.use_xyz&&(Kt.Z=x.Pt.Z),fe=x.Pt.X>m.Pt.X):(Kt.X=B.Pt.X,Kt.Y=B.Pt.Y,t.use_xyz&&(Kt.Z=B.Pt.Z),fe=B.Pt.X>_.Pt.X),r.OutPt1=m,r.OutPt2=_,this.JoinHorz(m,x,_,B,Kt,fe)}else{for(x=m.Next;t.IntPoint.op_Equality(x.Pt,m.Pt)&&x!==m;)x=x.Next;var ye=x.Pt.Y>m.Pt.Y||!t.ClipperBase.SlopesEqual4(m.Pt,x.Pt,r.OffPt,this.m_UseFullRange);if(ye){for(x=m.Prev;t.IntPoint.op_Equality(x.Pt,m.Pt)&&x!==m;)x=x.Prev;if(x.Pt.Y>m.Pt.Y||!t.ClipperBase.SlopesEqual4(m.Pt,x.Pt,r.OffPt,this.m_UseFullRange))return!1}for(B=_.Next;t.IntPoint.op_Equality(B.Pt,_.Pt)&&B!==_;)B=B.Next;var ce=B.Pt.Y>_.Pt.Y||!t.ClipperBase.SlopesEqual4(_.Pt,B.Pt,r.OffPt,this.m_UseFullRange);if(ce){for(B=_.Prev;t.IntPoint.op_Equality(B.Pt,_.Pt)&&B!==_;)B=B.Prev;if(B.Pt.Y>_.Pt.Y||!t.ClipperBase.SlopesEqual4(_.Pt,B.Pt,r.OffPt,this.m_UseFullRange))return!1}return x===m||B===_||x===B||o===c&&ye===ce?!1:ye?(x=this.DupOutPt(m,!1),B=this.DupOutPt(_,!0),m.Prev=_,_.Next=m,x.Next=B,B.Prev=x,r.OutPt1=m,r.OutPt2=x,!0):(x=this.DupOutPt(m,!0),B=this.DupOutPt(_,!1),m.Next=_,_.Prev=m,x.Prev=B,B.Next=x,r.OutPt1=m,r.OutPt2=x,!0)}},t.Clipper.GetBounds=function(r){for(var o=0,c=r.length;o<c&&r[o].length===0;)o++;if(o===c)return new t.IntRect(0,0,0,0);var m=new t.IntRect;for(m.left=r[o][0].X,m.right=m.left,m.top=r[o][0].Y,m.bottom=m.top;o<c;o++)for(var x=0,_=r[o].length;x<_;x++)r[o][x].X<m.left?m.left=r[o][x].X:r[o][x].X>m.right&&(m.right=r[o][x].X),r[o][x].Y<m.top?m.top=r[o][x].Y:r[o][x].Y>m.bottom&&(m.bottom=r[o][x].Y);return m},t.Clipper.prototype.GetBounds2=function(r){var o=r,c=new t.IntRect;for(c.left=r.Pt.X,c.right=r.Pt.X,c.top=r.Pt.Y,c.bottom=r.Pt.Y,r=r.Next;r!==o;)r.Pt.X<c.left&&(c.left=r.Pt.X),r.Pt.X>c.right&&(c.right=r.Pt.X),r.Pt.Y<c.top&&(c.top=r.Pt.Y),r.Pt.Y>c.bottom&&(c.bottom=r.Pt.Y),r=r.Next;return c},t.Clipper.PointInPolygon=function(r,o){var c=0,m=o.length;if(m<3)return 0;for(var x=o[0],_=1;_<=m;++_){var B=_===m?o[0]:o[_];if(B.Y===r.Y&&(B.X===r.X||x.Y===r.Y&&B.X>r.X==x.X<r.X))return-1;if(x.Y<r.Y!=B.Y<r.Y){if(x.X>=r.X)if(B.X>r.X)c=1-c;else{var H=(x.X-r.X)*(B.Y-r.Y)-(B.X-r.X)*(x.Y-r.Y);if(H===0)return-1;H>0==B.Y>x.Y&&(c=1-c)}else if(B.X>r.X){var H=(x.X-r.X)*(B.Y-r.Y)-(B.X-r.X)*(x.Y-r.Y);if(H===0)return-1;H>0==B.Y>x.Y&&(c=1-c)}}x=B}return c},t.Clipper.prototype.PointInPolygon=function(r,o){var c=0,m=o,x=r.X,_=r.Y,B=o.Pt.X,H=o.Pt.Y;do{o=o.Next;var V=o.Pt.X,ct=o.Pt.Y;if(ct===_&&(V===x||H===_&&V>x==B<x))return-1;if(H<_!=ct<_){if(B>=x)if(V>x)c=1-c;else{var Tt=(B-x)*(ct-_)-(V-x)*(H-_);if(Tt===0)return-1;Tt>0==ct>H&&(c=1-c)}else if(V>x){var Tt=(B-x)*(ct-_)-(V-x)*(H-_);if(Tt===0)return-1;Tt>0==ct>H&&(c=1-c)}}B=V,H=ct}while(m!==o);return c},t.Clipper.prototype.Poly2ContainsPoly1=function(r,o){var c=r;do{var m=this.PointInPolygon(c.Pt,o);if(m>=0)return m>0;c=c.Next}while(c!==r);return!0},t.Clipper.prototype.FixupFirstLefts1=function(r,o){for(var c,m,x=0,_=this.m_PolyOuts.length;x<_;x++)c=this.m_PolyOuts[x],m=t.Clipper.ParseFirstLeft(c.FirstLeft),c.Pts!==null&&m===r&&this.Poly2ContainsPoly1(c.Pts,o.Pts)&&(c.FirstLeft=o)},t.Clipper.prototype.FixupFirstLefts2=function(r,o){for(var c=o.FirstLeft,m,x,_=0,B=this.m_PolyOuts.length;_<B;_++)m=this.m_PolyOuts[_],!(m.Pts===null||m===o||m===r)&&(x=t.Clipper.ParseFirstLeft(m.FirstLeft),!(x!==c&&x!==r&&x!==o)&&(this.Poly2ContainsPoly1(m.Pts,r.Pts)?m.FirstLeft=r:this.Poly2ContainsPoly1(m.Pts,o.Pts)?m.FirstLeft=o:(m.FirstLeft===r||m.FirstLeft===o)&&(m.FirstLeft=c)))},t.Clipper.prototype.FixupFirstLefts3=function(r,o){for(var c,m,x=0,_=this.m_PolyOuts.length;x<_;x++)c=this.m_PolyOuts[x],m=t.Clipper.ParseFirstLeft(c.FirstLeft),c.Pts!==null&&m===r&&(c.FirstLeft=o)},t.Clipper.ParseFirstLeft=function(r){for(;r!==null&&r.Pts===null;)r=r.FirstLeft;return r},t.Clipper.prototype.JoinCommonEdges=function(){for(var r=0,o=this.m_Joins.length;r<o;r++){var c=this.m_Joins[r],m=this.GetOutRec(c.OutPt1.Idx),x=this.GetOutRec(c.OutPt2.Idx);if(!(m.Pts===null||x.Pts===null)&&!(m.IsOpen||x.IsOpen)){var _;m===x?_=m:this.OutRec1RightOfOutRec2(m,x)?_=x:this.OutRec1RightOfOutRec2(x,m)?_=m:_=this.GetLowermostRec(m,x),this.JoinPoints(c,m,x)&&(m===x?(m.Pts=c.OutPt1,m.BottomPt=null,x=this.CreateOutRec(),x.Pts=c.OutPt2,this.UpdateOutPtIdxs(x),this.Poly2ContainsPoly1(x.Pts,m.Pts)?(x.IsHole=!m.IsHole,x.FirstLeft=m,this.m_UsingPolyTree&&this.FixupFirstLefts2(x,m),(x.IsHole^this.ReverseSolution)==this.Area$1(x)>0&&this.ReversePolyPtLinks(x.Pts)):this.Poly2ContainsPoly1(m.Pts,x.Pts)?(x.IsHole=m.IsHole,m.IsHole=!x.IsHole,x.FirstLeft=m.FirstLeft,m.FirstLeft=x,this.m_UsingPolyTree&&this.FixupFirstLefts2(m,x),(m.IsHole^this.ReverseSolution)==this.Area$1(m)>0&&this.ReversePolyPtLinks(m.Pts)):(x.IsHole=m.IsHole,x.FirstLeft=m.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(m,x))):(x.Pts=null,x.BottomPt=null,x.Idx=m.Idx,m.IsHole=_.IsHole,_===x&&(m.FirstLeft=x.FirstLeft),x.FirstLeft=m,this.m_UsingPolyTree&&this.FixupFirstLefts3(x,m)))}}},t.Clipper.prototype.UpdateOutPtIdxs=function(r){var o=r.Pts;do o.Idx=r.Idx,o=o.Prev;while(o!==r.Pts)},t.Clipper.prototype.DoSimplePolygons=function(){for(var r=0;r<this.m_PolyOuts.length;){var o=this.m_PolyOuts[r++],c=o.Pts;if(!(c===null||o.IsOpen))do{for(var m=c.Next;m!==o.Pts;){if(t.IntPoint.op_Equality(c.Pt,m.Pt)&&m.Next!==c&&m.Prev!==c){var x=c.Prev,_=m.Prev;c.Prev=_,_.Next=c,m.Prev=x,x.Next=m,o.Pts=c;var B=this.CreateOutRec();B.Pts=m,this.UpdateOutPtIdxs(B),this.Poly2ContainsPoly1(B.Pts,o.Pts)?(B.IsHole=!o.IsHole,B.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(B,o)):this.Poly2ContainsPoly1(o.Pts,B.Pts)?(B.IsHole=o.IsHole,o.IsHole=!B.IsHole,B.FirstLeft=o.FirstLeft,o.FirstLeft=B,this.m_UsingPolyTree&&this.FixupFirstLefts2(o,B)):(B.IsHole=o.IsHole,B.FirstLeft=o.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(o,B)),m=c}m=m.Next}c=c.Next}while(c!==o.Pts)}},t.Clipper.Area=function(r){if(!Array.isArray(r))return 0;var o=r.length;if(o<3)return 0;for(var c=0,m=0,x=o-1;m<o;++m)c+=(r[x].X+r[m].X)*(r[x].Y-r[m].Y),x=m;return-c*.5},t.Clipper.prototype.Area=function(r){var o=r;if(r===null)return 0;var c=0;do c=c+(r.Prev.Pt.X+r.Pt.X)*(r.Prev.Pt.Y-r.Pt.Y),r=r.Next;while(r!==o);return c*.5},t.Clipper.prototype.Area$1=function(r){return this.Area(r.Pts)},t.Clipper.SimplifyPolygon=function(r,o){var c=new Array,m=new t.Clipper(0);return m.StrictlySimple=!0,m.AddPath(r,t.PolyType.ptSubject,!0),m.Execute(t.ClipType.ctUnion,c,o,o),c},t.Clipper.SimplifyPolygons=function(r,o){typeof o>"u"&&(o=t.PolyFillType.pftEvenOdd);var c=new Array,m=new t.Clipper(0);return m.StrictlySimple=!0,m.AddPaths(r,t.PolyType.ptSubject,!0),m.Execute(t.ClipType.ctUnion,c,o,o),c},t.Clipper.DistanceSqrd=function(r,o){var c=r.X-o.X,m=r.Y-o.Y;return c*c+m*m},t.Clipper.DistanceFromLineSqrd=function(r,o,c){var m=o.Y-c.Y,x=c.X-o.X,_=m*o.X+x*o.Y;return _=m*r.X+x*r.Y-_,_*_/(m*m+x*x)},t.Clipper.SlopesNearCollinear=function(r,o,c,m){return Math.abs(r.X-o.X)>Math.abs(r.Y-o.Y)?r.X>o.X==r.X<c.X?t.Clipper.DistanceFromLineSqrd(r,o,c)<m:o.X>r.X==o.X<c.X?t.Clipper.DistanceFromLineSqrd(o,r,c)<m:t.Clipper.DistanceFromLineSqrd(c,r,o)<m:r.Y>o.Y==r.Y<c.Y?t.Clipper.DistanceFromLineSqrd(r,o,c)<m:o.Y>r.Y==o.Y<c.Y?t.Clipper.DistanceFromLineSqrd(o,r,c)<m:t.Clipper.DistanceFromLineSqrd(c,r,o)<m},t.Clipper.PointsAreClose=function(r,o,c){var m=r.X-o.X,x=r.Y-o.Y;return m*m+x*x<=c},t.Clipper.ExcludeOp=function(r){var o=r.Prev;return o.Next=r.Next,r.Next.Prev=o,o.Idx=0,o},t.Clipper.CleanPolygon=function(r,o){typeof o>"u"&&(o=1.415);var c=r.length;if(c===0)return new Array;for(var m=new Array(c),x=0;x<c;++x)m[x]=new t.OutPt;for(var x=0;x<c;++x)m[x].Pt=r[x],m[x].Next=m[(x+1)%c],m[x].Next.Prev=m[x],m[x].Idx=0;for(var _=o*o,B=m[0];B.Idx===0&&B.Next!==B.Prev;)t.Clipper.PointsAreClose(B.Pt,B.Prev.Pt,_)?(B=t.Clipper.ExcludeOp(B),c--):t.Clipper.PointsAreClose(B.Prev.Pt,B.Next.Pt,_)?(t.Clipper.ExcludeOp(B.Next),B=t.Clipper.ExcludeOp(B),c-=2):t.Clipper.SlopesNearCollinear(B.Prev.Pt,B.Pt,B.Next.Pt,_)?(B=t.Clipper.ExcludeOp(B),c--):(B.Idx=1,B=B.Next);c<3&&(c=0);for(var H=new Array(c),x=0;x<c;++x)H[x]=new t.IntPoint1(B.Pt),B=B.Next;return m=null,H},t.Clipper.CleanPolygons=function(r,o){for(var c=new Array(r.length),m=0,x=r.length;m<x;m++)c[m]=t.Clipper.CleanPolygon(r[m],o);return c},t.Clipper.Minkowski=function(r,o,c,m){var x=m?1:0,_=r.length,B=o.length,H=new Array;if(c)for(var V=0;V<B;V++){for(var ct=new Array(_),Tt=0,Nt=r.length,Dt=r[Tt];Tt<Nt;Tt++,Dt=r[Tt])ct[Tt]=new t.IntPoint2(o[V].X+Dt.X,o[V].Y+Dt.Y);H.push(ct)}else for(var V=0;V<B;V++){for(var ct=new Array(_),Tt=0,Nt=r.length,Dt=r[Tt];Tt<Nt;Tt++,Dt=r[Tt])ct[Tt]=new t.IntPoint2(o[V].X-Dt.X,o[V].Y-Dt.Y);H.push(ct)}for(var Kt=new Array,V=0;V<B-1+x;V++)for(var Tt=0;Tt<_;Tt++){var fe=new Array;fe.push(H[V%B][Tt%_]),fe.push(H[(V+1)%B][Tt%_]),fe.push(H[(V+1)%B][(Tt+1)%_]),fe.push(H[V%B][(Tt+1)%_]),t.Clipper.Orientation(fe)||fe.reverse(),Kt.push(fe)}return Kt},t.Clipper.MinkowskiSum=function(r,o,c){if(o[0]instanceof Array){for(var x=o,B=new t.Paths,_=new t.Clipper,H=0;H<x.length;++H){var V=t.Clipper.Minkowski(r,x[H],!0,c);if(_.AddPaths(V,t.PolyType.ptSubject,!0),c){var m=t.Clipper.TranslatePath(x[H],r[0]);_.AddPath(m,t.PolyType.ptClip,!0)}}return _.Execute(t.ClipType.ctUnion,B,t.PolyFillType.pftNonZero,t.PolyFillType.pftNonZero),B}else{var m=o,x=t.Clipper.Minkowski(r,m,!0,c),_=new t.Clipper;return _.AddPaths(x,t.PolyType.ptSubject,!0),_.Execute(t.ClipType.ctUnion,x,t.PolyFillType.pftNonZero,t.PolyFillType.pftNonZero),x}},t.Clipper.TranslatePath=function(r,o){for(var c=new t.Path,m=0;m<r.length;m++)c.push(new t.IntPoint2(r[m].X+o.X,r[m].Y+o.Y));return c},t.Clipper.MinkowskiDiff=function(r,o){var c=t.Clipper.Minkowski(r,o,!1,!0),m=new t.Clipper;return m.AddPaths(c,t.PolyType.ptSubject,!0),m.Execute(t.ClipType.ctUnion,c,t.PolyFillType.pftNonZero,t.PolyFillType.pftNonZero),c},t.Clipper.PolyTreeToPaths=function(r){var o=new Array;return t.Clipper.AddPolyNodeToPaths(r,t.Clipper.NodeType.ntAny,o),o},t.Clipper.AddPolyNodeToPaths=function(r,o,c){var m=!0;switch(o){case t.Clipper.NodeType.ntOpen:return;case t.Clipper.NodeType.ntClosed:m=!r.IsOpen;break}r.m_polygon.length>0&&m&&c.push(r.m_polygon);for(var x=0,_=r.Childs(),B=_.length,H=_[x];x<B;x++,H=_[x])t.Clipper.AddPolyNodeToPaths(H,o,c)},t.Clipper.OpenPathsFromPolyTree=function(r){for(var o=new t.Paths,c=0,m=r.ChildCount();c<m;c++)r.Childs()[c].IsOpen&&o.push(r.Childs()[c].m_polygon);return o},t.Clipper.ClosedPathsFromPolyTree=function(r){var o=new t.Paths;return t.Clipper.AddPolyNodeToPaths(r,t.Clipper.NodeType.ntClosed,o),o},kn(t.Clipper,t.ClipperBase),t.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},t.ClipperOffset=function(r,o){typeof r>"u"&&(r=2),typeof o>"u"&&(o=t.ClipperOffset.def_arc_tolerance),this.m_destPolys=new t.Paths,this.m_srcPoly=new t.Path,this.m_destPoly=new t.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new t.IntPoint0,this.m_polyNodes=new t.PolyNode,this.MiterLimit=r,this.ArcTolerance=o,this.m_lowest.X=-1},t.ClipperOffset.two_pi=6.28318530717959,t.ClipperOffset.def_arc_tolerance=.25,t.ClipperOffset.prototype.Clear=function(){t.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},t.ClipperOffset.Round=t.Clipper.Round,t.ClipperOffset.prototype.AddPath=function(r,o,c){var m=r.length-1;if(!(m<0)){var x=new t.PolyNode;if(x.m_jointype=o,x.m_endtype=c,c===t.EndType.etClosedLine||c===t.EndType.etClosedPolygon)for(;m>0&&t.IntPoint.op_Equality(r[0],r[m]);)m--;x.m_polygon.push(r[0]);for(var _=0,B=0,H=1;H<=m;H++)t.IntPoint.op_Inequality(x.m_polygon[_],r[H])&&(_++,x.m_polygon.push(r[H]),(r[H].Y>x.m_polygon[B].Y||r[H].Y===x.m_polygon[B].Y&&r[H].X<x.m_polygon[B].X)&&(B=_));if(!(c===t.EndType.etClosedPolygon&&_<2)&&(this.m_polyNodes.AddChild(x),c===t.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new t.IntPoint2(this.m_polyNodes.ChildCount()-1,B);else{var V=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(x.m_polygon[B].Y>V.Y||x.m_polygon[B].Y===V.Y&&x.m_polygon[B].X<V.X)&&(this.m_lowest=new t.IntPoint2(this.m_polyNodes.ChildCount()-1,B))}}},t.ClipperOffset.prototype.AddPaths=function(r,o,c){for(var m=0,x=r.length;m<x;m++)this.AddPath(r[m],o,c)},t.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!t.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var r=0;r<this.m_polyNodes.ChildCount();r++){var o=this.m_polyNodes.Childs()[r];(o.m_endtype===t.EndType.etClosedPolygon||o.m_endtype===t.EndType.etClosedLine&&t.Clipper.Orientation(o.m_polygon))&&o.m_polygon.reverse()}else for(var r=0;r<this.m_polyNodes.ChildCount();r++){var o=this.m_polyNodes.Childs()[r];o.m_endtype===t.EndType.etClosedLine&&!t.Clipper.Orientation(o.m_polygon)&&o.m_polygon.reverse()}},t.ClipperOffset.GetUnitNormal=function(r,o){var c=o.X-r.X,m=o.Y-r.Y;if(c===0&&m===0)return new t.DoublePoint2(0,0);var x=1/Math.sqrt(c*c+m*m);return c*=x,m*=x,new t.DoublePoint2(m,-c)},t.ClipperOffset.prototype.DoOffset=function(r){if(this.m_destPolys=new Array,this.m_delta=r,t.ClipperBase.near_zero(r)){for(var o=0;o<this.m_polyNodes.ChildCount();o++){var c=this.m_polyNodes.Childs()[o];c.m_endtype===t.EndType.etClosedPolygon&&this.m_destPolys.push(c.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var m;this.ArcTolerance<=0?m=t.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(r)*t.ClipperOffset.def_arc_tolerance?m=Math.abs(r)*t.ClipperOffset.def_arc_tolerance:m=this.ArcTolerance;var x=3.14159265358979/Math.acos(1-m/Math.abs(r));this.m_sin=Math.sin(t.ClipperOffset.two_pi/x),this.m_cos=Math.cos(t.ClipperOffset.two_pi/x),this.m_StepsPerRad=x/t.ClipperOffset.two_pi,r<0&&(this.m_sin=-this.m_sin);for(var o=0;o<this.m_polyNodes.ChildCount();o++){var c=this.m_polyNodes.Childs()[o];this.m_srcPoly=c.m_polygon;var _=this.m_srcPoly.length;if(!(_===0||r<=0&&(_<3||c.m_endtype!==t.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,_===1){if(c.m_jointype===t.JoinType.jtRound)for(var B=1,H=0,V=1;V<=x;V++){this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[0].X+B*r),t.ClipperOffset.Round(this.m_srcPoly[0].Y+H*r)));var ct=B;B=B*this.m_cos-this.m_sin*H,H=ct*this.m_sin+H*this.m_cos}else for(var B=-1,H=-1,V=0;V<4;++V)this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[0].X+B*r),t.ClipperOffset.Round(this.m_srcPoly[0].Y+H*r))),B<0?B=1:H<0?H=1:B=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var V=0;V<_-1;V++)this.m_normals.push(t.ClipperOffset.GetUnitNormal(this.m_srcPoly[V],this.m_srcPoly[V+1]));if(c.m_endtype===t.EndType.etClosedLine||c.m_endtype===t.EndType.etClosedPolygon?this.m_normals.push(t.ClipperOffset.GetUnitNormal(this.m_srcPoly[_-1],this.m_srcPoly[0])):this.m_normals.push(new t.DoublePoint1(this.m_normals[_-2])),c.m_endtype===t.EndType.etClosedPolygon){for(var Tt=_-1,V=0;V<_;V++)Tt=this.OffsetPoint(V,Tt,c.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(c.m_endtype===t.EndType.etClosedLine){for(var Tt=_-1,V=0;V<_;V++)Tt=this.OffsetPoint(V,Tt,c.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var Nt=this.m_normals[_-1],V=_-1;V>0;V--)this.m_normals[V]=new t.DoublePoint2(-this.m_normals[V-1].X,-this.m_normals[V-1].Y);this.m_normals[0]=new t.DoublePoint2(-Nt.X,-Nt.Y),Tt=0;for(var V=_-1;V>=0;V--)Tt=this.OffsetPoint(V,Tt,c.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var Tt=0,V=1;V<_-1;++V)Tt=this.OffsetPoint(V,Tt,c.m_jointype);var Dt;if(c.m_endtype===t.EndType.etOpenButt){var V=_-1;Dt=new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[V].X+this.m_normals[V].X*r),t.ClipperOffset.Round(this.m_srcPoly[V].Y+this.m_normals[V].Y*r)),this.m_destPoly.push(Dt),Dt=new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[V].X-this.m_normals[V].X*r),t.ClipperOffset.Round(this.m_srcPoly[V].Y-this.m_normals[V].Y*r)),this.m_destPoly.push(Dt)}else{var V=_-1;Tt=_-2,this.m_sinA=0,this.m_normals[V]=new t.DoublePoint2(-this.m_normals[V].X,-this.m_normals[V].Y),c.m_endtype===t.EndType.etOpenSquare?this.DoSquare(V,Tt):this.DoRound(V,Tt)}for(var V=_-1;V>0;V--)this.m_normals[V]=new t.DoublePoint2(-this.m_normals[V-1].X,-this.m_normals[V-1].Y);this.m_normals[0]=new t.DoublePoint2(-this.m_normals[1].X,-this.m_normals[1].Y),Tt=_-1;for(var V=Tt-1;V>0;--V)Tt=this.OffsetPoint(V,Tt,c.m_jointype);c.m_endtype===t.EndType.etOpenButt?(Dt=new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*r),t.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*r)),this.m_destPoly.push(Dt),Dt=new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*r),t.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*r)),this.m_destPoly.push(Dt)):(Tt=1,this.m_sinA=0,c.m_endtype===t.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},t.ClipperOffset.prototype.Execute=function(){var r=arguments,o=r[0]instanceof t.PolyTree;if(o){var c=r[0],m=r[1];c.Clear(),this.FixOrientations(),this.DoOffset(m);var x=new t.Clipper(0);if(x.AddPaths(this.m_destPolys,t.PolyType.ptSubject,!0),m>0)x.Execute(t.ClipType.ctUnion,c,t.PolyFillType.pftPositive,t.PolyFillType.pftPositive);else{var _=t.Clipper.GetBounds(this.m_destPolys),B=new t.Path;if(B.push(new t.IntPoint2(_.left-10,_.bottom+10)),B.push(new t.IntPoint2(_.right+10,_.bottom+10)),B.push(new t.IntPoint2(_.right+10,_.top-10)),B.push(new t.IntPoint2(_.left-10,_.top-10)),x.AddPath(B,t.PolyType.ptSubject,!0),x.ReverseSolution=!0,x.Execute(t.ClipType.ctUnion,c,t.PolyFillType.pftNegative,t.PolyFillType.pftNegative),c.ChildCount()===1&&c.Childs()[0].ChildCount()>0){var H=c.Childs()[0];c.Childs()[0]=H.Childs()[0],c.Childs()[0].m_Parent=c;for(var V=1;V<H.ChildCount();V++)c.AddChild(H.Childs()[V])}else c.Clear()}}else{var c=r[0],m=r[1];t.Clear(c),this.FixOrientations(),this.DoOffset(m);var x=new t.Clipper(0);if(x.AddPaths(this.m_destPolys,t.PolyType.ptSubject,!0),m>0)x.Execute(t.ClipType.ctUnion,c,t.PolyFillType.pftPositive,t.PolyFillType.pftPositive);else{var _=t.Clipper.GetBounds(this.m_destPolys),B=new t.Path;B.push(new t.IntPoint2(_.left-10,_.bottom+10)),B.push(new t.IntPoint2(_.right+10,_.bottom+10)),B.push(new t.IntPoint2(_.right+10,_.top-10)),B.push(new t.IntPoint2(_.left-10,_.top-10)),x.AddPath(B,t.PolyType.ptSubject,!0),x.ReverseSolution=!0,x.Execute(t.ClipType.ctUnion,c,t.PolyFillType.pftNegative,t.PolyFillType.pftNegative),c.length>0&&c.splice(0,1)}}},t.ClipperOffset.prototype.OffsetPoint=function(r,o,c){if(this.m_sinA=this.m_normals[o].X*this.m_normals[r].Y-this.m_normals[r].X*this.m_normals[o].Y,Math.abs(this.m_sinA*this.m_delta)<1){var m=this.m_normals[o].X*this.m_normals[r].X+this.m_normals[r].Y*this.m_normals[o].Y;if(m>0)return this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[r].X+this.m_normals[o].X*this.m_delta),t.ClipperOffset.Round(this.m_srcPoly[r].Y+this.m_normals[o].Y*this.m_delta))),o}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[r].X+this.m_normals[o].X*this.m_delta),t.ClipperOffset.Round(this.m_srcPoly[r].Y+this.m_normals[o].Y*this.m_delta))),this.m_destPoly.push(new t.IntPoint1(this.m_srcPoly[r])),this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[r].X+this.m_normals[r].X*this.m_delta),t.ClipperOffset.Round(this.m_srcPoly[r].Y+this.m_normals[r].Y*this.m_delta)));else switch(c){case t.JoinType.jtMiter:{var x=1+(this.m_normals[r].X*this.m_normals[o].X+this.m_normals[r].Y*this.m_normals[o].Y);x>=this.m_miterLim?this.DoMiter(r,o,x):this.DoSquare(r,o);break}case t.JoinType.jtSquare:this.DoSquare(r,o);break;case t.JoinType.jtRound:this.DoRound(r,o);break}return o=r,o},t.ClipperOffset.prototype.DoSquare=function(r,o){var c=Math.tan(Math.atan2(this.m_sinA,this.m_normals[o].X*this.m_normals[r].X+this.m_normals[o].Y*this.m_normals[r].Y)/4);this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[r].X+this.m_delta*(this.m_normals[o].X-this.m_normals[o].Y*c)),t.ClipperOffset.Round(this.m_srcPoly[r].Y+this.m_delta*(this.m_normals[o].Y+this.m_normals[o].X*c)))),this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[r].X+this.m_delta*(this.m_normals[r].X+this.m_normals[r].Y*c)),t.ClipperOffset.Round(this.m_srcPoly[r].Y+this.m_delta*(this.m_normals[r].Y-this.m_normals[r].X*c))))},t.ClipperOffset.prototype.DoMiter=function(r,o,c){var m=this.m_delta/c;this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[r].X+(this.m_normals[o].X+this.m_normals[r].X)*m),t.ClipperOffset.Round(this.m_srcPoly[r].Y+(this.m_normals[o].Y+this.m_normals[r].Y)*m)))},t.ClipperOffset.prototype.DoRound=function(r,o){for(var c=Math.atan2(this.m_sinA,this.m_normals[o].X*this.m_normals[r].X+this.m_normals[o].Y*this.m_normals[r].Y),m=Math.max(t.Cast_Int32(t.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(c))),1),x=this.m_normals[o].X,_=this.m_normals[o].Y,B,H=0;H<m;++H)this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[r].X+x*this.m_delta),t.ClipperOffset.Round(this.m_srcPoly[r].Y+_*this.m_delta))),B=x,x=x*this.m_cos-this.m_sin*_,_=B*this.m_sin+_*this.m_cos;this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[r].X+this.m_normals[r].X*this.m_delta),t.ClipperOffset.Round(this.m_srcPoly[r].Y+this.m_normals[r].Y*this.m_delta)))},t.Error=function(r){try{throw new Error(r)}catch(o){alert(o.message)}},t.JS={},t.JS.AreaOfPolygon=function(r,o){return o||(o=1),t.Clipper.Area(r)/(o*o)},t.JS.AreaOfPolygons=function(r,o){o||(o=1);for(var c=0,m=0;m<r.length;m++)c+=t.Clipper.Area(r[m]);return c/(o*o)},t.JS.BoundsOfPath=function(r,o){return t.JS.BoundsOfPaths([r],o)},t.JS.BoundsOfPaths=function(r,o){o||(o=1);var c=t.Clipper.GetBounds(r);return c.left/=o,c.bottom/=o,c.right/=o,c.top/=o,c},t.JS.Clean=function(m,o){if(!(m instanceof Array))return[];var c=m[0]instanceof Array,m=t.JS.Clone(m);if(typeof o!="number"||o===null)return t.Error("Delta is not a number in Clean()."),m;if(m.length===0||m.length===1&&m[0].length===0||o<0)return m;c||(m=[m]);for(var x=m.length,_,B,H,V,ct,Tt,Nt,Dt=[],Kt=0;Kt<x;Kt++)if(B=m[Kt],_=B.length,_!==0){if(_<3){H=B,Dt.push(H);continue}for(H=B,V=o*o,ct=B[0],Tt=1,Nt=1;Nt<_;Nt++)(B[Nt].X-ct.X)*(B[Nt].X-ct.X)+(B[Nt].Y-ct.Y)*(B[Nt].Y-ct.Y)<=V||(H[Tt]=B[Nt],ct=B[Nt],Tt++);ct=B[Tt-1],(B[0].X-ct.X)*(B[0].X-ct.X)+(B[0].Y-ct.Y)*(B[0].Y-ct.Y)<=V&&Tt--,Tt<_&&H.splice(Tt,_-Tt),H.length&&Dt.push(H)}return!c&&Dt.length?Dt=Dt[0]:!c&&Dt.length===0?Dt=[]:c&&Dt.length===0&&(Dt=[[]]),Dt},t.JS.Clone=function(r){if(!(r instanceof Array))return[];if(r.length===0)return[];if(r.length===1&&r[0].length===0)return[[]];var o=r[0]instanceof Array;o||(r=[r]);var c=r.length,m,x,_,B,H=new Array(c);for(x=0;x<c;x++){for(m=r[x].length,B=new Array(m),_=0;_<m;_++)B[_]={X:r[x][_].X,Y:r[x][_].Y};H[x]=B}return o||(H=H[0]),H},t.JS.Lighten=function(r,o){if(!(r instanceof Array))return[];if(typeof o!="number"||o===null)return t.Error("Tolerance is not a number in Lighten()."),t.JS.Clone(r);if(r.length===0||r.length===1&&r[0].length===0||o<0)return t.JS.Clone(r);var c=r[0]instanceof Array;c||(r=[r]);var m,x,_,B,H,V,ct,Tt,Nt,Dt,Kt,fe,ye,ce,gr,Mr,re,qs=r.length,Rs=o*o,Pr=[];for(m=0;m<qs;m++)if(_=r[m],V=_.length,V!==0){for(B=0;B<1e6;B++){for(H=[],V=_.length,_[V-1].X!==_[0].X||_[V-1].Y!==_[0].Y?(fe=1,_.push({X:_[0].X,Y:_[0].Y}),V=_.length):fe=0,Kt=[],x=0;x<V-2;x++)ct=_[x],Nt=_[x+1],Tt=_[x+2],Mr=ct.X,re=ct.Y,ye=Tt.X-Mr,ce=Tt.Y-re,(ye!==0||ce!==0)&&(gr=((Nt.X-Mr)*ye+(Nt.Y-re)*ce)/(ye*ye+ce*ce),gr>1?(Mr=Tt.X,re=Tt.Y):gr>0&&(Mr+=ye*gr,re+=ce*gr)),ye=Nt.X-Mr,ce=Nt.Y-re,Dt=ye*ye+ce*ce,Dt<=Rs&&(Kt[x+1]=1,x++);for(H.push({X:_[0].X,Y:_[0].Y}),x=1;x<V-1;x++)Kt[x]||H.push({X:_[x].X,Y:_[x].Y});if(H.push({X:_[V-1].X,Y:_[V-1].Y}),fe&&_.pop(),Kt.length)_=H;else break}V=H.length,H[V-1].X===H[0].X&&H[V-1].Y===H[0].Y&&H.pop(),H.length>2&&Pr.push(H)}return c||(Pr=Pr[0]),typeof Pr>"u"&&(Pr=[]),Pr},t.JS.PerimeterOfPath=function(r,o,c){if(typeof r>"u")return 0;var m=Math.sqrt,x=0,_,B,H=0,V=0,ct=0,Tt=0,Nt=r.length;if(Nt<2)return 0;for(o&&(r[Nt]=r[0],Nt++);--Nt;)_=r[Nt],H=_.X,V=_.Y,B=r[Nt-1],ct=B.X,Tt=B.Y,x+=m((H-ct)*(H-ct)+(V-Tt)*(V-Tt));return o&&r.pop(),x/c},t.JS.PerimeterOfPaths=function(r,o,c){c||(c=1);for(var m=0,x=0;x<r.length;x++)m+=t.JS.PerimeterOfPath(r[x],o,c);return m},t.JS.ScaleDownPath=function(r,o){var c,m;for(o||(o=1),c=r.length;c--;)m=r[c],m.X=m.X/o,m.Y=m.Y/o},t.JS.ScaleDownPaths=function(r,o){var c,m,x;for(o||(o=1),c=r.length;c--;)for(m=r[c].length;m--;)x=r[c][m],x.X=x.X/o,x.Y=x.Y/o},t.JS.ScaleUpPath=function(r,o){var c,m,x=Math.round;for(o||(o=1),c=r.length;c--;)m=r[c],m.X=x(m.X*o),m.Y=x(m.Y*o)},t.JS.ScaleUpPaths=function(r,o){var c,m,x,_=Math.round;for(o||(o=1),c=r.length;c--;)for(m=r[c].length;m--;)x=r[c][m],x.X=_(x.X*o),x.Y=_(x.Y*o)},t.ExPolygons=function(){return[]},t.ExPolygon=function(){this.outer=null,this.holes=null},t.JS.AddOuterPolyNodeToExPolygons=function(r,o){var c=new t.ExPolygon;c.outer=r.Contour();var m=r.Childs(),x=m.length;c.holes=new Array(x);var _,B,H,V,ct,Tt;for(H=0;H<x;H++)for(_=m[H],c.holes[H]=_.Contour(),V=0,ct=_.Childs(),Tt=ct.length;V<Tt;V++)B=ct[V],t.JS.AddOuterPolyNodeToExPolygons(B,o);o.push(c)},t.JS.ExPolygonsToPaths=function(r){var o,c,m,x,_=new t.Paths;for(o=0,m=r.length;o<m;o++)for(_.push(r[o].outer),c=0,x=r[o].holes.length;c<x;c++)_.push(r[o].holes[c]);return _},t.JS.PolyTreeToExPolygons=function(r){var o=new t.ExPolygons,c,m,x,_;for(m=0,x=r.Childs(),_=x.length;m<_;m++)c=x[m],t.JS.AddOuterPolyNodeToExPolygons(c,o);return o}})()}(Jo)),Jo.exports}var $f=Gf();const io=vo($f);function Jf(n){const t=[],e=n.match(/[MmLlHhVvCcSsQqTtAaZz]|[\-+]?(?:\d+\.?\d*|\.\d+)(?:[eE][\-+]?\d+)?/g);if(!e)return t;let i=0,s=0,a=0,l="";for(;a<e.length;){const h=e[a],f=/[MmLlHhVvCcSsQqTtAaZz]/.test(h);switch(f&&(l=h,a++),l.toUpperCase()){case"M":i=parseFloat(e[a]),s=parseFloat(e[a+1]),t.push({X:i,Y:s}),a+=2,l="L";break;case"L":!f&&a<e.length-1&&(i=parseFloat(e[a]),s=parseFloat(e[a+1]),t.push({X:i,Y:s}),a+=2);break;case"H":a<e.length&&(i=parseFloat(e[a]),t.push({X:i,Y:s}),a++);break;case"V":a<e.length&&(s=parseFloat(e[a]),t.push({X:i,Y:s}),a++);break;case"Z":break;case"C":a+=4,a<e.length-1&&(i=parseFloat(e[a]),s=parseFloat(e[a+1]),t.push({X:i,Y:s}),a+=2);break;case"S":case"Q":a+=2,a<e.length-1&&(i=parseFloat(e[a]),s=parseFloat(e[a+1]),t.push({X:i,Y:s}),a+=2);break;case"T":a<e.length-1&&(i=parseFloat(e[a]),s=parseFloat(e[a+1]),t.push({X:i,Y:s}),a+=2);break;case"A":a+=5,a<e.length-1&&(i=parseFloat(e[a]),s=parseFloat(e[a+1]),t.push({X:i,Y:s}),a+=2);break;default:if(!f&&a<e.length-1){const d=parseFloat(e[a]),y=parseFloat(e[a+1]);!isNaN(d)&&!isNaN(y)?(i=d,s=y,t.push({X:i,Y:s}),a+=2):a++}else a++;break}}return t}function Zf(n){if(!n||n.length===0)return"";let t=`M ${n[0].X},${n[0].Y}`;for(let e=1;e<n.length;e++)t+=` L ${n[e].X},${n[e].Y}`;return t+=" Z",t}function Kf(n,t){if(!n||typeof n!="string"||t<=0)return n;try{const e=Jf(n);if(e.length<3)throw new Error(`Path has too few points for offset: ${e.length}`);const i=1e3,s=e.map(h=>({X:Math.round(h.X*i),Y:Math.round(h.Y*i)})),a=new io.ClipperOffset(2,.25);a.AddPath(s,io.JoinType.jtMiter,io.EndType.etClosedPolygon);const l=new io.Paths;if(a.Execute(l,t*i),l.length>0){const h=l[0].map(f=>({X:f.X/i,Y:f.Y/i}));return Zf(h)}return n}catch(e){throw console.error("Clipper offset error:",e),e}}function Qf(n,t){const e=[];if(!n||t<=0)return{svg:n,errors:e};const i=n.cloneNode(!0);return i.querySelectorAll("path.seam").forEach((a,l)=>{try{const h=a.getAttribute("d");if(!h)return;const f=Kf(h,t),d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttribute("d",f),d.setAttribute("class","seam-allowance"),d.setAttribute("fill","none"),d.setAttribute("stroke","#000"),d.setAttribute("stroke-width","2");const y=a.getAttribute("id");y&&d.setAttribute("id",`${y}-allowance`),a.parentNode.insertBefore(d,a.nextSibling),a.setAttribute("stroke-dasharray","2,2")}catch(h){const f=a.getAttribute("id")||`path-${l+1}`,d=window.i18n?.translate("seamAllowanceError",{pathId:f,error:h.message})||`Failed to create seam allowance for ${f}: ${h.message}`;e.push(d),console.error(d),console.error("Path data:",a.getAttribute("d"))}}),{svg:i,errors:e}}function tc(n,t){return Qf(n,t)}function ec(n){if(typeof n!="number"||n<0||!Number.isInteger(n))throw new Error(`Invalid index: ${n}. Must be a non-negative integer.`);let t="",e=n;for(;e>=0;)t=String.fromCharCode(65+e%26)+t,e=Math.floor(e/26)-1;return t}function rc(n){if(!n||!(n instanceof SVGElement))throw new Error("Invalid SVG element provided to assignPatternPieceSymbols");const t=n.querySelectorAll("svg > g, g > g"),e=Array.from(t).filter(i=>i.querySelector("path.seam")!==null);if(e.length===0){console.warn("No pattern pieces found in SVG");return}e.forEach((i,s)=>{if(!i.hasAttribute("data-pattern-symbol")){const a=ec(s);i.setAttribute("data-pattern-symbol",a)}})}function ic(n){if(!n||!(n instanceof SVGElement))throw new Error("Invalid pattern piece element");const t=n.getAttribute("data-pattern-symbol");if(!t)throw new Error(`Pattern piece ${n.id||"unknown"} has no symbol assigned`);const e=n.querySelector(".pattern-symbol");e&&e.remove();const i=n.getBBox();if(!i||i.width<=0||i.height<=0)throw new Error(`Invalid bounding box for pattern piece ${n.id||"unknown"}: width=${i?.width}, height=${i?.height}`);const s=Math.min(i.width,i.height)*.15,h=Math.max(10,Math.min(50,s)),f=document.createElementNS("http://www.w3.org/2000/svg","text");f.setAttribute("class","pattern-symbol"),f.setAttribute("x",i.x+i.width/2),f.setAttribute("y",i.y+i.height/2),f.setAttribute("text-anchor","middle"),f.setAttribute("dominant-baseline","middle"),f.setAttribute("font-size",h),f.setAttribute("font-family","Arial, sans-serif"),f.setAttribute("font-weight","bold"),f.setAttribute("fill","#808080"),f.setAttribute("stroke","#808080"),f.setAttribute("stroke-width","0.5"),f.setAttribute("opacity","0.5"),f.textContent=t,n.insertBefore(f,n.firstChild)}function Bl(n){if(!n||!(n instanceof SVGElement))throw new Error("Invalid SVG element provided to updateAllSymbols");const t=n.querySelectorAll("[data-pattern-symbol]");if(t.length===0){console.warn("No pattern pieces with symbols found");return}t.forEach(e=>{ic(e)})}function Su(n){let t=n.parentElement;for(;t;){if(t.hasAttribute("data-pattern-symbol"))return t.getAttribute("data-pattern-symbol");t=t.parentElement}return null}function nc(n){let t=n.parentElement;for(;t;){if(t.hasAttribute("data-pattern-symbol"))return t;t=t.parentElement}return null}function sc(n){const t=new Map;return n.querySelectorAll(".sewinguide").forEach(i=>{const s=i.getAttribute("stroke");s&&(t.has(s)||t.set(s,[]),t.get(s).push(i))}),t}function ac(n,t,e){const i=[t,e].sort().join(":"),s=n.querySelectorAll("[data-sewingguide-label]"),a=new Set;s.forEach(h=>{const d=h.getAttribute("data-sewingguide-label").match(/^([A-Z]+):([A-Z]+):(\d+)$/);if(d){const[y,w,P,g]=d;[w,P].sort().join(":")===i&&a.add(parseInt(g))}});let l=1;for(;a.has(l);)l++;return l}function Au(n,t,e,i=5){const s=n.querySelectorAll(".sewingguide-label");for(const a of s){const l=parseFloat(a.getAttribute("x")),h=parseFloat(a.getAttribute("y"));if(Math.sqrt(Math.pow(t-l,2)+Math.pow(e-h,2))<i)return!0}return!1}function oc(n,t,e,i){let s=0,a=1/0;for(let h=0;h<=i;h+=i/20){const f=t.getPointAtLength(h),d=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2));d<a&&(a=d,s=h)}if(!Au(n,e.x,e.y))return e;const l=[5,-5,10,-10,15,-15];for(const h of l){const f=Math.max(0,Math.min(i,s+h)),d=t.getPointAtLength(f);if(!Au(n,d.x,d.y))return d}return e}function wl(n,t){if(n.tagName!=="path"){console.warn("Sewingguide element is not a path, skipping label");return}const e=nc(n);if(!e){console.warn("Cannot find pattern piece for sewingguide element");return}const i=e.querySelector("path.seam");if(!i){console.warn("Cannot find seam path in pattern piece");return}const s=n.getTotalLength(),a=n.getPointAtLength(0),l=n.getPointAtLength(s);let h;if(i.isPointInFill){const w=i.ownerSVGElement,P=w.createSVGPoint();P.x=a.x,P.y=a.y;const g=w.createSVGPoint();g.x=l.x,g.y=l.y;const N=i.isPointInFill(P),A=i.isPointInFill(g);N&&!A?h=a:!N&&A?h=l:h=a}else{console.warn("isPointInFill not available, using distance to pattern center");const w=e.getBBox(),P={x:w.x+w.width/2,y:w.y+w.height/2},g=Math.sqrt(Math.pow(a.x-P.x,2)+Math.pow(a.y-P.y,2)),N=Math.sqrt(Math.pow(l.x-P.x,2)+Math.pow(l.y-P.y,2));h=g<N?a:l}const f=n.ownerSVGElement||n.closest("svg")||document.querySelector("svg"),d=oc(f,n,h,s),y=document.createElementNS("http://www.w3.org/2000/svg","text");y.setAttribute("x",d.x),y.setAttribute("y",d.y),y.setAttribute("text-anchor","middle"),y.setAttribute("dominant-baseline","middle"),y.setAttribute("font-size","3"),y.setAttribute("font-family","Arial, sans-serif"),y.setAttribute("fill","#000000"),y.setAttribute("class","sewingguide-label"),y.textContent=t,e.appendChild(y)}function lc(n){console.log("Assigning sewingguide labels...");const t=sc(n);console.log(`Found ${t.size} unique sewingguide colors`);let e=0,i=0;t.forEach((s,a)=>{if(s.length===2){const l=Su(s[0]),h=Su(s[1]);if(!l||!h){console.warn(`Sewingguide elements with color ${a} are not within pattern pieces`);return}const f=ac(n,l,h),[d,y]=[l,h].sort(),w=`${d}:${y}:${f}`;s[0].setAttribute("data-sewingguide-label",w),s[0].setAttribute("data-original-symbols",`${l}:${h}`),s[1].setAttribute("data-sewingguide-label",w),s[1].setAttribute("data-original-symbols",`${h}:${l}`),wl(s[0],w),wl(s[1],w),e++}else s.length>2&&(console.warn(`Sewingguide color ${a} appears ${s.length} times (expected 2 for pair matching)`),i++)}),console.log(`Assigned labels to ${e} sewingguide pairs`),i>0&&console.log(`${i} colors had more than 2 occurrences`)}function Dl(n){n.querySelectorAll(".sewingguide-label").forEach(e=>e.remove()),n.querySelectorAll("[data-sewingguide-label]").forEach(e=>{const i=e.getAttribute("data-sewingguide-label");i&&wl(e,i)})}const uc="modulepreload",hc=function(n,t){return new URL(n,t).href},Lu={},xl=function(t,e,i){let s=Promise.resolve();if(e&&e.length>0){let d=function(y){return Promise.all(y.map(w=>Promise.resolve(w).then(P=>({status:"fulfilled",value:P}),P=>({status:"rejected",reason:P}))))};const l=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),f=h?.nonce||h?.getAttribute("nonce");s=d(e.map(y=>{if(y=hc(y,i),y in Lu)return;Lu[y]=!0;const w=y.endsWith(".css"),P=w?'[rel="stylesheet"]':"";if(!!i)for(let A=l.length-1;A>=0;A--){const T=l[A];if(T.href===y&&(!w||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${y}"]${P}`))return;const N=document.createElement("link");if(N.rel=w?"stylesheet":uc,w||(N.as="script"),N.crossOrigin="",N.href=y,f&&N.setAttribute("nonce",f),document.head.appendChild(N),w)return new Promise((A,T)=>{N.addEventListener("load",A),N.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${y}`)))})}))}function a(l){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=l,window.dispatchEvent(h),!h.defaultPrevented)throw l}return s.then(l=>{for(const h of l||[])h.status==="rejected"&&a(h.reason);return t().catch(a)})};function Me(n){"@babel/helpers - typeof";return Me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Me(n)}var kr=Uint8Array,ri=Uint16Array,ql=Int32Array,yo=new kr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bo=new kr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Pl=new kr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gh=function(n,t){for(var e=new ri(31),i=0;i<31;++i)e[i]=t+=1<<n[i-1];for(var s=new ql(e[30]),i=1;i<30;++i)for(var a=e[i];a<e[i+1];++a)s[a]=a-e[i]<<5|i;return{b:e,r:s}},vh=gh(yo,2),yh=vh.b,Sl=vh.r;yh[28]=258,Sl[258]=28;var bh=gh(bo,0),fc=bh.b,Nu=bh.r,Al=new ri(32768);for(var We=0;We<32768;++We){var wn=(We&43690)>>1|(We&21845)<<1;wn=(wn&52428)>>2|(wn&13107)<<2,wn=(wn&61680)>>4|(wn&3855)<<4,Al[We]=((wn&65280)>>8|(wn&255)<<8)>>1}var Oi=function(n,t,e){for(var i=n.length,s=0,a=new ri(t);s<i;++s)n[s]&&++a[n[s]-1];var l=new ri(t);for(s=1;s<t;++s)l[s]=l[s-1]+a[s-1]<<1;var h;if(e){h=new ri(1<<t);var f=15-t;for(s=0;s<i;++s)if(n[s])for(var d=s<<4|n[s],y=t-n[s],w=l[n[s]-1]++<<y,P=w|(1<<y)-1;w<=P;++w)h[Al[w]>>f]=d}else for(h=new ri(i),s=0;s<i;++s)n[s]&&(h[s]=Al[l[n[s]-1]++]>>15-n[s]);return h},Nn=new kr(288);for(var We=0;We<144;++We)Nn[We]=8;for(var We=144;We<256;++We)Nn[We]=9;for(var We=256;We<280;++We)Nn[We]=7;for(var We=280;We<288;++We)Nn[We]=8;var va=new kr(32);for(var We=0;We<32;++We)va[We]=5;var cc=Oi(Nn,9,0),pc=Oi(Nn,9,1),dc=Oi(va,5,0),mc=Oi(va,5,1),Zo=function(n){for(var t=n[0],e=1;e<n.length;++e)n[e]>t&&(t=n[e]);return t},Pi=function(n,t,e){var i=t/8|0;return(n[i]|n[i+1]<<8)>>(t&7)&e},Ko=function(n,t){var e=t/8|0;return(n[e]|n[e+1]<<8|n[e+2]<<16)>>(t&7)},Rl=function(n){return(n+7)/8|0},wh=function(n,t,e){return(e==null||e>n.length)&&(e=n.length),new kr(n.subarray(t,e))},gc=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ai=function(n,t,e){var i=new Error(t||gc[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,Ai),!e)throw i;return i},vc=function(n,t,e,i){var s=n.length,a=0;if(!s||t.f&&!t.l)return e||new kr(0);var l=!e,h=l||t.i!=2,f=t.i;l&&(e=new kr(s*3));var d=function(Bt){var zt=e.length;if(Bt>zt){var jt=new kr(Math.max(zt*2,Bt));jt.set(e),e=jt}},y=t.f||0,w=t.p||0,P=t.b||0,g=t.l,N=t.d,A=t.m,T=t.n,L=s*8;do{if(!g){y=Pi(n,w,1);var F=Pi(n,w+1,3);if(w+=3,F)if(F==1)g=pc,N=mc,A=9,T=5;else if(F==2){var vt=Pi(n,w,31)+257,ot=Pi(n,w+10,15)+4,J=vt+Pi(n,w+5,31)+1;w+=14;for(var lt=new kr(J),yt=new kr(19),q=0;q<ot;++q)yt[Pl[q]]=Pi(n,w+q*3,7);w+=ot*3;for(var R=Zo(yt),Z=(1<<R)-1,G=Oi(yt,R,1),q=0;q<J;){var bt=G[Pi(n,w,Z)];w+=bt&15;var Y=bt>>4;if(Y<16)lt[q++]=Y;else{var gt=0,St=0;for(Y==16?(St=3+Pi(n,w,3),w+=2,gt=lt[q-1]):Y==17?(St=3+Pi(n,w,7),w+=3):Y==18&&(St=11+Pi(n,w,127),w+=7);St--;)lt[q++]=gt}}var ut=lt.subarray(0,vt),wt=lt.subarray(vt);A=Zo(ut),T=Zo(wt),g=Oi(ut,A,1),N=Oi(wt,T,1)}else Ai(1);else{var Y=Rl(w)+4,it=n[Y-4]|n[Y-3]<<8,$=Y+it;if($>s){f&&Ai(0);break}h&&d(P+it),e.set(n.subarray(Y,$),P),t.b=P+=it,t.p=w=$*8,t.f=y;continue}if(w>L){f&&Ai(0);break}}h&&d(P+131072);for(var Pt=(1<<A)-1,Yt=(1<<T)-1,M=w;;M=w){var gt=g[Ko(n,w)&Pt],X=gt>>4;if(w+=gt&15,w>L){f&&Ai(0);break}if(gt||Ai(2),X<256)e[P++]=X;else if(X==256){M=w,g=null;break}else{var U=X-254;if(X>264){var q=X-257,Q=yo[q];U=Pi(n,w,(1<<Q)-1)+yh[q],w+=Q}var nt=N[Ko(n,w)&Yt],pt=nt>>4;nt||Ai(3),w+=nt&15;var wt=fc[pt];if(pt>3){var Q=bo[pt];wt+=Ko(n,w)&(1<<Q)-1,w+=Q}if(w>L){f&&Ai(0);break}h&&d(P+131072);var dt=P+U;if(P<wt){var mt=a-wt,Et=Math.min(wt,dt);for(mt+P<0&&Ai(3);P<Et;++P)e[P]=i[mt+P]}for(;P<dt;++P)e[P]=e[P-wt]}}t.l=g,t.p=M,t.b=P,t.f=y,g&&(y=1,t.m=A,t.d=N,t.n=T)}while(!y);return P!=e.length&&l?wh(e,0,P):e.subarray(0,P)},Vi=function(n,t,e){e<<=t&7;var i=t/8|0;n[i]|=e,n[i+1]|=e>>8},ca=function(n,t,e){e<<=t&7;var i=t/8|0;n[i]|=e,n[i+1]|=e>>8,n[i+2]|=e>>16},Qo=function(n,t){for(var e=[],i=0;i<n.length;++i)n[i]&&e.push({s:i,f:n[i]});var s=e.length,a=e.slice();if(!s)return{t:Ph,l:0};if(s==1){var l=new kr(e[0].s+1);return l[e[0].s]=1,{t:l,l:1}}e.sort(function($,vt){return $.f-vt.f}),e.push({s:-1,f:25001});var h=e[0],f=e[1],d=0,y=1,w=2;for(e[0]={s:-1,f:h.f+f.f,l:h,r:f};y!=s-1;)h=e[e[d].f<e[w].f?d++:w++],f=e[d!=y&&e[d].f<e[w].f?d++:w++],e[y++]={s:-1,f:h.f+f.f,l:h,r:f};for(var P=a[0].s,i=1;i<s;++i)a[i].s>P&&(P=a[i].s);var g=new ri(P+1),N=Ll(e[y-1],g,0);if(N>t){var i=0,A=0,T=N-t,L=1<<T;for(a.sort(function(vt,ot){return g[ot.s]-g[vt.s]||vt.f-ot.f});i<s;++i){var F=a[i].s;if(g[F]>t)A+=L-(1<<N-g[F]),g[F]=t;else break}for(A>>=T;A>0;){var Y=a[i].s;g[Y]<t?A-=1<<t-g[Y]++-1:++i}for(;i>=0&&A;--i){var it=a[i].s;g[it]==t&&(--g[it],++A)}N=t}return{t:new kr(g),l:N}},Ll=function(n,t,e){return n.s==-1?Math.max(Ll(n.l,t,e+1),Ll(n.r,t,e+1)):t[n.s]=e},_u=function(n){for(var t=n.length;t&&!n[--t];);for(var e=new ri(++t),i=0,s=n[0],a=1,l=function(f){e[i++]=f},h=1;h<=t;++h)if(n[h]==s&&h!=t)++a;else{if(!s&&a>2){for(;a>138;a-=138)l(32754);a>2&&(l(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(l(s),--a;a>6;a-=6)l(8304);a>2&&(l(a-3<<5|8208),a=0)}for(;a--;)l(s);a=1,s=n[h]}return{c:e.subarray(0,i),n:t}},pa=function(n,t){for(var e=0,i=0;i<t.length;++i)e+=n[i]*t[i];return e},xh=function(n,t,e){var i=e.length,s=Rl(t+2);n[s]=i&255,n[s+1]=i>>8,n[s+2]=n[s]^255,n[s+3]=n[s+1]^255;for(var a=0;a<i;++a)n[s+a+4]=e[a];return(s+4+i)*8},Cu=function(n,t,e,i,s,a,l,h,f,d,y){Vi(t,y++,e),++s[256];for(var w=Qo(s,15),P=w.t,g=w.l,N=Qo(a,15),A=N.t,T=N.l,L=_u(P),F=L.c,Y=L.n,it=_u(A),$=it.c,vt=it.n,ot=new ri(19),J=0;J<F.length;++J)++ot[F[J]&31];for(var J=0;J<$.length;++J)++ot[$[J]&31];for(var lt=Qo(ot,7),yt=lt.t,q=lt.l,R=19;R>4&&!yt[Pl[R-1]];--R);var Z=d+5<<3,G=pa(s,Nn)+pa(a,va)+l,bt=pa(s,P)+pa(a,A)+l+14+3*R+pa(ot,yt)+2*ot[16]+3*ot[17]+7*ot[18];if(f>=0&&Z<=G&&Z<=bt)return xh(t,y,n.subarray(f,f+d));var gt,St,ut,wt;if(Vi(t,y,1+(bt<G)),y+=2,bt<G){gt=Oi(P,g,0),St=P,ut=Oi(A,T,0),wt=A;var Pt=Oi(yt,q,0);Vi(t,y,Y-257),Vi(t,y+5,vt-1),Vi(t,y+10,R-4),y+=14;for(var J=0;J<R;++J)Vi(t,y+3*J,yt[Pl[J]]);y+=3*R;for(var Yt=[F,$],M=0;M<2;++M)for(var X=Yt[M],J=0;J<X.length;++J){var U=X[J]&31;Vi(t,y,Pt[U]),y+=yt[U],U>15&&(Vi(t,y,X[J]>>5&127),y+=X[J]>>12)}}else gt=cc,St=Nn,ut=dc,wt=va;for(var J=0;J<h;++J){var Q=i[J];if(Q>255){var U=Q>>18&31;ca(t,y,gt[U+257]),y+=St[U+257],U>7&&(Vi(t,y,Q>>23&31),y+=yo[U]);var nt=Q&31;ca(t,y,ut[nt]),y+=wt[nt],nt>3&&(ca(t,y,Q>>5&8191),y+=bo[nt])}else ca(t,y,gt[Q]),y+=St[Q]}return ca(t,y,gt[256]),y+St[256]},yc=new ql([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ph=new kr(0),bc=function(n,t,e,i,s,a){var l=a.z||n.length,h=new kr(i+l+5*(1+Math.ceil(l/7e3))+s),f=h.subarray(i,h.length-s),d=a.l,y=(a.r||0)&7;if(t){y&&(f[0]=a.r>>3);for(var w=yc[t-1],P=w>>13,g=w&8191,N=(1<<e)-1,A=a.p||new ri(32768),T=a.h||new ri(N+1),L=Math.ceil(e/3),F=2*L,Y=function(se){return(n[se]^n[se+1]<<L^n[se+2]<<F)&N},it=new ql(25e3),$=new ri(288),vt=new ri(32),ot=0,J=0,lt=a.i||0,yt=0,q=a.w||0,R=0;lt+2<l;++lt){var Z=Y(lt),G=lt&32767,bt=T[Z];if(A[G]=bt,T[Z]=G,q<=lt){var gt=l-lt;if((ot>7e3||yt>24576)&&(gt>423||!d)){y=Cu(n,f,0,it,$,vt,J,yt,R,lt-R,y),yt=ot=J=0,R=lt;for(var St=0;St<286;++St)$[St]=0;for(var St=0;St<30;++St)vt[St]=0}var ut=2,wt=0,Pt=g,Yt=G-bt&32767;if(gt>2&&Z==Y(lt-Yt))for(var M=Math.min(P,gt)-1,X=Math.min(32767,lt),U=Math.min(258,gt);Yt<=X&&--Pt&&G!=bt;){if(n[lt+ut]==n[lt+ut-Yt]){for(var Q=0;Q<U&&n[lt+Q]==n[lt+Q-Yt];++Q);if(Q>ut){if(ut=Q,wt=Yt,Q>M)break;for(var nt=Math.min(Yt,Q-2),pt=0,St=0;St<nt;++St){var dt=lt-Yt+St&32767,mt=A[dt],Et=dt-mt&32767;Et>pt&&(pt=Et,bt=dt)}}}G=bt,bt=A[G],Yt+=G-bt&32767}if(wt){it[yt++]=268435456|Sl[ut]<<18|Nu[wt];var Bt=Sl[ut]&31,zt=Nu[wt]&31;J+=yo[Bt]+bo[zt],++$[257+Bt],++vt[zt],q=lt+ut,++ot}else it[yt++]=n[lt],++$[n[lt]]}}for(lt=Math.max(lt,q);lt<l;++lt)it[yt++]=n[lt],++$[n[lt]];y=Cu(n,f,d,it,$,vt,J,yt,R,lt-R,y),d||(a.r=y&7|f[y/8|0]<<3,y-=7,a.h=T,a.p=A,a.i=lt,a.w=q)}else{for(var lt=a.w||0;lt<l+d;lt+=65535){var jt=lt+65535;jt>=l&&(f[y/8|0]=d,jt=l),y=xh(f,y+1,n.subarray(lt,jt))}a.i=l}return wh(h,0,i+Rl(y)+s)},Sh=function(){var n=1,t=0;return{p:function(e){for(var i=n,s=t,a=e.length|0,l=0;l!=a;){for(var h=Math.min(l+2655,a);l<h;++l)s+=i+=e[l];i=(i&65535)+15*(i>>16),s=(s&65535)+15*(s>>16)}n=i,t=s},d:function(){return n%=65521,t%=65521,(n&255)<<24|(n&65280)<<8|(t&255)<<8|t>>8}}},wc=function(n,t,e,i,s){if(!s&&(s={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),l=new kr(a.length+n.length);l.set(a),l.set(n,a.length),n=l,s.w=a.length}return bc(n,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+t.mem,e,i,s)},Ah=function(n,t,e){for(;e;++t)n[t]=e,e>>>=8},xc=function(n,t){var e=t.level,i=e==0?0:e<6?1:e==9?3:2;if(n[0]=120,n[1]=i<<6|(t.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,t.dictionary){var s=Sh();s.p(t.dictionary),Ah(n,2,s.d())}},Pc=function(n,t){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Ai(6,"invalid zlib data"),(n[1]>>5&1)==1&&Ai(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Nl(n,t){t||(t={});var e=Sh();e.p(n);var i=wc(n,t,t.dictionary?6:2,4);return xc(i,t),Ah(i,i.length-4,e.d()),i}function Sc(n,t){return vc(n.subarray(Pc(n),-4),{i:2},t,t)}var Ac=typeof TextDecoder<"u"&&new TextDecoder,Lc=0;try{Ac.decode(Ph,{stream:!0}),Lc=1}catch{}var oe=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function tl(){oe.console&&typeof oe.console.log=="function"&&oe.console.log.apply(oe.console,arguments)}var Re={log:tl,warn:function(n){oe.console&&(typeof oe.console.warn=="function"?oe.console.warn.apply(oe.console,arguments):tl.call(null,arguments))},error:function(n){oe.console&&(typeof oe.console.error=="function"?oe.console.error.apply(oe.console,arguments):tl(n))}};function el(n,t,e){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){Un(i.response,t,e)},i.onerror=function(){Re.error("could not download file")},i.send()}function Iu(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function no(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var ga,_l,Un=oe.saveAs||((typeof window>"u"?"undefined":Me(window))!=="object"||window!==oe?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,t,e){var i=oe.URL||oe.webkitURL,s=document.createElement("a");t=t||n.name||"download",s.download=t,s.rel="noopener",typeof n=="string"?(s.href=n,s.origin!==location.origin?Iu(s.href)?el(n,t,e):no(s,s.target="_blank"):no(s)):(s.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(s.href)},4e4),setTimeout(function(){no(s)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,e){if(t=t||n.name||"download",typeof n=="string")if(Iu(n))el(n,t,e);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){no(i)})}else navigator.msSaveOrOpenBlob(function(s,a){return a===void 0?a={autoBom:!1}:Me(a)!=="object"&&(Re.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(n,e),t)}:function(n,t,e,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof n=="string")return el(n,t,e);var s=n.type==="application/octet-stream",a=/constructor/i.test(oe.HTMLElement)||oe.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&a)&&(typeof FileReader>"u"?"undefined":Me(FileReader))==="object"){var h=new FileReader;h.onloadend=function(){var y=h.result;y=l?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=y:location=y,i=null},h.readAsDataURL(n)}else{var f=oe.URL||oe.webkitURL,d=f.createObjectURL(n);i?i.location=d:location.href=d,i=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Lh(n){var t;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(h){return[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(h){return[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16)]}}],i=0;i<e.length;i++){var s=e[i].re,a=e[i].process,l=s.exec(n);l&&(t=a(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var h=this.r.toString(16),f=this.g.toString(16),d=this.b.toString(16);return h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),d.length==1&&(d="0"+d),"#"+h+f+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function rl(n,t){var e=n[0],i=n[1],s=n[2],a=n[3];e=Cr(e,i,s,a,t[0],7,-680876936),a=Cr(a,e,i,s,t[1],12,-389564586),s=Cr(s,a,e,i,t[2],17,606105819),i=Cr(i,s,a,e,t[3],22,-1044525330),e=Cr(e,i,s,a,t[4],7,-176418897),a=Cr(a,e,i,s,t[5],12,1200080426),s=Cr(s,a,e,i,t[6],17,-1473231341),i=Cr(i,s,a,e,t[7],22,-45705983),e=Cr(e,i,s,a,t[8],7,1770035416),a=Cr(a,e,i,s,t[9],12,-1958414417),s=Cr(s,a,e,i,t[10],17,-42063),i=Cr(i,s,a,e,t[11],22,-1990404162),e=Cr(e,i,s,a,t[12],7,1804603682),a=Cr(a,e,i,s,t[13],12,-40341101),s=Cr(s,a,e,i,t[14],17,-1502002290),e=Ir(e,i=Cr(i,s,a,e,t[15],22,1236535329),s,a,t[1],5,-165796510),a=Ir(a,e,i,s,t[6],9,-1069501632),s=Ir(s,a,e,i,t[11],14,643717713),i=Ir(i,s,a,e,t[0],20,-373897302),e=Ir(e,i,s,a,t[5],5,-701558691),a=Ir(a,e,i,s,t[10],9,38016083),s=Ir(s,a,e,i,t[15],14,-660478335),i=Ir(i,s,a,e,t[4],20,-405537848),e=Ir(e,i,s,a,t[9],5,568446438),a=Ir(a,e,i,s,t[14],9,-1019803690),s=Ir(s,a,e,i,t[3],14,-187363961),i=Ir(i,s,a,e,t[8],20,1163531501),e=Ir(e,i,s,a,t[13],5,-1444681467),a=Ir(a,e,i,s,t[2],9,-51403784),s=Ir(s,a,e,i,t[7],14,1735328473),e=Tr(e,i=Ir(i,s,a,e,t[12],20,-1926607734),s,a,t[5],4,-378558),a=Tr(a,e,i,s,t[8],11,-2022574463),s=Tr(s,a,e,i,t[11],16,1839030562),i=Tr(i,s,a,e,t[14],23,-35309556),e=Tr(e,i,s,a,t[1],4,-1530992060),a=Tr(a,e,i,s,t[4],11,1272893353),s=Tr(s,a,e,i,t[7],16,-155497632),i=Tr(i,s,a,e,t[10],23,-1094730640),e=Tr(e,i,s,a,t[13],4,681279174),a=Tr(a,e,i,s,t[0],11,-358537222),s=Tr(s,a,e,i,t[3],16,-722521979),i=Tr(i,s,a,e,t[6],23,76029189),e=Tr(e,i,s,a,t[9],4,-640364487),a=Tr(a,e,i,s,t[12],11,-421815835),s=Tr(s,a,e,i,t[15],16,530742520),e=Fr(e,i=Tr(i,s,a,e,t[2],23,-995338651),s,a,t[0],6,-198630844),a=Fr(a,e,i,s,t[7],10,1126891415),s=Fr(s,a,e,i,t[14],15,-1416354905),i=Fr(i,s,a,e,t[5],21,-57434055),e=Fr(e,i,s,a,t[12],6,1700485571),a=Fr(a,e,i,s,t[3],10,-1894986606),s=Fr(s,a,e,i,t[10],15,-1051523),i=Fr(i,s,a,e,t[1],21,-2054922799),e=Fr(e,i,s,a,t[8],6,1873313359),a=Fr(a,e,i,s,t[15],10,-30611744),s=Fr(s,a,e,i,t[6],15,-1560198380),i=Fr(i,s,a,e,t[13],21,1309151649),e=Fr(e,i,s,a,t[4],6,-145523070),a=Fr(a,e,i,s,t[11],10,-1120210379),s=Fr(s,a,e,i,t[2],15,718787259),i=Fr(i,s,a,e,t[9],21,-343485551),n[0]=Ln(e,n[0]),n[1]=Ln(i,n[1]),n[2]=Ln(s,n[2]),n[3]=Ln(a,n[3])}function wo(n,t,e,i,s,a){return t=Ln(Ln(t,n),Ln(i,a)),Ln(t<<s|t>>>32-s,e)}function Cr(n,t,e,i,s,a,l){return wo(t&e|~t&i,n,t,s,a,l)}function Ir(n,t,e,i,s,a,l){return wo(t&i|e&~i,n,t,s,a,l)}function Tr(n,t,e,i,s,a,l){return wo(t^e^i,n,t,s,a,l)}function Fr(n,t,e,i,s,a,l){return wo(e^(t|~i),n,t,s,a,l)}function Nh(n){var t,e=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)rl(i,Nc(n.substring(t-64,t)));n=n.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)s[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(rl(i,s),t=0;t<16;t++)s[t]=0;return s[14]=8*e,rl(i,s),i}function Nc(n){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return e}ga=oe.atob.bind(oe),_l=oe.btoa.bind(oe);var Tu="0123456789abcdef".split("");function _c(n){for(var t="",e=0;e<4;e++)t+=Tu[n>>8*e+4&15]+Tu[n>>8*e&15];return t}function Cc(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Cl(n){return Nh(n).map(Cc).join("")}var Ic=function(n){for(var t=0;t<n.length;t++)n[t]=_c(n[t]);return n.join("")}(Nh("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ln(n,t){if(Ic){var e=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(e>>16)<<16|65535&e}return n+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Il(n,t){var e,i,s,a;if(n!==e){for(var l=(s=n,a=1+(256/n.length>>0),new Array(a+1).join(s)),h=[],f=0;f<256;f++)h[f]=f;var d=0;for(f=0;f<256;f++){var y=h[f];d=(d+y+l.charCodeAt(f))%256,h[f]=h[d],h[d]=y}e=n,i=h}else h=i;var w=t.length,P=0,g=0,N="";for(f=0;f<w;f++)g=(g+(y=h[P=(P+1)%256]))%256,h[P]=h[g],h[g]=y,l=h[(h[P]+h[g])%256],N+=String.fromCharCode(t.charCodeAt(f)^l);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Fu={print:4,modify:8,copy:16,"annot-forms":32};function xs(n,t,e,i){this.v=1,this.r=2;var s=192;n.forEach(function(h){if(Fu.perm!==void 0)throw new Error("Invalid permission: "+h);s+=Fu[h]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),l=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,l),this.P=-(1+(255^s)),this.encryptionKey=Cl(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=Il(this.encryptionKey,this.padding)}function Ps(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var t="",e=n.length,i=0;i<e;i++){var s=n.charCodeAt(i);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=n[i]}return t}function ku(n){if(Me(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,i,s){if(s=s||!1,typeof e!="string"||typeof i!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var a=Math.random().toString(35);return t[e][a]=[i,!!s],a},this.unsubscribe=function(e){for(var i in t)if(t[i][e])return delete t[i][e],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var i=Array.prototype.slice.call(arguments,1),s=[];for(var a in t[e]){var l=t[e][a];try{l[0].apply(n,i)}catch(h){oe.console&&Re.error("jsPDF PubSub Error",h.message,h)}l[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Gn(n){if(!(this instanceof Gn))return new Gn(n);var t="opacity,stroke-opacity".split(",");for(var e in n)n.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=n[e]);this.id="",this.objectNumber=-1}function _h(n,t){this.gState=n,this.matrix=t,this.id="",this.objectNumber=-1}function Sn(n,t,e,i,s){if(!(this instanceof Sn))return new Sn(n,t,e,i,s);this.type=n==="axial"?2:3,this.coords=t,this.colors=e,_h.call(this,i,s)}function Wn(n,t,e,i,s){if(!(this instanceof Wn))return new Wn(n,t,e,i,s);this.boundingBox=n,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,_h.call(this,i,s)}function ne(n){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],s=arguments[2],a=arguments[3],l=[],h=1,f=16,d="S",y=null;Me(n=n||{})==="object"&&(e=n.orientation,i=n.unit||i,s=n.format||s,a=n.compress||n.compressPdf||a,(y=n.encryption||null)!==null&&(y.userPassword=y.userPassword||"",y.ownerPassword=y.ownerPassword||"",y.userPermissions=y.userPermissions||[]),h=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(t=n.precision),n.floatPrecision!==void 0&&(f=n.floatPrecision),d=n.defaultPathOperation||"S"),l=n.filters||(a===!0?["FlateEncode"]:l),i=i||"mm",e=(""+(e||"P")).toLowerCase();var w=n.putOnlyUsedFonts||!1,P={},g={internal:{},__private__:{}};g.__private__.PubSub=ku;var N="1.3",A=g.__private__.getPdfVersion=function(){return N};g.__private__.setPdfVersion=function(v){N=v};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return T};var L=g.__private__.getPageFormat=function(v){return T[v]};s=s||"a4";var F={COMPAT:"compat",ADVANCED:"advanced"},Y=F.COMPAT;function it(){this.saveGraphicsState(),W(new ee(Ht,0,0,-Ht,0,ln()*Ht).toString()+" cm"),this.setFontSize(this.getFontSize()/Ht),d="n",Y=F.ADVANCED}function $(){this.restoreGraphicsState(),d="S",Y=F.COMPAT}var vt=g.__private__.combineFontStyleAndFontWeight=function(v,I){if(v=="bold"&&I=="normal"||v=="bold"&&I==400||v=="normal"&&I=="italic"||v=="bold"&&I=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return I&&(v=I==400||I==="normal"?v==="italic"?"italic":"normal":I!=700&&I!=="bold"||v!=="normal"?(I==700?"bold":I)+""+v:"bold"),v};g.advancedAPI=function(v){var I=Y===F.COMPAT;return I&&it.call(this),typeof v!="function"||(v(this),I&&$.call(this)),this},g.compatAPI=function(v){var I=Y===F.ADVANCED;return I&&$.call(this),typeof v!="function"||(v(this),I&&it.call(this)),this},g.isAdvancedAPI=function(){return Y===F.ADVANCED};var ot,J=function(v){if(Y!==F.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},lt=g.roundToPrecision=g.__private__.roundToPrecision=function(v,I){var z=t||I;if(isNaN(v)||isNaN(z))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(z).replace(/0+$/,"")};ot=g.hpf=g.__private__.hpf=typeof f=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return lt(v,f)}:f==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return lt(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return lt(v,16)};var yt=g.f2=g.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return lt(v,2)},q=g.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return lt(v,3)},R=g.scale=g.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return Y===F.COMPAT?v*Ht:Y===F.ADVANCED?v:void 0},Z=function(v){return Y===F.COMPAT?ln()-v:Y===F.ADVANCED?v:void 0},G=function(v){return R(Z(v))};g.__private__.setPrecision=g.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(t=parseInt(v,10))};var bt,gt="00000000000000000000000000000000",St=g.__private__.getFileId=function(){return gt},ut=g.__private__.setFileId=function(v){return gt=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():gt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),y!==null&&(ce=new xs(y.userPermissions,y.userPassword,y.ownerPassword,gt)),gt};g.setFileId=function(v){return ut(v),this},g.getFileId=function(){return St()};var wt=g.__private__.convertDateToPDFDate=function(v){var I=v.getTimezoneOffset(),z=I<0?"+":"-",K=Math.floor(Math.abs(I/60)),at=Math.abs(I%60),At=[z,U(K),"'",U(at),"'"].join("");return["D:",v.getFullYear(),U(v.getMonth()+1),U(v.getDate()),U(v.getHours()),U(v.getMinutes()),U(v.getSeconds()),At].join("")},Pt=g.__private__.convertPDFDateToDate=function(v){var I=parseInt(v.substr(2,4),10),z=parseInt(v.substr(6,2),10)-1,K=parseInt(v.substr(8,2),10),at=parseInt(v.substr(10,2),10),At=parseInt(v.substr(12,2),10),kt=parseInt(v.substr(14,2),10);return new Date(I,z,K,at,At,kt,0)},Yt=g.__private__.setCreationDate=function(v){var I;if(v===void 0&&(v=new Date),v instanceof Date)I=wt(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");I=v}return bt=I},M=g.__private__.getCreationDate=function(v){var I=bt;return v==="jsDate"&&(I=Pt(bt)),I};g.setCreationDate=function(v){return Yt(v),this},g.getCreationDate=function(v){return M(v)};var X,U=g.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},Q=g.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},nt=0,pt=[],dt=[],mt=0,Et=[],Bt=[],zt=!1,jt=dt,se=function(){nt=0,mt=0,dt=[],pt=[],Et=[],gi=Je(),Vr=Je()};g.__private__.setCustomOutputDestination=function(v){zt=!0,jt=v};var Lt=function(v){zt||(jt=v)};g.__private__.resetCustomOutputDestination=function(){zt=!1,jt=dt};var W=g.__private__.out=function(v){return v=v.toString(),mt+=v.length+1,jt.push(v),jt},he=g.__private__.write=function(v){return W(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Jt=g.__private__.getArrayBuffer=function(v){for(var I=v.length,z=new ArrayBuffer(I),K=new Uint8Array(z);I--;)K[I]=v.charCodeAt(I);return z},Mt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Mt};var qt=n.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(v){return qt=Y===F.ADVANCED?v/Ht:v,this};var Wt,Xt=g.__private__.getFontSize=g.getFontSize=function(){return Y===F.COMPAT?qt:qt*Ht},Zt=n.R2L||!1;g.__private__.setR2L=g.setR2L=function(v){return Zt=v,this},g.__private__.getR2L=g.getR2L=function(){return Zt};var le,me=g.__private__.setZoomMode=function(v){var I=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Wt=v;else if(isNaN(v)){if(I.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Wt=v}else Wt=parseInt(v,10)};g.__private__.getZoomMode=function(){return Wt};var we,Se=g.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');le=v};g.__private__.getPageMode=function(){return le};var Fe=g.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');we=v};g.__private__.getLayoutMode=function(){return we},g.__private__.setDisplayMode=g.setDisplayMode=function(v,I,z){return me(v),Fe(I),Se(z),this};var ae={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(v){if(Object.keys(ae).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ae[v]},g.__private__.getDocumentProperties=function(){return ae},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(v){for(var I in ae)ae.hasOwnProperty(I)&&v[I]&&(ae[I]=v[I]);return this},g.__private__.setDocumentProperty=function(v,I){if(Object.keys(ae).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ae[v]=I};var xe,Ht,dr,Ae,zr,Ie={},Ye={},Ur=[],_e={},Ci={},He={},Wr={},mi=null,Ve=0,ue=[],Ce=new ku(g),Di=n.hotfixes||[],hr={},ii={},ni=[],ee=function v(I,z,K,at,At,kt){if(!(this instanceof v))return new v(I,z,K,at,At,kt);isNaN(I)&&(I=1),isNaN(z)&&(z=0),isNaN(K)&&(K=0),isNaN(at)&&(at=1),isNaN(At)&&(At=0),isNaN(kt)&&(kt=0),this._matrix=[I,z,K,at,At,kt]};Object.defineProperty(ee.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ee.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ee.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ee.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ee.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ee.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ee.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ee.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ee.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ee.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ee.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ee.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ee.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ee.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ee.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ee.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ee.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ot).join(v)},ee.prototype.multiply=function(v){var I=v.sx*this.sx+v.shy*this.shx,z=v.sx*this.shy+v.shy*this.sy,K=v.shx*this.sx+v.sy*this.shx,at=v.shx*this.shy+v.sy*this.sy,At=v.tx*this.sx+v.ty*this.shx+this.tx,kt=v.tx*this.shy+v.ty*this.sy+this.ty;return new ee(I,z,K,at,At,kt)},ee.prototype.decompose=function(){var v=this.sx,I=this.shy,z=this.shx,K=this.sy,at=this.tx,At=this.ty,kt=Math.sqrt(v*v+I*I),Vt=(v/=kt)*z+(I/=kt)*K;z-=v*Vt,K-=I*Vt;var Qt=Math.sqrt(z*z+K*K);return Vt/=Qt,v*(K/=Qt)<I*(z/=Qt)&&(v=-v,I=-I,Vt=-Vt,kt=-kt),{scale:new ee(kt,0,0,Qt,0,0),translate:new ee(1,0,0,1,at,At),rotate:new ee(v,I,-I,v,0,0),skew:new ee(1,0,Vt,1,0,0)}},ee.prototype.toString=function(v){return this.join(" ")},ee.prototype.inversed=function(){var v=this.sx,I=this.shy,z=this.shx,K=this.sy,at=this.tx,At=this.ty,kt=1/(v*K-I*z),Vt=K*kt,Qt=-I*kt,ve=-z*kt,pe=v*kt;return new ee(Vt,Qt,ve,pe,-Vt*at-ve*At,-Qt*at-pe*At)},ee.prototype.applyToPoint=function(v){var I=v.x*this.sx+v.y*this.shx+this.tx,z=v.x*this.shy+v.y*this.sy+this.ty;return new rs(I,z)},ee.prototype.applyToRectangle=function(v){var I=this.applyToPoint(v),z=this.applyToPoint(new rs(v.x+v.w,v.y+v.h));return new Hs(I.x,I.y,z.x-I.x,z.y-I.y)},ee.prototype.clone=function(){var v=this.sx,I=this.shy,z=this.shx,K=this.sy,at=this.tx,At=this.ty;return new ee(v,I,z,K,at,At)},g.Matrix=ee;var Hr=g.matrixMult=function(v,I){return I.multiply(v)},si=new ee(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=si;var Nr=function(v,I){if(!Ci[v]){var z=(I instanceof Sn?"Sh":"P")+(Object.keys(_e).length+1).toString(10);I.id=z,Ci[v]=z,_e[z]=I,Ce.publish("addPattern",I)}};g.ShadingPattern=Sn,g.TilingPattern=Wn,g.addShadingPattern=function(v,I){return J("addShadingPattern()"),Nr(v,I),this},g.beginTilingPattern=function(v){J("beginTilingPattern()"),Fa(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},g.endTilingPattern=function(v,I){J("endTilingPattern()"),I.stream=Bt[X].join(`
`),Nr(v,I),Ce.publish("endTilingPattern",I),ni.pop().restore()};var er=g.__private__.newObject=function(){var v=Je();return Er(v,!0),v},Je=g.__private__.newObjectDeferred=function(){return nt++,pt[nt]=function(){return mt},nt},Er=function(v,I){return I=typeof I=="boolean"&&I,pt[v]=mt,I&&W(v+" 0 obj"),v},Ki=g.__private__.newAdditionalObject=function(){var v={objId:Je(),content:""};return Et.push(v),v},gi=Je(),Vr=Je(),Gr=g.__private__.decodeColorString=function(v){var I=v.split(" ");if(I.length!==2||I[1]!=="g"&&I[1]!=="G")I.length===5&&(I[4]==="k"||I[4]==="K")&&(I=[(1-I[0])*(1-I[3]),(1-I[1])*(1-I[3]),(1-I[2])*(1-I[3]),"r"]);else{var z=parseFloat(I[0]);I=[z,z,z,"r"]}for(var K="#",at=0;at<3;at++)K+=("0"+Math.floor(255*parseFloat(I[at])).toString(16)).slice(-2);return K},$r=g.__private__.encodeColorString=function(v){var I;typeof v=="string"&&(v={ch1:v});var z=v.ch1,K=v.ch2,at=v.ch3,At=v.ch4,kt=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof z=="string"&&z.charAt(0)!=="#"){var Vt=new Lh(z);if(Vt.ok)z=Vt.toHex();else if(!/^\d*\.?\d*$/.test(z))throw new Error('Invalid color "'+z+'" passed to jsPDF.encodeColorString.')}if(typeof z=="string"&&/^#[0-9A-Fa-f]{3}$/.test(z)&&(z="#"+z[1]+z[1]+z[2]+z[2]+z[3]+z[3]),typeof z=="string"&&/^#[0-9A-Fa-f]{6}$/.test(z)){var Qt=parseInt(z.substr(1),16);z=Qt>>16&255,K=Qt>>8&255,at=255&Qt}if(K===void 0||At===void 0&&z===K&&K===at)if(typeof z=="string")I=z+" "+kt[0];else switch(v.precision){case 2:I=yt(z/255)+" "+kt[0];break;case 3:default:I=q(z/255)+" "+kt[0]}else if(At===void 0||Me(At)==="object"){if(At&&!isNaN(At.a)&&At.a===0)return I=["1.","1.","1.",kt[1]].join(" ");if(typeof z=="string")I=[z,K,at,kt[1]].join(" ");else switch(v.precision){case 2:I=[yt(z/255),yt(K/255),yt(at/255),kt[1]].join(" ");break;default:case 3:I=[q(z/255),q(K/255),q(at/255),kt[1]].join(" ")}}else if(typeof z=="string")I=[z,K,at,At,kt[2]].join(" ");else switch(v.precision){case 2:I=[yt(z),yt(K),yt(at),yt(At),kt[2]].join(" ");break;case 3:default:I=[q(z),q(K),q(at),q(At),kt[2]].join(" ")}return I},ai=g.__private__.getFilters=function(){return l},mr=g.__private__.putStream=function(v){var I=(v=v||{}).data||"",z=v.filters||ai(),K=v.alreadyAppliedFilters||[],at=v.addLength1||!1,At=I.length,kt=v.objectId,Vt=function(_r){return _r};if(y!==null&&kt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");y!==null&&(Vt=ce.encryptor(kt,0));var Qt={};z===!0&&(z=["FlateEncode"]);var ve=v.additionalKeyValues||[],pe=(Qt=ne.API.processDataByFilters!==void 0?ne.API.processDataByFilters(I,z):{data:I,reverseChain:[]}).reverseChain+(Array.isArray(K)?K.join(" "):K.toString());if(Qt.data.length!==0&&(ve.push({key:"Length",value:Qt.data.length}),at===!0&&ve.push({key:"Length1",value:At})),pe.length!=0)if(pe.split("/").length-1==1)ve.push({key:"Filter",value:pe});else{ve.push({key:"Filter",value:"["+pe+"]"});for(var Le=0;Le<ve.length;Le+=1)if(ve[Le].key==="DecodeParms"){for(var $e=[],Ke=0;Ke<Qt.reverseChain.split("/").length-1;Ke+=1)$e.push("null");$e.push(ve[Le].value),ve[Le].value="["+$e.join(" ")+"]"}}W("<<");for(var or=0;or<ve.length;or++)W("/"+ve[or].key+" "+ve[or].value);W(">>"),Qt.data.length!==0&&(W("stream"),W(Vt(Qt.data)),W("endstream"))},Jr=g.__private__.putPage=function(v){var I=v.number,z=v.data,K=v.objId,at=v.contentsObjId;Er(K,!0),W("<</Type /Page"),W("/Parent "+v.rootDictionaryObjId+" 0 R"),W("/Resources "+v.resourceDictionaryObjId+" 0 R"),W("/MediaBox ["+parseFloat(ot(v.mediaBox.bottomLeftX))+" "+parseFloat(ot(v.mediaBox.bottomLeftY))+" "+ot(v.mediaBox.topRightX)+" "+ot(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&W("/CropBox ["+ot(v.cropBox.bottomLeftX)+" "+ot(v.cropBox.bottomLeftY)+" "+ot(v.cropBox.topRightX)+" "+ot(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&W("/BleedBox ["+ot(v.bleedBox.bottomLeftX)+" "+ot(v.bleedBox.bottomLeftY)+" "+ot(v.bleedBox.topRightX)+" "+ot(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&W("/TrimBox ["+ot(v.trimBox.bottomLeftX)+" "+ot(v.trimBox.bottomLeftY)+" "+ot(v.trimBox.topRightX)+" "+ot(v.trimBox.topRightY)+"]"),v.artBox!==null&&W("/ArtBox ["+ot(v.artBox.bottomLeftX)+" "+ot(v.artBox.bottomLeftY)+" "+ot(v.artBox.topRightX)+" "+ot(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&W("/UserUnit "+v.userUnit),Ce.publish("putPage",{objId:K,pageContext:ue[I],pageNumber:I,page:z}),W("/Contents "+at+" 0 R"),W(">>"),W("endobj");var At=z.join(`
`);return Y===F.ADVANCED&&(At+=`
Q`),Er(at,!0),mr({data:At,filters:ai(),objectId:at}),W("endobj"),K},qi=g.__private__.putPages=function(){var v,I,z=[];for(v=1;v<=Ve;v++)ue[v].objId=Je(),ue[v].contentsObjId=Je();for(v=1;v<=Ve;v++)z.push(Jr({number:v,data:Bt[v],objId:ue[v].objId,contentsObjId:ue[v].contentsObjId,mediaBox:ue[v].mediaBox,cropBox:ue[v].cropBox,bleedBox:ue[v].bleedBox,trimBox:ue[v].trimBox,artBox:ue[v].artBox,userUnit:ue[v].userUnit,rootDictionaryObjId:gi,resourceDictionaryObjId:Vr}));Er(gi,!0),W("<</Type /Pages");var K="/Kids [";for(I=0;I<Ve;I++)K+=z[I]+" 0 R ";W(K+"]"),W("/Count "+Ve),W(">>"),W("endobj"),Ce.publish("postPutPages")},Qi=function(v){Ce.publish("putFont",{font:v,out:W,newObject:er,putStream:mr}),v.isAlreadyPutted!==!0&&(v.objectNumber=er(),W("<<"),W("/Type /Font"),W("/BaseFont /"+Ps(v.postScriptName)),W("/Subtype /Type1"),typeof v.encoding=="string"&&W("/Encoding /"+v.encoding),W("/FirstChar 32"),W("/LastChar 255"),W(">>"),W("endobj"))},tn=function(){for(var v in Ie)Ie.hasOwnProperty(v)&&(w===!1||w===!0&&P.hasOwnProperty(v))&&Qi(Ie[v])},en=function(v){v.objectNumber=er();var I=[];I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Form"}),I.push({key:"BBox",value:"["+[ot(v.x),ot(v.y),ot(v.x+v.width),ot(v.y+v.height)].join(" ")+"]"}),I.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var z=v.pages[1].join(`
`);mr({data:z,additionalKeyValues:I,objectId:v.objectNumber}),W("endobj")},rn=function(){for(var v in hr)hr.hasOwnProperty(v)&&en(hr[v])},vi=function(v,I){var z,K=[],at=1/(I-1);for(z=0;z<1;z+=at)K.push(z);if(K.push(1),v[0].offset!=0){var At={offset:0,color:v[0].color};v.unshift(At)}if(v[v.length-1].offset!=1){var kt={offset:1,color:v[v.length-1].color};v.push(kt)}for(var Vt="",Qt=0,ve=0;ve<K.length;ve++){for(z=K[ve];z>v[Qt+1].offset;)Qt++;var pe=v[Qt].offset,Le=(z-pe)/(v[Qt+1].offset-pe),$e=v[Qt].color,Ke=v[Qt+1].color;Vt+=Q(Math.round((1-Le)*$e[0]+Le*Ke[0]).toString(16))+Q(Math.round((1-Le)*$e[1]+Le*Ke[1]).toString(16))+Q(Math.round((1-Le)*$e[2]+Le*Ke[2]).toString(16))}return Vt.trim()},Fs=function(v,I){I||(I=21);var z=er(),K=vi(v.colors,I),at=[];at.push({key:"FunctionType",value:"0"}),at.push({key:"Domain",value:"[0.0 1.0]"}),at.push({key:"Size",value:"["+I+"]"}),at.push({key:"BitsPerSample",value:"8"}),at.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),at.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),mr({data:K,additionalKeyValues:at,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:z}),W("endobj"),v.objectNumber=er(),W("<< /ShadingType "+v.type),W("/ColorSpace /DeviceRGB");var At="/Coords ["+ot(parseFloat(v.coords[0]))+" "+ot(parseFloat(v.coords[1]))+" ";v.type===2?At+=ot(parseFloat(v.coords[2]))+" "+ot(parseFloat(v.coords[3])):At+=ot(parseFloat(v.coords[2]))+" "+ot(parseFloat(v.coords[3]))+" "+ot(parseFloat(v.coords[4]))+" "+ot(parseFloat(v.coords[5])),W(At+="]"),v.matrix&&W("/Matrix ["+v.matrix.toString()+"]"),W("/Function "+z+" 0 R"),W("/Extend [true true]"),W(">>"),W("endobj")},ks=function(v,I){var z=Je(),K=er();I.push({resourcesOid:z,objectOid:K}),v.objectNumber=K;var at=[];at.push({key:"Type",value:"/Pattern"}),at.push({key:"PatternType",value:"1"}),at.push({key:"PaintType",value:"1"}),at.push({key:"TilingType",value:"1"}),at.push({key:"BBox",value:"["+v.boundingBox.map(ot).join(" ")+"]"}),at.push({key:"XStep",value:ot(v.xStep)}),at.push({key:"YStep",value:ot(v.yStep)}),at.push({key:"Resources",value:z+" 0 R"}),v.matrix&&at.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),mr({data:v.stream,additionalKeyValues:at,objectId:v.objectNumber}),W("endobj")},nn=function(v){var I;for(I in _e)_e.hasOwnProperty(I)&&(_e[I]instanceof Sn?Fs(_e[I]):_e[I]instanceof Wn&&ks(_e[I],v))},Jn=function(v){for(var I in v.objectNumber=er(),W("<<"),v)switch(I){case"opacity":W("/ca "+yt(v[I]));break;case"stroke-opacity":W("/CA "+yt(v[I]))}W(">>"),W("endobj")},Es=function(){var v;for(v in He)He.hasOwnProperty(v)&&Jn(He[v])},Fn=function(){for(var v in W("/XObject <<"),hr)hr.hasOwnProperty(v)&&hr[v].objectNumber>=0&&W("/"+v+" "+hr[v].objectNumber+" 0 R");Ce.publish("putXobjectDict"),W(">>")},Ms=function(){ce.oid=er(),W("<<"),W("/Filter /Standard"),W("/V "+ce.v),W("/R "+ce.r),W("/U <"+ce.toHexString(ce.U)+">"),W("/O <"+ce.toHexString(ce.O)+">"),W("/P "+ce.P),W(">>"),W("endobj")},Zn=function(){for(var v in W("/Font <<"),Ie)Ie.hasOwnProperty(v)&&(w===!1||w===!0&&P.hasOwnProperty(v))&&W("/"+v+" "+Ie[v].objectNumber+" 0 R");W(">>")},Os=function(){if(Object.keys(_e).length>0){for(var v in W("/Shading <<"),_e)_e.hasOwnProperty(v)&&_e[v]instanceof Sn&&_e[v].objectNumber>=0&&W("/"+v+" "+_e[v].objectNumber+" 0 R");Ce.publish("putShadingPatternDict"),W(">>")}},Ze=function(v){if(Object.keys(_e).length>0){for(var I in W("/Pattern <<"),_e)_e.hasOwnProperty(I)&&_e[I]instanceof g.TilingPattern&&_e[I].objectNumber>=0&&_e[I].objectNumber<v&&W("/"+I+" "+_e[I].objectNumber+" 0 R");Ce.publish("putTilingPatternDict"),W(">>")}},Bs=function(){if(Object.keys(He).length>0){var v;for(v in W("/ExtGState <<"),He)He.hasOwnProperty(v)&&He[v].objectNumber>=0&&W("/"+v+" "+He[v].objectNumber+" 0 R");Ce.publish("putGStateDict"),W(">>")}},Ge=function(v){Er(v.resourcesOid,!0),W("<<"),W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Zn(),Os(),Ze(v.objectOid),Bs(),Fn(),W(">>"),W("endobj")},Kn=function(){var v=[];tn(),Es(),rn(),nn(v),Ce.publish("putResources"),v.forEach(Ge),Ge({resourcesOid:Vr,objectOid:Number.MAX_SAFE_INTEGER}),Ce.publish("postPutResources")},ge=function(){Ce.publish("putAdditionalObjects");for(var v=0;v<Et.length;v++){var I=Et[v];Er(I.objId,!0),W(I.content),W("endobj")}Ce.publish("postPutAdditionalObjects")},kn=function(v){Ye[v.fontName]=Ye[v.fontName]||{},Ye[v.fontName][v.fontStyle]=v.id},En=function(v,I,z,K,at){var At={id:"F"+(Object.keys(Ie).length+1).toString(10),postScriptName:v,fontName:I,fontStyle:z,encoding:K,isStandardFont:at||!1,metadata:{}};return Ce.publish("addFont",{font:At,instance:this}),Ie[At.id]=At,kn(At),At.id},Ds=function(v){for(var I=0,z=Mt.length;I<z;I++){var K=En.call(this,v[I][0],v[I][1],v[I][2],Mt[I][3],!0);w===!1&&(P[K]=!0);var at=v[I][0].split("-");kn({id:K,fontName:at[0],fontStyle:at[1]||""})}Ce.publish("addFonts",{fonts:Ie,dictionary:Ye})},Zr=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(K){var I=K.stack||"";~I.indexOf(" at ")&&(I=I.split(" at ")[1]);var z="Error in function "+I.split(`
`)[0].split("<")[0]+": "+K.message;if(!oe.console)throw new Error(z);oe.console.error(z,K),oe.alert&&alert(z)}},v.foo.bar=v,v.foo},sn=function(v,I){var z,K,at,At,kt,Vt,Qt,ve,pe;if(at=(I=I||{}).sourceEncoding||"Unicode",kt=I.outputEncoding,(I.autoencode||kt)&&Ie[xe].metadata&&Ie[xe].metadata[at]&&Ie[xe].metadata[at].encoding&&(At=Ie[xe].metadata[at].encoding,!kt&&Ie[xe].encoding&&(kt=Ie[xe].encoding),!kt&&At.codePages&&(kt=At.codePages[0]),typeof kt=="string"&&(kt=At[kt]),kt)){for(Qt=!1,Vt=[],z=0,K=v.length;z<K;z++)(ve=kt[v.charCodeAt(z)])?Vt.push(String.fromCharCode(ve)):Vt.push(v[z]),Vt[z].charCodeAt(0)>>8&&(Qt=!0);v=Vt.join("")}for(z=v.length;Qt===void 0&&z!==0;)v.charCodeAt(z-1)>>8&&(Qt=!0),z--;if(!Qt)return v;for(Vt=I.noBOM?[]:[254,255],z=0,K=v.length;z<K;z++){if((pe=(ve=v.charCodeAt(z))>>8)>>8)throw new Error("Character at position "+z+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Vt.push(pe),Vt.push(ve-(pe<<8))}return String.fromCharCode.apply(void 0,Vt)},r=g.__private__.pdfEscape=g.pdfEscape=function(v,I){return sn(v,I).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},o=g.__private__.beginPage=function(v){Bt[++Ve]=[],ue[Ve]={objId:0,contentsObjId:0,userUnit:Number(h),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},x(Ve),Lt(Bt[X])},c=function(v,I){var z,K,at;switch(e=I||e,typeof v=="string"&&(z=L(v.toLowerCase()),Array.isArray(z)&&(K=z[0],at=z[1])),Array.isArray(v)&&(K=v[0]*Ht,at=v[1]*Ht),isNaN(K)&&(K=s[0],at=s[1]),(K>14400||at>14400)&&(Re.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),K=Math.min(14400,K),at=Math.min(14400,at)),s=[K,at],e.substr(0,1)){case"l":at>K&&(s=[at,K]);break;case"p":K>at&&(s=[at,K])}o(s),Na(Ys),W(yi),Us!==0&&W(Us+" J"),Ws!==0&&W(Ws+" j"),Ce.publish("addPage",{pageNumber:Ve})},m=function(v){v>0&&v<=Ve&&(Bt.splice(v,1),ue.splice(v,1),Ve--,X>Ve&&(X=Ve),this.setPage(X))},x=function(v){v>0&&v<=Ve&&(X=v)},_=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Bt.length-1},B=function(v,I,z){var K,at=void 0;return z=z||{},v=v!==void 0?v:Ie[xe].fontName,I=I!==void 0?I:Ie[xe].fontStyle,K=v.toLowerCase(),Ye[K]!==void 0&&Ye[K][I]!==void 0?at=Ye[K][I]:Ye[v]!==void 0&&Ye[v][I]!==void 0?at=Ye[v][I]:z.disableWarning===!1&&Re.warn("Unable to look up font label for font '"+v+"', '"+I+"'. Refer to getFontList() for available fonts."),at||z.noFallback||(at=Ye.times[I])==null&&(at=Ye.times.normal),at},H=g.__private__.putInfo=function(){var v=er(),I=function(K){return K};for(var z in y!==null&&(I=ce.encryptor(v,0)),W("<<"),W("/Producer ("+r(I("jsPDF "+ne.version))+")"),ae)ae.hasOwnProperty(z)&&ae[z]&&W("/"+z.substr(0,1).toUpperCase()+z.substr(1)+" ("+r(I(ae[z]))+")");W("/CreationDate ("+r(I(bt))+")"),W(">>"),W("endobj")},V=g.__private__.putCatalog=function(v){var I=(v=v||{}).rootDictionaryObjId||gi;switch(er(),W("<<"),W("/Type /Catalog"),W("/Pages "+I+" 0 R"),Wt||(Wt="fullwidth"),Wt){case"fullwidth":W("/OpenAction [3 0 R /FitH null]");break;case"fullheight":W("/OpenAction [3 0 R /FitV null]");break;case"fullpage":W("/OpenAction [3 0 R /Fit]");break;case"original":W("/OpenAction [3 0 R /XYZ null null 1]");break;default:var z=""+Wt;z.substr(z.length-1)==="%"&&(Wt=parseInt(Wt)/100),typeof Wt=="number"&&W("/OpenAction [3 0 R /XYZ null null "+yt(Wt)+"]")}switch(we||(we="continuous"),we){case"continuous":W("/PageLayout /OneColumn");break;case"single":W("/PageLayout /SinglePage");break;case"two":case"twoleft":W("/PageLayout /TwoColumnLeft");break;case"tworight":W("/PageLayout /TwoColumnRight")}le&&W("/PageMode /"+le),Ce.publish("putCatalog"),W(">>"),W("endobj")},ct=g.__private__.putTrailer=function(){W("trailer"),W("<<"),W("/Size "+(nt+1)),W("/Root "+nt+" 0 R"),W("/Info "+(nt-1)+" 0 R"),y!==null&&W("/Encrypt "+ce.oid+" 0 R"),W("/ID [ <"+gt+"> <"+gt+"> ]"),W(">>")},Tt=g.__private__.putHeader=function(){W("%PDF-"+N),W("%")},Nt=g.__private__.putXRef=function(){var v="0000000000";W("xref"),W("0 "+(nt+1)),W("0000000000 65535 f ");for(var I=1;I<=nt;I++)typeof pt[I]=="function"?W((v+pt[I]()).slice(-10)+" 00000 n "):pt[I]!==void 0?W((v+pt[I]).slice(-10)+" 00000 n "):W("0000000000 00000 n ")},Dt=g.__private__.buildDocument=function(){se(),Lt(dt),Ce.publish("buildDocument"),Tt(),qi(),ge(),Kn(),y!==null&&Ms(),H(),V();var v=mt;return Nt(),ct(),W("startxref"),W(""+v),W("%%EOF"),Lt(Bt[X]),dt.join(`
`)},Kt=g.__private__.getBlob=function(v){return new Blob([Jt(v)],{type:"application/pdf"})},fe=g.output=g.__private__.output=Zr(function(v,I){switch(typeof(I=I||{})=="string"?I={filename:I}:I.filename=I.filename||"generated.pdf",v){case void 0:return Dt();case"save":g.save(I.filename);break;case"arraybuffer":return Jt(Dt());case"blob":return Kt(Dt());case"bloburi":case"bloburl":if(oe.URL!==void 0&&typeof oe.URL.createObjectURL=="function")return oe.URL&&oe.URL.createObjectURL(Kt(Dt()))||void 0;Re.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var z="",K=Dt();try{z=_l(K)}catch{z=_l(unescape(encodeURIComponent(K)))}return"data:application/pdf;filename="+I.filename+";base64,"+z;case"pdfobjectnewwindow":if(Object.prototype.toString.call(oe)==="[object Window]"){var at="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",At=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';I.pdfObjectUrl&&(at=I.pdfObjectUrl,At="");var kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+at+'"'+At+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(I)+");<\/script></body></html>",Vt=oe.open();return Vt!==null&&Vt.document.write(kt),Vt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(oe)==="[object Window]"){var Qt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(I.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+I.filename+'" width="500px" height="400px" /></body></html>',ve=oe.open();if(ve!==null){ve.document.write(Qt);var pe=this;ve.document.documentElement.querySelector("#pdfViewer").onload=function(){ve.document.title=I.filename,ve.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(pe.output("bloburl"))}}return ve}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(oe)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Le='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",I)+'"></iframe></body></html>',$e=oe.open();if($e!==null&&($e.document.write(Le),$e.document.title=I.filename),$e||typeof safari>"u")return $e;break;case"datauri":case"dataurl":return oe.document.location.href=this.output("datauristring",I);default:return null}}),ye=function(v){return Array.isArray(Di)===!0&&Di.indexOf(v)>-1};switch(i){case"pt":Ht=1;break;case"mm":Ht=72/25.4;break;case"cm":Ht=72/2.54;break;case"in":Ht=72;break;case"px":Ht=ye("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ht=12;break;case"ex":Ht=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Ht=i}var ce=null;Yt(),ut();var gr=function(v){return y!==null?ce.encryptor(v,0):function(I){return I}},Mr=g.__private__.getPageInfo=g.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ue[v].objId,pageNumber:v,pageContext:ue[v]}},re=g.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var I in ue)if(ue[I].objId===v)break;return Mr(I)},qs=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:ue[X].objId,pageNumber:X,pageContext:ue[X]}};g.addPage=function(){return c.apply(this,arguments),this},g.setPage=function(){return x.apply(this,arguments),Lt.call(this,Bt[X]),this},g.insertPage=function(v){return this.addPage(),this.movePage(X,v),this},g.movePage=function(v,I){var z,K;if(v>I){z=Bt[v],K=ue[v];for(var at=v;at>I;at--)Bt[at]=Bt[at-1],ue[at]=ue[at-1];Bt[I]=z,ue[I]=K,this.setPage(I)}else if(v<I){z=Bt[v],K=ue[v];for(var At=v;At<I;At++)Bt[At]=Bt[At+1],ue[At]=ue[At+1];Bt[I]=z,ue[I]=K,this.setPage(I)}return this},g.deletePage=function(){return m.apply(this,arguments),this},g.__private__.text=g.text=function(v,I,z,K,at){var At,kt,Vt,Qt,ve,pe,Le,$e,Ke,or=(K=K||{}).scope||this;if(typeof v=="number"&&typeof I=="number"&&(typeof z=="string"||Array.isArray(z))){var _r=z;z=I,I=v,v=_r}if(arguments[3]instanceof ee?(J("The transform parameter of text() with a Matrix value"),Ke=at):(Vt=arguments[4],Qt=arguments[5],Me(Le=arguments[3])==="object"&&Le!==null||(typeof Vt=="string"&&(Qt=Vt,Vt=null),typeof Le=="string"&&(Qt=Le,Le=null),typeof Le=="number"&&(Vt=Le,Le=null),K={flags:Le,angle:Vt,align:Qt})),isNaN(I)||isNaN(z)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return or;var vr="",bi=!1,Kr=typeof K.lineHeightFactor=="number"?K.lineHeightFactor:On,Ti=or.internal.scaleFactor;function ka(ze){return ze=ze.split("	").join(Array(K.TabLen||9).join(" ")),r(ze,Le)}function Js(ze){for(var Ue,ir=ze.concat(),fr=[],zi=ir.length;zi--;)typeof(Ue=ir.shift())=="string"?fr.push(Ue):Array.isArray(ze)&&(Ue.length===1||Ue[1]===void 0&&Ue[2]===void 0)?fr.push(Ue[0]):fr.push([Ue[0],Ue[1],Ue[2]]);return fr}function Zs(ze,Ue){var ir;if(typeof ze=="string")ir=Ue(ze)[0];else if(Array.isArray(ze)){for(var fr,zi,sa=ze.concat(),ps=[],Da=sa.length;Da--;)typeof(fr=sa.shift())=="string"?ps.push(Ue(fr)[0]):Array.isArray(fr)&&typeof fr[0]=="string"&&(zi=Ue(fr[0],fr[1],fr[2]),ps.push([zi[0],zi[1],zi[2]]));ir=ps}return ir}var ns=!1,Ks=!0;if(typeof v=="string")ns=!0;else if(Array.isArray(v)){var Qs=v.concat();kt=[];for(var ss,Sr=Qs.length;Sr--;)(typeof(ss=Qs.shift())!="string"||Array.isArray(ss)&&typeof ss[0]!="string")&&(Ks=!1);ns=Ks}if(ns===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var as=qt/or.internal.scaleFactor,os=as*(Kr-1);switch(K.baseline){case"bottom":z-=os;break;case"top":z+=as-os;break;case"hanging":z+=as-2*os;break;case"middle":z+=as/2-os}if((pe=K.maxWidth||0)>0&&(typeof v=="string"?v=or.splitTextToSize(v,pe):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(ze,Ue){return ze.concat(or.splitTextToSize(Ue,pe))},[]))),At={text:v,x:I,y:z,options:K,mutex:{pdfEscape:r,activeFontKey:xe,fonts:Ie,activeFontSize:qt}},Ce.publish("preProcessText",At),v=At.text,Vt=(K=At.options).angle,!(Ke instanceof ee)&&Vt&&typeof Vt=="number"){Vt*=Math.PI/180,K.rotationDirection===0&&(Vt=-Vt),Y===F.ADVANCED&&(Vt=-Vt);var ls=Math.cos(Vt),ta=Math.sin(Vt);Ke=new ee(ls,ta,-ta,ls,0,0)}else Vt&&Vt instanceof ee&&(Ke=Vt);Y!==F.ADVANCED||Ke||(Ke=si),(ve=K.charSpace||es)!==void 0&&(vr+=ot(R(ve))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),($e=K.horizontalScale)!==void 0&&(vr+=ot(100*$e)+` Tz
`),K.lang;var qr=-1,ko=K.renderingMode!==void 0?K.renderingMode:K.stroke,ea=or.internal.getCurrentPageInfo().pageContext;switch(ko){case 0:case!1:case"fill":qr=0;break;case 1:case!0:case"stroke":qr=1;break;case 2:case"fillThenStroke":qr=2;break;case 3:case"invisible":qr=3;break;case 4:case"fillAndAddForClipping":qr=4;break;case 5:case"strokeAndAddPathForClipping":qr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":qr=6;break;case 7:case"addToPathForClipping":qr=7}var Ea=ea.usedRenderingMode!==void 0?ea.usedRenderingMode:-1;qr!==-1?vr+=qr+` Tr
`:Ea!==-1&&(vr+=`0 Tr
`),qr!==-1&&(ea.usedRenderingMode=qr),Qt=K.align||"left";var oi,us=qt*Kr,Ma=or.internal.pageSize.getWidth(),Oa=Ie[xe];ve=K.charSpace||es,pe=K.maxWidth||0,Le=Object.assign({autoencode:!0,noBOM:!0},K.flags);var un=[],qn=function(ze){return or.getStringUnitWidth(ze,{font:Oa,charSpace:ve,fontSize:qt,doKerning:!1})*qt/Ti};if(Object.prototype.toString.call(v)==="[object Array]"){var Rr;kt=Js(v),Qt!=="left"&&(oi=kt.map(qn));var Or,hn=0;if(Qt==="right"){I-=oi[0],v=[],Sr=kt.length;for(var ji=0;ji<Sr;ji++)ji===0?(Or=Ii(I),Rr=Ri(z)):(Or=R(hn-oi[ji]),Rr=-us),v.push([kt[ji],Or,Rr]),hn=oi[ji]}else if(Qt==="center"){I-=oi[0]/2,v=[],Sr=kt.length;for(var Xi=0;Xi<Sr;Xi++)Xi===0?(Or=Ii(I),Rr=Ri(z)):(Or=R((hn-oi[Xi])/2),Rr=-us),v.push([kt[Xi],Or,Rr]),hn=oi[Xi]}else if(Qt==="left"){v=[],Sr=kt.length;for(var hs=0;hs<Sr;hs++)v.push(kt[hs])}else if(Qt==="justify"&&Oa.encoding==="Identity-H"){v=[],Sr=kt.length,pe=pe!==0?pe:Ma;for(var Yi=0,rr=0;rr<Sr;rr++)if(Rr=rr===0?Ri(z):-us,Or=rr===0?Ii(I):Yi,rr<Sr-1){var ra=R((pe-oi[rr])/(kt[rr].split(" ").length-1)),Br=kt[rr].split(" ");v.push([Br[0]+" ",Or,Rr]),Yi=0;for(var li=1;li<Br.length;li++){var fs=(qn(Br[li-1]+" "+Br[li])-qn(Br[li]))*Ti+ra;li==Br.length-1?v.push([Br[li],fs,0]):v.push([Br[li]+" ",fs,0]),Yi-=fs}}else v.push([kt[rr],Or,Rr]);v.push(["",Yi,0])}else{if(Qt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Sr=kt.length,pe=pe!==0?pe:Ma,rr=0;rr<Sr;rr++)Rr=rr===0?Ri(z):-us,Or=rr===0?Ii(I):0,rr<Sr-1?un.push(ot(R((pe-oi[rr])/(kt[rr].split(" ").length-1)))):un.push(0),v.push([kt[rr],Or,Rr])}}var Ba=typeof K.R2L=="boolean"?K.R2L:Zt;Ba===!0&&(v=Zs(v,function(ze,Ue,ir){return[ze.split("").reverse().join(""),Ue,ir]})),At={text:v,x:I,y:z,options:K,mutex:{pdfEscape:r,activeFontKey:xe,fonts:Ie,activeFontSize:qt}},Ce.publish("postProcessText",At),v=At.text,bi=At.mutex.isHex||!1;var ia=Ie[xe].encoding;ia!=="WinAnsiEncoding"&&ia!=="StandardEncoding"||(v=Zs(v,function(ze,Ue,ir){return[ka(ze),Ue,ir]})),kt=Js(v),v=[];for(var Rn,jn,fn,Xn=0,cs=1,Yn=Array.isArray(kt[0])?cs:Xn,cn="",na=function(ze,Ue,ir){var fr="";return ir instanceof ee?(ir=typeof K.angle=="number"?Hr(ir,new ee(1,0,0,1,ze,Ue)):Hr(new ee(1,0,0,1,ze,Ue),ir),Y===F.ADVANCED&&(ir=Hr(new ee(1,0,0,-1,0,0),ir)),fr=ir.join(" ")+` Tm
`):fr=ot(ze)+" "+ot(Ue)+` Td
`,fr},ui=0;ui<kt.length;ui++){switch(cn="",Yn){case cs:fn=(bi?"<":"(")+kt[ui][0]+(bi?">":")"),Rn=parseFloat(kt[ui][1]),jn=parseFloat(kt[ui][2]);break;case Xn:fn=(bi?"<":"(")+kt[ui]+(bi?">":")"),Rn=Ii(I),jn=Ri(z)}un!==void 0&&un[ui]!==void 0&&(cn=un[ui]+` Tw
`),ui===0?v.push(cn+na(Rn,jn,Ke)+fn):Yn===Xn?v.push(cn+fn):Yn===cs&&v.push(cn+na(Rn,jn,Ke)+fn)}v=Yn===Xn?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var hi=`BT
/`;return hi+=xe+" "+qt+` Tf
`,hi+=ot(qt*Kr)+` TL
`,hi+=Bn+`
`,hi+=vr,hi+=v,W(hi+="ET"),P[xe]=!0,or};var Rs=g.__private__.clip=g.clip=function(v){return W(v==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Rs("evenodd")},g.__private__.discardPath=g.discardPath=function(){return W("n"),this};var Pr=g.__private__.isValidStyle=function(v){var I=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(I=!0),I};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(v){return Pr(v)&&(d=v),this};var Aa=g.__private__.getStyle=g.getStyle=function(v){var I=d;switch(v){case"D":case"S":I="S";break;case"F":I="f";break;case"FD":case"DF":I="B";break;case"f":case"f*":case"B":case"B*":I=v}return I},La=g.close=function(){return W("h"),this};g.stroke=function(){return W("S"),this},g.fill=function(v){return Qn("f",v),this},g.fillEvenOdd=function(v){return Qn("f*",v),this},g.fillStroke=function(v){return Qn("B",v),this},g.fillStrokeEvenOdd=function(v){return Qn("B*",v),this};var Qn=function(v,I){Me(I)==="object"?Lo(I,v):W(v)},js=function(v){v===null||Y===F.ADVANCED&&v===void 0||(v=Aa(v),W(v))};function Ao(v,I,z,K,at){var At=new Wn(I||this.boundingBox,z||this.xStep,K||this.yStep,this.gState,at||this.matrix);At.stream=this.stream;var kt=v+"$$"+this.cloneIndex+++"$$";return Nr(kt,At),At}var Lo=function(v,I){var z=Ci[v.key],K=_e[z];if(K instanceof Sn)W("q"),W(No(I)),K.gState&&g.setGState(K.gState),W(v.matrix.toString()+" cm"),W("/"+z+" sh"),W("Q");else if(K instanceof Wn){var at=new ee(1,0,0,-1,0,ln());v.matrix&&(at=at.multiply(v.matrix||si),z=Ao.call(K,v.key,v.boundingBox,v.xStep,v.yStep,at).id),W("q"),W("/Pattern cs"),W("/"+z+" scn"),K.gState&&g.setGState(K.gState),W(I),W("Q")}},No=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Xs=g.moveTo=function(v,I){return W(ot(R(v))+" "+ot(G(I))+" m"),this},Mn=g.lineTo=function(v,I){return W(ot(R(v))+" "+ot(G(I))+" l"),this},an=g.curveTo=function(v,I,z,K,at,At){return W([ot(R(v)),ot(G(I)),ot(R(z)),ot(G(K)),ot(R(at)),ot(G(At)),"c"].join(" ")),this};g.__private__.line=g.line=function(v,I,z,K,at){if(isNaN(v)||isNaN(I)||isNaN(z)||isNaN(K)||!Pr(at))throw new Error("Invalid arguments passed to jsPDF.line");return Y===F.COMPAT?this.lines([[z-v,K-I]],v,I,[1,1],at||"S"):this.lines([[z-v,K-I]],v,I,[1,1]).stroke()},g.__private__.lines=g.lines=function(v,I,z,K,at,At){var kt,Vt,Qt,ve,pe,Le,$e,Ke,or,_r,vr,bi;if(typeof v=="number"&&(bi=z,z=I,I=v,v=bi),K=K||[1,1],At=At||!1,isNaN(I)||isNaN(z)||!Array.isArray(v)||!Array.isArray(K)||!Pr(at)||typeof At!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Xs(I,z),kt=K[0],Vt=K[1],ve=v.length,_r=I,vr=z,Qt=0;Qt<ve;Qt++)(pe=v[Qt]).length===2?(_r=pe[0]*kt+_r,vr=pe[1]*Vt+vr,Mn(_r,vr)):(Le=pe[0]*kt+_r,$e=pe[1]*Vt+vr,Ke=pe[2]*kt+_r,or=pe[3]*Vt+vr,_r=pe[4]*kt+_r,vr=pe[5]*Vt+vr,an(Le,$e,Ke,or,_r,vr));return At&&La(),js(at),this},g.path=function(v){for(var I=0;I<v.length;I++){var z=v[I],K=z.c;switch(z.op){case"m":Xs(K[0],K[1]);break;case"l":Mn(K[0],K[1]);break;case"c":an.apply(this,K);break;case"h":La()}}return this},g.__private__.rect=g.rect=function(v,I,z,K,at){if(isNaN(v)||isNaN(I)||isNaN(z)||isNaN(K)||!Pr(at))throw new Error("Invalid arguments passed to jsPDF.rect");return Y===F.COMPAT&&(K=-K),W([ot(R(v)),ot(G(I)),ot(R(z)),ot(R(K)),"re"].join(" ")),js(at),this},g.__private__.triangle=g.triangle=function(v,I,z,K,at,At,kt){if(isNaN(v)||isNaN(I)||isNaN(z)||isNaN(K)||isNaN(at)||isNaN(At)||!Pr(kt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[z-v,K-I],[at-z,At-K],[v-at,I-At]],v,I,[1,1],kt,!0),this},g.__private__.roundedRect=g.roundedRect=function(v,I,z,K,at,At,kt){if(isNaN(v)||isNaN(I)||isNaN(z)||isNaN(K)||isNaN(at)||isNaN(At)||!Pr(kt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Vt=4/3*(Math.SQRT2-1);return at=Math.min(at,.5*z),At=Math.min(At,.5*K),this.lines([[z-2*at,0],[at*Vt,0,at,At-At*Vt,at,At],[0,K-2*At],[0,At*Vt,-at*Vt,At,-at,At],[2*at-z,0],[-at*Vt,0,-at,-At*Vt,-at,-At],[0,2*At-K],[0,-At*Vt,at*Vt,-At,at,-At]],v+at,I,[1,1],kt,!0),this},g.__private__.ellipse=g.ellipse=function(v,I,z,K,at){if(isNaN(v)||isNaN(I)||isNaN(z)||isNaN(K)||!Pr(at))throw new Error("Invalid arguments passed to jsPDF.ellipse");var At=4/3*(Math.SQRT2-1)*z,kt=4/3*(Math.SQRT2-1)*K;return Xs(v+z,I),an(v+z,I-kt,v+At,I-K,v,I-K),an(v-At,I-K,v-z,I-kt,v-z,I),an(v-z,I+kt,v-At,I+K,v,I+K),an(v+At,I+K,v+z,I+kt,v+z,I),js(at),this},g.__private__.circle=g.circle=function(v,I,z,K){if(isNaN(v)||isNaN(I)||isNaN(z)||!Pr(K))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,I,z,z,K)},g.setFont=function(v,I,z){return z&&(I=vt(I,z)),xe=B(v,I,{disableWarning:!1}),this};var _o=g.__private__.getFont=g.getFont=function(){return Ie[B.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var v,I,z={};for(v in Ye)if(Ye.hasOwnProperty(v))for(I in z[v]=[],Ye[v])Ye[v].hasOwnProperty(I)&&z[v].push(I);return z},g.addFont=function(v,I,z,K,at){var At=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&At.indexOf(arguments[3])!==-1?at=arguments[3]:arguments[3]&&At.indexOf(arguments[3])==-1&&(z=vt(z,K)),at=at||"Identity-H",En.call(this,v,I,z,at)};var On,Ys=n.lineWidth||.200025,ts=g.__private__.getLineWidth=g.getLineWidth=function(){return Ys},Na=g.__private__.setLineWidth=g.setLineWidth=function(v){return Ys=v,W(ot(R(v))+" w"),this};g.__private__.setLineDash=ne.API.setLineDash=ne.API.setLineDashPattern=function(v,I){if(v=v||[],I=I||0,isNaN(I)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(z){return ot(R(z))}).join(" "),I=ot(R(I)),W("["+v+"] "+I+" d"),this};var _a=g.__private__.getLineHeight=g.getLineHeight=function(){return qt*On};g.__private__.getLineHeight=g.getLineHeight=function(){return qt*On};var Ca=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(On=v),this},Ia=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return On};Ca(n.lineHeight);var Ii=g.__private__.getHorizontalCoordinate=function(v){return R(v)},Ri=g.__private__.getVerticalCoordinate=function(v){return Y===F.ADVANCED?v:ue[X].mediaBox.topRightY-ue[X].mediaBox.bottomLeftY-R(v)},Co=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(v){return ot(Ii(v))},on=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(v){return ot(Ri(v))},yi=n.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Gr(yi)},g.__private__.setStrokeColor=g.setDrawColor=function(v,I,z,K){return yi=$r({ch1:v,ch2:I,ch3:z,ch4:K,pdfColorType:"draw",precision:2}),W(yi),this};var zs=n.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Gr(zs)},g.__private__.setFillColor=g.setFillColor=function(v,I,z,K){return zs=$r({ch1:v,ch2:I,ch3:z,ch4:K,pdfColorType:"fill",precision:2}),W(zs),this};var Bn=n.textColor||"0 g",Io=g.__private__.getTextColor=g.getTextColor=function(){return Gr(Bn)};g.__private__.setTextColor=g.setTextColor=function(v,I,z,K){return Bn=$r({ch1:v,ch2:I,ch3:z,ch4:K,pdfColorType:"text",precision:3}),this};var es=n.charSpace,To=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(es||0)};g.__private__.setCharSpace=g.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return es=v,this};var Us=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(v){var I=g.CapJoinStyles[v];if(I===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Us=I,W(I+" J"),this};var Ws=0;g.__private__.setLineJoin=g.setLineJoin=function(v){var I=g.CapJoinStyles[v];if(I===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ws=I,W(I+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return W(ot(R(v))+" M"),this},g.GState=Gn,g.setGState=function(v){(v=typeof v=="string"?He[Wr[v]]:Ta(null,v)).equals(mi)||(W("/"+v.id+" gs"),mi=v)};var Ta=function(v,I){if(!v||!Wr[v]){var z=!1;for(var K in He)if(He.hasOwnProperty(K)&&He[K].equals(I)){z=!0;break}if(z)I=He[K];else{var at="GS"+(Object.keys(He).length+1).toString(10);He[at]=I,I.id=at}return v&&(Wr[v]=I.id),Ce.publish("addGState",I),I}};g.addGState=function(v,I){return Ta(v,I),this},g.saveGraphicsState=function(){return W("q"),Ur.push({key:xe,size:qt,color:Bn}),this},g.restoreGraphicsState=function(){W("Q");var v=Ur.pop();return xe=v.key,qt=v.size,Bn=v.color,mi=null,this},g.setCurrentTransformationMatrix=function(v){return W(v.toString()+" cm"),this},g.comment=function(v){return W("#"+v),this};var rs=function(v,I){var z=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return z},set:function(At){isNaN(At)||(z=parseFloat(At))}});var K=I||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return K},set:function(At){isNaN(At)||(K=parseFloat(At))}});var at="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return at},set:function(At){at=At.toString()}}),this},Hs=function(v,I,z,K){rs.call(this,v,I),this.type="rect";var at=z||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return at},set:function(kt){isNaN(kt)||(at=parseFloat(kt))}});var At=K||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return At},set:function(kt){isNaN(kt)||(At=parseFloat(kt))}}),this},Vs=function(){this.page=Ve,this.currentPage=X,this.pages=Bt.slice(0),this.pagesContext=ue.slice(0),this.x=dr,this.y=Ae,this.matrix=zr,this.width=Dn(X),this.height=ln(X),this.outputDestination=jt,this.id="",this.objectNumber=-1};Vs.prototype.restore=function(){Ve=this.page,X=this.currentPage,ue=this.pagesContext,Bt=this.pages,dr=this.x,Ae=this.y,zr=this.matrix,Gs(X,this.width),$s(X,this.height),jt=this.outputDestination};var Fa=function(v,I,z,K,at){ni.push(new Vs),Ve=X=0,Bt=[],dr=v,Ae=I,zr=at,o([z,K])},Fo=function(v){if(ii[v])ni.pop().restore();else{var I=new Vs,z="Xo"+(Object.keys(hr).length+1).toString(10);I.id=z,ii[v]=z,hr[z]=I,Ce.publish("addFormObject",I),ni.pop().restore()}};for(var is in g.beginFormObject=function(v,I,z,K,at){return Fa(v,I,z,K,at),this},g.endFormObject=function(v){return Fo(v),this},g.doFormObject=function(v,I){var z=hr[ii[v]];return W("q"),W(I.toString()+" cm"),W("/"+z.id+" Do"),W("Q"),this},g.getFormObject=function(v){var I=hr[ii[v]];return{x:I.x,y:I.y,width:I.width,height:I.height,matrix:I.matrix}},g.save=function(v,I){return v=v||"generated.pdf",(I=I||{}).returnPromise=I.returnPromise||!1,I.returnPromise===!1?(Un(Kt(Dt()),v),typeof Un.unload=="function"&&oe.setTimeout&&setTimeout(Un.unload,911),this):new Promise(function(z,K){try{var at=Un(Kt(Dt()),v);typeof Un.unload=="function"&&oe.setTimeout&&setTimeout(Un.unload,911),z(at)}catch(At){K(At.message)}})},ne.API)ne.API.hasOwnProperty(is)&&(is==="events"&&ne.API.events.length?function(v,I){var z,K,at;for(at=I.length-1;at!==-1;at--)z=I[at][0],K=I[at][1],v.subscribe.apply(v,[z].concat(typeof K=="function"?[K]:K))}(Ce,ne.API.events):g[is]=ne.API[is]);var Dn=g.getPageWidth=function(v){return(ue[v=v||X].mediaBox.topRightX-ue[v].mediaBox.bottomLeftX)/Ht},Gs=g.setPageWidth=function(v,I){ue[v].mediaBox.topRightX=I*Ht+ue[v].mediaBox.bottomLeftX},ln=g.getPageHeight=function(v){return(ue[v=v||X].mediaBox.topRightY-ue[v].mediaBox.bottomLeftY)/Ht},$s=g.setPageHeight=function(v,I){ue[v].mediaBox.topRightY=I*Ht+ue[v].mediaBox.bottomLeftY};return g.internal={pdfEscape:r,getStyle:Aa,getFont:_o,getFontSize:Xt,getCharSpace:To,getTextColor:Io,getLineHeight:_a,getLineHeightFactor:Ia,getLineWidth:ts,write:he,getHorizontalCoordinate:Ii,getVerticalCoordinate:Ri,getCoordinateString:Co,getVerticalCoordinateString:on,collections:{},newObject:er,newAdditionalObject:Ki,newObjectDeferred:Je,newObjectDeferredBegin:Er,getFilters:ai,putStream:mr,events:Ce,scaleFactor:Ht,pageSize:{getWidth:function(){return Dn(X)},setWidth:function(v){Gs(X,v)},getHeight:function(){return ln(X)},setHeight:function(v){$s(X,v)}},encryptionOptions:y,encryption:ce,getEncryptor:gr,output:fe,getNumberOfPages:_,pages:Bt,out:W,f2:yt,f3:q,getPageInfo:Mr,getPageInfoByObjId:re,getCurrentPageInfo:qs,getPDFVersion:A,Point:rs,Rectangle:Hs,Matrix:ee,hasHotfix:ye},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Dn(X)},set:function(v){Gs(X,v)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return ln(X)},set:function(v){$s(X,v)},enumerable:!0,configurable:!0}),Ds.call(g,Mt),xe="F1",c(s,e),Ce.publish("initialized"),g}xs.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},xs.prototype.toHexString=function(n){return n.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},xs.prototype.hexToBytes=function(n){for(var t=[],e=0;e<n.length;e+=2)t.push(String.fromCharCode(parseInt(n.substr(e,2),16)));return t.join("")},xs.prototype.processOwnerPassword=function(n,t){return Il(Cl(t).substr(0,5),n)},xs.prototype.encryptor=function(n,t){var e=Cl(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return Il(e,i)}},Gn.prototype.equals=function(n){var t,e="id,objectNumber,equals";if(!n||Me(n)!==Me(this))return!1;var i=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!n.hasOwnProperty(t)||this[t]!==n[t])return!1;i++}for(t in n)n.hasOwnProperty(t)&&e.indexOf(t)<0&&i--;return i===0},ne.API={events:[]},ne.version="3.0.1";var tr=ne.API,jl=1,$n=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ys=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},de=function(n){return n.toFixed(2)},xn=function(n){return n.toFixed(5)};tr.__acroform__={};var Yr=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},Eu=function(n){return n*jl},ki=function(n){var t=new Ih,e=$t.internal.getHeight(n)||0,i=$t.internal.getWidth(n)||0;return t.BBox=[0,0,Number(de(i)),Number(de(e))],t},Tc=tr.__acroform__.setBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<t},Fc=tr.__acroform__.clearBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<t)},kc=tr.__acroform__.getBit=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<t)==0?0:1},nr=tr.__acroform__.getBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return kc(n,t-1)},sr=tr.__acroform__.setBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Tc(n,t-1)},ar=tr.__acroform__.clearBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Fc(n,t-1)},Ec=tr.__acroform__.calculateCoordinates=function(n,t){var e=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,s=n[0],a=n[1],l=n[2],h=n[3],f={};return f.lowerLeft_X=e(s)||0,f.lowerLeft_Y=i(a+h)||0,f.upperRight_X=e(s+l)||0,f.upperRight_Y=i(a)||0,[Number(de(f.lowerLeft_X)),Number(de(f.lowerLeft_Y)),Number(de(f.upperRight_X)),Number(de(f.upperRight_Y))]},Mc=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var t=[],e=n._V||n.DV,i=Tl(n,e),s=n.scope.internal.getFont(n.fontName,n.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.scope.__private__.encodeColorString(n.color)),t.push("/"+s+" "+de(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=ki(n);return a.scope=n.scope,a.stream=t.join(`
`),a}},Tl=function(n,t){var e=n.fontSize===0?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=n.multiline?s.map(function(q){return q.split(`
`)}):s.map(function(q){return[q]});var a=e,l=$t.internal.getHeight(n)||0;l=l<0?-l:l;var h=$t.internal.getWidth(n)||0;h=h<0?-h:h;var f=function(q,R,Z){if(q+1<s.length){var G=R+" "+s[q+1][0];return so(G,n,Z).width<=h-4}return!1};a++;t:for(;a>0;){t="",a--;var d,y,w=so("3",n,a).height,P=n.multiline?l-a:(l-w)/2,g=P+=2,N=0,A=0,T=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+so(t,n,a=12).width+", FieldWidth:"+h+`
`;break}for(var L="",F=0,Y=0;Y<s.length;Y++)if(s.hasOwnProperty(Y)){var it=!1;if(s[Y].length!==1&&T!==s[Y].length-1){if((w+2)*(F+2)+2>l)continue t;L+=s[Y][T],it=!0,A=Y,Y--}else{L=(L+=s[Y][T]+" ").substr(L.length-1)==" "?L.substr(0,L.length-1):L;var $=parseInt(Y),vt=f($,L,a),ot=Y>=s.length-1;if(vt&&!ot){L+=" ",T=0;continue}if(vt||ot){if(ot)A=$;else if(n.multiline&&(w+2)*(F+2)+2>l)continue t}else{if(!n.multiline||(w+2)*(F+2)+2>l)continue t;A=$}}for(var J="",lt=N;lt<=A;lt++){var yt=s[lt];if(n.multiline){if(lt===A){J+=yt[T]+" ",T=(T+1)%yt.length;continue}if(lt===N){J+=yt[yt.length-1]+" ";continue}}J+=yt[0]+" "}switch(J=J.substr(J.length-1)==" "?J.substr(0,J.length-1):J,y=so(J,n,a).width,n.textAlign){case"right":d=h-y-2;break;case"center":d=(h-y)/2;break;case"left":default:d=2}t+=de(d)+" "+de(g)+` Td
`,t+="("+$n(J)+`) Tj
`,t+=-de(d)+` 0 Td
`,g=-(a+2),y=0,N=it?A:A+1,F++,L=""}break}return i.text=t,i.fontSize=a,i},so=function(n,t,e){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:s}},Oc={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Bc=function(n,t){var e={type:"reference",object:n};t.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===e.type&&i.object===e.object})===void 0&&t.internal.getPageInfo(n.page).pageContext.annotations.push(e)},Dc=function(n,t){for(var e in n)if(n.hasOwnProperty(e)){var i=e,s=n[e];t.internal.newObjectDeferredBegin(s.objId,!0),Me(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete n[i]}},qc=function(n,t){if(t.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Ni.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Oc)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");jl=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new Th,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];a.objId=void 0,a.hasAnnotation&&Bc(a,e)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(e){(function(i,s){var a=!i;for(var l in i||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(l)){var h=i[l],f=[],d=h.Rect;if(h.Rect&&(h.Rect=Ec(h.Rect,s)),s.internal.newObjectDeferredBegin(h.objId,!0),h.DA=$t.createDefaultAppearanceStream(h),Me(h)==="object"&&typeof h.getKeyValueListForStream=="function"&&(f=h.getKeyValueListForStream()),h.Rect=d,h.hasAppearanceStream&&!h.appearanceStreamContent){var y=Mc(h);f.push({key:"AP",value:"<</N "+y+">>"}),s.internal.acroformPlugin.xForms.push(y)}if(h.appearanceStreamContent){var w="";for(var P in h.appearanceStreamContent)if(h.appearanceStreamContent.hasOwnProperty(P)){var g=h.appearanceStreamContent[P];if(w+="/"+P+" ",w+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var l in g)if(g.hasOwnProperty(l)){var N=g[l];typeof N=="function"&&(N=N.call(s,h)),w+="/"+l+" "+N+" ",s.internal.acroformPlugin.xForms.indexOf(N)>=0||s.internal.acroformPlugin.xForms.push(N)}}else typeof(N=g)=="function"&&(N=N.call(s,h)),w+="/"+l+" "+N,s.internal.acroformPlugin.xForms.indexOf(N)>=0||s.internal.acroformPlugin.xForms.push(N);w+=">>"}f.push({key:"AP",value:`<<
`+w+">>"})}s.internal.putStream({additionalKeyValues:f,objectId:h.objId}),s.internal.out("endobj")}a&&Dc(s.internal.acroformPlugin.xForms,s)})(e,n)}),n.internal.acroformPlugin.isInitialized=!0}},Ch=tr.__acroform__.arrayToPdfArray=function(n,t,e){var i=function(l){return l};if(Array.isArray(n)){for(var s="[",a=0;a<n.length;a++)switch(a!==0&&(s+=" "),Me(n[a])){case"boolean":case"number":case"object":s+=n[a].toString();break;case"string":n[a].substr(0,1)!=="/"?(t!==void 0&&e&&(i=e.internal.getEncryptor(t)),s+="("+$n(i(n[a].toString()))+")"):s+=n[a].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},il=function(n,t,e){var i=function(s){return s};return t!==void 0&&e&&(i=e.internal.getEncryptor(t)),(n=n||"").toString(),n="("+$n(i(n))+")"},Mi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Mi.prototype.toString=function(){return this.objId+" 0 R"},Mi.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Mi.prototype.getKeyValueListForStream=function(){var n=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var i=t[e],s=this[i];s&&(Array.isArray(s)?n.push({key:i,value:Ch(s,this.objId,this.scope)}):s instanceof Mi?(s.scope=this.scope,n.push({key:i,value:s.objId+" 0 R"})):typeof s!="function"&&n.push({key:i,value:s}))}return n};var Ih=function(){Mi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){n=e.trim()},get:function(){return n||null}})};Yr(Ih,Mi);var Th=function(){Mi.call(this);var n,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var e=function(i){return i};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+$n(e(n))+")"}},set:function(e){n=e}})};Yr(Th,Mi);var Ni=function n(){Mi.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute F supplied.');t=L}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!nr(t,3)},set:function(L){L?this.F=sr(t,3):this.F=ar(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute Ff supplied.');e=L}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(L){i=L!==void 0?L:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(L){i[0]=L}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(L){i[1]=L}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(L){i[2]=L}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(L){i[3]=L}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(L){switch(L){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=L;break;default:throw new Error('Invalid value "'+L+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof mo)return;a="FieldObject"+n.FieldNum++}var L=function(F){return F};return this.scope&&(L=this.scope.internal.getEncryptor(this.objId)),"("+$n(L(a))+")"},set:function(L){a=L.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(L){a=L}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(L){l=L}});var h="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return h},set:function(L){h=L}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(L){f=L}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/jl:d},set:function(L){d=L}});var y="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return y},set:function(L){y=L}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof mo||this instanceof Vn))return il(w,this.objId,this.scope)},set:function(L){L=L.toString(),w=L}});var P=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(P)return this instanceof xr?P:il(P,this.objId,this.scope)},set:function(L){L=L.toString(),P=this instanceof xr?L:L.substr(0,1)==="("?ys(L.substr(1,L.length-2)):ys(L)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof xr?ys(P.substr(1,P.length-1)):P},set:function(L){L=L.toString(),P=this instanceof xr?"/"+L:L}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(L){this.V=L}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof xr?g:il(g,this.objId,this.scope)},set:function(L){L=L.toString(),g=this instanceof xr?L:L.substr(0,1)==="("?ys(L.substr(1,L.length-2)):ys(L)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof xr?ys(g.substr(1,g.length-1)):g},set:function(L){L=L.toString(),g=this instanceof xr?"/"+L:L}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,A=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return A},set:function(L){L=!!L,A=L}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(L){N=L}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,1)},set:function(L){L?this.Ff=sr(this.Ff,1):this.Ff=ar(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,2)},set:function(L){L?this.Ff=sr(this.Ff,2):this.Ff=ar(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,3)},set:function(L){L?this.Ff=sr(this.Ff,3):this.Ff=ar(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(L){if([0,1,2].indexOf(L)===-1)throw new Error('Invalid value "'+L+'" for attribute Q supplied.');T=L}}),Object.defineProperty(this,"textAlign",{get:function(){var L;switch(T){case 0:default:L="left";break;case 1:L="center";break;case 2:L="right"}return L},configurable:!0,enumerable:!0,set:function(L){switch(L){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};Yr(Ni,Mi);var As=function(){Ni.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){n=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Ch(t,this.objId,this.scope)},set:function(e){var i,s;s=[],typeof(i=e)=="string"&&(s=function(a,l,h){h||(h=1);for(var f,d=[];f=l.exec(a);)d.push(f[h]);return d}(i,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,i){for(i=i||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,18)},set:function(e){e?this.Ff=sr(this.Ff,18):this.Ff=ar(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=sr(this.Ff,19):this.Ff=ar(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,20)},set:function(e){e?(this.Ff=sr(this.Ff,20),t.sort()):this.Ff=ar(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,22)},set:function(e){e?this.Ff=sr(this.Ff,22):this.Ff=ar(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,23)},set:function(e){e?this.Ff=sr(this.Ff,23):this.Ff=ar(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,27)},set:function(e){e?this.Ff=sr(this.Ff,27):this.Ff=ar(this.Ff,27)}}),this.hasAppearanceStream=!1};Yr(As,Ni);var Ls=function(){As.call(this),this.fontName="helvetica",this.combo=!1};Yr(Ls,As);var Ns=function(){Ls.call(this),this.combo=!0};Yr(Ns,Ls);var ho=function(){Ns.call(this),this.edit=!0};Yr(ho,Ns);var xr=function(){Ni.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,15)},set:function(e){e?this.Ff=sr(this.Ff,15):this.Ff=ar(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,16)},set:function(e){e?this.Ff=sr(this.Ff,16):this.Ff=ar(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,17)},set:function(e){e?this.Ff=sr(this.Ff,17):this.Ff=ar(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,26)},set:function(e){e?this.Ff=sr(this.Ff,26):this.Ff=ar(this.Ff,26)}});var n,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(a){return a};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,s=[];for(i in s.push("<<"),t)s.push("/"+i+" ("+$n(e(t[i]))+")");return s.push(">>"),s.join(`
`)}},set:function(e){Me(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}})};Yr(xr,Ni);var fo=function(){xr.call(this),this.pushButton=!0};Yr(fo,xr);var _s=function(){xr.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t!==void 0?t:[]}})};Yr(_s,xr);var mo=function(){var n,t;Ni.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var e,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(h){return h};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,l=[];for(a in l.push("<<"),i)l.push("/"+a+" ("+$n(s(i[a]))+")");return l.push(">>"),l.join(`
`)},set:function(s){Me(s)==="object"&&(i=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(s){typeof s=="string"&&(i.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(s){e="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=$t.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Yr(mo,Ni),_s.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=n.createAppearanceStream(e.optionName),e.caption=n.getCA()}},_s.prototype.createOption=function(n){var t=new mo;return t.Parent=this,t.optionName=n,this.Kids.push(t),Rc.call(this.scope,t),t};var co=function(){xr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=$t.CheckBox.createAppearanceStream()};Yr(co,xr);var Vn=function(){Ni.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,13)},set:function(t){t?this.Ff=sr(this.Ff,13):this.Ff=ar(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,21)},set:function(t){t?this.Ff=sr(this.Ff,21):this.Ff=ar(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,23)},set:function(t){t?this.Ff=sr(this.Ff,23):this.Ff=ar(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,24)},set:function(t){t?this.Ff=sr(this.Ff,24):this.Ff=ar(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,25)},set:function(t){t?this.Ff=sr(this.Ff,25):this.Ff=ar(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,26)},set:function(t){t?this.Ff=sr(this.Ff,26):this.Ff=ar(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){Number.isInteger(t)&&(n=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Yr(Vn,Ni);var po=function(){Vn.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,14)},set:function(n){n?this.Ff=sr(this.Ff,14):this.Ff=ar(this.Ff,14)}}),this.password=!0};Yr(po,Vn);var $t={CheckBox:{createAppearanceStream:function(){return{N:{On:$t.CheckBox.YesNormal},D:{On:$t.CheckBox.YesPushDown,Off:$t.CheckBox.OffPushDown}}},YesPushDown:function(n){var t=ki(n);t.scope=n.scope;var e=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),a=Tl(n,n.caption);return e.push("0.749023 g"),e.push("0 0 "+de($t.internal.getWidth(n))+" "+de($t.internal.getHeight(n))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+i+" "+de(a.fontSize)+" Tf "+s),e.push("BT"),e.push(a.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(n){var t=ki(n);t.scope=n.scope;var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=[],a=$t.internal.getHeight(n),l=$t.internal.getWidth(n),h=Tl(n,n.caption);return s.push("1 g"),s.push("0 0 "+de(l)+" "+de(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+de(l-1)+" "+de(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+e+" "+de(h.fontSize)+" Tf "+i),s.push(h.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(n){var t=ki(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+de($t.internal.getWidth(n))+" "+de($t.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(n){var t={D:{Off:$t.RadioButton.Circle.OffPushDown},N:{}};return t.N[n]=$t.RadioButton.Circle.YesNormal,t.D[n]=$t.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(n){var t=ki(n);t.scope=n.scope;var e=[],i=$t.internal.getWidth(n)<=$t.internal.getHeight(n)?$t.internal.getWidth(n)/4:$t.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var s=$t.internal.Bezier_C,a=Number((i*s).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+xn($t.internal.getWidth(n)/2)+" "+xn($t.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),e.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),e.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),e.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=ki(n);t.scope=n.scope;var e=[],i=$t.internal.getWidth(n)<=$t.internal.getHeight(n)?$t.internal.getWidth(n)/4:$t.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),a=Number((s*$t.internal.Bezier_C).toFixed(5)),l=Number((i*$t.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+xn($t.internal.getWidth(n)/2)+" "+xn($t.internal.getHeight(n)/2)+" cm"),e.push(s+" 0 m"),e.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),e.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),e.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),e.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+xn($t.internal.getWidth(n)/2)+" "+xn($t.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),e.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),e.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),e.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(n){var t=ki(n);t.scope=n.scope;var e=[],i=$t.internal.getWidth(n)<=$t.internal.getHeight(n)?$t.internal.getWidth(n)/4:$t.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),a=Number((s*$t.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+xn($t.internal.getWidth(n)/2)+" "+xn($t.internal.getHeight(n)/2)+" cm"),e.push(s+" 0 m"),e.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),e.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),e.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),e.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(n){var t={D:{Off:$t.RadioButton.Cross.OffPushDown},N:{}};return t.N[n]=$t.RadioButton.Cross.YesNormal,t.D[n]=$t.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(n){var t=ki(n);t.scope=n.scope;var e=[],i=$t.internal.calculateCross(n);return e.push("q"),e.push("1 1 "+de($t.internal.getWidth(n)-2)+" "+de($t.internal.getHeight(n)-2)+" re"),e.push("W"),e.push("n"),e.push(de(i.x1.x)+" "+de(i.x1.y)+" m"),e.push(de(i.x2.x)+" "+de(i.x2.y)+" l"),e.push(de(i.x4.x)+" "+de(i.x4.y)+" m"),e.push(de(i.x3.x)+" "+de(i.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=ki(n);t.scope=n.scope;var e=$t.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+de($t.internal.getWidth(n))+" "+de($t.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+de($t.internal.getWidth(n)-2)+" "+de($t.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(de(e.x1.x)+" "+de(e.x1.y)+" m"),i.push(de(e.x2.x)+" "+de(e.x2.y)+" l"),i.push(de(e.x4.x)+" "+de(e.x4.y)+" m"),i.push(de(e.x3.x)+" "+de(e.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(n){var t=ki(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+de($t.internal.getWidth(n))+" "+de($t.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(n){var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,e=n.scope.__private__.encodeColorString(n.color);return"/"+t+" "+n.fontSize+" Tf "+e}};$t.internal={Bezier_C:.551915024494,calculateCross:function(n){var t=$t.internal.getWidth(n),e=$t.internal.getHeight(n),i=Math.min(t,e);return{x1:{x:(t-i)/2,y:(e-i)/2+i},x2:{x:(t-i)/2+i,y:(e-i)/2},x3:{x:(t-i)/2,y:(e-i)/2},x4:{x:(t-i)/2+i,y:(e-i)/2+i}}}},$t.internal.getWidth=function(n){var t=0;return Me(n)==="object"&&(t=Eu(n.Rect[2])),t},$t.internal.getHeight=function(n){var t=0;return Me(n)==="object"&&(t=Eu(n.Rect[3])),t};var Rc=tr.addField=function(n){if(qc(this,n),!(n instanceof Ni))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=n).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};tr.AcroFormChoiceField=As,tr.AcroFormListBox=Ls,tr.AcroFormComboBox=Ns,tr.AcroFormEditBox=ho,tr.AcroFormButton=xr,tr.AcroFormPushButton=fo,tr.AcroFormRadioButton=_s,tr.AcroFormCheckBox=co,tr.AcroFormTextField=Vn,tr.AcroFormPasswordField=po,tr.AcroFormAppearance=$t,tr.AcroForm={ChoiceField:As,ListBox:Ls,ComboBox:Ns,EditBox:ho,Button:xr,PushButton:fo,RadioButton:_s,CheckBox:co,TextField:Vn,PasswordField:po,Appearance:$t},ne.AcroForm={ChoiceField:As,ListBox:Ls,ComboBox:Ns,EditBox:ho,Button:xr,PushButton:fo,RadioButton:_s,CheckBox:co,TextField:Vn,PasswordField:po,Appearance:$t};ne.AcroForm;function Fh(n){return n.reduce(function(t,e,i){return t[e]=i,t},{})}(function(n){n.__addimage__={};var t="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(q,R){var Z,G,bt,gt,St,ut=t;if((R=R||t)==="RGBA"||q.data!==void 0&&q.data instanceof Uint8ClampedArray&&"height"in q&&"width"in q)return"RGBA";if(vt(q))for(St in e)for(bt=e[St],Z=0;Z<bt.length;Z+=1){for(gt=!0,G=0;G<bt[Z].length;G+=1)if(bt[Z][G]!==void 0&&bt[Z][G]!==q[G]){gt=!1;break}if(gt===!0){ut=St;break}}else for(St in e)for(bt=e[St],Z=0;Z<bt.length;Z+=1){for(gt=!0,G=0;G<bt[Z].length;G+=1)if(bt[Z][G]!==void 0&&bt[Z][G]!==q.charCodeAt(G)){gt=!1;break}if(gt===!0){ut=St;break}}return ut===t&&R!==t&&(ut=R),ut},s=function q(R){for(var Z=this.internal.write,G=this.internal.putStream,bt=(0,this.internal.getFilters)();bt.indexOf("FlateEncode")!==-1;)bt.splice(bt.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var gt=[];if(gt.push({key:"Type",value:"/XObject"}),gt.push({key:"Subtype",value:"/Image"}),gt.push({key:"Width",value:R.width}),gt.push({key:"Height",value:R.height}),R.colorSpace===T.INDEXED?gt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(gt.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===T.DEVICE_CMYK&&gt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),gt.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&gt.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)){for(var St="",ut=0,wt=R.transparency.length;ut<wt;ut++)St+=R.transparency[ut]+" "+R.transparency[ut]+" ";gt.push({key:"Mask",value:"["+St+"]"})}R.sMask!==void 0&&gt.push({key:"SMask",value:R.objectId+1+" 0 R"});var Pt=R.filter!==void 0?["/"+R.filter]:void 0;if(G({data:R.data,additionalKeyValues:gt,alreadyAppliedFilters:Pt,objectId:R.objectId}),Z("endobj"),"sMask"in R&&R.sMask!==void 0){var Yt="/Predictor "+R.predictor+" /Colors 1 /BitsPerComponent "+R.bitsPerComponent+" /Columns "+R.width,M={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:R.bitsPerComponent,decodeParameters:Yt,data:R.sMask};"filter"in R&&(M.filter=R.filter),q.call(this,M)}if(R.colorSpace===T.INDEXED){var X=this.internal.newObject();G({data:J(new Uint8Array(R.palette)),objectId:X}),Z("endobj")}},a=function(){var q=this.internal.collections.addImage_images;for(var R in q)s.call(this,q[R])},l=function(){var q,R=this.internal.collections.addImage_images,Z=this.internal.write;for(var G in R)Z("/I"+(q=R[G]).index,q.objectId,"0","R")},h=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",l))},f=function(){var q=this.internal.collections.addImage_images;return h.call(this),q},d=function(){return Object.keys(this.internal.collections.addImage_images).length},y=function(q){return typeof n["process"+q.toUpperCase()]=="function"},w=function(q){return Me(q)==="object"&&q.nodeType===1},P=function(q,R){if(q.nodeName==="IMG"&&q.hasAttribute("src")){var Z=""+q.getAttribute("src");if(Z.indexOf("data:image/")===0)return ga(unescape(Z).split("base64,").pop());var G=n.loadFile(Z,!0);if(G!==void 0)return G}if(q.nodeName==="CANVAS"){if(q.width===0||q.height===0)throw new Error("Given canvas must have data. Canvas width: "+q.width+", height: "+q.height);var bt;switch(R){case"PNG":bt="image/png";break;case"WEBP":bt="image/webp";break;case"JPEG":case"JPG":default:bt="image/jpeg"}return ga(q.toDataURL(bt,1).split("base64,").pop())}},g=function(q){var R=this.internal.collections.addImage_images;if(R){for(var Z in R)if(q===R[Z].alias)return R[Z]}},N=function(q,R,Z){return q||R||(q=-96,R=-96),q<0&&(q=-1*Z.width*72/q/this.internal.scaleFactor),R<0&&(R=-1*Z.height*72/R/this.internal.scaleFactor),q===0&&(q=R*Z.width/Z.height),R===0&&(R=q*Z.height/Z.width),[q,R]},A=function(q,R,Z,G,bt,gt){var St=N.call(this,Z,G,bt),ut=this.internal.getCoordinateString,wt=this.internal.getVerticalCoordinateString,Pt=f.call(this);if(Z=St[0],G=St[1],Pt[bt.index]=bt,gt){gt*=Math.PI/180;var Yt=Math.cos(gt),M=Math.sin(gt),X=function(Q){return Q.toFixed(4)},U=[X(Yt),X(M),X(-1*M),X(Yt),0,0,"cm"]}this.internal.write("q"),gt?(this.internal.write([1,"0","0",1,ut(q),wt(R+G),"cm"].join(" ")),this.internal.write(U.join(" ")),this.internal.write([ut(Z),"0","0",ut(G),"0","0","cm"].join(" "))):this.internal.write([ut(Z),"0","0",ut(G),ut(q),wt(R+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+bt.index+" Do"),this.internal.write("Q")},T=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var L=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},F=n.__addimage__.sHashCode=function(q){var R,Z,G=0;if(typeof q=="string")for(Z=q.length,R=0;R<Z;R++)G=(G<<5)-G+q.charCodeAt(R),G|=0;else if(vt(q))for(Z=q.byteLength/2,R=0;R<Z;R++)G=(G<<5)-G+q[R],G|=0;return G},Y=n.__addimage__.validateStringAsBase64=function(q){(q=q||"").toString().trim();var R=!0;return q.length===0&&(R=!1),q.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(q.substr(0,q.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(q.substr(-2))===!1&&(R=!1),R},it=n.__addimage__.extractImageFromDataUrl=function(q){if(q==null||!(q=q.trim()).startsWith("data:"))return null;var R=q.indexOf(",");return R<0?null:q.substring(0,R).trim().endsWith("base64")?q.substring(R+1):null},$=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(q){return $()&&q instanceof ArrayBuffer};var vt=n.__addimage__.isArrayBufferView=function(q){return $()&&typeof Uint32Array<"u"&&(q instanceof Int8Array||q instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&q instanceof Uint8ClampedArray||q instanceof Int16Array||q instanceof Uint16Array||q instanceof Int32Array||q instanceof Uint32Array||q instanceof Float32Array||q instanceof Float64Array)},ot=n.__addimage__.binaryStringToUint8Array=function(q){for(var R=q.length,Z=new Uint8Array(R),G=0;G<R;G++)Z[G]=q.charCodeAt(G);return Z},J=n.__addimage__.arrayBufferToBinaryString=function(q){for(var R="",Z=vt(q)?q:new Uint8Array(q),G=0;G<Z.length;G+=8192)R+=String.fromCharCode.apply(null,Z.subarray(G,G+8192));return R};n.addImage=function(){var q,R,Z,G,bt,gt,St,ut,wt;if(typeof arguments[1]=="number"?(R=t,Z=arguments[1],G=arguments[2],bt=arguments[3],gt=arguments[4],St=arguments[5],ut=arguments[6],wt=arguments[7]):(R=arguments[1],Z=arguments[2],G=arguments[3],bt=arguments[4],gt=arguments[5],St=arguments[6],ut=arguments[7],wt=arguments[8]),Me(q=arguments[0])==="object"&&!w(q)&&"imageData"in q){var Pt=q;q=Pt.imageData,R=Pt.format||R||t,Z=Pt.x||Z||0,G=Pt.y||G||0,bt=Pt.w||Pt.width||bt,gt=Pt.h||Pt.height||gt,St=Pt.alias||St,ut=Pt.compression||ut,wt=Pt.rotation||Pt.angle||wt}var Yt=this.internal.getFilters();if(ut===void 0&&Yt.indexOf("FlateEncode")!==-1&&(ut="SLOW"),isNaN(Z)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var M=lt.call(this,q,R,St,ut);return A.call(this,Z,G,bt,gt,M,wt),this};var lt=function(q,R,Z,G){var bt,gt,St;if(typeof q=="string"&&i(q)===t){q=unescape(q);var ut=yt(q,!1);(ut!==""||(ut=n.loadFile(q,!0))!==void 0)&&(q=ut)}if(w(q)&&(q=P(q,R)),R=i(q,R),!y(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((St=Z)==null||St.length===0)&&(Z=function(wt){return typeof wt=="string"||vt(wt)?F(wt):vt(wt.data)?F(wt.data):null}(q)),(bt=g.call(this,Z))||($()&&(q instanceof Uint8Array||R==="RGBA"||(gt=q,q=ot(q))),bt=this["process"+R.toUpperCase()](q,d.call(this),Z,function(wt){return wt&&typeof wt=="string"&&(wt=wt.toUpperCase()),wt in n.image_compression?wt:L.NONE}(G),gt)),!bt)throw new Error("An unknown error occurred whilst processing the image.");return bt},yt=n.__addimage__.convertBase64ToBinaryString=function(q,R){R=typeof R!="boolean"||R;var Z,G="";if(typeof q=="string"){var bt;Z=(bt=it(q))!==null&&bt!==void 0?bt:q;try{G=ga(Z)}catch(gt){if(R)throw Y(Z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+gt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};n.getImageProperties=function(q){var R,Z,G="";if(w(q)&&(q=P(q)),typeof q=="string"&&i(q)===t&&((G=yt(q,!1))===""&&(G=n.loadFile(q)||""),q=G),Z=i(q),!y(Z))throw new Error("addImage does not support files of type '"+Z+"', please ensure that a plugin for '"+Z+"' support is added.");if(!$()||q instanceof Uint8Array||(q=ot(q)),!(R=this["process"+Z.toUpperCase()](q)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=Z,R}})(ne.API),function(n){var t=function(e){if(e!==void 0&&e!="")return!0};ne.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(e){for(var i,s,a,l=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(e.objId),d=e.pageContext.annotations,y=!1,w=0;w<d.length&&!y;w++)switch((i=d[w]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(y=!0);break;case"reference":case"text":case"freetext":y=!0}if(y!=0){this.internal.write("/Annots [");for(var P=0;P<d.length;P++){i=d[P];var g=this.internal.pdfEscape,N=this.internal.getEncryptor(e.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),L=this.internal.getEncryptor(A.objId),F=i.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+l(i.bounds.x)+" "+h(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w)+" "+h(i.bounds.y)+"] ")+"/Contents ("+g(L(i.contents))+")",a+=" /Popup "+T.objId+" 0 R",a+=" /P "+f.objId+" 0 R",a+=" /T ("+g(L(F))+") >>",A.content=a;var Y=A.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+l(i.bounds.x+30)+" "+h(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w+30)+" "+h(i.bounds.y)+"] ")+" /Parent "+Y,i.open&&(a+=" /Open true"),a+=" >>",T.content=a,this.internal.write(A.objId,"0 R",T.objId,"0 R");break;case"freetext":s="/Rect ["+l(i.bounds.x)+" "+h(i.bounds.y)+" "+l(i.bounds.x+i.bounds.w)+" "+h(i.bounds.y+i.bounds.h)+"] ";var it=i.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+g(N(i.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+it+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(i.options.name){var $=this.annotations._nameMap[i.options.name];i.options.pageNumber=$.page,i.options.top=$.y}else i.options.top||(i.options.top=0);if(s="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",a="",i.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+g(N(i.options.url))+") >>";else if(i.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,a+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var vt=h(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),a+=" /XYZ "+i.options.left+" "+vt+" "+i.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),n.createAnnotation=function(e){var i=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":i.pageContext.annotations.push(e)}},n.link=function(e,i,s,a,l){var h=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;h.pageContext.annotations.push({finalBounds:{x:f(e),y:d(i),w:f(e+s),h:d(i+a)},options:l,type:"link"})},n.textWithLink=function(e,i,s,a){var l,h,f=this.getTextWidth(e),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){h=a.maxWidth;var y=this.splitTextToSize(e,h).length;l=Math.ceil(d*y)}else h=f,l=d;return this.text(e,i,s,a),s+=.2*d,a.align==="center"&&(i-=f/2),a.align==="right"&&(i-=f),this.link(i,s-d,h,l,a),f},n.getTextWidth=function(e){var i=this.internal.getFontSize();return this.getStringUnitWidth(e)*i/this.internal.scaleFactor}}(ne.API),function(n){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];n.__arabicParser__={};var a=n.__arabicParser__.isInArabicSubstitutionA=function(A){return t[A.charCodeAt(0)]!==void 0},l=n.__arabicParser__.isArabicLetter=function(A){return typeof A=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(A)},h=n.__arabicParser__.isArabicEndLetter=function(A){return l(A)&&a(A)&&t[A.charCodeAt(0)].length<=2},f=n.__arabicParser__.isArabicAlfLetter=function(A){return l(A)&&s.indexOf(A.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(A){return l(A)&&a(A)&&t[A.charCodeAt(0)].length>=1};var d=n.__arabicParser__.arabicLetterHasFinalForm=function(A){return l(A)&&a(A)&&t[A.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(A){return l(A)&&a(A)&&t[A.charCodeAt(0)].length>=3};var y=n.__arabicParser__.arabicLetterHasMedialForm=function(A){return l(A)&&a(A)&&t[A.charCodeAt(0)].length==4},w=n.__arabicParser__.resolveLigatures=function(A){var T=0,L=e,F="",Y=0;for(T=0;T<A.length;T+=1)L[A.charCodeAt(T)]!==void 0?(Y++,typeof(L=L[A.charCodeAt(T)])=="number"&&(F+=String.fromCharCode(L),L=e,Y=0),T===A.length-1&&(L=e,F+=A.charAt(T-(Y-1)),T-=Y-1,Y=0)):(L=e,F+=A.charAt(T-Y),T-=Y,Y=0);return F};n.__arabicParser__.isArabicDiacritic=function(A){return A!==void 0&&i[A.charCodeAt(0)]!==void 0};var P=n.__arabicParser__.getCorrectForm=function(A,T,L){return l(A)?a(A)===!1?-1:!d(A)||!l(T)&&!l(L)||!l(L)&&h(T)||h(A)&&!l(T)||h(A)&&f(T)||h(A)&&h(T)?0:y(A)&&l(T)&&!h(T)&&l(L)&&d(L)?3:h(A)||!l(L)?1:2:-1},g=function(A){var T=0,L=0,F=0,Y="",it="",$="",vt=(A=A||"").split("\\s+"),ot=[];for(T=0;T<vt.length;T+=1){for(ot.push(""),L=0;L<vt[T].length;L+=1)Y=vt[T][L],it=vt[T][L-1],$=vt[T][L+1],l(Y)?(F=P(Y,it,$),ot[T]+=F!==-1?String.fromCharCode(t[Y.charCodeAt(0)][F]):Y):ot[T]+=Y;ot[T]=w(ot[T])}return ot.join(" ")},N=n.__arabicParser__.processArabic=n.processArabic=function(){var A,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,L=[];if(Array.isArray(T)){var F=0;for(L=[],F=0;F<T.length;F+=1)Array.isArray(T[F])?L.push([g(T[F][0]),T[F][1],T[F][2]]):L.push([g(T[F])]);A=L}else A=g(T);return typeof arguments[0]=="string"?A:(arguments[0].text=A,arguments[0])};n.events.push(["preProcessText",N])}(ne.API),ne.API.autoPrint=function(n){var t;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(n){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(h){e=h}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(h){i=isNaN(h)||Number.isInteger(h)===!1||h<0?150:h,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(h){s=isNaN(h)||Number.isInteger(h)===!1||h<0?300:h,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(h){a=h}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(h){l=h}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,i){var s;if((e=e||"2d")!=="2d")return null;for(s in i)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=i[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(ne.API),function(n){var t={left:0,top:0,bottom:0,right:0},e=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(A){f=A}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(A){d=A}});var y=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return y},set:function(A){y=A}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(A){w=A}});var P=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return P},set:function(A){P=A}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(A){g=A}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(A){N=A}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(f){return i.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},n.getTextDimensions=function(f,d){i.call(this);var y=(d=d||{}).fontSize||this.getFontSize(),w=d.font||this.getFont(),P=d.scaleFactor||this.internal.scaleFactor,g=0,N=0,A=0,T=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var L=d.maxWidth;L>0?typeof f=="string"?f=this.splitTextToSize(f,L):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(Y,it){return Y.concat(T.splitTextToSize(it,L))},[])):f=Array.isArray(f)?f:[f];for(var F=0;F<f.length;F++)g<(A=this.getStringUnitWidth(f[F],{font:w})*y)&&(g=A);return g!==0&&(N=f.length),{w:g/=P,h:Math.max((N*y*this.getLineHeightFactor()-y*(this.getLineHeightFactor()-1))/P,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var f=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=n.cell=function(){var f;f=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var d=this.internal.__cell__.lastCell,y=this.internal.__cell__.padding,w=this.internal.__cell__.margins||t,P=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===f.lineNumber?(f.x=(d.x||0)+(d.width||0),f.y=d.y||0):d.y+d.height+f.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=w.top,g&&P&&(this.printHeaderRow(f.lineNumber,!0),f.y+=P[0].height)):f.y=d.y+d.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,e===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-y,f.y+y,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+y,{align:"center",baseline:"top",maxWidth:f.width-y-y}):this.text(f.text,f.x+y,f.y+y,{align:"left",baseline:"top",maxWidth:f.width-y-y})),this.internal.__cell__.lastCell=f,this};n.table=function(f,d,y,w,P){if(i.call(this),!y)throw new Error("No data for PDF table.");var g,N,A,T,L=[],F=[],Y=[],it={},$={},vt=[],ot=[],J=(P=P||{}).autoSize||!1,lt=P.printHeaders!==!1,yt=P.css&&P.css["font-size"]!==void 0?16*P.css["font-size"]:P.fontSize||12,q=P.margins||Object.assign({width:this.getPageWidth()},t),R=typeof P.padding=="number"?P.padding:3,Z=P.headerBackgroundColor||"#c8c8c8",G=P.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=lt,this.internal.__cell__.margins=q,this.internal.__cell__.table_font_size=yt,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=Z,this.internal.__cell__.headerTextColor=G,this.setFontSize(yt),w==null)F=L=Object.keys(y[0]),Y=L.map(function(){return"left"});else if(Array.isArray(w)&&Me(w[0])==="object")for(L=w.map(function(Pt){return Pt.name}),F=w.map(function(Pt){return Pt.prompt||Pt.name||""}),Y=w.map(function(Pt){return Pt.align||"left"}),g=0;g<w.length;g+=1)$[w[g].name]=w[g].width*(19.049976/25.4);else Array.isArray(w)&&typeof w[0]=="string"&&(F=L=w,Y=L.map(function(){return"left"}));if(J||Array.isArray(w)&&typeof w[0]=="string")for(g=0;g<L.length;g+=1){for(it[T=L[g]]=y.map(function(Pt){return Pt[T]}),this.setFont(void 0,"bold"),vt.push(this.getTextDimensions(F[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=it[T],this.setFont(void 0,"normal"),A=0;A<N.length;A+=1)vt.push(this.getTextDimensions(N[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);$[T]=Math.max.apply(null,vt)+R+R,vt=[]}if(lt){var bt={};for(g=0;g<L.length;g+=1)bt[L[g]]={},bt[L[g]].text=F[g],bt[L[g]].align=Y[g];var gt=h.call(this,bt,$);ot=L.map(function(Pt){return new a(f,d,$[Pt],gt,bt[Pt].text,void 0,bt[Pt].align)}),this.setTableHeaderRow(ot),this.printHeaderRow(1,!1)}var St=w.reduce(function(Pt,Yt){return Pt[Yt.name]=Yt.align,Pt},{});for(g=0;g<y.length;g+=1){"rowStart"in P&&P.rowStart instanceof Function&&P.rowStart({row:g,data:y[g]},this);var ut=h.call(this,y[g],$);for(A=0;A<L.length;A+=1){var wt=y[g][L[A]];"cellStart"in P&&P.cellStart instanceof Function&&P.cellStart({row:g,col:A,data:wt},this),l.call(this,new a(f,d,$[L[A]],ut,wt,g+2,St[L[A]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=d,this};var h=function(f,d){var y=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,P=this.internal.scaleFactor;return Object.keys(f).map(function(g){var N=f[g];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,d[g]-y-y)},this).map(function(g){return this.getLineHeightFactor()*g.length*w/P+y+y},this).reduce(function(g,N){return Math.max(g,N)},0)};n.setTableHeaderRow=function(f){i.call(this),this.internal.__cell__.tableHeaderRow=f},n.printHeaderRow=function(f,d){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var y;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var P=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){y=this.internal.__cell__.tableHeaderRow[g].clone(),d&&(y.y=this.internal.__cell__.margins.top||0,P.push(y)),y.lineNumber=f;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,y),this.setTextColor(N)}P.length>0&&this.setTableHeaderRow(P),this.setFont(void 0,"normal"),e=!1}}(ne.API);var kh={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Eh=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Fl=Fh(Eh),Mh=[100,200,300,400,500,600,700,800,900],jc=Fh(Mh);function kl(n){var t=n.family.replace(/"|'/g,"").toLowerCase(),e=function(a){return kh[a=a||"normal"]?a:"normal"}(n.style),i=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(n.weight),s=function(a){return typeof Fl[a=a||"normal"]=="number"?a:"normal"}(n.stretch);return{family:t,style:e,weight:i,stretch:s,src:n.src||[],ref:n.ref||{name:t,style:[s,e,i].join(" ")}}}function Mu(n,t,e,i){var s;for(s=e;s>=0&&s<t.length;s+=i)if(n[t[s]])return n[t[s]];for(s=e;s>=0&&s<t.length;s-=i)if(n[t[s]])return n[t[s]]}var Xc={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Ou={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Bu(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Yc(n,t,e){for(var i=(e=e||{}).defaultFontFamily||"times",s=Object.assign({},Xc,e.genericFontFamilies||{}),a=null,l=null,h=0;h<t.length;++h)if(s[(a=kl(t[h])).family]&&(a.family=s[a.family]),n.hasOwnProperty(a.family)){l=n[a.family];break}if(!(l=l||n[i]))throw new Error("Could not find a font-family for the rule '"+Bu(a)+"' and default family '"+i+"'.");if(l=function(f,d){if(d[f])return d[f];var y=Fl[f],w=y<=Fl.normal?-1:1,P=Mu(d,Eh,y,w);if(!P)throw new Error("Could not find a matching font-stretch value for "+f);return P}(a.stretch,l),l=function(f,d){if(d[f])return d[f];for(var y=kh[f],w=0;w<y.length;++w)if(d[y[w]])return d[y[w]];throw new Error("Could not find a matching font-style for "+f)}(a.style,l),!(l=function(f,d){if(d[f])return d[f];if(f===400&&d[500])return d[500];if(f===500&&d[400])return d[400];var y=jc[f],w=Mu(d,Mh,y,f<400?-1:1);if(!w)throw new Error("Could not find a matching font-weight for value "+f);return w}(a.weight,l)))throw new Error("Failed to resolve a font for the rule '"+Bu(a)+"'.");return l}function Du(n){return n.trimLeft()}function zc(n,t){for(var e=0;e<n.length;){if(n.charAt(e)===t)return[n.substring(0,e),n.substring(e+1)];e+=1}return null}function Uc(n){var t=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],n.substring(t[0].length)]}var ao,qu,Ru,nl=["times"];(function(n){var t,e,i,s,a,l,h,f,d,y=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new f,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new l,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new l,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new w(this),t=this.internal.f2,e=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,l=this.internal.Point,h=this.internal.Rectangle,f=this.internal.Matrix,d=new y}]);var w=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var X=M;Object.defineProperty(this,"pdf",{get:function(){return X}});var U=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return U},set:function(Lt){U=!!Lt}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(Lt){Q=!!Lt}});var nt=0;Object.defineProperty(this,"posX",{get:function(){return nt},set:function(Lt){isNaN(Lt)||(nt=Lt)}});var pt=0;Object.defineProperty(this,"posY",{get:function(){return pt},set:function(Lt){isNaN(Lt)||(pt=Lt)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Lt){var W;typeof Lt=="number"?W=[Lt,Lt,Lt,Lt]:((W=new Array(4))[0]=Lt[0],W[1]=Lt.length>=2?Lt[1]:W[0],W[2]=Lt.length>=3?Lt[2]:W[0],W[3]=Lt.length>=4?Lt[3]:W[1]),d.margin=W}});var dt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return dt},set:function(Lt){dt=Lt}});var mt=0;Object.defineProperty(this,"lastBreak",{get:function(){return mt},set:function(Lt){mt=Lt}});var Et=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Et},set:function(Lt){Et=Lt}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Lt){Lt instanceof y&&(d=Lt)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Lt){d.path=Lt}});var Bt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Bt},set:function(Lt){Bt=Lt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Lt){var W;W=P(Lt),this.ctx.fillStyle=W.style,this.ctx.isFillTransparent=W.a===0,this.ctx.fillOpacity=W.a,this.pdf.setFillColor(W.r,W.g,W.b,{a:W.a}),this.pdf.setTextColor(W.r,W.g,W.b,{a:W.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Lt){var W=P(Lt);this.ctx.strokeStyle=W.style,this.ctx.isStrokeTransparent=W.a===0,this.ctx.strokeOpacity=W.a,W.a===0?this.pdf.setDrawColor(255,255,255):(W.a,this.pdf.setDrawColor(W.r,W.g,W.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Lt){["butt","round","square"].indexOf(Lt)!==-1&&(this.ctx.lineCap=Lt,this.pdf.setLineCap(Lt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Lt){isNaN(Lt)||(this.ctx.lineWidth=Lt,this.pdf.setLineWidth(Lt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Lt){["bevel","round","miter"].indexOf(Lt)!==-1&&(this.ctx.lineJoin=Lt,this.pdf.setLineJoin(Lt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Lt){isNaN(Lt)||(this.ctx.miterLimit=Lt,this.pdf.setMiterLimit(Lt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Lt){this.ctx.textBaseline=Lt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Lt){["right","end","center","left","start"].indexOf(Lt)!==-1&&(this.ctx.textAlign=Lt)}});var zt=null;function jt(Lt,W){if(zt===null){var he=function(Jt){var Mt=[];return Object.keys(Jt).forEach(function(qt){Jt[qt].forEach(function(Wt){var Xt=null;switch(Wt){case"bold":Xt={family:qt,weight:"bold"};break;case"italic":Xt={family:qt,style:"italic"};break;case"bolditalic":Xt={family:qt,weight:"bold",style:"italic"};break;case"":case"normal":Xt={family:qt}}Xt!==null&&(Xt.ref={name:qt,style:Wt},Mt.push(Xt))})}),Mt}(Lt.getFontList());zt=function(Jt){for(var Mt={},qt=0;qt<Jt.length;++qt){var Wt=kl(Jt[qt]),Xt=Wt.family,Zt=Wt.stretch,le=Wt.style,me=Wt.weight;Mt[Xt]=Mt[Xt]||{},Mt[Xt][Zt]=Mt[Xt][Zt]||{},Mt[Xt][Zt][le]=Mt[Xt][Zt][le]||{},Mt[Xt][Zt][le][me]=Wt}return Mt}(he.concat(W))}return zt}var se=null;Object.defineProperty(this,"fontFaces",{get:function(){return se},set:function(Lt){zt=null,se=Lt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Lt){var W;if(this.ctx.font=Lt,(W=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Lt))!==null){var he=W[1];W[2];var Jt=W[3],Mt=W[4];W[5];var qt=W[6],Wt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Mt)[2];Mt=Math.floor(Wt==="px"?parseFloat(Mt)*this.pdf.internal.scaleFactor:Wt==="em"?parseFloat(Mt)*this.pdf.getFontSize():parseFloat(Mt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Mt);var Xt=function(ae){var xe,Ht,dr=[],Ae=ae.trim();if(Ae==="")return nl;if(Ae in Ou)return[Ou[Ae]];for(;Ae!=="";){switch(Ht=null,xe=(Ae=Du(Ae)).charAt(0)){case'"':case"'":Ht=zc(Ae.substring(1),xe);break;default:Ht=Uc(Ae)}if(Ht===null||(dr.push(Ht[0]),(Ae=Du(Ht[1]))!==""&&Ae.charAt(0)!==","))return nl;Ae=Ae.replace(/^,/,"")}return dr}(qt);if(this.fontFaces){var Zt=Yc(jt(this.pdf,this.fontFaces),Xt.map(function(ae){return{family:ae,stretch:"normal",weight:Jt,style:he}}));this.pdf.setFont(Zt.ref.name,Zt.ref.style)}else{var le="";(Jt==="bold"||parseInt(Jt,10)>=700||he==="bold")&&(le="bold"),he==="italic"&&(le+="italic"),le.length===0&&(le="normal");for(var me="",we={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Se=0;Se<Xt.length;Se++){if(this.pdf.internal.getFont(Xt[Se],le,{noFallback:!0,disableWarning:!0})!==void 0){me=Xt[Se];break}if(le==="bolditalic"&&this.pdf.internal.getFont(Xt[Se],"bold",{noFallback:!0,disableWarning:!0})!==void 0)me=Xt[Se],le="bold";else if(this.pdf.internal.getFont(Xt[Se],"normal",{noFallback:!0,disableWarning:!0})!==void 0){me=Xt[Se],le="normal";break}}if(me===""){for(var Fe=0;Fe<Xt.length;Fe++)if(we[Xt[Fe]]){me=we[Xt[Fe]];break}}me=me===""?"Times":me,this.pdf.setFont(me,le)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Lt){this.ctx.globalCompositeOperation=Lt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Lt){this.ctx.globalAlpha=Lt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Lt){this.ctx.lineDashOffset=Lt,Yt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Lt){this.ctx.lineDash=Lt,Yt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Lt){this.ctx.ignoreClearRect=!!Lt}})};w.prototype.setLineDash=function(M){this.lineDash=M},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){it.call(this,"fill",!1)},w.prototype.stroke=function(){it.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(M,X){if(isNaN(M)||isNaN(X))throw Re.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var U=this.ctx.transform.applyToPoint(new l(M,X));this.path.push({type:"mt",x:U.x,y:U.y}),this.ctx.lastPoint=new l(M,X)},w.prototype.closePath=function(){var M=new l(0,0),X=0;for(X=this.path.length-1;X!==-1;X--)if(this.path[X].type==="begin"&&Me(this.path[X+1])==="object"&&typeof this.path[X+1].x=="number"){M=new l(this.path[X+1].x,this.path[X+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(M.x,M.y)},w.prototype.lineTo=function(M,X){if(isNaN(M)||isNaN(X))throw Re.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var U=this.ctx.transform.applyToPoint(new l(M,X));this.path.push({type:"lt",x:U.x,y:U.y}),this.ctx.lastPoint=new l(U.x,U.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),it.call(this,null,!0)},w.prototype.quadraticCurveTo=function(M,X,U,Q){if(isNaN(U)||isNaN(Q)||isNaN(M)||isNaN(X))throw Re.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var nt=this.ctx.transform.applyToPoint(new l(U,Q)),pt=this.ctx.transform.applyToPoint(new l(M,X));this.path.push({type:"qct",x1:pt.x,y1:pt.y,x:nt.x,y:nt.y}),this.ctx.lastPoint=new l(nt.x,nt.y)},w.prototype.bezierCurveTo=function(M,X,U,Q,nt,pt){if(isNaN(nt)||isNaN(pt)||isNaN(M)||isNaN(X)||isNaN(U)||isNaN(Q))throw Re.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var dt=this.ctx.transform.applyToPoint(new l(nt,pt)),mt=this.ctx.transform.applyToPoint(new l(M,X)),Et=this.ctx.transform.applyToPoint(new l(U,Q));this.path.push({type:"bct",x1:mt.x,y1:mt.y,x2:Et.x,y2:Et.y,x:dt.x,y:dt.y}),this.ctx.lastPoint=new l(dt.x,dt.y)},w.prototype.arc=function(M,X,U,Q,nt,pt){if(isNaN(M)||isNaN(X)||isNaN(U)||isNaN(Q)||isNaN(nt))throw Re.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pt=!!pt,!this.ctx.transform.isIdentity){var dt=this.ctx.transform.applyToPoint(new l(M,X));M=dt.x,X=dt.y;var mt=this.ctx.transform.applyToPoint(new l(0,U)),Et=this.ctx.transform.applyToPoint(new l(0,0));U=Math.sqrt(Math.pow(mt.x-Et.x,2)+Math.pow(mt.y-Et.y,2))}Math.abs(nt-Q)>=2*Math.PI&&(Q=0,nt=2*Math.PI),this.path.push({type:"arc",x:M,y:X,radius:U,startAngle:Q,endAngle:nt,counterclockwise:pt})},w.prototype.arcTo=function(M,X,U,Q,nt){throw new Error("arcTo not implemented.")},w.prototype.rect=function(M,X,U,Q){if(isNaN(M)||isNaN(X)||isNaN(U)||isNaN(Q))throw Re.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,X),this.lineTo(M+U,X),this.lineTo(M+U,X+Q),this.lineTo(M,X+Q),this.lineTo(M,X),this.lineTo(M+U,X),this.lineTo(M,X)},w.prototype.fillRect=function(M,X,U,Q){if(isNaN(M)||isNaN(X)||isNaN(U)||isNaN(Q))throw Re.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var nt={};this.lineCap!=="butt"&&(nt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(nt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,X,U,Q),this.fill(),nt.hasOwnProperty("lineCap")&&(this.lineCap=nt.lineCap),nt.hasOwnProperty("lineJoin")&&(this.lineJoin=nt.lineJoin)}},w.prototype.strokeRect=function(M,X,U,Q){if(isNaN(M)||isNaN(X)||isNaN(U)||isNaN(Q))throw Re.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(M,X,U,Q),this.stroke())},w.prototype.clearRect=function(M,X,U,Q){if(isNaN(M)||isNaN(X)||isNaN(U)||isNaN(Q))throw Re.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,X,U,Q))},w.prototype.save=function(M){M=typeof M!="boolean"||M;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("q");if(this.pdf.setPage(X),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new y(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},w.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("Q");this.pdf.setPage(X),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var P=function(M){var X,U,Q,nt;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))X=0,U=0,Q=0,nt=0;else{var pt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(pt!==null)X=parseInt(pt[1]),U=parseInt(pt[2]),Q=parseInt(pt[3]),nt=1;else if((pt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)X=parseInt(pt[1]),U=parseInt(pt[2]),Q=parseInt(pt[3]),nt=parseFloat(pt[4]);else{if(nt=1,typeof M=="string"&&M.charAt(0)!=="#"){var dt=new Lh(M);M=dt.ok?dt.toHex():"#000000"}M.length===4?(X=M.substring(1,2),X+=X,U=M.substring(2,3),U+=U,Q=M.substring(3,4),Q+=Q):(X=M.substring(1,3),U=M.substring(3,5),Q=M.substring(5,7)),X=parseInt(X,16),U=parseInt(U,16),Q=parseInt(Q,16)}}return{r:X,g:U,b:Q,a:nt,style:M}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(M,X,U,Q){if(isNaN(X)||isNaN(U)||typeof M!="string")throw Re.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!g.call(this)){var nt=ut(this.ctx.transform.rotation),pt=this.ctx.transform.scaleX;R.call(this,{text:M,x:X,y:U,scale:pt,angle:nt,align:this.textAlign,maxWidth:Q})}},w.prototype.strokeText=function(M,X,U,Q){if(isNaN(X)||isNaN(U)||typeof M!="string")throw Re.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){Q=isNaN(Q)?void 0:Q;var nt=ut(this.ctx.transform.rotation),pt=this.ctx.transform.scaleX;R.call(this,{text:M,x:X,y:U,scale:pt,renderingMode:"stroke",angle:nt,align:this.textAlign,maxWidth:Q})}},w.prototype.measureText=function(M){if(typeof M!="string")throw Re.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var X=this.pdf,U=this.pdf.internal.scaleFactor,Q=X.internal.getFontSize(),nt=X.getStringUnitWidth(M)*Q/X.internal.scaleFactor,pt=function(dt){var mt=(dt=dt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return mt}}),this};return new pt({width:nt*=Math.round(96*U/72*1e4)/1e4})},w.prototype.scale=function(M,X){if(isNaN(M)||isNaN(X))throw Re.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var U=new f(M,0,0,X,0,0);this.ctx.transform=this.ctx.transform.multiply(U)},w.prototype.rotate=function(M){if(isNaN(M))throw Re.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var X=new f(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(X)},w.prototype.translate=function(M,X){if(isNaN(M)||isNaN(X))throw Re.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var U=new f(1,0,0,1,M,X);this.ctx.transform=this.ctx.transform.multiply(U)},w.prototype.transform=function(M,X,U,Q,nt,pt){if(isNaN(M)||isNaN(X)||isNaN(U)||isNaN(Q)||isNaN(nt)||isNaN(pt))throw Re.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var dt=new f(M,X,U,Q,nt,pt);this.ctx.transform=this.ctx.transform.multiply(dt)},w.prototype.setTransform=function(M,X,U,Q,nt,pt){M=isNaN(M)?1:M,X=isNaN(X)?0:X,U=isNaN(U)?0:U,Q=isNaN(Q)?1:Q,nt=isNaN(nt)?0:nt,pt=isNaN(pt)?0:pt,this.ctx.transform=new f(M,X,U,Q,nt,pt)};var A=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(M,X,U,Q,nt,pt,dt,mt,Et){var Bt=this.pdf.getImageProperties(M),zt=1,jt=1,se=1,Lt=1;Q!==void 0&&mt!==void 0&&(se=mt/Q,Lt=Et/nt,zt=Bt.width/Q*mt/Q,jt=Bt.height/nt*Et/nt),pt===void 0&&(pt=X,dt=U,X=0,U=0),Q!==void 0&&mt===void 0&&(mt=Q,Et=nt),Q===void 0&&mt===void 0&&(mt=Bt.width,Et=Bt.height);for(var W,he=this.ctx.transform.decompose(),Jt=ut(he.rotate.shx),Mt=new f,qt=(Mt=(Mt=(Mt=Mt.multiply(he.translate)).multiply(he.skew)).multiply(he.scale)).applyToRectangle(new h(pt-X*se,dt-U*Lt,Q*zt,nt*jt)),Wt=T.call(this,qt),Xt=[],Zt=0;Zt<Wt.length;Zt+=1)Xt.indexOf(Wt[Zt])===-1&&Xt.push(Wt[Zt]);if(Y(Xt),this.autoPaging)for(var le=Xt[0],me=Xt[Xt.length-1],we=le;we<me+1;we++){this.pdf.setPage(we);var Se=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Fe=we===1?this.posY+this.margin[0]:this.margin[0],ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ht=we===1?0:ae+(we-2)*xe;if(this.ctx.clip_path.length!==0){var dr=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(W,this.posX+this.margin[3],-Ht+Fe+this.ctx.prevPageLastElemOffset),$.call(this,"fill",!0),this.path=dr}var Ae=JSON.parse(JSON.stringify(qt));Ae=F([Ae],this.posX+this.margin[3],-Ht+Fe+this.ctx.prevPageLastElemOffset)[0];var zr=(we>le||we<me)&&A.call(this);zr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Se,xe,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",Ae.x,Ae.y,Ae.w,Ae.h,null,null,Jt),zr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",qt.x,qt.y,qt.w,qt.h,null,null,Jt)};var T=function(M,X,U){var Q=[];X=X||this.pdf.internal.pageSize.width,U=U||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var nt=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":Q.push(Math.floor((M.y+nt)/U)+1);break;case"arc":Q.push(Math.floor((M.y+nt-M.radius)/U)+1),Q.push(Math.floor((M.y+nt+M.radius)/U)+1);break;case"qct":var pt=wt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);Q.push(Math.floor((pt.y+nt)/U)+1),Q.push(Math.floor((pt.y+pt.h+nt)/U)+1);break;case"bct":var dt=Pt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);Q.push(Math.floor((dt.y+nt)/U)+1),Q.push(Math.floor((dt.y+dt.h+nt)/U)+1);break;case"rect":Q.push(Math.floor((M.y+nt)/U)+1),Q.push(Math.floor((M.y+M.h+nt)/U)+1)}for(var mt=0;mt<Q.length;mt+=1)for(;this.pdf.internal.getNumberOfPages()<Q[mt];)L.call(this);return Q},L=function(){var M=this.fillStyle,X=this.strokeStyle,U=this.font,Q=this.lineCap,nt=this.lineWidth,pt=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=X,this.font=U,this.lineCap=Q,this.lineWidth=nt,this.lineJoin=pt},F=function(M,X,U){for(var Q=0;Q<M.length;Q++)switch(M[Q].type){case"bct":M[Q].x2+=X,M[Q].y2+=U;case"qct":M[Q].x1+=X,M[Q].y1+=U;case"mt":case"lt":case"arc":default:M[Q].x+=X,M[Q].y+=U}return M},Y=function(M){return M.sort(function(X,U){return X-U})},it=function(M,X){for(var U,Q,nt=this.fillStyle,pt=this.strokeStyle,dt=this.lineCap,mt=this.lineWidth,Et=Math.abs(mt*this.ctx.transform.scaleX),Bt=this.lineJoin,zt=JSON.parse(JSON.stringify(this.path)),jt=JSON.parse(JSON.stringify(this.path)),se=[],Lt=0;Lt<jt.length;Lt++)if(jt[Lt].x!==void 0)for(var W=T.call(this,jt[Lt]),he=0;he<W.length;he+=1)se.indexOf(W[he])===-1&&se.push(W[he]);for(var Jt=0;Jt<se.length;Jt++)for(;this.pdf.internal.getNumberOfPages()<se[Jt];)L.call(this);if(Y(se),this.autoPaging)for(var Mt=se[0],qt=se[se.length-1],Wt=Mt;Wt<qt+1;Wt++){this.pdf.setPage(Wt),this.fillStyle=nt,this.strokeStyle=pt,this.lineCap=dt,this.lineWidth=Et,this.lineJoin=Bt;var Xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Zt=Wt===1?this.posY+this.margin[0]:this.margin[0],le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],me=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],we=Wt===1?0:le+(Wt-2)*me;if(this.ctx.clip_path.length!==0){var Se=this.path;U=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(U,this.posX+this.margin[3],-we+Zt+this.ctx.prevPageLastElemOffset),$.call(this,M,!0),this.path=Se}if(Q=JSON.parse(JSON.stringify(zt)),this.path=F(Q,this.posX+this.margin[3],-we+Zt+this.ctx.prevPageLastElemOffset),X===!1||Wt===0){var Fe=(Wt>Mt||Wt<qt)&&A.call(this);Fe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xt,me,null).clip().discardPath()),$.call(this,M,X),Fe&&this.pdf.restoreGraphicsState()}this.lineWidth=mt}else this.lineWidth=Et,$.call(this,M,X),this.lineWidth=mt;this.path=zt},$=function(M,X){if((M!=="stroke"||X||!N.call(this))&&(M==="stroke"||X||!g.call(this))){for(var U,Q,nt=[],pt=this.path,dt=0;dt<pt.length;dt++){var mt=pt[dt];switch(mt.type){case"begin":nt.push({begin:!0});break;case"close":nt.push({close:!0});break;case"mt":nt.push({start:mt,deltas:[],abs:[]});break;case"lt":var Et=nt.length;if(pt[dt-1]&&!isNaN(pt[dt-1].x)&&(U=[mt.x-pt[dt-1].x,mt.y-pt[dt-1].y],Et>0)){for(;Et>=0;Et--)if(nt[Et-1].close!==!0&&nt[Et-1].begin!==!0){nt[Et-1].deltas.push(U),nt[Et-1].abs.push(mt);break}}break;case"bct":U=[mt.x1-pt[dt-1].x,mt.y1-pt[dt-1].y,mt.x2-pt[dt-1].x,mt.y2-pt[dt-1].y,mt.x-pt[dt-1].x,mt.y-pt[dt-1].y],nt[nt.length-1].deltas.push(U);break;case"qct":var Bt=pt[dt-1].x+2/3*(mt.x1-pt[dt-1].x),zt=pt[dt-1].y+2/3*(mt.y1-pt[dt-1].y),jt=mt.x+2/3*(mt.x1-mt.x),se=mt.y+2/3*(mt.y1-mt.y),Lt=mt.x,W=mt.y;U=[Bt-pt[dt-1].x,zt-pt[dt-1].y,jt-pt[dt-1].x,se-pt[dt-1].y,Lt-pt[dt-1].x,W-pt[dt-1].y],nt[nt.length-1].deltas.push(U);break;case"arc":nt.push({deltas:[],abs:[],arc:!0}),Array.isArray(nt[nt.length-1].abs)&&nt[nt.length-1].abs.push(mt)}}Q=X?null:M==="stroke"?"stroke":"fill";for(var he=!1,Jt=0;Jt<nt.length;Jt++)if(nt[Jt].arc)for(var Mt=nt[Jt].abs,qt=0;qt<Mt.length;qt++){var Wt=Mt[qt];Wt.type==="arc"?J.call(this,Wt.x,Wt.y,Wt.radius,Wt.startAngle,Wt.endAngle,Wt.counterclockwise,void 0,X,!he):Z.call(this,Wt.x,Wt.y),he=!0}else if(nt[Jt].close===!0)this.pdf.internal.out("h"),he=!1;else if(nt[Jt].begin!==!0){var Xt=nt[Jt].start.x,Zt=nt[Jt].start.y;G.call(this,nt[Jt].deltas,Xt,Zt),he=!0}Q&&lt.call(this,Q),X&&yt.call(this)}},vt=function(M){var X=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,U=X*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-U;case"top":return M+X-U;case"hanging":return M+X-2*U;case"middle":return M+X/2-U;case"ideographic":return M;case"alphabetic":default:return M}},ot=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(X,U){this.colorStops.push([X,U])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var J=function(M,X,U,Q,nt,pt,dt,mt,Et){for(var Bt=gt.call(this,U,Q,nt,pt),zt=0;zt<Bt.length;zt++){var jt=Bt[zt];zt===0&&(Et?q.call(this,jt.x1+M,jt.y1+X):Z.call(this,jt.x1+M,jt.y1+X)),bt.call(this,M,X,jt.x2,jt.y2,jt.x3,jt.y3,jt.x4,jt.y4)}mt?yt.call(this):lt.call(this,dt)},lt=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},yt=function(){this.pdf.clip(),this.pdf.discardPath()},q=function(M,X){this.pdf.internal.out(e(M)+" "+i(X)+" m")},R=function(M){var X;switch(M.align){case"right":case"end":X="right";break;case"center":X="center";break;case"left":case"start":default:X="left"}var U=this.pdf.getTextDimensions(M.text),Q=vt.call(this,M.y),nt=ot.call(this,Q)-U.h,pt=this.ctx.transform.applyToPoint(new l(M.x,Q)),dt=this.ctx.transform.decompose(),mt=new f;mt=(mt=(mt=mt.multiply(dt.translate)).multiply(dt.skew)).multiply(dt.scale);for(var Et,Bt,zt,jt=this.ctx.transform.applyToRectangle(new h(M.x,Q,U.w,U.h)),se=mt.applyToRectangle(new h(M.x,nt,U.w,U.h)),Lt=T.call(this,se),W=[],he=0;he<Lt.length;he+=1)W.indexOf(Lt[he])===-1&&W.push(Lt[he]);if(Y(W),this.autoPaging)for(var Jt=W[0],Mt=W[W.length-1],qt=Jt;qt<Mt+1;qt++){this.pdf.setPage(qt);var Wt=qt===1?this.posY+this.margin[0]:this.margin[0],Xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Zt=this.pdf.internal.pageSize.height-this.margin[2],le=Zt-this.margin[0],me=this.pdf.internal.pageSize.width-this.margin[1],we=me-this.margin[3],Se=qt===1?0:Xt+(qt-2)*le;if(this.ctx.clip_path.length!==0){var Fe=this.path;Et=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(Et,this.posX+this.margin[3],-1*Se+Wt),$.call(this,"fill",!0),this.path=Fe}var ae=F([JSON.parse(JSON.stringify(se))],this.posX+this.margin[3],-Se+Wt+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(Bt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Bt*M.scale),zt=this.lineWidth,this.lineWidth=zt*M.scale);var xe=this.autoPaging!=="text";if(xe||ae.y+ae.h<=Zt){if(xe||ae.y>=Wt&&ae.x<=me){var Ht=xe?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||me-ae.x)[0],dr=F([JSON.parse(JSON.stringify(jt))],this.posX+this.margin[3],-Se+Wt+this.ctx.prevPageLastElemOffset)[0],Ae=xe&&(qt>Jt||qt<Mt)&&A.call(this);Ae&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],we,le,null).clip().discardPath()),this.pdf.text(Ht,dr.x,dr.y,{angle:M.angle,align:X,renderingMode:M.renderingMode}),Ae&&this.pdf.restoreGraphicsState()}}else ae.y<Zt&&(this.ctx.prevPageLastElemOffset+=Zt-ae.y);M.scale>=.01&&(this.pdf.setFontSize(Bt),this.lineWidth=zt)}else M.scale>=.01&&(Bt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Bt*M.scale),zt=this.lineWidth,this.lineWidth=zt*M.scale),this.pdf.text(M.text,pt.x+this.posX,pt.y+this.posY,{angle:M.angle,align:X,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(Bt),this.lineWidth=zt)},Z=function(M,X,U,Q){U=U||0,Q=Q||0,this.pdf.internal.out(e(M+U)+" "+i(X+Q)+" l")},G=function(M,X,U){return this.pdf.lines(M,X,U,null,null)},bt=function(M,X,U,Q,nt,pt,dt,mt){this.pdf.internal.out([t(s(U+M)),t(a(Q+X)),t(s(nt+M)),t(a(pt+X)),t(s(dt+M)),t(a(mt+X)),"c"].join(" "))},gt=function(M,X,U,Q){for(var nt=2*Math.PI,pt=Math.PI/2;X>U;)X-=nt;var dt=Math.abs(U-X);dt<nt&&Q&&(dt=nt-dt);for(var mt=[],Et=Q?-1:1,Bt=X;dt>1e-5;){var zt=Bt+Et*Math.min(dt,pt);mt.push(St.call(this,M,Bt,zt)),dt-=Math.abs(zt-Bt),Bt=zt}return mt},St=function(M,X,U){var Q=(U-X)/2,nt=M*Math.cos(Q),pt=M*Math.sin(Q),dt=nt,mt=-pt,Et=dt*dt+mt*mt,Bt=Et+dt*nt+mt*pt,zt=4/3*(Math.sqrt(2*Et*Bt)-Bt)/(dt*pt-mt*nt),jt=dt-zt*mt,se=mt+zt*dt,Lt=jt,W=-se,he=Q+X,Jt=Math.cos(he),Mt=Math.sin(he);return{x1:M*Math.cos(X),y1:M*Math.sin(X),x2:jt*Jt-se*Mt,y2:jt*Mt+se*Jt,x3:Lt*Jt-W*Mt,y3:Lt*Mt+W*Jt,x4:M*Math.cos(U),y4:M*Math.sin(U)}},ut=function(M){return 180*M/Math.PI},wt=function(M,X,U,Q,nt,pt){var dt=M+.5*(U-M),mt=X+.5*(Q-X),Et=nt+.5*(U-nt),Bt=pt+.5*(Q-pt),zt=Math.min(M,nt,dt,Et),jt=Math.max(M,nt,dt,Et),se=Math.min(X,pt,mt,Bt),Lt=Math.max(X,pt,mt,Bt);return new h(zt,se,jt-zt,Lt-se)},Pt=function(M,X,U,Q,nt,pt,dt,mt){var Et,Bt,zt,jt,se,Lt,W,he,Jt,Mt,qt,Wt,Xt,Zt,le=U-M,me=Q-X,we=nt-U,Se=pt-Q,Fe=dt-nt,ae=mt-pt;for(Bt=0;Bt<41;Bt++)Jt=(W=(zt=M+(Et=Bt/40)*le)+Et*((se=U+Et*we)-zt))+Et*(se+Et*(nt+Et*Fe-se)-W),Mt=(he=(jt=X+Et*me)+Et*((Lt=Q+Et*Se)-jt))+Et*(Lt+Et*(pt+Et*ae-Lt)-he),Bt==0?(qt=Jt,Wt=Mt,Xt=Jt,Zt=Mt):(qt=Math.min(qt,Jt),Wt=Math.min(Wt,Mt),Xt=Math.max(Xt,Jt),Zt=Math.max(Zt,Mt));return new h(Math.round(qt),Math.round(Wt),Math.round(Xt-qt),Math.round(Zt-Wt))},Yt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,X,U=(M=this.ctx.lineDash,X=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:X}));this.prevLineDash!==U&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=U)}}})(ne.API),function(n){var t=function(a){var l,h,f,d,y,w,P,g,N,A;for(h=[],f=0,d=(a+=l="\0\0\0\0".slice(a.length%4||4)).length;d>f;f+=4)(y=(a.charCodeAt(f)<<24)+(a.charCodeAt(f+1)<<16)+(a.charCodeAt(f+2)<<8)+a.charCodeAt(f+3))!==0?(w=(y=((y=((y=((y=(y-(A=y%85))/85)-(N=y%85))/85)-(g=y%85))/85)-(P=y%85))/85)%85,h.push(w+33,P+33,g+33,N+33,A+33)):h.push(122);return function(T,L){for(var F=L;F>0;F--)T.pop()}(h,l.length),String.fromCharCode.apply(String,h)+"~>"},e=function(a){var l,h,f,d,y,w=String,P="length",g=255,N="charCodeAt",A="slice",T="replace";for(a[A](-2),a=a[A](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),f=[],d=0,y=(a+=l="uuuuu"[A](a[P]%5||5))[P];y>d;d+=5)h=52200625*(a[N](d)-33)+614125*(a[N](d+1)-33)+7225*(a[N](d+2)-33)+85*(a[N](d+3)-33)+(a[N](d+4)-33),f.push(g&h>>24,g&h>>16,g&h>>8,g&h);return function(L,F){for(var Y=F;Y>0;Y--)L.pop()}(f,l[P]),w.fromCharCode.apply(w,f)},i=function(a){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),l.test(a)===!1)return"";for(var h="",f=0;f<a.length;f+=2)h+=String.fromCharCode("0x"+(a[f]+a[f+1]));return h},s=function(a){for(var l=new Uint8Array(a.length),h=a.length;h--;)l[h]=a.charCodeAt(h);return a=(l=Nl(l)).reduce(function(f,d){return f+String.fromCharCode(d)},"")};n.processDataByFilters=function(a,l){var h=0,f=a||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),h=0;h<l.length;h+=1)switch(l[h]){case"ASCII85Decode":case"/ASCII85Decode":f=e(f),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=t(f),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=i(f),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=f.split("").map(function(y){return("0"+y.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=s(f),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[h]+'" is not implemented')}return{data:f,reverseChain:d.reverse().join(" ")}}}(ne.API),function(n){n.loadFile=function(t,e,i){return function(s,a,l){a=a!==!1,l=typeof l=="function"?l:function(){};var h=void 0;try{h=function(f,d,y){var w=new XMLHttpRequest,P=0,g=function(N){var A=N.length,T=[],L=String.fromCharCode;for(P=0;P<A;P+=1)T.push(L(255&N.charCodeAt(P)));return T.join("")};if(w.open("GET",f,!d),w.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(w.onload=function(){w.status===200?y(g(this.responseText)):y(void 0)}),w.send(null),d&&w.status===200)return g(w.responseText)}(s,a,l)}catch{}return h}(t,e,i)},n.loadImageFile=n.loadFile}(ne.API),function(n){function t(){return(oe.html2canvas?Promise.resolve(oe.html2canvas):xl(()=>import("./html2canvas.esm-BfxBtG_O.js"),[],import.meta.url)).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function e(){return(oe.DOMPurify?Promise.resolve(oe.DOMPurify):xl(()=>import("./purify.es-CQJ0hv7W.js"),[],import.meta.url)).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var i=function(l){var h=Me(l);return h==="undefined"?"undefined":h==="string"||l instanceof String?"string":h==="number"||l instanceof Number?"number":h==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":h==="object"?"object":"unknown"},s=function(l,h){var f=document.createElement(l);for(var d in h.className&&(f.className=h.className),h.innerHTML&&h.dompurify&&(f.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)f.style[d]=h.style[d];return f},a=function l(h){var f=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),f);return d=(d=d.setProgress(1,l,1,[l])).set(h)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(l,h){return l.__proto__=h||a.prototype,l},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(l,h){return this.then(function(){switch(h=h||function(f){switch(i(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l)){case"string":return this.then(e).then(function(f){return this.set({src:s("div",{innerHTML:l,dompurify:f})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},a.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=function f(d,y){for(var w=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),P=d.firstChild;P;P=P.nextSibling)y!==!0&&P.nodeType===1&&P.nodeName==="SCRIPT"||w.appendChild(f(P,y));return d.nodeType===1&&(d.nodeName==="CANVAS"?(w.width=d.width,w.height=d.height,w.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(w.value=d.value),w.addEventListener("load",function(){w.scrollTop=d.scrollTop,w.scrollLeft=d.scrollLeft},!0)),w}(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(h){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,h(this.prop.container,f)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(h){var f=this.opt.jsPDF,d=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,w=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete w.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=d,d)for(var P=0;P<d.length;++P){var g=d[P],N=g.src.find(function(A){return A.format==="truetype"});N&&f.addFont(N.url,g.ref.name,g.ref.style)}return w.windowHeight=w.windowHeight||0,w.windowHeight=w.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):w.windowHeight,f.context2d.save(!0),h(this.prop.container,w)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(l,h,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(l,h):this.outputPdf(l,h)},a.prototype.outputPdf=function(l,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,h)})},a.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},a.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(l){if(i(l)!=="object")return this;var h=Object.keys(l||{}).map(function(f){if(f in a.template.prop)return function(){this.prop[f]=l[f]};switch(f){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[f]=l[f]}}},this);return this.then(function(){return this.thenList(h)})},a.prototype.get=function(l,h){return this.then(function(){var f=l in a.template.prop?this.prop[l]:this.opt[l];return h?h(f):f})},a.prototype.setMargin=function(l){return this.then(function(){switch(i(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},a.prototype.setPageSize=function(l){function h(f,d){return Math.floor(f*d/72*96)}return this.then(function(){(l=l||ne.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:h(l.inner.width,l.k),height:h(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},a.prototype.setProgress=function(l,h,f,d){return l!=null&&(this.progress.val=l),h!=null&&(this.progress.state=h),f!=null&&(this.progress.n=f),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(l,h,f,d){return this.setProgress(l?this.progress.val+l:null,h||null,f?this.progress.n+f:null,d?this.progress.stack.concat(d):null)},a.prototype.then=function(l,h){var f=this;return this.thenCore(l,h,function(d,y){return f.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(w){return f.updateProgress(null,d),w}).then(d,y).then(function(w){return f.updateProgress(1),w})})},a.prototype.thenCore=function(l,h,f){f=f||Promise.prototype.then,l&&(l=l.bind(this)),h&&(h=h.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),y=f.call(d,l,h);return a.convert(y,this.__proto__)},a.prototype.thenExternal=function(l,h){return Promise.prototype.then.call(this,l,h)},a.prototype.thenList=function(l){var h=this;return l.forEach(function(f){h=h.thenCore(f)}),h},a.prototype.catch=function(l){l&&(l=l.bind(this));var h=Promise.prototype.catch.call(this,l);return a.convert(h,this)},a.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},a.prototype.error=function(l){return this.then(function(){throw new Error(l)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,ne.getPageSize=function(l,h,f){if(Me(l)==="object"){var d=l;l=d.orientation,h=d.unit||h,f=d.format||f}h=h||"mm",f=f||"a4",l=(""+(l||"P")).toLowerCase();var y,w=(""+f).toLowerCase(),P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+h}var g,N=0,A=0;if(P.hasOwnProperty(w))N=P[w][1]/y,A=P[w][0]/y;else try{N=f[1],A=f[0]}catch{throw new Error("Invalid format: "+f)}if(l==="p"||l==="portrait")l="p",A>N&&(g=A,A=N,N=g);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",N>A&&(g=A,A=N,N=g)}return{width:A,height:N,unit:h,k:y,orientation:l}},n.html=function(l,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(kl):null;var f=new a(h);return h.worker?f:f.from(l).doCallback()}}(ne.API),ne.API.addJS=function(n){return Ru=n,this.internal.events.subscribe("postPutResources",function(){ao=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ao+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),qu=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ru+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ao!==void 0&&qu!==void 0&&this.internal.out("/Names <</JavaScript "+ao+" 0 R>>")}),this},function(n){var t;n.events.push(["postPutResources",function(){var e=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=e.outline.render().split(/\r\n/),a=0;a<s.length;a++){var l=s[a],h=i.exec(l);if(h!=null){var f=h[1];e.internal.newObjectDeferredBegin(f,!1)}e.internal.write(l)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,y=[];for(a=0;a<d;a++){var w=e.internal.newObject();y.push(w);var P=e.internal.getPageInfo(a+1);e.internal.write("<< /D["+P.objId+" 0 R /XYZ null null null]>> endobj")}var g=e.internal.newObject();for(e.internal.write("<< /Names [ "),a=0;a<y.length;a++)e.internal.write("(page_"+(a+1)+")"+y[a]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+g+" 0 R"),e.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),n.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(i,s,a){var l={title:s,options:a,children:[]};return i==null&&(i=this.root),i.children.push(l),l},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(i){i.id=e.internal.newObjectDeferred();for(var s=0;s<i.children.length;s++)this.genIds_r(i.children[s])},e.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},e.outline.renderItems=function(i){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<i.children.length;a++){var l=i.children[a];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(i)),a>0&&this.line("/Prev "+this.makeRef(i.children[a-1])),a<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[a+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var h=this.count=this.count_r({count:0},l);if(h>0&&this.line("/Count "+h),l.options&&l.options.pageNumber){var f=e.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<i.children.length;d++)this.renderItems(i.children[d])},e.outline.line=function(i){this.ctx.val+=i+`\r
`},e.outline.makeRef=function(i){return i.id+" 0 R"},e.outline.makeString=function(i){return"("+e.internal.pdfEscape(i)+")"},e.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(i,s){for(var a=0;a<s.children.length;a++)i.count++,this.count_r(i,s.children[a]);return i.count}}])}(ne.API),function(n){var t=[192,193,194,195,196,197,198,199];n.processJPEG=function(e,i,s,a,l,h){var f,d=this.decode.DCT_DECODE,y=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=l||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(f=function(w){for(var P,g=256*w.charCodeAt(4)+w.charCodeAt(5),N=w.length,A={width:0,height:0,numcomponents:1},T=4;T<N;T+=2){if(T+=g,t.indexOf(w.charCodeAt(T+1))!==-1){P=256*w.charCodeAt(T+5)+w.charCodeAt(T+6),A={width:256*w.charCodeAt(T+7)+w.charCodeAt(T+8),height:P,numcomponents:w.charCodeAt(T+9)};break}g=256*w.charCodeAt(T+2)+w.charCodeAt(T+3)}return A}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:h=this.color_spaces.DEVICE_GRAY;break;case 4:h=this.color_spaces.DEVICE_CMYK;break;case 3:h=this.color_spaces.DEVICE_RGB}y={data:e,width:f.width,height:f.height,colorSpace:h,bitsPerComponent:8,filter:d,index:i,alias:s}}return y}}(ne.API);var bs,oo,ju,Xu,Yu,Wc=function(){var n,t,e;function i(a){var l,h,f,d,y,w,P,g,N,A,T,L,F,Y;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},w=null;;){switch(l=this.readUInt32(),N=(function(){var it,$;for($=[],it=0;it<4;++it)$.push(String.fromCharCode(this.data[this.pos++]));return $}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":w&&this.animation.frames.push(w),this.pos+=4,w={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},y=this.readUInt16(),d=this.readUInt16()||100,w.delay=1e3*y/d,w.disposeOp=this.data[this.pos++],w.blendOp=this.data[this.pos++],w.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,l-=4),a=w?.data||this.imgData,L=0;0<=l?L<l:L>l;0<=l?++L:--L)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(f=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>f)throw new Error("More transparent colors than palette size");if((A=f-this.transparency.indexed.length)>0)for(F=0;0<=A?F<A:F>A;0<=A?++F:--F)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":P=(T=this.read(l)).indexOf(0),g=String.fromCharCode.apply(String,T.slice(0,P)),this.text[g]=String.fromCharCode.apply(String,T.slice(P+1));break;case"IEND":return w&&this.animation.frames.push(w),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(Y=this.colorType)===4||Y===6,h=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*h,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(a){var l,h;for(h=[],l=0;0<=a?l<a:l>a;0<=a?++l:--l)h.push(this.data[this.pos++]);return h},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(a){var l=this.pixelBitlength/8,h=new Uint8Array(this.width*this.height*l),f=0,d=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function y(w,P,g,N){var A,T,L,F,Y,it,$,vt,ot,J,lt,yt,q,R,Z,G,bt,gt,St,ut,wt,Pt=Math.ceil((d.width-w)/g),Yt=Math.ceil((d.height-P)/N),M=d.width==Pt&&d.height==Yt;for(R=l*Pt,yt=M?h:new Uint8Array(R*Yt),it=a.length,q=0,T=0;q<Yt&&f<it;){switch(a[f++]){case 0:for(F=bt=0;bt<R;F=bt+=1)yt[T++]=a[f++];break;case 1:for(F=gt=0;gt<R;F=gt+=1)A=a[f++],Y=F<l?0:yt[T-l],yt[T++]=(A+Y)%256;break;case 2:for(F=St=0;St<R;F=St+=1)A=a[f++],L=(F-F%l)/l,Z=q&&yt[(q-1)*R+L*l+F%l],yt[T++]=(Z+A)%256;break;case 3:for(F=ut=0;ut<R;F=ut+=1)A=a[f++],L=(F-F%l)/l,Y=F<l?0:yt[T-l],Z=q&&yt[(q-1)*R+L*l+F%l],yt[T++]=(A+Math.floor((Y+Z)/2))%256;break;case 4:for(F=wt=0;wt<R;F=wt+=1)A=a[f++],L=(F-F%l)/l,Y=F<l?0:yt[T-l],q===0?Z=G=0:(Z=yt[(q-1)*R+L*l+F%l],G=L&&yt[(q-1)*R+(L-1)*l+F%l]),$=Y+Z-G,vt=Math.abs($-Y),J=Math.abs($-Z),lt=Math.abs($-G),ot=vt<=J&&vt<=lt?Y:J<=lt?Z:G,yt[T++]=(A+ot)%256;break;default:throw new Error("Invalid filter algorithm: "+a[f-1])}if(!M){var X=((P+q*N)*d.width+w)*l,U=q*R;for(F=0;F<Pt;F+=1){for(var Q=0;Q<l;Q+=1)h[X++]=yt[U++];X+=(g-1)*l}}q++}}return a=Sc(a),d.interlaceMethod==1?(y(0,0,8,8),y(4,0,8,8),y(0,4,4,8),y(2,0,4,4),y(0,2,2,4),y(1,0,2,2),y(0,1,1,2)):y(0,0,1,1),h},i.prototype.decodePalette=function(){var a,l,h,f,d,y,w,P,g;for(h=this.palette,y=this.transparency.indexed||[],d=new Uint8Array((y.length||0)+h.length),f=0,a=0,l=w=0,P=h.length;w<P;l=w+=3)d[f++]=h[l],d[f++]=h[l+1],d[f++]=h[l+2],d[f++]=(g=y[a++])!=null?g:255;return d},i.prototype.copyToImageData=function(a,l){var h,f,d,y,w,P,g,N,A,T,L;if(f=this.colors,A=null,h=this.hasAlphaChannel,this.palette.length&&(A=(L=this._decodedPalette)!=null?L:this._decodedPalette=this.decodePalette(),f=4,h=!0),N=(d=a.data||a).length,w=A||l,y=P=0,f===1)for(;y<N;)g=A?4*l[y/4]:P,T=w[g++],d[y++]=T,d[y++]=T,d[y++]=T,d[y++]=h?w[g++]:255,P=g;else for(;y<N;)g=A?4*l[y/4]:P,d[y++]=w[g++],d[y++]=w[g++],d[y++]=w[g++],d[y++]=h?w[g++]:255,P=g},i.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var s=function(){if(Object.prototype.toString.call(oe)==="[object Window]"){try{t=oe.document.createElement("canvas"),e=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),n=function(a){var l;if(s()===!0)return e.width=a.width,e.height=a.height,e.clearRect(0,0,a.width,a.height),e.putImageData(a,0,0),(l=new Image).src=t.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(a){var l,h,f,d,y,w,P,g;if(this.animation){for(g=[],h=y=0,w=(P=this.animation.frames).length;y<w;h=++y)l=P[h],f=a.createImageData(l.width,l.height),d=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(f,d),l.imageData=f,g.push(l.image=n(f));return g}},i.prototype.renderFrame=function(a,l){var h,f,d;return h=(f=this.animation.frames)[l],d=f[l-1],l===0&&a.clearRect(0,0,this.width,this.height),d?.disposeOp===1?a.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===2&&a.putImageData(d.imageData,d.xOffset,d.yOffset),h.blendOp===0&&a.clearRect(h.xOffset,h.yOffset,h.width,h.height),a.drawImage(h.image,h.xOffset,h.yOffset)},i.prototype.animate=function(a){var l,h,f,d,y,w,P=this;return h=0,w=this.animation,d=w.numFrames,f=w.frames,y=w.numPlays,(l=function(){var g,N;if(g=h++%d,N=f[g],P.renderFrame(a,g),d>1&&h/d<y)return P.animation._timeout=setTimeout(l,N.delay)})()},i.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},i.prototype.render=function(a){var l,h;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,l=a.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(h=l.createImageData(this.width,this.height),this.copyToImageData(h,this.decodePixels()),l.putImageData(h,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Hc(n){var t=0;if(n[t++]!==71||n[t++]!==73||n[t++]!==70||n[t++]!==56||(n[t++]+1&253)!=56||n[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=n[t++]|n[t++]<<8,i=n[t++]|n[t++]<<8,s=n[t++],a=s>>7,l=1<<(7&s)+1;n[t++],n[t++];var h=null,f=null;a&&(h=t,f=l,t+=3*l);var d=!0,y=[],w=0,P=null,g=0,N=null;for(this.width=e,this.height=i;d&&t<n.length;)switch(n[t++]){case 33:switch(n[t++]){case 255:if(n[t]!==11||n[t+1]==78&&n[t+2]==69&&n[t+3]==84&&n[t+4]==83&&n[t+5]==67&&n[t+6]==65&&n[t+7]==80&&n[t+8]==69&&n[t+9]==50&&n[t+10]==46&&n[t+11]==48&&n[t+12]==3&&n[t+13]==1&&n[t+16]==0)t+=14,N=n[t++]|n[t++]<<8,t++;else for(t+=12;;){if(!((q=n[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}break;case 249:if(n[t++]!==4||n[t+4]!==0)throw new Error("Invalid graphics extension block.");var A=n[t++];w=n[t++]|n[t++]<<8,P=n[t++],(1&A)==0&&(P=null),g=A>>2&7,t++;break;case 254:for(;;){if(!((q=n[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}break;default:throw new Error("Unknown graphic control label: 0x"+n[t-1].toString(16))}break;case 44:var T=n[t++]|n[t++]<<8,L=n[t++]|n[t++]<<8,F=n[t++]|n[t++]<<8,Y=n[t++]|n[t++]<<8,it=n[t++],$=it>>6&1,vt=1<<(7&it)+1,ot=h,J=f,lt=!1;it>>7&&(lt=!0,ot=t,J=vt,t+=3*vt);var yt=t;for(t++;;){var q;if(!((q=n[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}y.push({x:T,y:L,width:F,height:Y,has_local_palette:lt,palette_offset:ot,palette_size:J,data_offset:yt,data_length:t-yt,transparent_index:P,interlaced:!!$,delay:w,disposal:g});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+n[t-1].toString(16))}this.numFrames=function(){return y.length},this.loopCount=function(){return N},this.frameInfo=function(R){if(R<0||R>=y.length)throw new Error("Frame index out of range.");return y[R]},this.decodeAndBlitFrameBGRA=function(R,Z){var G=this.frameInfo(R),bt=G.width*G.height,gt=new Uint8Array(bt);zu(n,G.data_offset,gt,bt);var St=G.palette_offset,ut=G.transparent_index;ut===null&&(ut=256);var wt=G.width,Pt=e-wt,Yt=wt,M=4*(G.y*e+G.x),X=4*((G.y+G.height)*e+G.x),U=M,Q=4*Pt;G.interlaced===!0&&(Q+=4*e*7);for(var nt=8,pt=0,dt=gt.length;pt<dt;++pt){var mt=gt[pt];if(Yt===0&&(Yt=wt,(U+=Q)>=X&&(Q=4*Pt+4*e*(nt-1),U=M+(wt+Pt)*(nt<<1),nt>>=1)),mt===ut)U+=4;else{var Et=n[St+3*mt],Bt=n[St+3*mt+1],zt=n[St+3*mt+2];Z[U++]=zt,Z[U++]=Bt,Z[U++]=Et,Z[U++]=255}--Yt}},this.decodeAndBlitFrameRGBA=function(R,Z){var G=this.frameInfo(R),bt=G.width*G.height,gt=new Uint8Array(bt);zu(n,G.data_offset,gt,bt);var St=G.palette_offset,ut=G.transparent_index;ut===null&&(ut=256);var wt=G.width,Pt=e-wt,Yt=wt,M=4*(G.y*e+G.x),X=4*((G.y+G.height)*e+G.x),U=M,Q=4*Pt;G.interlaced===!0&&(Q+=4*e*7);for(var nt=8,pt=0,dt=gt.length;pt<dt;++pt){var mt=gt[pt];if(Yt===0&&(Yt=wt,(U+=Q)>=X&&(Q=4*Pt+4*e*(nt-1),U=M+(wt+Pt)*(nt<<1),nt>>=1)),mt===ut)U+=4;else{var Et=n[St+3*mt],Bt=n[St+3*mt+1],zt=n[St+3*mt+2];Z[U++]=Et,Z[U++]=Bt,Z[U++]=zt,Z[U++]=255}--Yt}}}function zu(n,t,e,i){for(var s=n[t++],a=1<<s,l=a+1,h=l+1,f=s+1,d=(1<<f)-1,y=0,w=0,P=0,g=n[t++],N=new Int32Array(4096),A=null;;){for(;y<16&&g!==0;)w|=n[t++]<<y,y+=8,g===1?g=n[t++]:--g;if(y<f)break;var T=w&d;if(w>>=f,y-=f,T!==a){if(T===l)break;for(var L=T<h?T:A,F=0,Y=L;Y>a;)Y=N[Y]>>8,++F;var it=Y;if(P+F+(L!==T?1:0)>i)return void Re.log("Warning, gif stream longer than expected.");e[P++]=it;var $=P+=F;for(L!==T&&(e[P++]=it),Y=L;F--;)Y=N[Y],e[--$]=255&Y,Y>>=8;A!==null&&h<4096&&(N[h++]=A<<8|it,h>=d+1&&f<12&&(++f,d=d<<1|1)),A=T}else h=l+1,d=(1<<(f=s+1))-1,A=null}return P!==i&&Re.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function sl(n){var t,e,i,s,a,l=Math.floor,h=new Array(64),f=new Array(64),d=new Array(64),y=new Array(64),w=new Array(65535),P=new Array(65535),g=new Array(64),N=new Array(64),A=[],T=0,L=7,F=new Array(64),Y=new Array(64),it=new Array(64),$=new Array(256),vt=new Array(2048),ot=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],J=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],lt=[0,1,2,3,4,5,6,7,8,9,10,11],yt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Z=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],bt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function gt(M,X){for(var U=0,Q=0,nt=new Array,pt=1;pt<=16;pt++){for(var dt=1;dt<=M[pt];dt++)nt[X[Q]]=[],nt[X[Q]][0]=U,nt[X[Q]][1]=pt,Q++,U++;U*=2}return nt}function St(M){for(var X=M[0],U=M[1]-1;U>=0;)X&1<<U&&(T|=1<<L),U--,--L<0&&(T==255?(ut(255),ut(0)):ut(T),L=7,T=0)}function ut(M){A.push(M)}function wt(M){ut(M>>8&255),ut(255&M)}function Pt(M,X,U,Q,nt){for(var pt,dt=nt[0],mt=nt[240],Et=function(Mt,qt){var Wt,Xt,Zt,le,me,we,Se,Fe,ae,xe,Ht=0;for(ae=0;ae<8;++ae){Wt=Mt[Ht],Xt=Mt[Ht+1],Zt=Mt[Ht+2],le=Mt[Ht+3],me=Mt[Ht+4],we=Mt[Ht+5],Se=Mt[Ht+6];var dr=Wt+(Fe=Mt[Ht+7]),Ae=Wt-Fe,zr=Xt+Se,Ie=Xt-Se,Ye=Zt+we,Ur=Zt-we,_e=le+me,Ci=le-me,He=dr+_e,Wr=dr-_e,mi=zr+Ye,Ve=zr-Ye;Mt[Ht]=He+mi,Mt[Ht+4]=He-mi;var ue=.707106781*(Ve+Wr);Mt[Ht+2]=Wr+ue,Mt[Ht+6]=Wr-ue;var Ce=.382683433*((He=Ci+Ur)-(Ve=Ie+Ae)),Di=.5411961*He+Ce,hr=1.306562965*Ve+Ce,ii=.707106781*(mi=Ur+Ie),ni=Ae+ii,ee=Ae-ii;Mt[Ht+5]=ee+Di,Mt[Ht+3]=ee-Di,Mt[Ht+1]=ni+hr,Mt[Ht+7]=ni-hr,Ht+=8}for(Ht=0,ae=0;ae<8;++ae){Wt=Mt[Ht],Xt=Mt[Ht+8],Zt=Mt[Ht+16],le=Mt[Ht+24],me=Mt[Ht+32],we=Mt[Ht+40],Se=Mt[Ht+48];var Hr=Wt+(Fe=Mt[Ht+56]),si=Wt-Fe,Nr=Xt+Se,er=Xt-Se,Je=Zt+we,Er=Zt-we,Ki=le+me,gi=le-me,Vr=Hr+Ki,Gr=Hr-Ki,$r=Nr+Je,ai=Nr-Je;Mt[Ht]=Vr+$r,Mt[Ht+32]=Vr-$r;var mr=.707106781*(ai+Gr);Mt[Ht+16]=Gr+mr,Mt[Ht+48]=Gr-mr;var Jr=.382683433*((Vr=gi+Er)-(ai=er+si)),qi=.5411961*Vr+Jr,Qi=1.306562965*ai+Jr,tn=.707106781*($r=Er+er),en=si+tn,rn=si-tn;Mt[Ht+40]=rn+qi,Mt[Ht+24]=rn-qi,Mt[Ht+8]=en+Qi,Mt[Ht+56]=en-Qi,Ht++}for(ae=0;ae<64;++ae)xe=Mt[ae]*qt[ae],g[ae]=xe>0?xe+.5|0:xe-.5|0;return g}(M,X),Bt=0;Bt<64;++Bt)N[ot[Bt]]=Et[Bt];var zt=N[0]-U;U=N[0],zt==0?St(Q[0]):(St(Q[P[pt=32767+zt]]),St(w[pt]));for(var jt=63;jt>0&&N[jt]==0;)jt--;if(jt==0)return St(dt),U;for(var se,Lt=1;Lt<=jt;){for(var W=Lt;N[Lt]==0&&Lt<=jt;)++Lt;var he=Lt-W;if(he>=16){se=he>>4;for(var Jt=1;Jt<=se;++Jt)St(mt);he&=15}pt=32767+N[Lt],St(nt[(he<<4)+P[pt]]),St(w[pt]),Lt++}return jt!=63&&St(dt),U}function Yt(M){M=Math.min(Math.max(M,1),100),a!=M&&(function(X){for(var U=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var nt=l((U[Q]*X+50)/100);nt=Math.min(Math.max(nt,1),255),h[ot[Q]]=nt}for(var pt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],dt=0;dt<64;dt++){var mt=l((pt[dt]*X+50)/100);mt=Math.min(Math.max(mt,1),255),f[ot[dt]]=mt}for(var Et=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Bt=0,zt=0;zt<8;zt++)for(var jt=0;jt<8;jt++)d[Bt]=1/(h[ot[Bt]]*Et[zt]*Et[jt]*8),y[Bt]=1/(f[ot[Bt]]*Et[zt]*Et[jt]*8),Bt++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),a=M)}this.encode=function(M,X){X&&Yt(X),A=new Array,T=0,L=7,wt(65496),wt(65504),wt(16),ut(74),ut(70),ut(73),ut(70),ut(0),ut(1),ut(1),ut(0),wt(1),wt(1),ut(0),ut(0),function(){wt(65499),wt(132),ut(0);for(var Xt=0;Xt<64;Xt++)ut(h[Xt]);ut(1);for(var Zt=0;Zt<64;Zt++)ut(f[Zt])}(),function(Xt,Zt){wt(65472),wt(17),ut(8),wt(Zt),wt(Xt),ut(3),ut(1),ut(17),ut(0),ut(2),ut(17),ut(1),ut(3),ut(17),ut(1)}(M.width,M.height),function(){wt(65476),wt(418),ut(0);for(var Xt=0;Xt<16;Xt++)ut(J[Xt+1]);for(var Zt=0;Zt<=11;Zt++)ut(lt[Zt]);ut(16);for(var le=0;le<16;le++)ut(yt[le+1]);for(var me=0;me<=161;me++)ut(q[me]);ut(1);for(var we=0;we<16;we++)ut(R[we+1]);for(var Se=0;Se<=11;Se++)ut(Z[Se]);ut(17);for(var Fe=0;Fe<16;Fe++)ut(G[Fe+1]);for(var ae=0;ae<=161;ae++)ut(bt[ae])}(),wt(65498),wt(12),ut(3),ut(1),ut(0),ut(2),ut(17),ut(3),ut(17),ut(0),ut(63),ut(0);var U=0,Q=0,nt=0;T=0,L=7,this.encode.displayName="_encode_";for(var pt,dt,mt,Et,Bt,zt,jt,se,Lt,W=M.data,he=M.width,Jt=M.height,Mt=4*he,qt=0;qt<Jt;){for(pt=0;pt<Mt;){for(Bt=Mt*qt+pt,jt=-1,se=0,Lt=0;Lt<64;Lt++)zt=Bt+(se=Lt>>3)*Mt+(jt=4*(7&Lt)),qt+se>=Jt&&(zt-=Mt*(qt+1+se-Jt)),pt+jt>=Mt&&(zt-=pt+jt-Mt+4),dt=W[zt++],mt=W[zt++],Et=W[zt++],F[Lt]=(vt[dt]+vt[mt+256>>0]+vt[Et+512>>0]>>16)-128,Y[Lt]=(vt[dt+768>>0]+vt[mt+1024>>0]+vt[Et+1280>>0]>>16)-128,it[Lt]=(vt[dt+1280>>0]+vt[mt+1536>>0]+vt[Et+1792>>0]>>16)-128;U=Pt(F,d,U,t,i),Q=Pt(Y,y,Q,e,s),nt=Pt(it,y,nt,e,s),pt+=32}qt+=8}if(L>=0){var Wt=[];Wt[1]=L+1,Wt[0]=(1<<L+1)-1,St(Wt)}return wt(65497),new Uint8Array(A)},n=n||50,function(){for(var M=String.fromCharCode,X=0;X<256;X++)$[X]=M(X)}(),t=gt(J,lt),e=gt(R,Z),i=gt(yt,q),s=gt(G,bt),function(){for(var M=1,X=2,U=1;U<=15;U++){for(var Q=M;Q<X;Q++)P[32767+Q]=U,w[32767+Q]=[],w[32767+Q][1]=U,w[32767+Q][0]=Q;for(var nt=-(X-1);nt<=-M;nt++)P[32767+nt]=U,w[32767+nt]=[],w[32767+nt][1]=U,w[32767+nt][0]=X-1+nt;M<<=1,X<<=1}}(),function(){for(var M=0;M<256;M++)vt[M]=19595*M,vt[M+256>>0]=38470*M,vt[M+512>>0]=7471*M+32768,vt[M+768>>0]=-11059*M,vt[M+1024>>0]=-21709*M,vt[M+1280>>0]=32768*M+8421375,vt[M+1536>>0]=-27439*M,vt[M+1792>>0]=-5329*M}(),Yt(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Si(n,t){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Uu(n){function t(J){if(!J)throw Error("assert :P")}function e(J,lt,yt){for(var q=0;4>q;q++)if(J[lt+q]!=yt.charCodeAt(q))return!0;return!1}function i(J,lt,yt,q,R){for(var Z=0;Z<R;Z++)J[lt+Z]=yt[q+Z]}function s(J,lt,yt,q){for(var R=0;R<q;R++)J[lt+R]=yt}function a(J){return new Int32Array(J)}function l(J,lt){for(var yt=[],q=0;q<J;q++)yt.push(new lt);return yt}function h(J,lt){var yt=[];return function q(R,Z,G){for(var bt=G[Z],gt=0;gt<bt&&(R.push(G.length>Z+1?[]:new lt),!(G.length<Z+1));gt++)q(R[gt],Z+1,G)}(yt,0,J),yt}var f=function(){var J=this;function lt(u,p){for(var b=1<<p-1>>>0;u&b;)b>>>=1;return b?(u&b-1)+b:u}function yt(u,p,b,S,C){t(!(S%b));do u[p+(S-=b)]=C;while(0<S)}function q(u,p,b,S,C){if(t(2328>=C),512>=C)var k=a(512);else if((k=a(C))==null)return 0;return function(E,O,D,j,tt,ht){var ft,st,It=O,xt=1<<D,et=a(16),rt=a(16);for(t(tt!=0),t(j!=null),t(E!=null),t(0<D),st=0;st<tt;++st){if(15<j[st])return 0;++et[j[st]]}if(et[0]==tt)return 0;for(rt[1]=0,ft=1;15>ft;++ft){if(et[ft]>1<<ft)return 0;rt[ft+1]=rt[ft]+et[ft]}for(st=0;st<tt;++st)ft=j[st],0<j[st]&&(ht[rt[ft]++]=st);if(rt[15]==1)return(j=new R).g=0,j.value=ht[0],yt(E,It,1,xt,j),xt;var _t,Ft=-1,Ct=xt-1,Gt=0,Rt=1,ie=1,Ut=1<<D;for(st=0,ft=1,tt=2;ft<=D;++ft,tt<<=1){if(Rt+=ie<<=1,0>(ie-=et[ft]))return 0;for(;0<et[ft];--et[ft])(j=new R).g=ft,j.value=ht[st++],yt(E,It+Gt,tt,Ut,j),Gt=lt(Gt,ft)}for(ft=D+1,tt=2;15>=ft;++ft,tt<<=1){if(Rt+=ie<<=1,0>(ie-=et[ft]))return 0;for(;0<et[ft];--et[ft]){if(j=new R,(Gt&Ct)!=Ft){for(It+=Ut,_t=1<<(Ft=ft)-D;15>Ft&&!(0>=(_t-=et[Ft]));)++Ft,_t<<=1;xt+=Ut=1<<(_t=Ft-D),E[O+(Ft=Gt&Ct)].g=_t+D,E[O+Ft].value=It-O-Ft}j.g=ft-D,j.value=ht[st++],yt(E,It+(Gt>>D),tt,Ut,j),Gt=lt(Gt,ft)}}return Rt!=2*rt[15]-1?0:xt}(u,p,b,S,C,k)}function R(){this.value=this.g=0}function Z(){this.value=this.g=0}function G(){this.G=l(5,R),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Sr,Z)}function bt(u,p,b,S){t(u!=null),t(p!=null),t(2147483648>S),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=p,u.pa=b,u.Jd=p,u.Yc=b+S,u.Zc=4<=S?b+S-4+1:b,pt(u)}function gt(u,p){for(var b=0;0<p--;)b|=mt(u,128)<<p;return b}function St(u,p){var b=gt(u,p);return dt(u)?-b:b}function ut(u,p,b,S){var C,k=0;for(t(u!=null),t(p!=null),t(4294967288>S),u.Sb=S,u.Ra=0,u.u=0,u.h=0,4<S&&(S=4),C=0;C<S;++C)k+=p[b+C]<<8*C;u.Ra=k,u.bb=S,u.oa=p,u.pa=b}function wt(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<ls-8>>>0,++u.bb,u.u-=8;U(u)&&(u.h=1,u.u=0)}function Pt(u,p){if(t(0<=p),!u.h&&p<=os){var b=X(u)&as[p];return u.u+=p,wt(u),b}return u.h=1,u.u=0}function Yt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(u){return u.Ra>>>(u.u&ls-1)>>>0}function U(u){return t(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>ls}function Q(u,p){u.u=p,u.h=U(u)}function nt(u){u.u>=ta&&(t(u.u>=ta),wt(u))}function pt(u){t(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(t(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function dt(u){return gt(u,1)}function mt(u,p){var b=u.Ca;0>u.b&&pt(u);var S=u.b,C=b*p>>>8,k=(u.I>>>S>C)+0;for(k?(b-=C,u.I-=C+1<<S>>>0):b=C+1,S=b,C=0;256<=S;)C+=8,S>>=8;return S=7^C+qr[S],u.b-=S,u.Ca=(b<<S)-1,k}function Et(u,p,b){u[p+0]=b>>24&255,u[p+1]=b>>16&255,u[p+2]=b>>8&255,u[p+3]=b>>0&255}function Bt(u,p){return u[p+0]<<0|u[p+1]<<8}function zt(u,p){return Bt(u,p)|u[p+2]<<16}function jt(u,p){return Bt(u,p)|Bt(u,p+2)<<16}function se(u,p){var b=1<<p;return t(u!=null),t(0<p),u.X=a(b),u.X==null?0:(u.Mb=32-p,u.Xa=p,1)}function Lt(u,p){t(u!=null),t(p!=null),t(u.Xa==p.Xa),i(p.X,0,u.X,0,1<<p.Xa)}function W(){this.X=[],this.Xa=this.Mb=0}function he(u,p,b,S){t(b!=null),t(S!=null);var C=b[0],k=S[0];return C==0&&(C=(u*k+p/2)/p),k==0&&(k=(p*C+u/2)/u),0>=C||0>=k?0:(b[0]=C,S[0]=k,1)}function Jt(u,p){return u+(1<<p)-1>>>p}function Mt(u,p){return((4278255360&u)+(4278255360&p)>>>0&4278255360)+((16711935&u)+(16711935&p)>>>0&16711935)>>>0}function qt(u,p){J[p]=function(b,S,C,k,E,O,D){var j;for(j=0;j<E;++j){var tt=J[u](O[D+j-1],C,k+j);O[D+j]=Mt(b[S+j],tt)}}}function Wt(){this.ud=this.hd=this.jd=0}function Xt(u,p){return((4278124286&(u^p))>>>1)+(u&p)>>>0}function Zt(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function le(u,p){return Zt(u+(u-p+.5>>1))}function me(u,p,b){return Math.abs(p-b)-Math.abs(u-b)}function we(u,p,b,S,C,k,E){for(S=k[E-1],b=0;b<C;++b)k[E+b]=S=Mt(u[p+b],S)}function Se(u,p,b,S,C){var k;for(k=0;k<b;++k){var E=u[p+k],O=E>>8&255,D=16711935&(D=(D=16711935&E)+((O<<16)+O));S[C+k]=(4278255360&E)+D>>>0}}function Fe(u,p){p.jd=u>>0&255,p.hd=u>>8&255,p.ud=u>>16&255}function ae(u,p,b,S,C,k){var E;for(E=0;E<S;++E){var O=p[b+E],D=O>>>8,j=O,tt=255&(tt=(tt=O>>>16)+((u.jd<<24>>24)*(D<<24>>24)>>>5));j=255&(j=(j=j+((u.hd<<24>>24)*(D<<24>>24)>>>5))+((u.ud<<24>>24)*(tt<<24>>24)>>>5)),C[k+E]=(4278255360&O)+(tt<<16)+j}}function xe(u,p,b,S,C){J[p]=function(k,E,O,D,j,tt,ht,ft,st){for(D=ht;D<ft;++D)for(ht=0;ht<st;++ht)j[tt++]=C(O[S(k[E++])])},J[u]=function(k,E,O,D,j,tt,ht){var ft=8>>k.b,st=k.Ea,It=k.K[0],xt=k.w;if(8>ft)for(k=(1<<k.b)-1,xt=(1<<ft)-1;E<O;++E){var et,rt=0;for(et=0;et<st;++et)et&k||(rt=S(D[j++])),tt[ht++]=C(It[rt&xt]),rt>>=ft}else J["VP8LMapColor"+b](D,j,It,xt,tt,ht,E,O,st)}}function Ht(u,p,b,S,C){for(b=p+b;p<b;){var k=u[p++];S[C++]=k>>16&255,S[C++]=k>>8&255,S[C++]=k>>0&255}}function dr(u,p,b,S,C){for(b=p+b;p<b;){var k=u[p++];S[C++]=k>>16&255,S[C++]=k>>8&255,S[C++]=k>>0&255,S[C++]=k>>24&255}}function Ae(u,p,b,S,C){for(b=p+b;p<b;){var k=(E=u[p++])>>16&240|E>>12&15,E=E>>0&240|E>>28&15;S[C++]=k,S[C++]=E}}function zr(u,p,b,S,C){for(b=p+b;p<b;){var k=(E=u[p++])>>16&248|E>>13&7,E=E>>5&224|E>>3&31;S[C++]=k,S[C++]=E}}function Ie(u,p,b,S,C){for(b=p+b;p<b;){var k=u[p++];S[C++]=k>>0&255,S[C++]=k>>8&255,S[C++]=k>>16&255}}function Ye(u,p,b,S,C,k){if(k==0)for(b=p+b;p<b;)Et(S,((k=u[p++])[0]>>24|k[1]>>8&65280|k[2]<<8&16711680|k[3]<<24)>>>0),C+=32;else i(S,C,u,p,b)}function Ur(u,p){J[p][0]=J[u+"0"],J[p][1]=J[u+"1"],J[p][2]=J[u+"2"],J[p][3]=J[u+"3"],J[p][4]=J[u+"4"],J[p][5]=J[u+"5"],J[p][6]=J[u+"6"],J[p][7]=J[u+"7"],J[p][8]=J[u+"8"],J[p][9]=J[u+"9"],J[p][10]=J[u+"10"],J[p][11]=J[u+"11"],J[p][12]=J[u+"12"],J[p][13]=J[u+"13"],J[p][14]=J[u+"0"],J[p][15]=J[u+"0"]}function _e(u){return u==Oo||u==Bo||u==za||u==Do}function Ci(){this.eb=[],this.size=this.A=this.fb=0}function He(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ci,this.f.kb=new He,this.sd=null}function mi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ve(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ue(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function Ce(u,p){var b=u.T,S=p.ba.f.RGBA,C=S.eb,k=S.fb+u.ka*S.A,E=ci[p.ba.S],O=u.y,D=u.O,j=u.f,tt=u.N,ht=u.ea,ft=u.W,st=p.cc,It=p.dc,xt=p.Mc,et=p.Nc,rt=u.ka,_t=u.ka+u.T,Ft=u.U,Ct=Ft+1>>1;for(rt==0?E(O,D,null,null,j,tt,ht,ft,j,tt,ht,ft,C,k,null,null,Ft):(E(p.ec,p.fc,O,D,st,It,xt,et,j,tt,ht,ft,C,k-S.A,C,k,Ft),++b);rt+2<_t;rt+=2)st=j,It=tt,xt=ht,et=ft,tt+=u.Rc,ft+=u.Rc,k+=2*S.A,E(O,(D+=2*u.fa)-u.fa,O,D,st,It,xt,et,j,tt,ht,ft,C,k-S.A,C,k,Ft);return D+=u.fa,u.j+_t<u.o?(i(p.ec,p.fc,O,D,Ft),i(p.cc,p.dc,j,tt,Ct),i(p.Mc,p.Nc,ht,ft,Ct),b--):1&_t||E(O,D,null,null,j,tt,ht,ft,j,tt,ht,ft,C,k+S.A,null,null,Ft),b}function Di(u,p,b){var S=u.F,C=[u.J];if(S!=null){var k=u.U,E=p.ba.S,O=E==Ya||E==za;p=p.ba.f.RGBA;var D=[0],j=u.ka;D[0]=u.T,u.Kb&&(j==0?--D[0]:(--j,C[0]-=u.width),u.j+u.ka+u.T==u.o&&(D[0]=u.o-u.j-j));var tt=p.eb;j=p.fb+j*p.A,u=Ue(S,C[0],u.width,k,D,tt,j+(O?0:3),p.A),t(b==D),u&&_e(E)&&hi(tt,j,O,k,D,p.A)}return 0}function hr(u){var p=u.ma,b=p.ba.S,S=11>b,C=b==ja||b==Xa||b==Ya||b==Mo||b==12||_e(b);if(p.memory=null,p.Ib=null,p.Jb=null,p.Nd=null,!Ks(p.Oa,u,C?11:12))return 0;if(C&&_e(b)&&kt(),u.da)alert("todo:use_scaling");else{if(S){if(p.Ib=ue,u.Kb){if(b=u.U+1>>1,p.memory=a(u.U+2*b),p.memory==null)return 0;p.ec=p.memory,p.fc=0,p.cc=p.ec,p.dc=p.fc+u.U,p.Mc=p.cc,p.Nc=p.dc+b,p.Ib=Ce,kt()}}else alert("todo:EmitYUV");C&&(p.Jb=Di,S&&at())}if(S&&!ru){for(u=0;256>u;++u)Lf[u]=89858*(u-128)+Wa>>Ua,Cf[u]=-22014*(u-128)+Wa,_f[u]=-45773*(u-128),Nf[u]=113618*(u-128)+Wa>>Ua;for(u=oa;u<jo;++u)p=76283*(u-16)+Wa>>Ua,If[u-oa]=Kr(p,255),Tf[u-oa]=Kr(p+8>>4,15);ru=1}return 1}function ii(u){var p=u.ma,b=u.U,S=u.T;return t(!(1&u.ka)),0>=b||0>=S?0:(b=p.Ib(u,p),p.Jb!=null&&p.Jb(u,p,b),p.Dc+=b,1)}function ni(u){u.ma.memory=null}function ee(u,p,b,S){return Pt(u,8)!=47?0:(p[0]=Pt(u,14)+1,b[0]=Pt(u,14)+1,S[0]=Pt(u,1),Pt(u,3)!=0?0:!u.h)}function Hr(u,p){if(4>u)return u+1;var b=u-2>>1;return(2+(1&u)<<b)+Pt(p,b)+1}function si(u,p){return 120<p?p-120:1<=(b=((b=ff[p-1])>>4)*u+(8-(15&b)))?b:1;var b}function Nr(u,p,b){var S=X(b),C=u[p+=255&S].g-8;return 0<C&&(Q(b,b.u+8),S=X(b),p+=u[p].value,p+=S&(1<<C)-1),Q(b,b.u+u[p].g),u[p].value}function er(u,p,b){return b.g+=u.g,b.value+=u.value<<p>>>0,t(8>=b.g),u.g}function Je(u,p,b){var S=u.xc;return t((p=S==0?0:u.vc[u.md*(b>>S)+(p>>S)])<u.Wb),u.Ya[p]}function Er(u,p,b,S){var C=u.ab,k=u.c*p,E=u.C;p=E+p;var O=b,D=S;for(S=u.Ta,b=u.Ua;0<C--;){var j=u.gc[C],tt=E,ht=p,ft=O,st=D,It=(D=S,O=b,j.Ea);switch(t(tt<ht),t(ht<=j.nc),j.hc){case 2:Ea(ft,st,(ht-tt)*It,D,O);break;case 0:var xt=tt,et=ht,rt=D,_t=O,Ft=(Ut=j).Ea;xt==0&&(ko(ft,st,null,null,1,rt,_t),we(ft,st+1,0,0,Ft-1,rt,_t+1),st+=Ft,_t+=Ft,++xt);for(var Ct=1<<Ut.b,Gt=Ct-1,Rt=Jt(Ft,Ut.b),ie=Ut.K,Ut=Ut.w+(xt>>Ut.b)*Rt;xt<et;){var Te=ie,ke=Ut,Ne=1;for(ea(ft,st,rt,_t-Ft,1,rt,_t);Ne<Ft;){var Pe=(Ne&~Gt)+Ct;Pe>Ft&&(Pe=Ft),(0,un[Te[ke++]>>8&15])(ft,st+ +Ne,rt,_t+Ne-Ft,Pe-Ne,rt,_t+Ne),Ne=Pe}st+=Ft,_t+=Ft,++xt&Gt||(Ut+=Rt)}ht!=j.nc&&i(D,O-It,D,O+(ht-tt-1)*It,It);break;case 1:for(It=ft,et=st,Ft=(ft=j.Ea)-(_t=ft&~(rt=(st=1<<j.b)-1)),xt=Jt(ft,j.b),Ct=j.K,j=j.w+(tt>>j.b)*xt;tt<ht;){for(Gt=Ct,Rt=j,ie=new Wt,Ut=et+_t,Te=et+ft;et<Ut;)Fe(Gt[Rt++],ie),qn(ie,It,et,st,D,O),et+=st,O+=st;et<Te&&(Fe(Gt[Rt++],ie),qn(ie,It,et,Ft,D,O),et+=Ft,O+=Ft),++tt&rt||(j+=xt)}break;case 3:if(ft==D&&st==O&&0<j.b){for(et=D,ft=It=O+(ht-tt)*It-(_t=(ht-tt)*Jt(j.Ea,j.b)),st=D,rt=O,xt=[],_t=(Ft=_t)-1;0<=_t;--_t)xt[_t]=st[rt+_t];for(_t=Ft-1;0<=_t;--_t)et[ft+_t]=xt[_t];oi(j,tt,ht,D,It,D,O)}else oi(j,tt,ht,ft,st,D,O)}O=S,D=b}D!=b&&i(S,b,O,D,k)}function Ki(u,p){var b=u.V,S=u.Ba+u.c*u.C,C=p-u.C;if(t(p<=u.l.o),t(16>=C),0<C){var k=u.l,E=u.Ta,O=u.Ua,D=k.width;if(Er(u,C,b,S),C=O=[O],t((b=u.C)<(S=p)),t(k.v<k.va),S>k.o&&(S=k.o),b<k.j){var j=k.j-b;b=k.j,C[0]+=j*D}if(b>=S?b=0:(C[0]+=4*k.v,k.ka=b-k.j,k.U=k.va-k.v,k.T=S-b,b=1),b){if(O=O[0],11>(b=u.ca).S){var tt=b.f.RGBA,ht=(S=b.S,C=k.U,k=k.T,j=tt.eb,tt.A),ft=k;for(tt=tt.fb+u.Ma*tt.A;0<ft--;){var st=E,It=O,xt=C,et=j,rt=tt;switch(S){case Ra:Rr(st,It,xt,et,rt);break;case ja:Or(st,It,xt,et,rt);break;case Oo:Or(st,It,xt,et,rt),hi(et,rt,0,xt,1,0);break;case Vl:Xi(st,It,xt,et,rt);break;case Xa:Ye(st,It,xt,et,rt,1);break;case Bo:Ye(st,It,xt,et,rt,1),hi(et,rt,0,xt,1,0);break;case Ya:Ye(st,It,xt,et,rt,0);break;case za:Ye(st,It,xt,et,rt,0),hi(et,rt,1,xt,1,0);break;case Mo:hn(st,It,xt,et,rt);break;case Do:hn(st,It,xt,et,rt),ze(et,rt,xt,1,0);break;case Gl:ji(st,It,xt,et,rt);break;default:t(0)}O+=D,tt+=ht}u.Ma+=k}else alert("todo:EmitRescaledRowsYUVA");t(u.Ma<=b.height)}}u.C=p,t(u.C<=u.i)}function gi(u){var p;if(0<u.ua)return 0;for(p=0;p<u.Wb;++p){var b=u.Ya[p].G,S=u.Ya[p].H;if(0<b[1][S[1]+0].g||0<b[2][S[2]+0].g||0<b[3][S[3]+0].g)return 0}return 1}function Vr(u,p,b,S,C,k){if(u.Z!=0){var E=u.qd,O=u.rd;for(t(dn[u.Z]!=null);p<b;++p)dn[u.Z](E,O,S,C,S,C,k),E=S,O=C,C+=k;u.qd=E,u.rd=O}}function Gr(u,p){var b=u.l.ma,S=b.Z==0||b.Z==1?u.l.j:u.C;if(S=u.C<S?S:u.C,t(p<=u.l.o),p>S){var C=u.l.width,k=b.ca,E=b.tb+C*S,O=u.V,D=u.Ba+u.c*S,j=u.gc;t(u.ab==1),t(j[0].hc==3),Ma(j[0],S,p,O,D,k,E),Vr(b,S,p,k,E,C)}u.C=u.Ma=p}function $r(u,p,b,S,C,k,E){var O=u.$/S,D=u.$%S,j=u.m,tt=u.s,ht=b+u.$,ft=ht;C=b+S*C;var st=b+S*k,It=280+tt.ua,xt=u.Pb?O:16777216,et=0<tt.ua?tt.Wa:null,rt=tt.wc,_t=ht<st?Je(tt,D,O):null;t(u.C<k),t(st<=C);var Ft=!1;t:for(;;){for(;Ft||ht<st;){var Ct=0;if(O>=xt){var Gt=ht-b;t((xt=u).Pb),xt.wd=xt.m,xt.xd=Gt,0<xt.s.ua&&Lt(xt.s.Wa,xt.s.vb),xt=O+pf}if(D&rt||(_t=Je(tt,D,O)),t(_t!=null),_t.Qb&&(p[ht]=_t.qb,Ft=!0),!Ft)if(nt(j),_t.jc){Ct=j,Gt=p;var Rt=ht,ie=_t.pd[X(Ct)&Sr-1];t(_t.jc),256>ie.g?(Q(Ct,Ct.u+ie.g),Gt[Rt]=ie.value,Ct=0):(Q(Ct,Ct.u+ie.g-256),t(256<=ie.value),Ct=ie.value),Ct==0&&(Ft=!0)}else Ct=Nr(_t.G[0],_t.H[0],j);if(j.h)break;if(Ft||256>Ct){if(!Ft)if(_t.nd)p[ht]=(_t.qb|Ct<<8)>>>0;else{if(nt(j),Ft=Nr(_t.G[1],_t.H[1],j),nt(j),Gt=Nr(_t.G[2],_t.H[2],j),Rt=Nr(_t.G[3],_t.H[3],j),j.h)break;p[ht]=(Rt<<24|Ft<<16|Ct<<8|Gt)>>>0}if(Ft=!1,++ht,++D>=S&&(D=0,++O,E!=null&&O<=k&&!(O%16)&&E(u,O),et!=null))for(;ft<ht;)Ct=p[ft++],et.X[(506832829*Ct&4294967295)>>>et.Mb]=Ct}else if(280>Ct){if(Ct=Hr(Ct-256,j),Gt=Nr(_t.G[4],_t.H[4],j),nt(j),Gt=si(S,Gt=Hr(Gt,j)),j.h)break;if(ht-b<Gt||C-ht<Ct)break t;for(Rt=0;Rt<Ct;++Rt)p[ht+Rt]=p[ht+Rt-Gt];for(ht+=Ct,D+=Ct;D>=S;)D-=S,++O,E!=null&&O<=k&&!(O%16)&&E(u,O);if(t(ht<=C),D&rt&&(_t=Je(tt,D,O)),et!=null)for(;ft<ht;)Ct=p[ft++],et.X[(506832829*Ct&4294967295)>>>et.Mb]=Ct}else{if(!(Ct<It))break t;for(Ft=Ct-280,t(et!=null);ft<ht;)Ct=p[ft++],et.X[(506832829*Ct&4294967295)>>>et.Mb]=Ct;Ct=ht,t(!(Ft>>>(Gt=et).Xa)),p[Ct]=Gt.X[Ft],Ft=!0}Ft||t(j.h==U(j))}if(u.Pb&&j.h&&ht<C)t(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&Lt(u.s.vb,u.s.Wa);else{if(j.h)break t;E?.(u,O>k?k:O),u.a=0,u.$=ht-b}return 1}return u.a=3,0}function ai(u){t(u!=null),u.vc=null,u.yc=null,u.Ya=null;var p=u.Wa;p!=null&&(p.X=null),u.vb=null,t(u!=null)}function mr(){var u=new Fo;return u==null?null:(u.a=0,u.xb=Zl,Ur("Predictor","VP8LPredictors"),Ur("Predictor","VP8LPredictors_C"),Ur("PredictorAdd","VP8LPredictorsAdd"),Ur("PredictorAdd","VP8LPredictorsAdd_C"),Ea=Se,qn=ae,Rr=Ht,Or=dr,hn=Ae,ji=zr,Xi=Ie,J.VP8LMapColor32b=us,J.VP8LMapColor8b=Oa,u)}function Jr(u,p,b,S,C){var k=1,E=[u],O=[p],D=S.m,j=S.s,tt=null,ht=0;t:for(;;){if(b)for(;k&&Pt(D,1);){var ft=E,st=O,It=S,xt=1,et=It.m,rt=It.gc[It.ab],_t=Pt(et,2);if(It.Oc&1<<_t)k=0;else{switch(It.Oc|=1<<_t,rt.hc=_t,rt.Ea=ft[0],rt.nc=st[0],rt.K=[null],++It.ab,t(4>=It.ab),_t){case 0:case 1:rt.b=Pt(et,3)+2,xt=Jr(Jt(rt.Ea,rt.b),Jt(rt.nc,rt.b),0,It,rt.K),rt.K=rt.K[0];break;case 3:var Ft,Ct=Pt(et,8)+1,Gt=16<Ct?0:4<Ct?1:2<Ct?2:3;if(ft[0]=Jt(rt.Ea,Gt),rt.b=Gt,Ft=xt=Jr(Ct,1,0,It,rt.K)){var Rt,ie=Ct,Ut=rt,Te=1<<(8>>Ut.b),ke=a(Te);if(ke==null)Ft=0;else{var Ne=Ut.K[0],Pe=Ut.w;for(ke[0]=Ut.K[0][0],Rt=1;Rt<1*ie;++Rt)ke[Rt]=Mt(Ne[Pe+Rt],ke[Rt-1]);for(;Rt<4*Te;++Rt)ke[Rt]=0;Ut.K[0]=null,Ut.K[0]=ke,Ft=1}}xt=Ft;break;case 2:break;default:t(0)}k=xt}}if(E=E[0],O=O[0],k&&Pt(D,1)&&!(k=1<=(ht=Pt(D,4))&&11>=ht)){S.a=3;break t}var qe;if(qe=k)e:{var Oe,be,lr,jr=S,ur=E,Xr=O,Ee=ht,ti=b,ei=jr.m,yr=jr.s,Ar=[null],Dr=1,pi=0,Fi=cf[Ee];r:for(;;){if(ti&&Pt(ei,1)){var br=Pt(ei,3)+2,Wi=Jt(ur,br),zn=Jt(Xr,br),ds=Wi*zn;if(!Jr(Wi,zn,0,jr,Ar))break r;for(Ar=Ar[0],yr.xc=br,Oe=0;Oe<ds;++Oe){var mn=Ar[Oe]>>8&65535;Ar[Oe]=mn,mn>=Dr&&(Dr=mn+1)}}if(ei.h)break r;for(be=0;5>be;++be){var Qe=$l[be];!be&&0<Ee&&(Qe+=1<<Ee),pi<Qe&&(pi=Qe)}var Xo=l(Dr*Fi,R),su=Dr,au=l(su,G);if(au==null)var Va=null;else t(65536>=su),Va=au;var la=a(pi);if(Va==null||la==null||Xo==null){jr.a=1;break r}var Ga=Xo;for(Oe=lr=0;Oe<Dr;++Oe){var xi=Va[Oe],ms=xi.G,gs=xi.H,ou=0,$a=1,lu=0;for(be=0;5>be;++be){Qe=$l[be],ms[be]=Ga,gs[be]=lr,!be&&0<Ee&&(Qe+=1<<Ee);n:{var Ja,Yo=Qe,Za=jr,ua=la,Ef=Ga,Mf=lr,zo=0,gn=Za.m,Of=Pt(gn,1);if(s(ua,0,0,Yo),Of){var Bf=Pt(gn,1)+1,Df=Pt(gn,1),uu=Pt(gn,Df==0?1:8);ua[uu]=1,Bf==2&&(ua[uu=Pt(gn,8)]=1);var Ka=1}else{var hu=a(19),fu=Pt(gn,4)+4;if(19<fu){Za.a=3;var Qa=0;break n}for(Ja=0;Ja<fu;++Ja)hu[hf[Ja]]=Pt(gn,3);var Uo=void 0,ha=void 0,cu=Za,qf=hu,to=Yo,pu=ua,Wo=0,vn=cu.m,du=8,mu=l(128,R);i:for(;q(mu,0,7,qf,19);){if(Pt(vn,1)){var Rf=2+2*Pt(vn,3);if((Uo=2+Pt(vn,Rf))>to)break i}else Uo=to;for(ha=0;ha<to&&Uo--;){nt(vn);var gu=mu[0+(127&X(vn))];Q(vn,vn.u+gu.g);var vs=gu.value;if(16>vs)pu[ha++]=vs,vs!=0&&(du=vs);else{var jf=vs==16,vu=vs-16,Xf=lf[vu],yu=Pt(vn,of[vu])+Xf;if(ha+yu>to)break i;for(var Yf=jf?du:0;0<yu--;)pu[ha++]=Yf}}Wo=1;break i}Wo||(cu.a=3),Ka=Wo}(Ka=Ka&&!gn.h)&&(zo=q(Ef,Mf,8,ua,Yo)),Ka&&zo!=0?Qa=zo:(Za.a=3,Qa=0)}if(Qa==0)break r;if($a&&uf[be]==1&&($a=Ga[lr].g==0),ou+=Ga[lr].g,lr+=Qa,3>=be){var fa,Ho=la[0];for(fa=1;fa<Qe;++fa)la[fa]>Ho&&(Ho=la[fa]);lu+=Ho}}if(xi.nd=$a,xi.Qb=0,$a&&(xi.qb=(ms[3][gs[3]+0].value<<24|ms[1][gs[1]+0].value<<16|ms[2][gs[2]+0].value)>>>0,ou==0&&256>ms[0][gs[0]+0].value&&(xi.Qb=1,xi.qb+=ms[0][gs[0]+0].value<<8)),xi.jc=!xi.Qb&&6>lu,xi.jc){var eo,Hi=xi;for(eo=0;eo<Sr;++eo){var yn=eo,bn=Hi.pd[yn],ro=Hi.G[0][Hi.H[0]+yn];256<=ro.value?(bn.g=ro.g+256,bn.value=ro.value):(bn.g=0,bn.value=0,yn>>=er(ro,8,bn),yn>>=er(Hi.G[1][Hi.H[1]+yn],16,bn),yn>>=er(Hi.G[2][Hi.H[2]+yn],0,bn),er(Hi.G[3][Hi.H[3]+yn],24,bn))}}}yr.vc=Ar,yr.Wb=Dr,yr.Ya=Va,yr.yc=Xo,qe=1;break e}qe=0}if(!(k=qe)){S.a=3;break t}if(0<ht){if(j.ua=1<<ht,!se(j.Wa,ht)){S.a=1,k=0;break t}}else j.ua=0;var Vo=S,bu=E,zf=O,Go=Vo.s,$o=Go.xc;if(Vo.c=bu,Vo.i=zf,Go.md=Jt(bu,$o),Go.wc=$o==0?-1:(1<<$o)-1,b){S.xb=wf;break t}if((tt=a(E*O))==null){S.a=1,k=0;break t}k=(k=$r(S,tt,0,E,O,O,null))&&!D.h;break t}return k?(C!=null?C[0]=tt:(t(tt==null),t(b)),S.$=0,b||ai(j)):ai(j),k}function qi(u,p){var b=u.c*u.i,S=b+p+16*p;return t(u.c<=p),u.V=a(S),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+b+p,1)}function Qi(u,p){var b=u.C,S=p-b,C=u.V,k=u.Ba+u.c*b;for(t(p<=u.l.o);0<S;){var E=16<S?16:S,O=u.l.ma,D=u.l.width,j=D*E,tt=O.ca,ht=O.tb+D*b,ft=u.Ta,st=u.Ua;Er(u,E,C,k),ir(ft,st,tt,ht,j),Vr(O,b,b+E,tt,ht,D),S-=E,C+=E*u.c,b+=E}t(b==p),u.C=u.Ma=p}function tn(){this.ub=this.yd=this.td=this.Rb=0}function en(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function rn(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function vi(){this.Yb=function(){var u=[];return function p(b,S,C){for(var k=C[S],E=0;E<k&&(b.push(C.length>S+1?[]:0),!(C.length<S+1));E++)p(b[E],S+1,C)}(u,0,[3,11]),u}()}function Fs(){this.jb=a(3),this.Wc=h([4,8],vi),this.Xc=h([4,17],vi)}function ks(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function nn(){this.ld=this.La=this.dd=this.tc=0}function Jn(){this.Na=this.la=0}function Es(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Fn(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ms(){this.uc=this.M=this.Nb=0,this.wa=Array(new nn),this.Y=0,this.ya=Array(new Fn),this.aa=0,this.l=new Ze}function Zn(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Os(){this.cb=this.a=0,this.sc="",this.m=new Yt,this.Od=new tn,this.Kc=new en,this.ed=new ks,this.Qa=new rn,this.Ic=this.$c=this.Aa=0,this.D=new Ms,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,Yt),this.ia=0,this.pb=l(4,Es),this.Pa=new Fs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Zn),this.Hd=0,this.rb=Array(new Jn),this.sb=0,this.wa=Array(new nn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Fn),this.L=this.aa=0,this.gd=h([4,2],nn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ze(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Bs(){var u=new Os;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,aa||(aa=kn)),u}function Ge(u,p,b){return u.a==0&&(u.a=p,u.sc=b,u.cb=0),0}function Kn(u,p,b){return 3<=b&&u[p+0]==157&&u[p+1]==1&&u[p+2]==42}function ge(u,p){if(u==null)return 0;if(u.a=0,u.sc="OK",p==null)return Ge(u,2,"null VP8Io passed to VP8GetHeaders()");var b=p.data,S=p.w,C=p.ha;if(4>C)return Ge(u,7,"Truncated header.");var k=b[S+0]|b[S+1]<<8|b[S+2]<<16,E=u.Od;if(E.Rb=!(1&k),E.td=k>>1&7,E.yd=k>>4&1,E.ub=k>>5,3<E.td)return Ge(u,3,"Incorrect keyframe parameters.");if(!E.yd)return Ge(u,4,"Frame not displayable.");S+=3,C-=3;var O=u.Kc;if(E.Rb){if(7>C)return Ge(u,7,"cannot parse picture header");if(!Kn(b,S,C))return Ge(u,3,"Bad code word");O.c=16383&(b[S+4]<<8|b[S+3]),O.Td=b[S+4]>>6,O.i=16383&(b[S+6]<<8|b[S+5]),O.Ud=b[S+6]>>6,S+=7,C-=7,u.za=O.c+15>>4,u.Ub=O.i+15>>4,p.width=O.c,p.height=O.i,p.Da=0,p.j=0,p.v=0,p.va=p.width,p.o=p.height,p.da=0,p.ib=p.width,p.hb=p.height,p.U=p.width,p.T=p.height,s((k=u.Pa).jb,0,255,k.jb.length),t((k=u.Qa)!=null),k.Cb=0,k.Bb=0,k.Fb=1,s(k.Zb,0,0,k.Zb.length),s(k.Lb,0,0,k.Lb)}if(E.ub>C)return Ge(u,7,"bad partition length");bt(k=u.m,b,S,E.ub),S+=E.ub,C-=E.ub,E.Rb&&(O.Ld=dt(k),O.Kd=dt(k)),O=u.Qa;var D,j=u.Pa;if(t(k!=null),t(O!=null),O.Cb=dt(k),O.Cb){if(O.Bb=dt(k),dt(k)){for(O.Fb=dt(k),D=0;4>D;++D)O.Zb[D]=dt(k)?St(k,7):0;for(D=0;4>D;++D)O.Lb[D]=dt(k)?St(k,6):0}if(O.Bb)for(D=0;3>D;++D)j.jb[D]=dt(k)?gt(k,8):255}else O.Bb=0;if(k.Ka)return Ge(u,3,"cannot parse segment header");if((O=u.ed).zd=dt(k),O.Tb=gt(k,6),O.wb=gt(k,3),O.Pc=dt(k),O.Pc&&dt(k)){for(j=0;4>j;++j)dt(k)&&(O.vd[j]=St(k,6));for(j=0;4>j;++j)dt(k)&&(O.od[j]=St(k,6))}if(u.L=O.Tb==0?0:O.zd?1:2,k.Ka)return Ge(u,3,"cannot parse filter header");var tt=C;if(C=D=S,S=D+tt,O=tt,u.Xb=(1<<gt(u.m,2))-1,tt<3*(j=u.Xb))b=7;else{for(D+=3*j,O-=3*j,tt=0;tt<j;++tt){var ht=b[C+0]|b[C+1]<<8|b[C+2]<<16;ht>O&&(ht=O),bt(u.Jc[+tt],b,D,ht),D+=ht,O-=ht,C+=3}bt(u.Jc[+j],b,D,O),b=D<S?0:5}if(b!=0)return Ge(u,b,"cannot parse partitions");for(b=gt(D=u.m,7),C=dt(D)?St(D,4):0,S=dt(D)?St(D,4):0,O=dt(D)?St(D,4):0,j=dt(D)?St(D,4):0,D=dt(D)?St(D,4):0,tt=u.Qa,ht=0;4>ht;++ht){if(tt.Cb){var ft=tt.Zb[ht];tt.Fb||(ft+=b)}else{if(0<ht){u.pb[ht]=u.pb[0];continue}ft=b}var st=u.pb[ht];st.Sc[0]=qo[Kr(ft+C,127)],st.Sc[1]=Ro[Kr(ft+0,127)],st.Eb[0]=2*qo[Kr(ft+S,127)],st.Eb[1]=101581*Ro[Kr(ft+O,127)]>>16,8>st.Eb[1]&&(st.Eb[1]=8),st.Qc[0]=qo[Kr(ft+j,117)],st.Qc[1]=Ro[Kr(ft+D,127)],st.lc=ft+D}if(!E.Rb)return Ge(u,4,"Not a key frame.");for(dt(k),E=u.Pa,b=0;4>b;++b){for(C=0;8>C;++C)for(S=0;3>S;++S)for(O=0;11>O;++O)j=mt(k,yf[b][C][S][O])?gt(k,8):gf[b][C][S][O],E.Wc[b][C].Yb[S][O]=j;for(C=0;17>C;++C)E.Xc[b][C]=E.Wc[b][bf[C]]}return u.kc=dt(k),u.kc&&(u.Bd=gt(k,8)),u.cb=1}function kn(u,p,b,S,C,k,E){var O=p[C].Yb[b];for(b=0;16>C;++C){if(!mt(u,O[b+0]))return C;for(;!mt(u,O[b+1]);)if(O=p[++C].Yb[0],b=0,C==16)return 16;var D=p[C+1].Yb;if(mt(u,O[b+2])){var j=u,tt=0;if(mt(j,(ft=O)[(ht=b)+3]))if(mt(j,ft[ht+6])){for(O=0,ht=2*(tt=mt(j,ft[ht+8]))+(ft=mt(j,ft[ht+9+tt])),tt=0,ft=df[ht];ft[O];++O)tt+=tt+mt(j,ft[O]);tt+=3+(8<<ht)}else mt(j,ft[ht+7])?(tt=7+2*mt(j,165),tt+=mt(j,145)):tt=5+mt(j,159);else tt=mt(j,ft[ht+4])?3+mt(j,ft[ht+5]):2;O=D[2]}else tt=1,O=D[1];D=E+mf[C],0>(j=u).b&&pt(j);var ht,ft=j.b,st=(ht=j.Ca>>1)-(j.I>>ft)>>31;--j.b,j.Ca+=st,j.Ca|=1,j.I-=(ht+1&st)<<ft,k[D]=((tt^st)-st)*S[(0<C)+0]}return 16}function En(u){var p=u.rb[u.sb-1];p.la=0,p.Na=0,s(u.zc,0,0,u.zc.length),u.ja=0}function Ds(u,p){if(u==null)return 0;if(p==null)return Ge(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!ge(u,p))return 0;if(t(u.cb),p.ac==null||p.ac(p)){p.ob&&(u.L=0);var b=Ha[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=p.v-b>>4,u.zb=p.j-b>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=p.o+15+b>>4,u.Hb=p.va+15+b>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var S=u.ed;for(b=0;4>b;++b){var C;if(u.Qa.Cb){var k=u.Qa.Lb[b];u.Qa.Fb||(k+=S.Tb)}else k=S.Tb;for(C=0;1>=C;++C){var E=u.gd[b][C],O=k;if(S.Pc&&(O+=S.vd[0],C&&(O+=S.od[0])),0<(O=0>O?0:63<O?63:O)){var D=O;0<S.wb&&(D=4<S.wb?D>>2:D>>1)>9-S.wb&&(D=9-S.wb),1>D&&(D=1),E.dd=D,E.tc=2*O+D,E.ld=40<=O?2:15<=O?1:0}else E.tc=0;E.La=C}}}b=0}else Ge(u,6,"Frame setup failed"),b=u.a;if(b=b==0){if(b){u.$c=0,0<u.Aa||(u.Ic=kf);t:{b=u.Ic,S=4*(D=u.za);var j=32*D,tt=D+1,ht=0<u.L?D*(0<u.Aa?2:1):0,ft=(u.Aa==2?2:1)*D;if((E=S+832+(C=3*(16*b+Ha[u.L])/2*j)+(k=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=E)b=0;else{if(E>u.Vb){if(u.Vb=0,u.Ec=a(E),u.Fc=0,u.Ec==null){b=Ge(u,1,"no memory during frame initialization.");break t}u.Vb=E}E=u.Ec,O=u.Fc,u.Ac=E,u.Bc=O,O+=S,u.Gd=l(j,Zn),u.Hd=0,u.rb=l(tt+1,Jn),u.sb=1,u.wa=ht?l(ht,nn):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=D),t(!0),u.oc=E,u.pc=O,O+=832,u.ya=l(ft,Fn),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=D),u.R=16*D,u.B=8*D,D=(j=Ha[u.L])*u.R,j=j/2*u.B,u.sa=E,u.ta=O+D,u.qa=u.sa,u.ra=u.ta+16*b*u.R+j,u.Ha=u.qa,u.Ia=u.ra+8*b*u.B+j,u.$c=0,O+=C,u.mb=k?E:null,u.nb=k?O:null,t(O+k<=u.Fc+u.Vb),En(u),s(u.Ac,u.Bc,0,S),b=1}}if(b){if(p.ka=0,p.y=u.sa,p.O=u.ta,p.f=u.qa,p.N=u.ra,p.ea=u.Ha,p.Vd=u.Ia,p.fa=u.R,p.Rc=u.B,p.F=null,p.J=0,!Da){for(b=-255;255>=b;++b)fr[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)zi[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)sa[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)ps[255+b]=0>b?0:255<b?255:b;Da=1}hs=H,Yi=m,ra=x,Br=_,li=B,rr=c,fs=zs,Ba=Bn,ia=To,Rn=Us,jn=Io,fn=es,Xn=Ws,cs=Ta,Yn=Ia,cn=Ii,na=Ri,ui=Co,wi[0]=Pr,wi[1]=ct,wi[2]=qs,wi[3]=Rs,wi[4]=Aa,wi[5]=Qn,wi[6]=La,wi[7]=js,wi[8]=Lo,wi[9]=Ao,pn[0]=ye,pn[1]=Nt,pn[2]=Dt,pn[3]=Kt,pn[4]=ce,pn[5]=gr,pn[6]=Mr,Ui[0]=an,Ui[1]=Tt,Ui[2]=No,Ui[3]=Xs,Ui[4]=On,Ui[5]=_o,Ui[6]=Ys,b=1}else b=0}b&&(b=function(st,It){for(st.M=0;st.M<st.Va;++st.M){var xt,et=st.Jc[st.M&st.Xb],rt=st.m,_t=st;for(xt=0;xt<_t.za;++xt){var Ft=rt,Ct=_t,Gt=Ct.Ac,Rt=Ct.Bc+4*xt,ie=Ct.zc,Ut=Ct.ya[Ct.aa+xt];if(Ct.Qa.Bb?Ut.$b=mt(Ft,Ct.Pa.jb[0])?2+mt(Ft,Ct.Pa.jb[2]):mt(Ft,Ct.Pa.jb[1]):Ut.$b=0,Ct.kc&&(Ut.Ad=mt(Ft,Ct.Bd)),Ut.Za=!mt(Ft,145)+0,Ut.Za){var Te=Ut.Ob,ke=0;for(Ct=0;4>Ct;++Ct){var Ne,Pe=ie[0+Ct];for(Ne=0;4>Ne;++Ne){Pe=vf[Gt[Rt+Ne]][Pe];for(var qe=Jl[mt(Ft,Pe[0])];0<qe;)qe=Jl[2*qe+mt(Ft,Pe[qe])];Pe=-qe,Gt[Rt+Ne]=Pe}i(Te,ke,Gt,Rt,4),ke+=4,ie[0+Ct]=Pe}}else Pe=mt(Ft,156)?mt(Ft,128)?1:3:mt(Ft,163)?2:0,Ut.Ob[0]=Pe,s(Gt,Rt,Pe,4),s(ie,0,Pe,4);Ut.Dd=mt(Ft,142)?mt(Ft,114)?mt(Ft,183)?1:3:2:0}if(_t.m.Ka)return Ge(st,7,"Premature end-of-partition0 encountered.");for(;st.ja<st.za;++st.ja){if(_t=et,Ft=(rt=st).rb[rt.sb-1],Gt=rt.rb[rt.sb+rt.ja],xt=rt.ya[rt.aa+rt.ja],Rt=rt.kc?xt.Ad:0)Ft.la=Gt.la=0,xt.Za||(Ft.Na=Gt.Na=0),xt.Hc=0,xt.Gc=0,xt.ia=0;else{var Oe,be;if(Ft=Gt,Gt=_t,Rt=rt.Pa.Xc,ie=rt.ya[rt.aa+rt.ja],Ut=rt.pb[ie.$b],Ct=ie.ad,Te=0,ke=rt.rb[rt.sb-1],Pe=Ne=0,s(Ct,Te,0,384),ie.Za)var lr=0,jr=Rt[3];else{qe=a(16);var ur=Ft.Na+ke.Na;if(ur=aa(Gt,Rt[1],ur,Ut.Eb,0,qe,0),Ft.Na=ke.Na=(0<ur)+0,1<ur)hs(qe,0,Ct,Te);else{var Xr=qe[0]+3>>3;for(qe=0;256>qe;qe+=16)Ct[Te+qe]=Xr}lr=1,jr=Rt[0]}var Ee=15&Ft.la,ti=15&ke.la;for(qe=0;4>qe;++qe){var ei=1&ti;for(Xr=be=0;4>Xr;++Xr)Ee=Ee>>1|(ei=(ur=aa(Gt,jr,ur=ei+(1&Ee),Ut.Sc,lr,Ct,Te))>lr)<<7,be=be<<2|(3<ur?3:1<ur?2:Ct[Te+0]!=0),Te+=16;Ee>>=4,ti=ti>>1|ei<<7,Ne=(Ne<<8|be)>>>0}for(jr=Ee,lr=ti>>4,Oe=0;4>Oe;Oe+=2){for(be=0,Ee=Ft.la>>4+Oe,ti=ke.la>>4+Oe,qe=0;2>qe;++qe){for(ei=1&ti,Xr=0;2>Xr;++Xr)ur=ei+(1&Ee),Ee=Ee>>1|(ei=0<(ur=aa(Gt,Rt[2],ur,Ut.Qc,0,Ct,Te)))<<3,be=be<<2|(3<ur?3:1<ur?2:Ct[Te+0]!=0),Te+=16;Ee>>=2,ti=ti>>1|ei<<5}Pe|=be<<4*Oe,jr|=Ee<<4<<Oe,lr|=(240&ti)<<Oe}Ft.la=jr,ke.la=lr,ie.Hc=Ne,ie.Gc=Pe,ie.ia=43690&Pe?0:Ut.ia,Rt=!(Ne|Pe)}if(0<rt.L&&(rt.wa[rt.Y+rt.ja]=rt.gd[xt.$b][xt.Za],rt.wa[rt.Y+rt.ja].La|=!Rt),_t.Ka)return Ge(st,7,"Premature end-of-file encountered.")}if(En(st),rt=It,_t=1,xt=(et=st).D,Ft=0<et.L&&et.M>=et.zb&&et.M<=et.Va,et.Aa==0)t:{if(xt.M=et.M,xt.uc=Ft,Zs(et,xt),_t=1,xt=(be=et.D).Nb,Ft=(Pe=Ha[et.L])*et.R,Gt=Pe/2*et.B,qe=16*xt*et.R,Xr=8*xt*et.B,Rt=et.sa,ie=et.ta-Ft+qe,Ut=et.qa,Ct=et.ra-Gt+Xr,Te=et.Ha,ke=et.Ia-Gt+Xr,ti=(Ee=be.M)==0,Ne=Ee>=et.Va-1,et.Aa==2&&Zs(et,be),be.uc)for(ei=(ur=et).D.M,t(ur.D.uc),be=ur.yb;be<ur.Hb;++be){lr=be,jr=ei;var yr=(Ar=(Qe=ur).D).Nb;Oe=Qe.R;var Ar=Ar.wa[Ar.Y+lr],Dr=Qe.sa,pi=Qe.ta+16*yr*Oe+16*lr,Fi=Ar.dd,br=Ar.tc;if(br!=0)if(t(3<=br),Qe.L==1)0<lr&&cn(Dr,pi,Oe,br+4),Ar.La&&ui(Dr,pi,Oe,br),0<jr&&Yn(Dr,pi,Oe,br+4),Ar.La&&na(Dr,pi,Oe,br);else{var Wi=Qe.B,zn=Qe.qa,ds=Qe.ra+8*yr*Wi+8*lr,mn=Qe.Ha,Qe=Qe.Ia+8*yr*Wi+8*lr;yr=Ar.ld,0<lr&&(Ba(Dr,pi,Oe,br+4,Fi,yr),Rn(zn,ds,mn,Qe,Wi,br+4,Fi,yr)),Ar.La&&(fn(Dr,pi,Oe,br,Fi,yr),cs(zn,ds,mn,Qe,Wi,br,Fi,yr)),0<jr&&(fs(Dr,pi,Oe,br+4,Fi,yr),ia(zn,ds,mn,Qe,Wi,br+4,Fi,yr)),Ar.La&&(jn(Dr,pi,Oe,br,Fi,yr),Xn(zn,ds,mn,Qe,Wi,br,Fi,yr))}}if(et.ia&&alert("todo:DitherRow"),rt.put!=null){if(be=16*Ee,Ee=16*(Ee+1),ti?(rt.y=et.sa,rt.O=et.ta+qe,rt.f=et.qa,rt.N=et.ra+Xr,rt.ea=et.Ha,rt.W=et.Ia+Xr):(be-=Pe,rt.y=Rt,rt.O=ie,rt.f=Ut,rt.N=Ct,rt.ea=Te,rt.W=ke),Ne||(Ee-=Pe),Ee>rt.o&&(Ee=rt.o),rt.F=null,rt.J=null,et.Fa!=null&&0<et.Fa.length&&be<Ee&&(rt.J=$s(et,rt,be,Ee-be),rt.F=et.mb,rt.F==null&&rt.F.length==0)){_t=Ge(et,3,"Could not decode alpha data.");break t}be<rt.j&&(Pe=rt.j-be,be=rt.j,t(!(1&Pe)),rt.O+=et.R*Pe,rt.N+=et.B*(Pe>>1),rt.W+=et.B*(Pe>>1),rt.F!=null&&(rt.J+=rt.width*Pe)),be<Ee&&(rt.O+=rt.v,rt.N+=rt.v>>1,rt.W+=rt.v>>1,rt.F!=null&&(rt.J+=rt.v),rt.ka=be-rt.j,rt.U=rt.va-rt.v,rt.T=Ee-be,_t=rt.put(rt))}xt+1!=et.Ic||Ne||(i(et.sa,et.ta-Ft,Rt,ie+16*et.R,Ft),i(et.qa,et.ra-Gt,Ut,Ct+8*et.B,Gt),i(et.Ha,et.Ia-Gt,Te,ke+8*et.B,Gt))}if(!_t)return Ge(st,6,"Output aborted.")}return 1}(u,p)),p.bc!=null&&p.bc(p),b&=1}return b?(u.cb=0,b):0}function Zr(u,p,b,S,C){C=u[p+b+32*S]+(C>>3),u[p+b+32*S]=-256&C?0>C?0:255:C}function sn(u,p,b,S,C,k){Zr(u,p,0,b,S+C),Zr(u,p,1,b,S+k),Zr(u,p,2,b,S-k),Zr(u,p,3,b,S-C)}function r(u){return(20091*u>>16)+u}function o(u,p,b,S){var C,k=0,E=a(16);for(C=0;4>C;++C){var O=u[p+0]+u[p+8],D=u[p+0]-u[p+8],j=(35468*u[p+4]>>16)-r(u[p+12]),tt=r(u[p+4])+(35468*u[p+12]>>16);E[k+0]=O+tt,E[k+1]=D+j,E[k+2]=D-j,E[k+3]=O-tt,k+=4,p++}for(C=k=0;4>C;++C)O=(u=E[k+0]+4)+E[k+8],D=u-E[k+8],j=(35468*E[k+4]>>16)-r(E[k+12]),Zr(b,S,0,0,O+(tt=r(E[k+4])+(35468*E[k+12]>>16))),Zr(b,S,1,0,D+j),Zr(b,S,2,0,D-j),Zr(b,S,3,0,O-tt),k++,S+=32}function c(u,p,b,S){var C=u[p+0]+4,k=35468*u[p+4]>>16,E=r(u[p+4]),O=35468*u[p+1]>>16;sn(b,S,0,C+E,u=r(u[p+1]),O),sn(b,S,1,C+k,u,O),sn(b,S,2,C-k,u,O),sn(b,S,3,C-E,u,O)}function m(u,p,b,S,C){o(u,p,b,S),C&&o(u,p+16,b,S+4)}function x(u,p,b,S){Yi(u,p+0,b,S,1),Yi(u,p+32,b,S+128,1)}function _(u,p,b,S){var C;for(u=u[p+0]+4,C=0;4>C;++C)for(p=0;4>p;++p)Zr(b,S,p,C,u)}function B(u,p,b,S){u[p+0]&&Br(u,p+0,b,S),u[p+16]&&Br(u,p+16,b,S+4),u[p+32]&&Br(u,p+32,b,S+128),u[p+48]&&Br(u,p+48,b,S+128+4)}function H(u,p,b,S){var C,k=a(16);for(C=0;4>C;++C){var E=u[p+0+C]+u[p+12+C],O=u[p+4+C]+u[p+8+C],D=u[p+4+C]-u[p+8+C],j=u[p+0+C]-u[p+12+C];k[0+C]=E+O,k[8+C]=E-O,k[4+C]=j+D,k[12+C]=j-D}for(C=0;4>C;++C)E=(u=k[0+4*C]+3)+k[3+4*C],O=k[1+4*C]+k[2+4*C],D=k[1+4*C]-k[2+4*C],j=u-k[3+4*C],b[S+0]=E+O>>3,b[S+16]=j+D>>3,b[S+32]=E-O>>3,b[S+48]=j-D>>3,S+=64}function V(u,p,b){var S,C=p-32,k=Qr,E=255-u[C-1];for(S=0;S<b;++S){var O,D=k,j=E+u[p-1];for(O=0;O<b;++O)u[p+O]=D[j+u[C+O]];p+=32}}function ct(u,p){V(u,p,4)}function Tt(u,p){V(u,p,8)}function Nt(u,p){V(u,p,16)}function Dt(u,p){var b;for(b=0;16>b;++b)i(u,p+32*b,u,p-32,16)}function Kt(u,p){var b;for(b=16;0<b;--b)s(u,p,u[p-1],16),p+=32}function fe(u,p,b){var S;for(S=0;16>S;++S)s(p,b+32*S,u,16)}function ye(u,p){var b,S=16;for(b=0;16>b;++b)S+=u[p-1+32*b]+u[p+b-32];fe(S>>5,u,p)}function ce(u,p){var b,S=8;for(b=0;16>b;++b)S+=u[p-1+32*b];fe(S>>4,u,p)}function gr(u,p){var b,S=8;for(b=0;16>b;++b)S+=u[p+b-32];fe(S>>4,u,p)}function Mr(u,p){fe(128,u,p)}function re(u,p,b){return u+2*p+b+2>>2}function qs(u,p){var b,S=p-32;for(S=new Uint8Array([re(u[S-1],u[S+0],u[S+1]),re(u[S+0],u[S+1],u[S+2]),re(u[S+1],u[S+2],u[S+3]),re(u[S+2],u[S+3],u[S+4])]),b=0;4>b;++b)i(u,p+32*b,S,0,S.length)}function Rs(u,p){var b=u[p-1],S=u[p-1+32],C=u[p-1+64],k=u[p-1+96];Et(u,p+0,16843009*re(u[p-1-32],b,S)),Et(u,p+32,16843009*re(b,S,C)),Et(u,p+64,16843009*re(S,C,k)),Et(u,p+96,16843009*re(C,k,k))}function Pr(u,p){var b,S=4;for(b=0;4>b;++b)S+=u[p+b-32]+u[p-1+32*b];for(S>>=3,b=0;4>b;++b)s(u,p+32*b,S,4)}function Aa(u,p){var b=u[p-1+0],S=u[p-1+32],C=u[p-1+64],k=u[p-1-32],E=u[p+0-32],O=u[p+1-32],D=u[p+2-32],j=u[p+3-32];u[p+0+96]=re(S,C,u[p-1+96]),u[p+1+96]=u[p+0+64]=re(b,S,C),u[p+2+96]=u[p+1+64]=u[p+0+32]=re(k,b,S),u[p+3+96]=u[p+2+64]=u[p+1+32]=u[p+0+0]=re(E,k,b),u[p+3+64]=u[p+2+32]=u[p+1+0]=re(O,E,k),u[p+3+32]=u[p+2+0]=re(D,O,E),u[p+3+0]=re(j,D,O)}function La(u,p){var b=u[p+1-32],S=u[p+2-32],C=u[p+3-32],k=u[p+4-32],E=u[p+5-32],O=u[p+6-32],D=u[p+7-32];u[p+0+0]=re(u[p+0-32],b,S),u[p+1+0]=u[p+0+32]=re(b,S,C),u[p+2+0]=u[p+1+32]=u[p+0+64]=re(S,C,k),u[p+3+0]=u[p+2+32]=u[p+1+64]=u[p+0+96]=re(C,k,E),u[p+3+32]=u[p+2+64]=u[p+1+96]=re(k,E,O),u[p+3+64]=u[p+2+96]=re(E,O,D),u[p+3+96]=re(O,D,D)}function Qn(u,p){var b=u[p-1+0],S=u[p-1+32],C=u[p-1+64],k=u[p-1-32],E=u[p+0-32],O=u[p+1-32],D=u[p+2-32],j=u[p+3-32];u[p+0+0]=u[p+1+64]=k+E+1>>1,u[p+1+0]=u[p+2+64]=E+O+1>>1,u[p+2+0]=u[p+3+64]=O+D+1>>1,u[p+3+0]=D+j+1>>1,u[p+0+96]=re(C,S,b),u[p+0+64]=re(S,b,k),u[p+0+32]=u[p+1+96]=re(b,k,E),u[p+1+32]=u[p+2+96]=re(k,E,O),u[p+2+32]=u[p+3+96]=re(E,O,D),u[p+3+32]=re(O,D,j)}function js(u,p){var b=u[p+0-32],S=u[p+1-32],C=u[p+2-32],k=u[p+3-32],E=u[p+4-32],O=u[p+5-32],D=u[p+6-32],j=u[p+7-32];u[p+0+0]=b+S+1>>1,u[p+1+0]=u[p+0+64]=S+C+1>>1,u[p+2+0]=u[p+1+64]=C+k+1>>1,u[p+3+0]=u[p+2+64]=k+E+1>>1,u[p+0+32]=re(b,S,C),u[p+1+32]=u[p+0+96]=re(S,C,k),u[p+2+32]=u[p+1+96]=re(C,k,E),u[p+3+32]=u[p+2+96]=re(k,E,O),u[p+3+64]=re(E,O,D),u[p+3+96]=re(O,D,j)}function Ao(u,p){var b=u[p-1+0],S=u[p-1+32],C=u[p-1+64],k=u[p-1+96];u[p+0+0]=b+S+1>>1,u[p+2+0]=u[p+0+32]=S+C+1>>1,u[p+2+32]=u[p+0+64]=C+k+1>>1,u[p+1+0]=re(b,S,C),u[p+3+0]=u[p+1+32]=re(S,C,k),u[p+3+32]=u[p+1+64]=re(C,k,k),u[p+3+64]=u[p+2+64]=u[p+0+96]=u[p+1+96]=u[p+2+96]=u[p+3+96]=k}function Lo(u,p){var b=u[p-1+0],S=u[p-1+32],C=u[p-1+64],k=u[p-1+96],E=u[p-1-32],O=u[p+0-32],D=u[p+1-32],j=u[p+2-32];u[p+0+0]=u[p+2+32]=b+E+1>>1,u[p+0+32]=u[p+2+64]=S+b+1>>1,u[p+0+64]=u[p+2+96]=C+S+1>>1,u[p+0+96]=k+C+1>>1,u[p+3+0]=re(O,D,j),u[p+2+0]=re(E,O,D),u[p+1+0]=u[p+3+32]=re(b,E,O),u[p+1+32]=u[p+3+64]=re(S,b,E),u[p+1+64]=u[p+3+96]=re(C,S,b),u[p+1+96]=re(k,C,S)}function No(u,p){var b;for(b=0;8>b;++b)i(u,p+32*b,u,p-32,8)}function Xs(u,p){var b;for(b=0;8>b;++b)s(u,p,u[p-1],8),p+=32}function Mn(u,p,b){var S;for(S=0;8>S;++S)s(p,b+32*S,u,8)}function an(u,p){var b,S=8;for(b=0;8>b;++b)S+=u[p+b-32]+u[p-1+32*b];Mn(S>>4,u,p)}function _o(u,p){var b,S=4;for(b=0;8>b;++b)S+=u[p+b-32];Mn(S>>3,u,p)}function On(u,p){var b,S=4;for(b=0;8>b;++b)S+=u[p-1+32*b];Mn(S>>3,u,p)}function Ys(u,p){Mn(128,u,p)}function ts(u,p,b){var S=u[p-b],C=u[p+0],k=3*(C-S)+Eo[1020+u[p-2*b]-u[p+b]],E=qa[112+(k+4>>3)];u[p-b]=Qr[255+S+qa[112+(k+3>>3)]],u[p+0]=Qr[255+C-E]}function Na(u,p,b,S){var C=u[p+0],k=u[p+b];return fi[255+u[p-2*b]-u[p-b]]>S||fi[255+k-C]>S}function _a(u,p,b,S){return 4*fi[255+u[p-b]-u[p+0]]+fi[255+u[p-2*b]-u[p+b]]<=S}function Ca(u,p,b,S,C){var k=u[p-3*b],E=u[p-2*b],O=u[p-b],D=u[p+0],j=u[p+b],tt=u[p+2*b],ht=u[p+3*b];return 4*fi[255+O-D]+fi[255+E-j]>S?0:fi[255+u[p-4*b]-k]<=C&&fi[255+k-E]<=C&&fi[255+E-O]<=C&&fi[255+ht-tt]<=C&&fi[255+tt-j]<=C&&fi[255+j-D]<=C}function Ia(u,p,b,S){var C=2*S+1;for(S=0;16>S;++S)_a(u,p+S,b,C)&&ts(u,p+S,b)}function Ii(u,p,b,S){var C=2*S+1;for(S=0;16>S;++S)_a(u,p+S*b,1,C)&&ts(u,p+S*b,1)}function Ri(u,p,b,S){var C;for(C=3;0<C;--C)Ia(u,p+=4*b,b,S)}function Co(u,p,b,S){var C;for(C=3;0<C;--C)Ii(u,p+=4,b,S)}function on(u,p,b,S,C,k,E,O){for(k=2*k+1;0<C--;){if(Ca(u,p,b,k,E))if(Na(u,p,b,O))ts(u,p,b);else{var D=u,j=p,tt=b,ht=D[j-2*tt],ft=D[j-tt],st=D[j+0],It=D[j+tt],xt=D[j+2*tt],et=27*(_t=Eo[1020+3*(st-ft)+Eo[1020+ht-It]])+63>>7,rt=18*_t+63>>7,_t=9*_t+63>>7;D[j-3*tt]=Qr[255+D[j-3*tt]+_t],D[j-2*tt]=Qr[255+ht+rt],D[j-tt]=Qr[255+ft+et],D[j+0]=Qr[255+st-et],D[j+tt]=Qr[255+It-rt],D[j+2*tt]=Qr[255+xt-_t]}p+=S}}function yi(u,p,b,S,C,k,E,O){for(k=2*k+1;0<C--;){if(Ca(u,p,b,k,E))if(Na(u,p,b,O))ts(u,p,b);else{var D=u,j=p,tt=b,ht=D[j-tt],ft=D[j+0],st=D[j+tt],It=qa[112+((xt=3*(ft-ht))+4>>3)],xt=qa[112+(xt+3>>3)],et=It+1>>1;D[j-2*tt]=Qr[255+D[j-2*tt]+et],D[j-tt]=Qr[255+ht+xt],D[j+0]=Qr[255+ft-It],D[j+tt]=Qr[255+st-et]}p+=S}}function zs(u,p,b,S,C,k){on(u,p,b,1,16,S,C,k)}function Bn(u,p,b,S,C,k){on(u,p,1,b,16,S,C,k)}function Io(u,p,b,S,C,k){var E;for(E=3;0<E;--E)yi(u,p+=4*b,b,1,16,S,C,k)}function es(u,p,b,S,C,k){var E;for(E=3;0<E;--E)yi(u,p+=4,1,b,16,S,C,k)}function To(u,p,b,S,C,k,E,O){on(u,p,C,1,8,k,E,O),on(b,S,C,1,8,k,E,O)}function Us(u,p,b,S,C,k,E,O){on(u,p,1,C,8,k,E,O),on(b,S,1,C,8,k,E,O)}function Ws(u,p,b,S,C,k,E,O){yi(u,p+4*C,C,1,8,k,E,O),yi(b,S+4*C,C,1,8,k,E,O)}function Ta(u,p,b,S,C,k,E,O){yi(u,p+4,1,C,8,k,E,O),yi(b,S+4,1,C,8,k,E,O)}function rs(){this.ba=new Wr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ve,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Hs(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Vs(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Fa(){this.ua=0,this.Wa=new W,this.vb=new W,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new G,this.yc=new R}function Fo(){this.xb=this.a=0,this.l=new Ze,this.ca=new Wr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Fa,this.ab=0,this.gc=l(4,Vs),this.Oc=0}function is(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ze,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Dn(u,p,b,S,C,k,E){for(u=u==null?0:u[p+0],p=0;p<E;++p)C[k+p]=u+b[S+p]&255,u=C[k+p]}function Gs(u,p,b,S,C,k,E){var O;if(u==null)Dn(null,null,b,S,C,k,E);else for(O=0;O<E;++O)C[k+O]=u[p+O]+b[S+O]&255}function ln(u,p,b,S,C,k,E){if(u==null)Dn(null,null,b,S,C,k,E);else{var O,D=u[p+0],j=D,tt=D;for(O=0;O<E;++O)j=tt+(D=u[p+O])-j,tt=b[S+O]+(-256&j?0>j?0:255:j)&255,j=D,C[k+O]=tt}}function $s(u,p,b,S){var C=p.width,k=p.o;if(t(u!=null&&p!=null),0>b||0>=S||b+S>k)return null;if(!u.Cc){if(u.ga==null){var E;if(u.ga=new is,(E=u.ga==null)||(E=p.width*p.o,t(u.Gb.length==0),u.Gb=a(E),u.Uc=0,u.Gb==null?E=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,E=1),E=!E),!E){E=u.ga;var O=u.Fa,D=u.P,j=u.qc,tt=u.mb,ht=u.nb,ft=D+1,st=j-1,It=E.l;if(t(O!=null&&tt!=null&&p!=null),dn[0]=null,dn[1]=Dn,dn[2]=Gs,dn[3]=ln,E.ca=tt,E.tb=ht,E.c=p.width,E.i=p.height,t(0<E.c&&0<E.i),1>=j)p=0;else if(E.$a=O[D+0]>>0&3,E.Z=O[D+0]>>2&3,E.Lc=O[D+0]>>4&3,D=O[D+0]>>6&3,0>E.$a||1<E.$a||4<=E.Z||1<E.Lc||D)p=0;else if(It.put=ii,It.ac=hr,It.bc=ni,It.ma=E,It.width=p.width,It.height=p.height,It.Da=p.Da,It.v=p.v,It.va=p.va,It.j=p.j,It.o=p.o,E.$a)t:{t(E.$a==1),p=mr();e:for(;;){if(p==null){p=0;break t}if(t(E!=null),E.mc=p,p.c=E.c,p.i=E.i,p.l=E.l,p.l.ma=E,p.l.width=E.c,p.l.height=E.i,p.a=0,ut(p.m,O,ft,st),!Jr(E.c,E.i,1,p,null)||(p.ab==1&&p.gc[0].hc==3&&gi(p.s)?(E.ic=1,O=p.c*p.i,p.Ta=null,p.Ua=0,p.V=a(O),p.Ba=0,p.V==null?(p.a=1,p=0):p=1):(E.ic=0,p=qi(p,E.c)),!p))break e;p=1;break t}E.mc=null,p=0}else p=st>=E.c*E.i;E=!p}if(E)return null;u.ga.Lc!=1?u.Ga=0:S=k-b}t(u.ga!=null),t(b+S<=k);t:{if(p=(O=u.ga).c,k=O.l.o,O.$a==0){if(ft=u.rc,st=u.Vc,It=u.Fa,D=u.P+1+b*p,j=u.mb,tt=u.nb+b*p,t(D<=u.P+u.qc),O.Z!=0)for(t(dn[O.Z]!=null),E=0;E<S;++E)dn[O.Z](ft,st,It,D,j,tt,p),ft=j,st=tt,tt+=p,D+=p;else for(E=0;E<S;++E)i(j,tt,It,D,p),ft=j,st=tt,tt+=p,D+=p;u.rc=ft,u.Vc=st}else{if(t(O.mc!=null),p=b+S,t((E=O.mc)!=null),t(p<=E.i),E.C>=p)p=1;else if(O.ic||at(),O.ic){O=E.V,ft=E.Ba,st=E.c;var xt=E.i,et=(It=1,D=E.$/st,j=E.$%st,tt=E.m,ht=E.s,E.$),rt=st*xt,_t=st*p,Ft=ht.wc,Ct=et<_t?Je(ht,j,D):null;t(et<=rt),t(p<=xt),t(gi(ht));e:for(;;){for(;!tt.h&&et<_t;){if(j&Ft||(Ct=Je(ht,j,D)),t(Ct!=null),nt(tt),256>(xt=Nr(Ct.G[0],Ct.H[0],tt)))O[ft+et]=xt,++et,++j>=st&&(j=0,++D<=p&&!(D%16)&&Gr(E,D));else{if(!(280>xt)){It=0;break e}xt=Hr(xt-256,tt);var Gt,Rt=Nr(Ct.G[4],Ct.H[4],tt);if(nt(tt),!(et>=(Rt=si(st,Rt=Hr(Rt,tt)))&&rt-et>=xt)){It=0;break e}for(Gt=0;Gt<xt;++Gt)O[ft+et+Gt]=O[ft+et+Gt-Rt];for(et+=xt,j+=xt;j>=st;)j-=st,++D<=p&&!(D%16)&&Gr(E,D);et<_t&&j&Ft&&(Ct=Je(ht,j,D))}t(tt.h==U(tt))}Gr(E,D>p?p:D);break e}!It||tt.h&&et<rt?(It=0,E.a=tt.h?5:3):E.$=et,p=It}else p=$r(E,E.V,E.Ba,E.c,E.i,p,Qi);if(!p){S=0;break t}}b+S>=k&&(u.Cc=1),S=1}if(!S)return null;if(u.Cc&&((S=u.ga)!=null&&(S.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+b*C}function v(u,p,b,S,C,k){for(;0<C--;){var E,O=u,D=p+(b?1:0),j=u,tt=p+(b?0:3);for(E=0;E<S;++E){var ht=j[tt+4*E];ht!=255&&(ht*=32897,O[D+4*E+0]=O[D+4*E+0]*ht>>23,O[D+4*E+1]=O[D+4*E+1]*ht>>23,O[D+4*E+2]=O[D+4*E+2]*ht>>23)}p+=k}}function I(u,p,b,S,C){for(;0<S--;){var k;for(k=0;k<b;++k){var E=u[p+2*k+0],O=15&(j=u[p+2*k+1]),D=4369*O,j=(240&j|j>>4)*D>>16;u[p+2*k+0]=(240&E|E>>4)*D>>16&240|(15&E|E<<4)*D>>16>>4&15,u[p+2*k+1]=240&j|O}p+=C}}function z(u,p,b,S,C,k,E,O){var D,j,tt=255;for(j=0;j<C;++j){for(D=0;D<S;++D){var ht=u[p+D];k[E+4*D]=ht,tt&=ht}p+=b,E+=O}return tt!=255}function K(u,p,b,S,C){var k;for(k=0;k<C;++k)b[S+k]=u[p+k]>>8}function at(){hi=v,ze=I,Ue=z,ir=K}function At(u,p,b){J[u]=function(S,C,k,E,O,D,j,tt,ht,ft,st,It,xt,et,rt,_t,Ft){var Ct,Gt=Ft-1>>1,Rt=O[D+0]|j[tt+0]<<16,ie=ht[ft+0]|st[It+0]<<16;t(S!=null);var Ut=3*Rt+ie+131074>>2;for(p(S[C+0],255&Ut,Ut>>16,xt,et),k!=null&&(Ut=3*ie+Rt+131074>>2,p(k[E+0],255&Ut,Ut>>16,rt,_t)),Ct=1;Ct<=Gt;++Ct){var Te=O[D+Ct]|j[tt+Ct]<<16,ke=ht[ft+Ct]|st[It+Ct]<<16,Ne=Rt+Te+ie+ke+524296,Pe=Ne+2*(Te+ie)>>3;Ut=Pe+Rt>>1,Rt=(Ne=Ne+2*(Rt+ke)>>3)+Te>>1,p(S[C+2*Ct-1],255&Ut,Ut>>16,xt,et+(2*Ct-1)*b),p(S[C+2*Ct-0],255&Rt,Rt>>16,xt,et+(2*Ct-0)*b),k!=null&&(Ut=Ne+ie>>1,Rt=Pe+ke>>1,p(k[E+2*Ct-1],255&Ut,Ut>>16,rt,_t+(2*Ct-1)*b),p(k[E+2*Ct+0],255&Rt,Rt>>16,rt,_t+(2*Ct+0)*b)),Rt=Te,ie=ke}1&Ft||(Ut=3*Rt+ie+131074>>2,p(S[C+Ft-1],255&Ut,Ut>>16,xt,et+(Ft-1)*b),k!=null&&(Ut=3*ie+Rt+131074>>2,p(k[E+Ft-1],255&Ut,Ut>>16,rt,_t+(Ft-1)*b)))}}function kt(){ci[Ra]=xf,ci[ja]=Kl,ci[Vl]=Pf,ci[Xa]=Ql,ci[Ya]=tu,ci[Mo]=eu,ci[Gl]=Sf,ci[Oo]=Kl,ci[Bo]=Ql,ci[za]=tu,ci[Do]=eu}function Vt(u){return u&-16384?0>u?0:255:u>>Af}function Qt(u,p){return Vt((19077*u>>8)+(26149*p>>8)-14234)}function ve(u,p,b){return Vt((19077*u>>8)-(6419*p>>8)-(13320*b>>8)+8708)}function pe(u,p){return Vt((19077*u>>8)+(33050*p>>8)-17685)}function Le(u,p,b,S,C){S[C+0]=Qt(u,b),S[C+1]=ve(u,p,b),S[C+2]=pe(u,p)}function $e(u,p,b,S,C){S[C+0]=pe(u,p),S[C+1]=ve(u,p,b),S[C+2]=Qt(u,b)}function Ke(u,p,b,S,C){var k=ve(u,p,b);p=k<<3&224|pe(u,p)>>3,S[C+0]=248&Qt(u,b)|k>>5,S[C+1]=p}function or(u,p,b,S,C){var k=240&pe(u,p)|15;S[C+0]=240&Qt(u,b)|ve(u,p,b)>>4,S[C+1]=k}function _r(u,p,b,S,C){S[C+0]=255,Le(u,p,b,S,C+1)}function vr(u,p,b,S,C){$e(u,p,b,S,C),S[C+3]=255}function bi(u,p,b,S,C){Le(u,p,b,S,C),S[C+3]=255}function Kr(u,p){return 0>u?0:u>p?p:u}function Ti(u,p,b){J[u]=function(S,C,k,E,O,D,j,tt,ht){for(var ft=tt+(-2&ht)*b;tt!=ft;)p(S[C+0],k[E+0],O[D+0],j,tt),p(S[C+1],k[E+0],O[D+0],j,tt+b),C+=2,++E,++D,tt+=2*b;1&ht&&p(S[C+0],k[E+0],O[D+0],j,tt)}}function ka(u,p,b){return b==0?u==0?p==0?6:5:p==0?4:0:b}function Js(u,p,b,S,C){switch(u>>>30){case 3:Yi(p,b,S,C,0);break;case 2:rr(p,b,S,C);break;case 1:Br(p,b,S,C)}}function Zs(u,p){var b,S,C=p.M,k=p.Nb,E=u.oc,O=u.pc+40,D=u.oc,j=u.pc+584,tt=u.oc,ht=u.pc+600;for(b=0;16>b;++b)E[O+32*b-1]=129;for(b=0;8>b;++b)D[j+32*b-1]=129,tt[ht+32*b-1]=129;for(0<C?E[O-1-32]=D[j-1-32]=tt[ht-1-32]=129:(s(E,O-32-1,127,21),s(D,j-32-1,127,9),s(tt,ht-32-1,127,9)),S=0;S<u.za;++S){var ft=p.ya[p.aa+S];if(0<S){for(b=-1;16>b;++b)i(E,O+32*b-4,E,O+32*b+12,4);for(b=-1;8>b;++b)i(D,j+32*b-4,D,j+32*b+4,4),i(tt,ht+32*b-4,tt,ht+32*b+4,4)}var st=u.Gd,It=u.Hd+S,xt=ft.ad,et=ft.Hc;if(0<C&&(i(E,O-32,st[It].y,0,16),i(D,j-32,st[It].f,0,8),i(tt,ht-32,st[It].ea,0,8)),ft.Za){var rt=E,_t=O-32+16;for(0<C&&(S>=u.za-1?s(rt,_t,st[It].y[15],4):i(rt,_t,st[It+1].y,0,4)),b=0;4>b;b++)rt[_t+128+b]=rt[_t+256+b]=rt[_t+384+b]=rt[_t+0+b];for(b=0;16>b;++b,et<<=2)rt=E,_t=O+iu[b],wi[ft.Ob[b]](rt,_t),Js(et,xt,16*+b,rt,_t)}else if(rt=ka(S,C,ft.Ob[0]),pn[rt](E,O),et!=0)for(b=0;16>b;++b,et<<=2)Js(et,xt,16*+b,E,O+iu[b]);for(b=ft.Gc,rt=ka(S,C,ft.Dd),Ui[rt](D,j),Ui[rt](tt,ht),et=xt,rt=D,_t=j,255&(ft=b>>0)&&(170&ft?ra(et,256,rt,_t):li(et,256,rt,_t)),ft=tt,et=ht,255&(b>>=8)&&(170&b?ra(xt,320,ft,et):li(xt,320,ft,et)),C<u.Ub-1&&(i(st[It].y,0,E,O+480,16),i(st[It].f,0,D,j+224,8),i(st[It].ea,0,tt,ht+224,8)),b=8*k*u.B,st=u.sa,It=u.ta+16*S+16*k*u.R,xt=u.qa,ft=u.ra+8*S+b,et=u.Ha,rt=u.Ia+8*S+b,b=0;16>b;++b)i(st,It+b*u.R,E,O+32*b,16);for(b=0;8>b;++b)i(xt,ft+b*u.B,D,j+32*b,8),i(et,rt+b*u.B,tt,ht+32*b,8)}}function ns(u,p,b,S,C,k,E,O,D){var j=[0],tt=[0],ht=0,ft=D!=null?D.kd:0,st=D??new Hs;if(u==null||12>b)return 7;st.data=u,st.w=p,st.ha=b,p=[p],b=[b],st.gb=[st.gb];t:{var It=p,xt=b,et=st.gb;if(t(u!=null),t(xt!=null),t(et!=null),et[0]=0,12<=xt[0]&&!e(u,It[0],"RIFF")){if(e(u,It[0]+8,"WEBP")){et=3;break t}var rt=jt(u,It[0]+4);if(12>rt||4294967286<rt){et=3;break t}if(ft&&rt>xt[0]-8){et=7;break t}et[0]=rt,It[0]+=12,xt[0]-=12}et=0}if(et!=0)return et;for(rt=0<st.gb[0],b=b[0];;){t:{var _t=u;xt=p,et=b;var Ft=j,Ct=tt,Gt=It=[0];if((Ut=ht=[ht])[0]=0,8>et[0])et=7;else{if(!e(_t,xt[0],"VP8X")){if(jt(_t,xt[0]+4)!=10){et=3;break t}if(18>et[0]){et=7;break t}var Rt=jt(_t,xt[0]+8),ie=1+zt(_t,xt[0]+12);if(2147483648<=ie*(_t=1+zt(_t,xt[0]+15))){et=3;break t}Gt!=null&&(Gt[0]=Rt),Ft!=null&&(Ft[0]=ie),Ct!=null&&(Ct[0]=_t),xt[0]+=18,et[0]-=18,Ut[0]=1}et=0}}if(ht=ht[0],It=It[0],et!=0)return et;if(xt=!!(2&It),!rt&&ht)return 3;if(k!=null&&(k[0]=!!(16&It)),E!=null&&(E[0]=xt),O!=null&&(O[0]=0),E=j[0],It=tt[0],ht&&xt&&D==null){et=0;break}if(4>b){et=7;break}if(rt&&ht||!rt&&!ht&&!e(u,p[0],"ALPH")){b=[b],st.na=[st.na],st.P=[st.P],st.Sa=[st.Sa];t:{Rt=u,et=p,rt=b;var Ut=st.gb;Ft=st.na,Ct=st.P,Gt=st.Sa,ie=22,t(Rt!=null),t(rt!=null),_t=et[0];var Te=rt[0];for(t(Ft!=null),t(Gt!=null),Ft[0]=null,Ct[0]=null,Gt[0]=0;;){if(et[0]=_t,rt[0]=Te,8>Te){et=7;break t}var ke=jt(Rt,_t+4);if(4294967286<ke){et=3;break t}var Ne=8+ke+1&-2;if(ie+=Ne,0<Ut&&ie>Ut){et=3;break t}if(!e(Rt,_t,"VP8 ")||!e(Rt,_t,"VP8L")){et=0;break t}if(Te[0]<Ne){et=7;break t}e(Rt,_t,"ALPH")||(Ft[0]=Rt,Ct[0]=_t+8,Gt[0]=ke),_t+=Ne,Te-=Ne}}if(b=b[0],st.na=st.na[0],st.P=st.P[0],st.Sa=st.Sa[0],et!=0)break}b=[b],st.Ja=[st.Ja],st.xa=[st.xa];t:if(Ut=u,et=p,rt=b,Ft=st.gb[0],Ct=st.Ja,Gt=st.xa,Rt=et[0],_t=!e(Ut,Rt,"VP8 "),ie=!e(Ut,Rt,"VP8L"),t(Ut!=null),t(rt!=null),t(Ct!=null),t(Gt!=null),8>rt[0])et=7;else{if(_t||ie){if(Ut=jt(Ut,Rt+4),12<=Ft&&Ut>Ft-12){et=3;break t}if(ft&&Ut>rt[0]-8){et=7;break t}Ct[0]=Ut,et[0]+=8,rt[0]-=8,Gt[0]=ie}else Gt[0]=5<=rt[0]&&Ut[Rt+0]==47&&!(Ut[Rt+4]>>5),Ct[0]=rt[0];et=0}if(b=b[0],st.Ja=st.Ja[0],st.xa=st.xa[0],p=p[0],et!=0)break;if(4294967286<st.Ja)return 3;if(O==null||xt||(O[0]=st.xa?2:1),E=[E],It=[It],st.xa){if(5>b){et=7;break}O=E,ft=It,xt=k,u==null||5>b?u=0:5<=b&&u[p+0]==47&&!(u[p+4]>>5)?(rt=[0],Ut=[0],Ft=[0],ut(Ct=new M,u,p,b),ee(Ct,rt,Ut,Ft)?(O!=null&&(O[0]=rt[0]),ft!=null&&(ft[0]=Ut[0]),xt!=null&&(xt[0]=Ft[0]),u=1):u=0):u=0}else{if(10>b){et=7;break}O=It,u==null||10>b||!Kn(u,p+3,b-3)?u=0:(ft=u[p+0]|u[p+1]<<8|u[p+2]<<16,xt=16383&(u[p+7]<<8|u[p+6]),u=16383&(u[p+9]<<8|u[p+8]),1&ft||3<(ft>>1&7)||!(ft>>4&1)||ft>>5>=st.Ja||!xt||!u?u=0:(E&&(E[0]=xt),O&&(O[0]=u),u=1))}if(!u||(E=E[0],It=It[0],ht&&(j[0]!=E||tt[0]!=It)))return 3;D!=null&&(D[0]=st,D.offset=p-D.w,t(4294967286>p-D.w),t(D.offset==D.ha-b));break}return et==0||et==7&&ht&&D==null?(k!=null&&(k[0]|=st.na!=null&&0<st.na.length),S!=null&&(S[0]=E),C!=null&&(C[0]=It),0):et}function Ks(u,p,b){var S=p.width,C=p.height,k=0,E=0,O=S,D=C;if(p.Da=u!=null&&0<u.Da,p.Da&&(O=u.cd,D=u.bd,k=u.v,E=u.j,11>b||(k&=-2,E&=-2),0>k||0>E||0>=O||0>=D||k+O>S||E+D>C))return 0;if(p.v=k,p.j=E,p.va=k+O,p.o=E+D,p.U=O,p.T=D,p.da=u!=null&&0<u.da,p.da){if(!he(O,D,b=[u.ib],k=[u.hb]))return 0;p.ib=b[0],p.hb=k[0]}return p.ob=u!=null&&u.ob,p.Kb=u==null||!u.Sd,p.da&&(p.ob=p.ib<3*S/4&&p.hb<3*C/4,p.Kb=0),1}function Qs(u){if(u==null)return 2;if(11>u.S){var p=u.f.RGBA;p.fb+=(u.height-1)*p.A,p.A=-p.A}else p=u.f.kb,u=u.height,p.O+=(u-1)*p.fa,p.fa=-p.fa,p.N+=(u-1>>1)*p.Ab,p.Ab=-p.Ab,p.W+=(u-1>>1)*p.Db,p.Db=-p.Db,p.F!=null&&(p.J+=(u-1)*p.lb,p.lb=-p.lb);return 0}function ss(u,p,b,S){if(S==null||0>=u||0>=p)return 2;if(b!=null){if(b.Da){var C=b.cd,k=b.bd,E=-2&b.v,O=-2&b.j;if(0>E||0>O||0>=C||0>=k||E+C>u||O+k>p)return 2;u=C,p=k}if(b.da){if(!he(u,p,C=[b.ib],k=[b.hb]))return 2;u=C[0],p=k[0]}}S.width=u,S.height=p;t:{var D=S.width,j=S.height;if(u=S.S,0>=D||0>=j||!(u>=Ra&&13>u))u=2;else{if(0>=S.Rd&&S.sd==null){E=k=C=p=0;var tt=(O=D*nu[u])*j;if(11>u||(k=(j+1)/2*(p=(D+1)/2),u==12&&(E=(C=D)*j)),(j=a(tt+2*k+E))==null){u=1;break t}S.sd=j,11>u?((D=S.f.RGBA).eb=j,D.fb=0,D.A=O,D.size=tt):((D=S.f.kb).y=j,D.O=0,D.fa=O,D.Fd=tt,D.f=j,D.N=0+tt,D.Ab=p,D.Cd=k,D.ea=j,D.W=0+tt+k,D.Db=p,D.Ed=k,u==12&&(D.F=j,D.J=0+tt+2*k),D.Tc=E,D.lb=C)}if(p=1,C=S.S,k=S.width,E=S.height,C>=Ra&&13>C)if(11>C)u=S.f.RGBA,p&=(O=Math.abs(u.A))*(E-1)+k<=u.size,p&=O>=k*nu[C],p&=u.eb!=null;else{u=S.f.kb,O=(k+1)/2,tt=(E+1)/2,D=Math.abs(u.fa),j=Math.abs(u.Ab);var ht=Math.abs(u.Db),ft=Math.abs(u.lb),st=ft*(E-1)+k;p&=D*(E-1)+k<=u.Fd,p&=j*(tt-1)+O<=u.Cd,p=(p&=ht*(tt-1)+O<=u.Ed)&D>=k&j>=O&ht>=O,p&=u.y!=null,p&=u.f!=null,p&=u.ea!=null,C==12&&(p&=ft>=k,p&=st<=u.Tc,p&=u.F!=null)}else p=0;u=p?0:2}}return u!=0||b!=null&&b.fd&&(u=Qs(S)),u}var Sr=64,as=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],os=24,ls=32,ta=8,qr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];qt("Predictor0","PredictorAdd0"),J.Predictor0=function(){return 4278190080},J.Predictor1=function(u){return u},J.Predictor2=function(u,p,b){return p[b+0]},J.Predictor3=function(u,p,b){return p[b+1]},J.Predictor4=function(u,p,b){return p[b-1]},J.Predictor5=function(u,p,b){return Xt(Xt(u,p[b+1]),p[b+0])},J.Predictor6=function(u,p,b){return Xt(u,p[b-1])},J.Predictor7=function(u,p,b){return Xt(u,p[b+0])},J.Predictor8=function(u,p,b){return Xt(p[b-1],p[b+0])},J.Predictor9=function(u,p,b){return Xt(p[b+0],p[b+1])},J.Predictor10=function(u,p,b){return Xt(Xt(u,p[b-1]),Xt(p[b+0],p[b+1]))},J.Predictor11=function(u,p,b){var S=p[b+0];return 0>=me(S>>24&255,u>>24&255,(p=p[b-1])>>24&255)+me(S>>16&255,u>>16&255,p>>16&255)+me(S>>8&255,u>>8&255,p>>8&255)+me(255&S,255&u,255&p)?S:u},J.Predictor12=function(u,p,b){var S=p[b+0];return(Zt((u>>24&255)+(S>>24&255)-((p=p[b-1])>>24&255))<<24|Zt((u>>16&255)+(S>>16&255)-(p>>16&255))<<16|Zt((u>>8&255)+(S>>8&255)-(p>>8&255))<<8|Zt((255&u)+(255&S)-(255&p)))>>>0},J.Predictor13=function(u,p,b){var S=p[b-1];return(le((u=Xt(u,p[b+0]))>>24&255,S>>24&255)<<24|le(u>>16&255,S>>16&255)<<16|le(u>>8&255,S>>8&255)<<8|le(u>>0&255,S>>0&255))>>>0};var ko=J.PredictorAdd0;J.PredictorAdd1=we,qt("Predictor2","PredictorAdd2"),qt("Predictor3","PredictorAdd3"),qt("Predictor4","PredictorAdd4"),qt("Predictor5","PredictorAdd5"),qt("Predictor6","PredictorAdd6"),qt("Predictor7","PredictorAdd7"),qt("Predictor8","PredictorAdd8"),qt("Predictor9","PredictorAdd9"),qt("Predictor10","PredictorAdd10"),qt("Predictor11","PredictorAdd11"),qt("Predictor12","PredictorAdd12"),qt("Predictor13","PredictorAdd13");var ea=J.PredictorAdd2;xe("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),xe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var Ea,oi=J.ColorIndexInverseTransform,us=J.MapARGB,Ma=J.VP8LColorIndexInverseTransformAlpha,Oa=J.MapAlpha,un=J.VP8LPredictorsAdd=[];un.length=16,(J.VP8LPredictors=[]).length=16,(J.VP8LPredictorsAdd_C=[]).length=16,(J.VP8LPredictors_C=[]).length=16;var qn,Rr,Or,hn,ji,Xi,hs,Yi,rr,ra,Br,li,fs,Ba,ia,Rn,jn,fn,Xn,cs,Yn,cn,na,ui,hi,ze,Ue,ir,fr=a(511),zi=a(2041),sa=a(225),ps=a(767),Da=0,Eo=zi,qa=sa,Qr=ps,fi=fr,Ra=0,ja=1,Vl=2,Xa=3,Ya=4,Mo=5,Gl=6,Oo=7,Bo=8,za=9,Do=10,of=[2,3,7],lf=[3,3,11],$l=[280,256,256,256,40],uf=[0,1,1,1,0],hf=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ff=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],cf=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],pf=8,qo=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ro=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],aa=null,df=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],mf=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Jl=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],vf=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],yf=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],bf=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],pn=[],wi=[],Ui=[],wf=1,Zl=2,dn=[],ci=[];At("UpsampleRgbLinePair",Le,3),At("UpsampleBgrLinePair",$e,3),At("UpsampleRgbaLinePair",bi,4),At("UpsampleBgraLinePair",vr,4),At("UpsampleArgbLinePair",_r,4),At("UpsampleRgba4444LinePair",or,2),At("UpsampleRgb565LinePair",Ke,2);var xf=J.UpsampleRgbLinePair,Pf=J.UpsampleBgrLinePair,Kl=J.UpsampleRgbaLinePair,Ql=J.UpsampleBgraLinePair,tu=J.UpsampleArgbLinePair,eu=J.UpsampleRgba4444LinePair,Sf=J.UpsampleRgb565LinePair,Ua=16,Wa=1<<Ua-1,oa=-227,jo=482,Af=6,ru=0,Lf=a(256),Nf=a(256),_f=a(256),Cf=a(256),If=a(jo-oa),Tf=a(jo-oa);Ti("YuvToRgbRow",Le,3),Ti("YuvToBgrRow",$e,3),Ti("YuvToRgbaRow",bi,4),Ti("YuvToBgraRow",vr,4),Ti("YuvToArgbRow",_r,4),Ti("YuvToRgba4444Row",or,2),Ti("YuvToRgb565Row",Ke,2);var iu=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ha=[0,2,8],Ff=[8,7,6,4,4,2,2,2,1,1,1,1],kf=1;this.WebPDecodeRGBA=function(u,p,b,S,C){var k=ja,E=new rs,O=new Wr;E.ba=O,O.S=k,O.width=[O.width],O.height=[O.height];var D=O.width,j=O.height,tt=new mi;if(tt==null||u==null)var ht=2;else t(tt!=null),ht=ns(u,p,b,tt.width,tt.height,tt.Pd,tt.Qd,tt.format,null);if(ht!=0?D=0:(D!=null&&(D[0]=tt.width[0]),j!=null&&(j[0]=tt.height[0]),D=1),D){O.width=O.width[0],O.height=O.height[0],S!=null&&(S[0]=O.width),C!=null&&(C[0]=O.height);t:{if(S=new Ze,(C=new Hs).data=u,C.w=p,C.ha=b,C.kd=1,p=[0],t(C!=null),((u=ns(C.data,C.w,C.ha,null,null,null,p,null,C))==0||u==7)&&p[0]&&(u=4),(p=u)==0){if(t(E!=null),S.data=C.data,S.w=C.w+C.offset,S.ha=C.ha-C.offset,S.put=ii,S.ac=hr,S.bc=ni,S.ma=E,C.xa){if((u=mr())==null){E=1;break t}if(function(ft,st){var It=[0],xt=[0],et=[0];e:for(;;){if(ft==null)return 0;if(st==null)return ft.a=2,0;if(ft.l=st,ft.a=0,ut(ft.m,st.data,st.w,st.ha),!ee(ft.m,It,xt,et)){ft.a=3;break e}if(ft.xb=Zl,st.width=It[0],st.height=xt[0],!Jr(It[0],xt[0],1,ft,null))break e;return 1}return t(ft.a!=0),0}(u,S)){if(S=(p=ss(S.width,S.height,E.Oa,E.ba))==0){e:{S=u;r:for(;;){if(S==null){S=0;break e}if(t(S.s.yc!=null),t(S.s.Ya!=null),t(0<S.s.Wb),t((b=S.l)!=null),t((C=b.ma)!=null),S.xb!=0){if(S.ca=C.ba,S.tb=C.tb,t(S.ca!=null),!Ks(C.Oa,b,Xa)){S.a=2;break r}if(!qi(S,b.width)||b.da)break r;if((b.da||_e(S.ca.S))&&at(),11>S.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),S.ca.f.kb.F!=null&&at()),S.Pb&&0<S.s.ua&&S.s.vb.X==null&&!se(S.s.vb,S.s.Wa.Xa)){S.a=1;break r}S.xb=0}if(!$r(S,S.V,S.Ba,S.c,S.i,b.o,Ki))break r;C.Dc=S.Ma,S=1;break e}t(S.a!=0),S=0}S=!S}S&&(p=u.a)}else p=u.a}else{if((u=new Bs)==null){E=1;break t}if(u.Fa=C.na,u.P=C.P,u.qc=C.Sa,ge(u,S)){if((p=ss(S.width,S.height,E.Oa,E.ba))==0){if(u.Aa=0,b=E.Oa,t((C=u)!=null),b!=null){if(0<(D=0>(D=b.Md)?0:100<D?255:255*D/100)){for(j=tt=0;4>j;++j)12>(ht=C.pb[j]).lc&&(ht.ia=D*Ff[0>ht.lc?0:ht.lc]>>3),tt|=ht.ia;tt&&(alert("todo:VP8InitRandom"),C.ia=1)}C.Ga=b.Id,100<C.Ga?C.Ga=100:0>C.Ga&&(C.Ga=0)}Ds(u,S)||(p=u.a)}}else p=u.a}p==0&&E.Oa!=null&&E.Oa.fd&&(p=Qs(E.ba))}E=p}k=E!=0?null:11>k?O.f.RGBA.eb:O.f.kb.y}else k=null;return k};var nu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(J,lt){for(var yt="",q=0;q<4;q++)yt+=String.fromCharCode(J[lt++]);return yt}function y(J,lt){return(J[lt+0]<<0|J[lt+1]<<8|J[lt+2]<<16)>>>0}function w(J,lt){return(J[lt+0]<<0|J[lt+1]<<8|J[lt+2]<<16|J[lt+3]<<24)>>>0}new f;var P=[0],g=[0],N=[],A=new f,T=n,L=function(J,lt){var yt={},q=0,R=!1,Z=0,G=0;if(yt.frames=[],!function(X,U,Q,nt){for(var pt=0;pt<nt;pt++)if(X[U+pt]!=Q.charCodeAt(pt))return!0;return!1}(J,lt,"RIFF",4)){for(w(J,lt+=4),lt+=8;lt<J.length;){var bt=d(J,lt),gt=w(J,lt+=4);lt+=4;var St=gt+(1&gt);switch(bt){case"VP8 ":case"VP8L":yt.frames[q]===void 0&&(yt.frames[q]={}),(Pt=yt.frames[q]).src_off=R?G:lt-8,Pt.src_size=Z+gt+8,q++,R&&(R=!1,Z=0,G=0);break;case"VP8X":(Pt=yt.header={}).feature_flags=J[lt];var ut=lt+4;Pt.canvas_width=1+y(J,ut),ut+=3,Pt.canvas_height=1+y(J,ut),ut+=3;break;case"ALPH":R=!0,Z=St+8,G=lt-8;break;case"ANIM":(Pt=yt.header).bgcolor=w(J,lt),ut=lt+4,Pt.loop_count=(Yt=J)[(M=ut)+0]<<0|Yt[M+1]<<8,ut+=2;break;case"ANMF":var wt,Pt;(Pt=yt.frames[q]={}).offset_x=2*y(J,lt),lt+=3,Pt.offset_y=2*y(J,lt),lt+=3,Pt.width=1+y(J,lt),lt+=3,Pt.height=1+y(J,lt),lt+=3,Pt.duration=y(J,lt),lt+=3,wt=J[lt++],Pt.dispose=1&wt,Pt.blend=wt>>1&1}bt!="ANMF"&&(lt+=St)}var Yt,M;return yt}}(T,0);L.response=T,L.rgbaoutput=!0,L.dataurl=!1;var F=L.header?L.header:null,Y=L.frames?L.frames:null;if(F){F.loop_counter=F.loop_count,P=[F.canvas_height],g=[F.canvas_width];for(var it=0;it<Y.length&&Y[it].blend!=0;it++);}var $=Y[0],vt=A.WebPDecodeRGBA(T,$.src_off,$.src_size,g,P);$.rgba=vt,$.imgwidth=g[0],$.imgheight=P[0];for(var ot=0;ot<g[0]*P[0]*4;ot++)N[ot]=vt[ot];return this.width=g,this.height=P,this.data=N,this}(function(n){var t=function(){return typeof Nl=="function"},e=function(P,g,N,A){var T=4,L=l;switch(A){case n.image_compression.FAST:T=1,L=a;break;case n.image_compression.MEDIUM:T=6,L=h;break;case n.image_compression.SLOW:T=9,L=f}P=i(P,g,N,L);var F=Nl(P,{level:T});return n.__addimage__.arrayBufferToBinaryString(F)},i=function(P,g,N,A){for(var T,L,F,Y=P.length/g,it=new Uint8Array(P.length+Y),$=y(),vt=0;vt<Y;vt+=1){if(F=vt*g,T=P.subarray(F,F+g),A)it.set(A(T,N,L),F+vt);else{for(var ot,J=$.length,lt=[];ot<J;ot+=1)lt[ot]=$[ot](T,N,L);var yt=w(lt.concat());it.set(lt[yt],F+vt)}L=T}return it},s=function(P){var g=Array.apply([],P);return g.unshift(0),g},a=function(P,g){var N,A=[],T=P.length;A[0]=1;for(var L=0;L<T;L+=1)N=P[L-g]||0,A[L+1]=P[L]-N+256&255;return A},l=function(P,g,N){var A,T=[],L=P.length;T[0]=2;for(var F=0;F<L;F+=1)A=N&&N[F]||0,T[F+1]=P[F]-A+256&255;return T},h=function(P,g,N){var A,T,L=[],F=P.length;L[0]=3;for(var Y=0;Y<F;Y+=1)A=P[Y-g]||0,T=N&&N[Y]||0,L[Y+1]=P[Y]+256-(A+T>>>1)&255;return L},f=function(P,g,N){var A,T,L,F,Y=[],it=P.length;Y[0]=4;for(var $=0;$<it;$+=1)A=P[$-g]||0,T=N&&N[$]||0,L=N&&N[$-g]||0,F=d(A,T,L),Y[$+1]=P[$]-F+256&255;return Y},d=function(P,g,N){if(P===g&&g===N)return P;var A=Math.abs(g-N),T=Math.abs(P-N),L=Math.abs(P+g-N-N);return A<=T&&A<=L?P:T<=L?g:N},y=function(){return[s,a,l,h,f]},w=function(P){var g=P.map(function(N){return N.reduce(function(A,T){return A+Math.abs(T)},0)});return g.indexOf(Math.min.apply(null,g))};n.processPNG=function(P,g,N,A){var T,L,F,Y,it,$,vt,ot,J,lt,yt,q,R,Z,G,bt=this.decode.FLATE_DECODE,gt="";if(this.__addimage__.isArrayBuffer(P)&&(P=new Uint8Array(P)),this.__addimage__.isArrayBufferView(P)){if(P=(F=new Wc(P)).imgData,L=F.bits,T=F.colorSpace,it=F.colors,[4,6].indexOf(F.colorType)!==-1){if(F.bits===8){J=(ot=F.pixelBitlength==32?new Uint32Array(F.decodePixels().buffer):F.pixelBitlength==16?new Uint16Array(F.decodePixels().buffer):new Uint8Array(F.decodePixels().buffer)).length,yt=new Uint8Array(J*F.colors),lt=new Uint8Array(J);var St,ut=F.pixelBitlength-F.bits;for(Z=0,G=0;Z<J;Z++){for(R=ot[Z],St=0;St<ut;)yt[G++]=R>>>St&255,St+=F.bits;lt[Z]=R>>>St&255}}if(F.bits===16){J=(ot=new Uint32Array(F.decodePixels().buffer)).length,yt=new Uint8Array(J*(32/F.pixelBitlength)*F.colors),lt=new Uint8Array(J*(32/F.pixelBitlength)),q=F.colors>1,Z=0,G=0;for(var wt=0;Z<J;)R=ot[Z++],yt[G++]=R>>>0&255,q&&(yt[G++]=R>>>16&255,R=ot[Z++],yt[G++]=R>>>0&255),lt[wt++]=R>>>16&255;L=8}A!==n.image_compression.NONE&&t()?(P=e(yt,F.width*F.colors,F.colors,A),vt=e(lt,F.width,1,A)):(P=yt,vt=lt,bt=void 0)}if(F.colorType===3&&(T=this.color_spaces.INDEXED,$=F.palette,F.transparency.indexed)){var Pt=F.transparency.indexed,Yt=0;for(Z=0,J=Pt.length;Z<J;++Z)Yt+=Pt[Z];if((Yt/=255)===J-1&&Pt.indexOf(0)!==-1)Y=[Pt.indexOf(0)];else if(Yt!==J){for(ot=F.decodePixels(),lt=new Uint8Array(ot.length),Z=0,J=ot.length;Z<J;Z++)lt[Z]=Pt[ot[Z]];vt=e(lt,F.width,1)}}var M=function(X){var U;switch(X){case n.image_compression.FAST:U=11;break;case n.image_compression.MEDIUM:U=13;break;case n.image_compression.SLOW:U=14;break;default:U=12}return U}(A);return bt===this.decode.FLATE_DECODE&&(gt="/Predictor "+M+" "),gt+="/Colors "+it+" /BitsPerComponent "+L+" /Columns "+F.width,(this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),(vt&&this.__addimage__.isArrayBuffer(vt)||this.__addimage__.isArrayBufferView(vt))&&(vt=this.__addimage__.arrayBufferToBinaryString(vt)),{alias:N,data:P,index:g,filter:bt,decodeParameters:gt,transparency:Y,palette:$,sMask:vt,predictor:M,width:F.width,height:F.height,bitsPerComponent:L,colorSpace:T}}}})(ne.API),function(n){n.processGIF89A=function(t,e,i,s){var a=new Hc(t),l=a.width,h=a.height,f=[];a.decodeAndBlitFrameRGBA(0,f);var d={data:f,width:l,height:h},y=new sl(100).encode(d,100);return n.processJPEG.call(this,y,e,i,s)},n.processGIF87A=n.processGIF89A}(ne.API),Si.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var t=0;t<n;t++){var e=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:i,blue:e,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Si.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[n]()}catch(e){Re.log("bit decode error:"+e)}},Si.prototype.bit1=function(){var n,t=Math.ceil(this.width/8),e=t%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<t;s++)for(var a=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+8*s*4,h=0;h<8&&8*s+h<this.width;h++){var f=this.palette[a>>7-h&1];this.data[l+4*h]=f.blue,this.data[l+4*h+1]=f.green,this.data[l+4*h+2]=f.red,this.data[l+4*h+3]=255}e!==0&&(this.pos+=4-e)}},Si.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),t=n%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,s=0;s<n;s++){var a=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+2*s*4,h=a>>4,f=15&a,d=this.palette[h];if(this.data[l]=d.blue,this.data[l+1]=d.green,this.data[l+2]=d.red,this.data[l+3]=255,2*s+1>=this.width)break;d=this.palette[f],this.data[l+4]=d.blue,this.data[l+4+1]=d.green,this.data[l+4+2]=d.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},Si.prototype.bit8=function(){for(var n=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*i;if(s<this.palette.length){var l=this.palette[s];this.data[a]=l.red,this.data[a+1]=l.green,this.data[a+2]=l.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}n!==0&&(this.pos+=4-n)}},Si.prototype.bit15=function(){for(var n=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&t)/t*255|0,h=(a>>5&t)/t*255|0,f=(a>>10&t)/t*255|0,d=a>>15?255:0,y=i*this.width*4+4*s;this.data[y]=f,this.data[y+1]=h,this.data[y+2]=l,this.data[y+3]=d}this.pos+=n}},Si.prototype.bit16=function(){for(var n=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(l&t)/t*255|0,f=(l>>5&e)/e*255|0,d=(l>>11)/t*255|0,y=s*this.width*4+4*a;this.data[y]=d,this.data[y+1]=f,this.data[y+2]=h,this.data[y+3]=255}this.pos+=n}},Si.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*e;this.data[l]=a,this.data[l+1]=s,this.data[l+2]=i,this.data[l+3]=255}this.pos+=this.width%4}},Si.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=t*this.width*4+4*e;this.data[h]=a,this.data[h+1]=s,this.data[h+2]=i,this.data[h+3]=l}},Si.prototype.getData=function(){return this.data},function(n){n.processBMP=function(t,e,i,s){var a=new Si(t,!1),l=a.width,h=a.height,f={data:a.getData(),width:l,height:h},d=new sl(100).encode(f,100);return n.processJPEG.call(this,d,e,i,s)}}(ne.API),Uu.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(t,e,i,s){var a=new Uu(t),l=a.width,h=a.height,f={data:a.getData(),width:l,height:h},d=new sl(100).encode(f,100);return n.processJPEG.call(this,d,e,i,s)}}(ne.API),ne.API.processRGBA=function(n,t,e){for(var i=n.data,s=i.length,a=new Uint8Array(s/4*3),l=new Uint8Array(s/4),h=0,f=0,d=0;d<s;d+=4){var y=i[d],w=i[d+1],P=i[d+2],g=i[d+3];a[h++]=y,a[h++]=w,a[h++]=P,l[f++]=g}var N=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:N,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},ne.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},bs=ne.API,oo=bs.getCharWidthsArray=function(n,t){var e,i,s=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),h=t.widths?t.widths:s.metadata.Unicode.widths,f=h.fof?h.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,y=d.fof?d.fof:1,w=t.doKerning!==!1,P=0,g=n.length,N=0,A=h[0]||f,T=[];for(e=0;e<g;e++)i=n.charCodeAt(e),typeof s.metadata.widthOfString=="function"?T.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(i))+l*(1e3/a)||0)/1e3):(P=w&&Me(d[i])==="object"&&!isNaN(parseInt(d[i][N],10))?d[i][N]/y:0,T.push((h[i]||A)/f+P)),N=i;return T},ju=bs.getStringUnitWidth=function(n,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return bs.processArabic&&(n=bs.processArabic(n)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(n,e,s)/e:oo.apply(this,arguments).reduce(function(a,l){return a+l},0)},Xu=function(n,t,e,i){for(var s=[],a=0,l=n.length,h=0;a!==l&&h+t[a]<e;)h+=t[a],a++;s.push(n.slice(0,a));var f=a;for(h=0;a!==l;)h+t[a]>i&&(s.push(n.slice(f,a)),h=0,f=a),h+=t[a],a++;return f!==a&&s.push(n.slice(f,a)),s},Yu=function(n,t,e){e||(e={});var i,s,a,l,h,f,d,y=[],w=[y],P=e.textIndent||0,g=0,N=0,A=n.split(" "),T=oo.apply(this,[" ",e])[0];if(f=e.lineIndent===-1?A[0].length+2:e.lineIndent||0){var L=Array(f).join(" "),F=[];A.map(function(it){(it=it.split(/\s*\n/)).length>1?F=F.concat(it.map(function($,vt){return(vt&&$.length?`
`:"")+$})):F.push(it[0])}),A=F,f=ju.apply(this,[L,e])}for(a=0,l=A.length;a<l;a++){var Y=0;if(i=A[a],f&&i[0]==`
`&&(i=i.substr(1),Y=1),P+g+(N=(s=oo.apply(this,[i,e])).reduce(function(it,$){return it+$},0))>t||Y){if(N>t){for(h=Xu.apply(this,[i,s,t-(P+g),t]),y.push(h.shift()),y=[h.pop()];h.length;)w.push([h.shift()]);N=s.slice(i.length-(y[0]?y[0].length:0)).reduce(function(it,$){return it+$},0)}else y=[i];w.push(y),P=N+f,g=T}else y.push(i),P+=g+N,g=T}return d=f?function(it,$){return($?L:"")+it.join(" ")}:function(it){return it.join(" ")},w.map(d)},bs.splitTextToSize=function(n,t,e){var i,s=(e=e||{}).fontSize||this.internal.getFontSize(),a=(function(y){if(y.widths&&y.kerning)return{widths:y.widths,kerning:y.kerning};var w=this.internal.getFont(y.fontName,y.fontStyle);return w.metadata.Unicode?{widths:w.metadata.Unicode.widths||{0:1},kerning:w.metadata.Unicode.kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/s;a.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=e.lineIndent;var h,f,d=[];for(h=0,f=i.length;h<f;h++)d=d.concat(Yu.apply(this,[i[h],l,a]));return d},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",e={},i={},s=0;s<t.length;s++)e[t[s]]="0123456789abcdef"[s],i["0123456789abcdef"[s]]=t[s];var a=function(w){return"0x"+parseInt(w,10).toString(16)},l=n.__fontmetrics__.compress=function(w){var P,g,N,A,T=["{"];for(var L in w){if(P=w[L],isNaN(parseInt(L,10))?g="'"+L+"'":(L=parseInt(L,10),g=(g=a(L).slice(2)).slice(0,-1)+i[g.slice(-1)]),typeof P=="number")P<0?(N=a(P).slice(3),A="-"):(N=a(P).slice(2),A=""),N=A+N.slice(0,-1)+i[N.slice(-1)];else{if(Me(P)!=="object")throw new Error("Don't know what to do with value type "+Me(P)+".");N=l(P)}T.push(g+N)}return T.push("}"),T.join("")},h=n.__fontmetrics__.uncompress=function(w){if(typeof w!="string")throw new Error("Invalid argument passed to uncompress.");for(var P,g,N,A,T={},L=1,F=T,Y=[],it="",$="",vt=w.length-1,ot=1;ot<vt;ot+=1)(A=w[ot])=="'"?P?(N=P.join(""),P=void 0):P=[]:P?P.push(A):A=="{"?(Y.push([F,N]),F={},N=void 0):A=="}"?((g=Y.pop())[0][g[1]]=F,N=void 0,F=g[0]):A=="-"?L=-1:N===void 0?e.hasOwnProperty(A)?(it+=e[A],N=parseInt(it,16)*L,L=1,it=""):it+=A:e.hasOwnProperty(A)?($+=e[A],F[N]=parseInt($,16)*L,L=1,N=void 0,$=""):$+=A;return T},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},y={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(w){var P=w.font,g=y.Unicode[P.postScriptName];g&&(P.metadata.Unicode={},P.metadata.Unicode.widths=g.widths,P.metadata.Unicode.kerning=g.kerning);var N=d.Unicode[P.postScriptName];N&&(P.metadata.Unicode.encoding=N,P.encoding=N.codePages[0])}])}(ne.API),function(n){var t=function(e){for(var i=e.length,s=new Uint8Array(i),a=0;a<i;a++)s[a]=e.charCodeAt(a);return s};n.API.events.push(["addFont",function(e){var i=void 0,s=e.font,a=e.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(i=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(l,h){h=/^\x00\x01\x00\x00/.test(h)?t(h):t(ga(h)),l.metadata=n.API.TTFFont.open(h),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(s,i)}}])}(ne),function(n){function t(){return(oe.canvg?Promise.resolve(oe.canvg):xl(()=>import("./index.es-C5-xiYOH.js"),[],import.meta.url)).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}ne.API.addSvgAsImage=function(e,i,s,a,l,h,f,d){if(isNaN(i)||isNaN(s))throw Re.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(l))throw Re.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var y=document.createElement("canvas");y.width=a,y.height=l;var w=y.getContext("2d");w.fillStyle="#fff",w.fillRect(0,0,y.width,y.height);var P={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return t().then(function(N){return N.fromString(w,e,P)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(P)}).then(function(){g.addImage(y.toDataURL("image/jpeg",1),i,s,a,l,f,d)})}}(),ne.API.putTotalPages=function(n){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(n,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var s=0;s<this.internal.pages[i].length;s++)this.internal.pages[i][s]=this.internal.pages[i][s].replace(t,e);return this},ne.API.viewerPreferences=function(n,t){var e;n=n||{},t=t||!1;var i,s,a,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},h=Object.keys(l),f=[],d=0,y=0,w=0;function P(N,A){var T,L=!1;for(T=0;T<N.length;T+=1)N[T]===A&&(L=!0);return L}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,n==="reset"||t===!0){var g=h.length;for(w=0;w<g;w+=1)e[h[w]].value=e[h[w]].defaultValue,e[h[w]].explicitSet=!1}if(Me(n)==="object"){for(s in n)if(a=n[s],P(h,s)&&a!==void 0){if(e[s].type==="boolean"&&typeof a=="boolean")e[s].value=a;else if(e[s].type==="name"&&P(e[s].valueSet,a))e[s].value=a;else if(e[s].type==="integer"&&Number.isInteger(a))e[s].value=a;else if(e[s].type==="array"){for(d=0;d<a.length;d+=1)if(i=!0,a[d].length===1&&typeof a[d][0]=="number")f.push(String(a[d]-1));else if(a[d].length>1){for(y=0;y<a[d].length;y+=1)typeof a[d][y]!="number"&&(i=!1);i===!0&&f.push([a[d][0]-1,a[d][1]-1].join(" "))}e[s].value="["+f.join(" ")+"]"}else e[s].value=e[s].defaultValue;e[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,A=[];for(N in e)e[N].explicitSet===!0&&(e[N].type==="name"?A.push("/"+N+" /"+e[N].value):A.push("/"+N+" "+e[N].value));A.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+A.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(n){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(i)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),h=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),d=a.length+l.length+h.length+s.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+a+l+h+f),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(i,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}(ne.API),function(n){var t=n.API,e=t.pdfEscape16=function(a,l){for(var h,f=l.metadata.Unicode.widths,d=["","0","00","000","0000"],y=[""],w=0,P=a.length;w<P;++w){if(h=l.metadata.characterToGlyph(a.charCodeAt(w)),l.metadata.glyIdsUsed.push(h),l.metadata.toUnicode[h]=a.charCodeAt(w),f.indexOf(h)==-1&&(f.push(h),f.push([parseInt(l.metadata.widthOfGlyph(h),10)])),h=="0")return y.join("");h=h.toString(16),y.push(d[4-h.length],h)}return y.join("")},i=function(a){var l,h,f,d,y,w,P;for(y=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],w=0,P=(h=Object.keys(a).sort(function(g,N){return g-N})).length;w<P;w++)l=h[w],f.length>=100&&(y+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),a[l]!==void 0&&a[l]!==null&&typeof a[l].toString=="function"&&(d=("0000"+a[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),f.push("<"+l+"><"+d+">"));return f.length&&(y+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),y+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(l){var h=l.font,f=l.out,d=l.newObject,y=l.putStream;if(h.metadata instanceof n.API.TTFFont&&h.encoding==="Identity-H"){for(var w=h.metadata.Unicode.widths,P=h.metadata.subset.encode(h.metadata.glyIdsUsed,1),g="",N=0;N<P.length;N++)g+=String.fromCharCode(P[N]);var A=d();y({data:g,addLength1:!0,objectId:A}),f("endobj");var T=d();y({data:i(h.metadata.toUnicode),addLength1:!0,objectId:T}),f("endobj");var L=d();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Ps(h.fontName)),f("/FontFile2 "+A+" 0 R"),f("/FontBBox "+n.API.PDFObject.convert(h.metadata.bbox)),f("/Flags "+h.metadata.flags),f("/StemV "+h.metadata.stemV),f("/ItalicAngle "+h.metadata.italicAngle),f("/Ascent "+h.metadata.ascender),f("/Descent "+h.metadata.decender),f("/CapHeight "+h.metadata.capHeight),f(">>"),f("endobj");var F=d();f("<<"),f("/Type /Font"),f("/BaseFont /"+Ps(h.fontName)),f("/FontDescriptor "+L+" 0 R"),f("/W "+n.API.PDFObject.convert(w)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+h.encoding+")"),f(">>"),f(">>"),f("endobj"),h.objectNumber=d(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+T+" 0 R"),f("/BaseFont /"+Ps(h.fontName)),f("/Encoding /"+h.encoding),f("/DescendantFonts ["+F+" 0 R]"),f(">>"),f("endobj"),h.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(l){var h=l.font,f=l.out,d=l.newObject,y=l.putStream;if(h.metadata instanceof n.API.TTFFont&&h.encoding==="WinAnsiEncoding"){for(var w=h.metadata.rawData,P="",g=0;g<w.length;g++)P+=String.fromCharCode(w[g]);var N=d();y({data:P,addLength1:!0,objectId:N}),f("endobj");var A=d();y({data:i(h.metadata.toUnicode),addLength1:!0,objectId:A}),f("endobj");var T=d();f("<<"),f("/Descent "+h.metadata.decender),f("/CapHeight "+h.metadata.capHeight),f("/StemV "+h.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+N+" 0 R"),f("/Flags 96"),f("/FontBBox "+n.API.PDFObject.convert(h.metadata.bbox)),f("/FontName /"+Ps(h.fontName)),f("/ItalicAngle "+h.metadata.italicAngle),f("/Ascent "+h.metadata.ascender),f(">>"),f("endobj"),h.objectNumber=d();for(var L=0;L<h.metadata.hmtx.widths.length;L++)h.metadata.hmtx.widths[L]=parseInt(h.metadata.hmtx.widths[L]*(1e3/h.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+Ps(h.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+h.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(h.metadata.hmtx.widths)+">>"),f("endobj"),h.isAlreadyPutted=!0}})(a)}]);var s=function(a){var l,h=a.text||"",f=a.x,d=a.y,y=a.options||{},w=a.mutex||{},P=w.pdfEscape,g=w.activeFontKey,N=w.fonts,A=g,T="",L=0,F="",Y=N[A].encoding;if(N[A].encoding!=="Identity-H")return{text:h,x:f,y:d,options:y,mutex:w};for(F=h,A=g,Array.isArray(h)&&(F=h[0]),L=0;L<F.length;L+=1)N[A].metadata.hasOwnProperty("cmap")&&(l=N[A].metadata.cmap.unicode.codeMap[F[L].charCodeAt(0)]),l||F[L].charCodeAt(0)<256&&N[A].metadata.hasOwnProperty("Unicode")?T+=F[L]:T+="";var it="";return parseInt(A.slice(1))<14||Y==="WinAnsiEncoding"?it=P(T,A).split("").map(function($){return $.charCodeAt(0).toString(16)}).join(""):Y==="Identity-H"&&(it=e(T,N[A])),w.isHex=!0,{text:it,x:f,y:d,options:y,mutex:w}};t.events.push(["postProcessText",function(a){var l=a.text||"",h=[],f={text:l,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(l)){var d=0;for(d=0;d<l.length;d+=1)Array.isArray(l[d])&&l[d].length===3?h.push([s(Object.assign({},f,{text:l[d][0]})).text,l[d][1],l[d][2]]):h.push(s(Object.assign({},f,{text:l[d]})).text);a.text=h}else a.text=s(Object.assign({},f,{text:l})).text}])}(ne),function(n){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},n.addFileToVFS=function(e,i){return t.call(this),this.internal.vFS[e]=i,this},n.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(ne.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var s,a,l,h,f,d,y,w=t,P=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],L=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),F=!1,Y=0;this.__bidiEngine__={};var it=function(q){var R=q.charCodeAt(),Z=R>>8,G=A[Z];return G!==void 0?w[256*G+(255&R)]:Z===252||Z===253?"AL":L.test(Z)?"L":Z===8?"R":"N"},$=function(q){for(var R,Z=0;Z<q.length;Z++){if((R=it(q.charAt(Z)))==="L")return!1;if(R==="R")return!0}return!1},vt=function(q,R,Z,G){var bt,gt,St,ut,wt=R[G];switch(wt){case"L":case"R":F=!1;break;case"N":case"AN":break;case"EN":F&&(wt="AN");break;case"AL":F=!0,wt="R";break;case"WS":wt="N";break;case"CS":G<1||G+1>=R.length||(bt=Z[G-1])!=="EN"&&bt!=="AN"||(gt=R[G+1])!=="EN"&&gt!=="AN"?wt="N":F&&(gt="AN"),wt=gt===bt?gt:"N";break;case"ES":wt=(bt=G>0?Z[G-1]:"B")==="EN"&&G+1<R.length&&R[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&Z[G-1]==="EN"){wt="EN";break}if(F){wt="N";break}for(St=G+1,ut=R.length;St<ut&&R[St]==="ET";)St++;wt=St<ut&&R[St]==="EN"?"EN":"N";break;case"NSM":if(l&&!h){for(ut=R.length,St=G+1;St<ut&&R[St]==="NSM";)St++;if(St<ut){var Pt=q[G],Yt=Pt>=1425&&Pt<=2303||Pt===64286;if(bt=R[St],Yt&&(bt==="R"||bt==="AL")){wt="R";break}}}wt=G<1||(bt=R[G-1])==="B"?"N":Z[G-1];break;case"B":F=!1,s=!0,wt=Y;break;case"S":a=!0,wt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":F=!1;break;case"BN":wt="N"}return wt},ot=function(q,R,Z){var G=q.split("");return Z&&J(G,Z,{hiLevel:Y}),G.reverse(),R&&R.reverse(),G.join("")},J=function(q,R,Z){var G,bt,gt,St,ut,wt=-1,Pt=q.length,Yt=0,M=[],X=Y?g:P,U=[];for(F=!1,s=!1,a=!1,bt=0;bt<Pt;bt++)U[bt]=it(q[bt]);for(gt=0;gt<Pt;gt++){if(ut=Yt,M[gt]=vt(q,U,M,gt),G=240&(Yt=X[ut][N[M[gt]]]),Yt&=15,R[gt]=St=X[Yt][5],G>0)if(G===16){for(bt=wt;bt<gt;bt++)R[bt]=1;wt=-1}else wt=-1;if(X[Yt][6])wt===-1&&(wt=gt);else if(wt>-1){for(bt=wt;bt<gt;bt++)R[bt]=St;wt=-1}U[gt]==="B"&&(R[gt]=0),Z.hiLevel|=St}a&&function(Q,nt,pt){for(var dt=0;dt<pt;dt++)if(Q[dt]==="S"){nt[dt]=Y;for(var mt=dt-1;mt>=0&&Q[mt]==="WS";mt--)nt[mt]=Y}}(U,R,Pt)},lt=function(q,R,Z,G,bt){if(!(bt.hiLevel<q)){if(q===1&&Y===1&&!s)return R.reverse(),void(Z&&Z.reverse());for(var gt,St,ut,wt,Pt=R.length,Yt=0;Yt<Pt;){if(G[Yt]>=q){for(ut=Yt+1;ut<Pt&&G[ut]>=q;)ut++;for(wt=Yt,St=ut-1;wt<St;wt++,St--)gt=R[wt],R[wt]=R[St],R[St]=gt,Z&&(gt=Z[wt],Z[wt]=Z[St],Z[St]=gt);Yt=ut}Yt++}}},yt=function(q,R,Z){var G=q.split(""),bt={hiLevel:Y};return Z||(Z=[]),J(G,Z,bt),function(gt,St,ut){if(ut.hiLevel!==0&&y)for(var wt,Pt=0;Pt<gt.length;Pt++)St[Pt]===1&&(wt=T.indexOf(gt[Pt]))>=0&&(gt[Pt]=T[wt+1])}(G,Z,bt),lt(2,G,R,Z,bt),lt(1,G,R,Z,bt),G.join("")};return this.__bidiEngine__.doBidiReorder=function(q,R,Z){if(function(bt,gt){if(gt)for(var St=0;St<bt.length;St++)gt[St]=St;h===void 0&&(h=$(bt)),d===void 0&&(d=$(bt))}(q,R),l||!f||d)if(l&&f&&h^d)Y=h?1:0,q=ot(q,R,Z);else if(!l&&f&&d)Y=h?1:0,q=yt(q,R,Z),q=ot(q,R);else if(!l||h||f||d){if(l&&!f&&h^d)q=ot(q,R),h?(Y=0,q=yt(q,R,Z)):(Y=1,q=yt(q,R,Z),q=ot(q,R));else if(l&&h&&!f&&d)Y=1,q=yt(q,R,Z),q=ot(q,R);else if(!l&&!f&&h^d){var G=y;h?(Y=1,q=yt(q,R,Z),Y=0,y=!1,q=yt(q,R,Z),y=G):(Y=0,q=yt(q,R,Z),q=ot(q,R),Y=1,y=!1,q=yt(q,R,Z),y=G,q=ot(q,R))}}else Y=0,q=yt(q,R,Z);else Y=h?1:0,q=yt(q,R,Z);return q},this.__bidiEngine__.setOptions=function(q){q&&(l=q.isInputVisual,f=q.isOutputVisual,h=q.isInputRtl,d=q.isOutputRtl,y=q.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var s=i.text;i.x,i.y;var a=i.options||{};i.mutex,a.lang;var l=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,e.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var h=0;for(l=[],h=0;h<s.length;h+=1)Object.prototype.toString.call(s[h])==="[object Array]"?l.push([e.doBidiReorder(s[h][0]),s[h][1],s[h][2]]):l.push([e.doBidiReorder(s[h])]);i.text=l}else i.text=e.doBidiReorder(s);e.setOptions({isInputVisual:!0})}])}(ne),ne.API.TTFFont=function(){function n(t){var e;if(this.rawData=t,e=this.contents=new _n(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new op(this),this.registerTTF()}return n.open=function(t){return new n(t)},n.prototype.parse=function(){return this.directory=new Vc(this.contents),this.head=new $c(this),this.name=new tp(this),this.cmap=new Oh(this),this.toUnicode={},this.hhea=new Jc(this),this.maxp=new ep(this),this.hmtx=new rp(this),this.post=new Kc(this),this.os2=new Zc(this),this.loca=new ap(this),this.glyf=new ip(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,e,i,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,h,f,d;for(d=[],l=0,h=(f=this.bbox).length;l<h;l++)t=f[l],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(i=255&(s=this.post.italic_angle),(32768&(e=s>>16))!=0&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},n.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},n.prototype.widthOfString=function(t,e,i){var s,a,l,h;for(l=0,a=0,h=(t=""+t).length;0<=h?a<h:a>h;a=0<=h?++a:--a)s=t.charCodeAt(a),l+=this.widthOfGlyph(this.characterToGlyph(s))+i*(1e3/e)||0;return l*(e/1e3)},n.prototype.lineHeight=function(t,e){var i;return e==null&&(e=!1),i=e?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},n}();var _i,_n=function(){function n(t){this.data=t??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(t){return this.data[this.pos++]=t},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},n.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},n.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},n.prototype.readString=function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)i[e]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(t){var e,i,s;for(s=[],e=0,i=t.length;0<=i?e<i:e>i;e=0<=i?++e:--e)s.push(this.writeByte(t.charCodeAt(e)));return s},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(t){return this.writeInt16(t)},n.prototype.readLongLong=function(){var t,e,i,s,a,l,h,f;return t=this.readByte(),e=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),h=this.readByte(),f=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^i)+4294967296*(255^s)+16777216*(255^a)+65536*(255^l)+256*(255^h)+(255^f)+1):72057594037927940*t+281474976710656*e+1099511627776*i+4294967296*s+16777216*a+65536*l+256*h+f},n.prototype.writeLongLong=function(t){var e,i;return e=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(t){return this.writeInt32(t)},n.prototype.read=function(t){var e,i;for(e=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)e.push(this.readByte());return e},n.prototype.write=function(t){var e,i,s,a;for(a=[],i=0,s=t.length;i<s;i++)e=t[i],a.push(this.writeByte(e));return a},n}(),Vc=function(){var n;function t(e){var i,s,a;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)i={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(e){var i,s,a,l,h,f,d,y,w,P,g,N,A;for(A in g=Object.keys(e).length,f=Math.log(2),w=16*Math.floor(Math.log(g)/f),l=Math.floor(w/f),y=16*g-w,(s=new _n).writeInt(this.scalarType),s.writeShort(g),s.writeShort(w),s.writeShort(l),s.writeShort(y),a=16*g,d=s.pos+a,h=null,N=[],e)for(P=e[A],s.writeString(A),s.writeInt(n(P)),s.writeInt(d),s.writeInt(P.length),N=N.concat(P),A==="head"&&(h=d),d+=P.length;d%4;)N.push(0),d++;return s.write(N),i=2981146554-n(s.data),s.pos=h+8,s.writeUInt32(i),s.data},n=function(e){var i,s,a,l;for(e=Bh.call(e);e.length%4;)e.push(0);for(a=new _n(e),s=0,i=0,l=e.length;i<l;i=i+=4)s+=a.readUInt32();return 4294967295&s},t}(),Gc={}.hasOwnProperty,Bi=function(n,t){for(var e in t)Gc.call(t,e)&&(n[e]=t[e]);function i(){this.constructor=n}return i.prototype=t.prototype,n.prototype=new i,n.__super__=t.prototype,n};_i=function(){function n(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var $c=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Bi(t,_i),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var i;return(i=new _n).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(e),i.writeShort(this.glyphDataFormat),i.data},t}(),Wu=function(){function n(t,e){var i,s,a,l,h,f,d,y,w,P,g,N,A,T,L,F,Y;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),w=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=t.readByte();break;case 4:for(g=t.readUInt16(),P=g/2,t.pos+=6,a=function(){var it,$;for($=[],f=it=0;0<=P?it<P:it>P;f=0<=P?++it:--it)$.push(t.readUInt16());return $}(),t.pos+=2,A=function(){var it,$;for($=[],f=it=0;0<=P?it<P:it>P;f=0<=P?++it:--it)$.push(t.readUInt16());return $}(),d=function(){var it,$;for($=[],f=it=0;0<=P?it<P:it>P;f=0<=P?++it:--it)$.push(t.readUInt16());return $}(),y=function(){var it,$;for($=[],f=it=0;0<=P?it<P:it>P;f=0<=P?++it:--it)$.push(t.readUInt16());return $}(),s=(this.length-t.pos+this.offset)/2,h=function(){var it,$;for($=[],f=it=0;0<=s?it<s:it>s;f=0<=s?++it:--it)$.push(t.readUInt16());return $}(),f=L=0,Y=a.length;L<Y;f=++L)for(T=a[f],i=F=N=A[f];N<=T?F<=T:F>=T;i=N<=T?++F:--F)y[f]===0?l=i+d[f]:(l=h[y[f]/2+(i-N)-(P-f)]||0)!==0&&(l+=d[f]),this.codeMap[i]=65535&l}t.pos=w}return n.encode=function(t,e){var i,s,a,l,h,f,d,y,w,P,g,N,A,T,L,F,Y,it,$,vt,ot,J,lt,yt,q,R,Z,G,bt,gt,St,ut,wt,Pt,Yt,M,X,U,Q,nt,pt,dt,mt,Et,Bt,zt;switch(G=new _n,l=Object.keys(t).sort(function(jt,se){return jt-se}),e){case"macroman":for(A=0,T=function(){var jt=[];for(N=0;N<256;++N)jt.push(0);return jt}(),F={0:0},a={},bt=0,wt=l.length;bt<wt;bt++)F[mt=t[s=l[bt]]]==null&&(F[mt]=++A),a[s]={old:t[s],new:F[t[s]]},T[s]=F[t[s]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(T),{charMap:a,subtable:G.data,maxGlyphID:A+1};case"unicode":for(R=[],w=[],Y=0,F={},i={},L=d=null,gt=0,Pt=l.length;gt<Pt;gt++)F[$=t[s=l[gt]]]==null&&(F[$]=++Y),i[s]={old:$,new:F[$]},h=F[$]-s,L!=null&&h===d||(L&&w.push(L),R.push(s),d=h),L=s;for(L&&w.push(L),w.push(65535),R.push(65535),yt=2*(lt=R.length),J=2*Math.pow(Math.log(lt)/Math.LN2,2),P=Math.log(J/2)/Math.LN2,ot=2*lt-J,f=[],vt=[],g=[],N=St=0,Yt=R.length;St<Yt;N=++St){if(q=R[N],y=w[N],q===65535){f.push(0),vt.push(0);break}if(q-(Z=i[q].new)>=32768)for(f.push(0),vt.push(2*(g.length+lt-N)),s=ut=q;q<=y?ut<=y:ut>=y;s=q<=y?++ut:--ut)g.push(i[s].new);else f.push(Z-q),vt.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*lt+2*g.length),G.writeUInt16(0),G.writeUInt16(yt),G.writeUInt16(J),G.writeUInt16(P),G.writeUInt16(ot),pt=0,M=w.length;pt<M;pt++)s=w[pt],G.writeUInt16(s);for(G.writeUInt16(0),dt=0,X=R.length;dt<X;dt++)s=R[dt],G.writeUInt16(s);for(Et=0,U=f.length;Et<U;Et++)h=f[Et],G.writeUInt16(h);for(Bt=0,Q=vt.length;Bt<Q;Bt++)it=vt[Bt],G.writeUInt16(it);for(zt=0,nt=g.length;zt<nt;zt++)A=g[zt],G.writeUInt16(A);return{charMap:i,subtable:G.data,maxGlyphID:Y+1}}},n}(),Oh=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Bi(t,_i),t.prototype.tag="cmap",t.prototype.parse=function(e){var i,s,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)i=new Wu(e,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(e,i){var s,a;return i==null&&(i="macroman"),s=Wu.encode(e,i),(a=new _n).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},t}(),Jc=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Bi(t,_i),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),Zc=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Bi(t,_i),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var i,s;for(s=[],i=0;i<10;++i)s.push(e.readByte());return s}(),this.charRange=function(){var i,s;for(s=[],i=0;i<4;++i)s.push(e.readInt());return s}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var i,s;for(s=[],i=0;i<2;i=++i)s.push(e.readInt());return s}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),Kc=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Bi(t,_i),t.prototype.tag="post",t.prototype.parse=function(e){var i,s,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var l;for(s=e.readUInt16(),this.glyphNameIndex=[],l=0;0<=s?l<s:l>s;l=0<=s?++l:--l)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)i=e.readByte(),a.push(this.names.push(e.readString(i)));return a;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 196608:break;case 262144:return this.map=(function(){var h,f,d;for(d=[],l=h=0,f=this.file.maxp.numGlyphs;0<=f?h<f:h>f;l=0<=f?++h:--h)d.push(e.readUInt32());return d}).call(this)}},t}(),Qc=function(n,t){this.raw=n,this.length=n.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},tp=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Bi(t,_i),t.prototype.tag="name",t.prototype.parse=function(e){var i,s,a,l,h,f,d,y,w,P,g;for(e.pos=this.offset,e.readShort(),i=e.readShort(),f=e.readShort(),s=[],l=0;0<=i?l<i:l>i;l=0<=i?++l:--l)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+f+e.readShort()});for(d={},l=w=0,P=s.length;w<P;l=++w)a=s[l],e.pos=a.offset,y=e.readString(a.length),h=new Qc(y,a),d[g=a.nameID]==null&&(d[g]=[]),d[a.nameID].push(h);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),ep=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Bi(t,_i),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),rp=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Bi(t,_i),t.prototype.tag="hmtx",t.prototype.parse=function(e){var i,s,a,l,h,f,d;for(e.pos=this.offset,this.metrics=[],i=0,f=this.file.hhea.numberOfMetrics;0<=f?i<f:i>f;i=0<=f?++i:--i)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var y,w;for(w=[],i=y=0;0<=a?y<a:y>a;i=0<=a?++y:--y)w.push(e.readInt16());return w}(),this.widths=(function(){var y,w,P,g;for(g=[],y=0,w=(P=this.metrics).length;y<w;y++)l=P[y],g.push(l.advance);return g}).call(this),s=this.widths[this.widths.length-1],d=[],i=h=0;0<=a?h<a:h>a;i=0<=a?++h:--h)d.push(this.widths.push(s));return d},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),Bh=[].slice,ip=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Bi(t,_i),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var i,s,a,l,h,f,d,y,w,P;return e in this.cache?this.cache[e]:(l=this.file.loca,i=this.file.contents,s=l.indexOf(e),(a=l.lengthOf(e))===0?this.cache[e]=null:(i.pos=this.offset+s,h=(f=new _n(i.read(a))).readShort(),y=f.readShort(),P=f.readShort(),d=f.readShort(),w=f.readShort(),this.cache[e]=h===-1?new sp(f,y,P,d,w):new np(f,h,y,P,d,w),this.cache[e]))},t.prototype.encode=function(e,i,s){var a,l,h,f,d;for(h=[],l=[],f=0,d=i.length;f<d;f++)a=e[i[f]],l.push(h.length),a&&(h=h.concat(a.encode(s)));return l.push(h.length),{table:h,offsets:l}},t}(),np=function(){function n(t,e,i,s,a,l){this.raw=t,this.numberOfContours=e,this.xMin=i,this.yMin=s,this.xMax=a,this.yMax=l,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),sp=function(){function n(t,e,i,s,a){var l,h;for(this.raw=t,this.xMin=e,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;h=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&h;)l.pos+=1&h?4:2,128&h?l.pos+=8:64&h?l.pos+=4:8&h&&(l.pos+=2)}return n.prototype.encode=function(){var t,e,i;for(e=new _n(Bh.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)e.pos=this.glyphOffsets[t];return e.data},n}(),ap=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Bi(t,_i),t.prototype.tag="loca",t.prototype.parse=function(e){var i,s;return e.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var a,l;for(l=[],s=0,a=this.length;s<a;s+=2)l.push(2*e.readUInt16());return l}).call(this):(function(){var a,l;for(l=[],s=0,a=this.length;s<a;s+=4)l.push(e.readUInt32());return l}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,i){for(var s=new Uint32Array(this.offsets.length),a=0,l=0,h=0;h<s.length;++h)if(s[h]=a,l<i.length&&i[l]==h){++l,s[h]=a;var f=this.offsets[h],d=this.offsets[h+1]-f;d>0&&(a+=d)}for(var y=new Array(4*s.length),w=0;w<s.length;++w)y[4*w+3]=255&s[w],y[4*w+2]=(65280&s[w])>>8,y[4*w+1]=(16711680&s[w])>>16,y[4*w]=(4278190080&s[w])>>24;return y},t}(),op=function(){function n(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var t,e,i,s,a;for(e in s=this.font.cmap.tables[0].codeMap,t={},a=this.subset)i=a[e],t[e]=s[i];return t},n.prototype.glyphsFor=function(t){var e,i,s,a,l,h,f;for(s={},l=0,h=t.length;l<h;l++)s[a=t[l]]=this.font.glyf.glyphFor(a);for(a in e=[],s)(i=s[a])!=null&&i.compound&&e.push.apply(e,i.glyphIDs);if(e.length>0)for(a in f=this.glyphsFor(e))i=f[a],s[a]=i;return s},n.prototype.encode=function(t,e){var i,s,a,l,h,f,d,y,w,P,g,N,A,T,L;for(s in i=Oh.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),g={0:0},L=i.charMap)g[(f=L[s]).old]=f.new;for(N in P=i.maxGlyphID,l)N in g||(g[N]=P++);return y=function(F){var Y,it;for(Y in it={},F)it[F[Y]]=Y;return it}(g),w=Object.keys(y).sort(function(F,Y){return F-Y}),A=function(){var F,Y,it;for(it=[],F=0,Y=w.length;F<Y;F++)h=w[F],it.push(y[h]);return it}(),a=this.font.glyf.encode(l,A,g),d=this.font.loca.encode(a.offsets,A),T={cmap:this.font.cmap.raw(),glyf:a.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},n}();ne.API.PDFObject=function(){var n;function t(){}return n=function(e,i){return(Array(i+1).join("0")+e).slice(-i)},t.convert=function(e){var i,s,a,l;if(Array.isArray(e))return"["+function(){var h,f,d;for(d=[],h=0,f=e.length;h<f;h++)i=e[h],d.push(t.convert(i));return d}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e?.isString)return"("+e+")";if(e instanceof Date)return"(D:"+n(e.getUTCFullYear(),4)+n(e.getUTCMonth(),2)+n(e.getUTCDate(),2)+n(e.getUTCHours(),2)+n(e.getUTCMinutes(),2)+n(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(s in a=["<<"],e)l=e[s],a.push("/"+s+" "+t.convert(l));return a.push(">>"),a.join(`
`)}return""+e},t}();/*! https://mths.be/cssesc v3.0.0 by @mathias */var al,Hu;function lp(){if(Hu)return al;Hu=1;var n={},t=n.hasOwnProperty,e=function(f,d){if(!f)return d;var y={};for(var w in d)y[w]=t.call(f,w)?f[w]:d[w];return y},i=/[ -,\.\/:-@\[-\^`\{-~]/,s=/[ -,\.\/:-@\[\]\^`\{-~]/,a=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,l=function h(f,d){d=e(d,h.options),d.quotes!="single"&&d.quotes!="double"&&(d.quotes="single");for(var y=d.quotes=="double"?'"':"'",w=d.isIdentifier,P=f.charAt(0),g="",N=0,A=f.length;N<A;){var T=f.charAt(N++),L=T.charCodeAt(),F=void 0;if(L<32||L>126){if(L>=55296&&L<=56319&&N<A){var Y=f.charCodeAt(N++);(Y&64512)==56320?L=((L&1023)<<10)+(Y&1023)+65536:N--}F="\\"+L.toString(16).toUpperCase()+" "}else d.escapeEverything?i.test(T)?F="\\"+T:F="\\"+L.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(T)?F="\\"+L.toString(16).toUpperCase()+" ":T=="\\"||!w&&(T=='"'&&y==T||T=="'"&&y==T)||w&&s.test(T)?F="\\"+T:F=T;g+=F}return w&&(/^-[-\d]/.test(g)?g="\\-"+g.slice(1):/\d/.test(P)&&(g="\\3"+P+" "+g.slice(1))),g=g.replace(a,function(it,$,vt){return $&&$.length%2?it:($||"")+vt}),!w&&d.wrap?y+g+y:g};return l.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},l.version="3.0.0",al=l,al}var up=lp();const Dh=vo(up);var ol,Vu;function hp(){if(Vu)return ol;Vu=1;var n=0,t=1,e=2,i=3,s=4,a=5,l=6,h=/[a-z0-9_-]/i,f=/[\s\t]/,d=function(P){for(var g=!0,N=n,A="",T=0,L,F,Y=[];;){if(F=P[T],N===n){if(!F&&g)break;if(!F&&!g)throw new Error("Parse error");if(F==='"'||F==="'")L=F,N=t,g=!1;else if(!f.test(F))if(h.test(F))N=i,g=!1,T--;else throw new Error("Parse error")}else if(N===t)if(F)F==="\\"?N=e:F===L?(Y.push(A),A="",N=s):A+=F;else throw new Error("Parse Error");else if(N===e)if(F===L||F==="\\")A+=F,N=t;else throw new Error("Parse error");else if(N===i)if(F)h.test(F)?A+=F:F===","?(Y.push(A),A="",N=n):f.test(F)?N=a:F==="\\"&&(N=l);else{Y.push(A);break}else if(N===l){if(/[0-9a-f]/i.test(F))throw new Error("Parse error");A+=F,N=i}else if(N===a)if(F){if(h.test(F))A+=" "+F,N=i;else if(F===",")Y.push(A),A="",N=n;else if(!f.test(F))throw new Error("Parse error")}else{Y.push(A);break}else if(N===s)if(F){if(F===",")N=n;else if(!f.test(F))throw new Error("Parse error")}else break;T++}return Y},y=/[^a-z0-9_-]/i,w=function(P,g){var N=g&&g.quote||'"';if(N!=='"'&&N!=="'")throw new Error("Quote must be `'` or `\"`");for(var A=new RegExp(N,"g"),T=[],L=0;L<P.length;++L){var F=P[L];y.test(F)&&(F=F.replace(/\\/g,"\\\\").replace(A,"\\"+N),F=N+F+N),T.push(F)}return T.join(", ")};return ol={parse:d,stringify:w},ol}var fp=hp();const cp=vo(fp);var ll,Gu;function pp(){if(Gu)return ll;Gu=1;var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},t=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function e(g){return g===10||g===13||g===8232||g===8233||g===32||g===9||g===11||g===12||g===160||g>=5760&&t.indexOf(g)>=0}function i(g){switch(g|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function s(g){return(g|32)===97}function a(g){return g>=48&&g<=57}function l(g){return g>=48&&g<=57||g===43||g===45||g===46}function h(g){this.index=0,this.path=g,this.max=g.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function f(g){for(;g.index<g.max&&e(g.path.charCodeAt(g.index));)g.index++}function d(g){var N=g.path.charCodeAt(g.index);if(N===48){g.param=0,g.index++;return}if(N===49){g.param=1,g.index++;return}g.err="SvgPath: arc flag can be 0 or 1 only (at pos "+g.index+")"}function y(g){var N=g.index,A=N,T=g.max,L=!1,F=!1,Y=!1,it=!1,$;if(A>=T){g.err="SvgPath: missed param (at pos "+A+")";return}if($=g.path.charCodeAt(A),($===43||$===45)&&(A++,$=A<T?g.path.charCodeAt(A):0),!a($)&&$!==46){g.err="SvgPath: param should start with 0..9 or `.` (at pos "+A+")";return}if($!==46){if(L=$===48,A++,$=A<T?g.path.charCodeAt(A):0,L&&A<T&&$&&a($)){g.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+N+")";return}for(;A<T&&a(g.path.charCodeAt(A));)A++,F=!0;$=A<T?g.path.charCodeAt(A):0}if($===46){for(it=!0,A++;a(g.path.charCodeAt(A));)A++,Y=!0;$=A<T?g.path.charCodeAt(A):0}if($===101||$===69){if(it&&!F&&!Y){g.err="SvgPath: invalid float exponent (at pos "+A+")";return}if(A++,$=A<T?g.path.charCodeAt(A):0,($===43||$===45)&&A++,A<T&&a(g.path.charCodeAt(A)))for(;A<T&&a(g.path.charCodeAt(A));)A++;else{g.err="SvgPath: invalid float exponent (at pos "+A+")";return}}g.index=A,g.param=parseFloat(g.path.slice(N,A))+0}function w(g){var N,A;N=g.path[g.segmentStart],A=N.toLowerCase();var T=g.data;if(A==="m"&&T.length>2&&(g.result.push([N,T[0],T[1]]),T=T.slice(2),A="l",N=N==="m"?"l":"L"),A==="r")g.result.push([N].concat(T));else for(;T.length>=n[A]&&(g.result.push([N].concat(T.splice(0,n[A]))),!!n[A]););}function P(g){var N=g.max,A,T,L,F,Y;if(g.segmentStart=g.index,A=g.path.charCodeAt(g.index),T=s(A),!i(A)){g.err="SvgPath: bad command "+g.path[g.index]+" (at pos "+g.index+")";return}if(F=n[g.path[g.index].toLowerCase()],g.index++,f(g),g.data=[],!F){w(g);return}for(L=!1;;){for(Y=F;Y>0;Y--){if(T&&(Y===3||Y===4)?d(g):y(g),g.err.length){w(g);return}g.data.push(g.param),f(g),L=!1,g.index<N&&g.path.charCodeAt(g.index)===44&&(g.index++,f(g),L=!0)}if(!L&&(g.index>=g.max||!l(g.path.charCodeAt(g.index))))break}w(g)}return ll=function(N){var A=new h(N),T=A.max;for(f(A);A.index<T&&!A.err.length;)P(A);return A.result.length&&("mM".indexOf(A.result[0][0])<0?(A.err="SvgPath: string should start with `M` or `m`",A.result=[]):A.result[0][0]="M"),{err:A.err,segments:A.result}},ll}var ul,$u;function qh(){if($u)return ul;$u=1;function n(e,i){return[e[0]*i[0]+e[2]*i[1],e[1]*i[0]+e[3]*i[1],e[0]*i[2]+e[2]*i[3],e[1]*i[2]+e[3]*i[3],e[0]*i[4]+e[2]*i[5]+e[4],e[1]*i[4]+e[3]*i[5]+e[5]]}function t(){if(!(this instanceof t))return new t;this.queue=[],this.cache=null}return t.prototype.matrix=function(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1&&e[4]===0&&e[5]===0?this:(this.cache=null,this.queue.push(e),this)},t.prototype.translate=function(e,i){return(e!==0||i!==0)&&(this.cache=null,this.queue.push([1,0,0,1,e,i])),this},t.prototype.scale=function(e,i){return(e!==1||i!==1)&&(this.cache=null,this.queue.push([e,0,0,i,0,0])),this},t.prototype.rotate=function(e,i,s){var a,l,h;return e!==0&&(this.translate(i,s),a=e*Math.PI/180,l=Math.cos(a),h=Math.sin(a),this.queue.push([l,h,-h,l,0,0]),this.cache=null,this.translate(-i,-s)),this},t.prototype.skewX=function(e){return e!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(e*Math.PI/180),1,0,0])),this},t.prototype.skewY=function(e){return e!==0&&(this.cache=null,this.queue.push([1,Math.tan(e*Math.PI/180),0,1,0,0])),this},t.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var e=1;e<this.queue.length;e++)this.cache=n(this.cache,this.queue[e]);return this.cache},t.prototype.calc=function(e,i,s){var a;return this.queue.length?(this.cache||(this.cache=this.toArray()),a=this.cache,[e*a[0]+i*a[2]+(s?0:a[4]),e*a[1]+i*a[3]+(s?0:a[5])]):[e,i]},ul=t,ul}var hl,Ju;function dp(){if(Ju)return hl;Ju=1;var n=qh(),t={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},e=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,i=/[\s,]+/;return hl=function(a){var l=new n,h,f;return a.split(e).forEach(function(d){if(d.length){if(typeof t[d]<"u"){h=d;return}switch(f=d.split(i).map(function(y){return+y||0}),h){case"matrix":f.length===6&&l.matrix(f);return;case"scale":f.length===1?l.scale(f[0],f[0]):f.length===2&&l.scale(f[0],f[1]);return;case"rotate":f.length===1?l.rotate(f[0],0,0):f.length===3&&l.rotate(f[0],f[1],f[2]);return;case"translate":f.length===1?l.translate(f[0],0):f.length===2&&l.translate(f[0],f[1]);return;case"skewX":f.length===1&&l.skewX(f[0]);return;case"skewY":f.length===1&&l.skewY(f[0]);return}}}),l},hl}var fl,Zu;function mp(){if(Zu)return fl;Zu=1;var n=Math.PI*2;function t(s,a,l,h){var f=s*h-a*l<0?-1:1,d=s*l+a*h;return d>1&&(d=1),d<-1&&(d=-1),f*Math.acos(d)}function e(s,a,l,h,f,d,y,w,P,g){var N=g*(s-l)/2+P*(a-h)/2,A=-P*(s-l)/2+g*(a-h)/2,T=y*y,L=w*w,F=N*N,Y=A*A,it=T*L-T*Y-L*F;it<0&&(it=0),it/=T*Y+L*F,it=Math.sqrt(it)*(f===d?-1:1);var $=it*y/w*A,vt=it*-w/y*N,ot=g*$-P*vt+(s+l)/2,J=P*$+g*vt+(a+h)/2,lt=(N-$)/y,yt=(A-vt)/w,q=(-N-$)/y,R=(-A-vt)/w,Z=t(1,0,lt,yt),G=t(lt,yt,q,R);return d===0&&G>0&&(G-=n),d===1&&G<0&&(G+=n),[ot,J,Z,G]}function i(s,a){var l=1.3333333333333333*Math.tan(a/4),h=Math.cos(s),f=Math.sin(s),d=Math.cos(s+a),y=Math.sin(s+a);return[h,f,h-f*l,f+h*l,d+y*l,y-d*l,d,y]}return fl=function(a,l,h,f,d,y,w,P,g){var N=Math.sin(g*n/360),A=Math.cos(g*n/360),T=A*(a-h)/2+N*(l-f)/2,L=-N*(a-h)/2+A*(l-f)/2;if(T===0&&L===0)return[];if(w===0||P===0)return[];w=Math.abs(w),P=Math.abs(P);var F=T*T/(w*w)+L*L/(P*P);F>1&&(w*=Math.sqrt(F),P*=Math.sqrt(F));var Y=e(a,l,h,f,d,y,w,P,N,A),it=[],$=Y[2],vt=Y[3],ot=Math.max(Math.ceil(Math.abs(vt)/(n/4)),1);vt/=ot;for(var J=0;J<ot;J++)it.push(i($,vt)),$+=vt;return it.map(function(lt){for(var yt=0;yt<lt.length;yt+=2){var q=lt[yt+0],R=lt[yt+1];q*=w,R*=P;var Z=A*q-N*R,G=N*q+A*R;lt[yt+0]=Z+Y[0],lt[yt+1]=G+Y[1]}return lt})},fl}var cl,Ku;function gp(){if(Ku)return cl;Ku=1;var n=1e-10,t=Math.PI/180;function e(i,s,a){if(!(this instanceof e))return new e(i,s,a);this.rx=i,this.ry=s,this.ax=a}return e.prototype.transform=function(i){var s=Math.cos(this.ax*t),a=Math.sin(this.ax*t),l=[this.rx*(i[0]*s+i[2]*a),this.rx*(i[1]*s+i[3]*a),this.ry*(-i[0]*a+i[2]*s),this.ry*(-i[1]*a+i[3]*s)],h=l[0]*l[0]+l[2]*l[2],f=l[1]*l[1]+l[3]*l[3],d=((l[0]-l[3])*(l[0]-l[3])+(l[2]+l[1])*(l[2]+l[1]))*((l[0]+l[3])*(l[0]+l[3])+(l[2]-l[1])*(l[2]-l[1])),y=(h+f)/2;if(d<n*y)return this.rx=this.ry=Math.sqrt(y),this.ax=0,this;var w=l[0]*l[1]+l[2]*l[3];d=Math.sqrt(d);var P=y+d/2,g=y-d/2;return this.ax=Math.abs(w)<n&&Math.abs(P-f)<n?90:Math.atan(Math.abs(w)>Math.abs(P-f)?(P-h)/w:w/(P-f))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(P),this.ry=Math.sqrt(g)):(this.ax+=90,this.rx=Math.sqrt(g),this.ry=Math.sqrt(P)),this},e.prototype.isDegenerate=function(){return this.rx<n*this.ry||this.ry<n*this.rx},cl=e,cl}var pl,Qu;function vp(){if(Qu)return pl;Qu=1;var n=pp(),t=dp(),e=qh(),i=mp(),s=gp();function a(l){if(!(this instanceof a))return new a(l);var h=n(l);this.segments=h.segments,this.err=h.err,this.__stack=[]}return a.from=function(l){if(typeof l=="string")return new a(l);if(l instanceof a){var h=new a("");return h.err=l.err,h.segments=l.segments.map(function(f){return f.slice()}),h.__stack=l.__stack.map(function(f){return e().matrix(f.toArray())}),h}throw new Error("SvgPath.from: invalid param type "+l)},a.prototype.__matrix=function(l){var h=this,f;l.queue.length&&this.iterate(function(d,y,w,P){var g,N,A,T;switch(d[0]){case"v":g=l.calc(0,d[1],!0),N=g[0]===0?["v",g[1]]:["l",g[0],g[1]];break;case"V":g=l.calc(w,d[1],!1),N=g[0]===l.calc(w,P,!1)[0]?["V",g[1]]:["L",g[0],g[1]];break;case"h":g=l.calc(d[1],0,!0),N=g[1]===0?["h",g[0]]:["l",g[0],g[1]];break;case"H":g=l.calc(d[1],P,!1),N=g[1]===l.calc(w,P,!1)[1]?["H",g[0]]:["L",g[0],g[1]];break;case"a":case"A":var L=l.toArray(),F=s(d[1],d[2],d[3]).transform(L);if(L[0]*L[3]-L[1]*L[2]<0&&(d[5]=d[5]?"0":"1"),g=l.calc(d[6],d[7],d[0]==="a"),d[0]==="A"&&d[6]===w&&d[7]===P||d[0]==="a"&&d[6]===0&&d[7]===0){N=[d[0]==="a"?"l":"L",g[0],g[1]];break}F.isDegenerate()?N=[d[0]==="a"?"l":"L",g[0],g[1]]:N=[d[0],F.rx,F.ry,F.ax,d[4],d[5],g[0],g[1]];break;case"m":T=y>0,g=l.calc(d[1],d[2],T),N=["m",g[0],g[1]];break;default:for(A=d[0],N=[A],T=A.toLowerCase()===A,f=1;f<d.length;f+=2)g=l.calc(d[f],d[f+1],T),N.push(g[0],g[1])}h.segments[y]=N},!0)},a.prototype.__evaluateStack=function(){var l,h;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(l=e(),h=this.__stack.length;--h>=0;)l.matrix(this.__stack[h].toArray());this.__matrix(l),this.__stack=[]}},a.prototype.toString=function(){var l="",h="",f=!1;this.__evaluateStack();for(var d=0,y=this.segments.length;d<y;d++){var w=this.segments[d],P=w[0];P!==h||P==="m"||P==="M"?(P==="m"&&h==="z"&&(l+=" "),l+=P,f=!1):f=!0;for(var g=1;g<w.length;g++){var N=w[g];g===1?f&&N>=0&&(l+=" "):N>=0&&(l+=" "),l+=N}h=P}return l},a.prototype.translate=function(l,h){return this.__stack.push(e().translate(l,h||0)),this},a.prototype.scale=function(l,h){return this.__stack.push(e().scale(l,!h&&h!==0?l:h)),this},a.prototype.rotate=function(l,h,f){return this.__stack.push(e().rotate(l,h||0,f||0)),this},a.prototype.skewX=function(l){return this.__stack.push(e().skewX(l)),this},a.prototype.skewY=function(l){return this.__stack.push(e().skewY(l)),this},a.prototype.matrix=function(l){return this.__stack.push(e().matrix(l)),this},a.prototype.transform=function(l){return l.trim()?(this.__stack.push(t(l)),this):this},a.prototype.round=function(l){var h=0,f=0,d=0,y=0,w;return l=l||0,this.__evaluateStack(),this.segments.forEach(function(P){var g=P[0].toLowerCase()===P[0];switch(P[0]){case"H":case"h":g&&(P[1]+=d),d=P[1]-P[1].toFixed(l),P[1]=+P[1].toFixed(l);return;case"V":case"v":g&&(P[1]+=y),y=P[1]-P[1].toFixed(l),P[1]=+P[1].toFixed(l);return;case"Z":case"z":d=h,y=f;return;case"M":case"m":g&&(P[1]+=d,P[2]+=y),d=P[1]-P[1].toFixed(l),y=P[2]-P[2].toFixed(l),h=d,f=y,P[1]=+P[1].toFixed(l),P[2]=+P[2].toFixed(l);return;case"A":case"a":g&&(P[6]+=d,P[7]+=y),d=P[6]-P[6].toFixed(l),y=P[7]-P[7].toFixed(l),P[1]=+P[1].toFixed(l),P[2]=+P[2].toFixed(l),P[3]=+P[3].toFixed(l+2),P[6]=+P[6].toFixed(l),P[7]=+P[7].toFixed(l);return;default:w=P.length,g&&(P[w-2]+=d,P[w-1]+=y),d=P[w-2]-P[w-2].toFixed(l),y=P[w-1]-P[w-1].toFixed(l),P.forEach(function(N,A){A&&(P[A]=+P[A].toFixed(l))});return}}),this},a.prototype.iterate=function(l,h){var f=this.segments,d={},y=!1,w=0,P=0,g=0,N=0,A,T,L;if(h||this.__evaluateStack(),f.forEach(function(F,Y){var it=l(F,Y,w,P);Array.isArray(it)&&(d[Y]=it,y=!0);var $=F[0]===F[0].toLowerCase();switch(F[0]){case"m":case"M":w=F[1]+($?w:0),P=F[2]+($?P:0),g=w,N=P;return;case"h":case"H":w=F[1]+($?w:0);return;case"v":case"V":P=F[1]+($?P:0);return;case"z":case"Z":w=g,P=N;return;default:w=F[F.length-2]+($?w:0),P=F[F.length-1]+($?P:0)}}),!y)return this;for(L=[],A=0;A<f.length;A++)if(typeof d[A]<"u")for(T=0;T<d[A].length;T++)L.push(d[A][T]);else L.push(f[A]);return this.segments=L,this},a.prototype.abs=function(){return this.iterate(function(l,h,f,d){var y=l[0],w=y.toUpperCase(),P;if(y!==w)switch(l[0]=w,y){case"v":l[1]+=d;return;case"a":l[6]+=f,l[7]+=d;return;default:for(P=1;P<l.length;P++)l[P]+=P%2?f:d}},!0),this},a.prototype.rel=function(){return this.iterate(function(l,h,f,d){var y=l[0],w=y.toLowerCase(),P;if(y!==w&&!(h===0&&y==="M"))switch(l[0]=w,y){case"V":l[1]-=d;return;case"A":l[6]-=f,l[7]-=d;return;default:for(P=1;P<l.length;P++)l[P]-=P%2?f:d}},!0),this},a.prototype.unarc=function(){return this.iterate(function(l,h,f,d){var y,w,P,g=[],N=l[0];return N!=="A"&&N!=="a"?null:(N==="a"?(w=f+l[6],P=d+l[7]):(w=l[6],P=l[7]),y=i(f,d,w,P,l[4],l[5],l[1],l[2],l[3]),y.length===0?[[l[0]==="a"?"l":"L",l[6],l[7]]]:(y.forEach(function(A){g.push(["C",A[2],A[3],A[4],A[5],A[6],A[7]])}),g))}),this},a.prototype.unshort=function(){var l=this.segments,h,f,d,y,w;return this.iterate(function(P,g,N,A){var T=P[0],L=T.toUpperCase(),F;g&&(L==="T"?(F=T==="t",d=l[g-1],d[0]==="Q"?(h=d[1]-N,f=d[2]-A):d[0]==="q"?(h=d[1]-d[3],f=d[2]-d[4]):(h=0,f=0),y=-h,w=-f,F||(y+=N,w+=A),l[g]=[F?"q":"Q",y,w,P[1],P[2]]):L==="S"&&(F=T==="s",d=l[g-1],d[0]==="C"?(h=d[3]-N,f=d[4]-A):d[0]==="c"?(h=d[3]-d[5],f=d[4]-d[6]):(h=0,f=0),y=-h,w=-f,F||(y+=N,w+=A),l[g]=[F?"c":"C",y,w,P[1],P[2],P[3],P[4]]))}),this},pl=a,pl}var dl,th;function yp(){return th||(th=1,dl=vp()),dl}var bp=yp();const wp=vo(bp);var eh=function(n){var t=n,e,i={a:0,b:0,c:0},s=[],a=/(\[[^\]]+\])/g,l=/(#[^\#\s\+>~\.\[:\)]+)/g,h=/(\.[^\s\+>~\.\[:\)]+)/g,f=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,d=/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,y=/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,w=/([^\s\+>~\.\[:]+)/g;return e=function(P,g){var N,A,T,L,F,Y;if(P.test(t))for(N=t.match(P),A=0,T=N.length;A<T;A+=1)i[g]+=1,L=N[A],F=t.indexOf(L),Y=L.length,s.push({selector:n.substr(F,Y),type:g,index:F,length:Y}),t=t.replace(L,Array(Y+1).join(" "))},function(){var P=function(T){var L,F,Y,it;if(T.test(t))for(L=t.match(T),F=0,Y=L.length;F<Y;F+=1)it=L[F],t=t.replace(it,Array(it.length+1).join("A"))},g=/\\[0-9A-Fa-f]{6}\s?/g,N=/\\[0-9A-Fa-f]{1,5}\s/g,A=/\\./g;P(g),P(N),P(A)}(),function(){var P=/{[^]*/gm,g,N,A,T;if(P.test(t))for(g=t.match(P),N=0,A=g.length;N<A;N+=1)T=g[N],t=t.replace(T,Array(T.length+1).join(" "))}(),e(a,"b"),e(l,"a"),e(h,"b"),e(f,"c"),e(d,"b"),e(y,"b"),t=t.replace(/[\*\s\+>~]/g," "),t=t.replace(/[#\.]/g," "),t=t.replace(/:not/g,"    "),t=t.replace(/:local/g,"      "),t=t.replace(/:global/g,"       "),t=t.replace(/[\(\)]/g," "),e(w,"c"),s.sort(function(P,g){return P.index-g.index}),{selector:n,specificity:"0,"+i.a.toString()+","+i.b.toString()+","+i.c.toString(),specificityArray:[0,i.a,i.b,i.c],parts:s}},xp=function(n,t){var e,i,s;if(typeof n=="string"){if(n.indexOf(",")!==-1)throw"Invalid CSS selector";e=eh(n).specificityArray}else if(Array.isArray(n)){if(n.filter(function(a){return typeof a=="number"}).length!==4)throw"Invalid specificity array";e=n}else throw"Invalid CSS selector or specificity array";if(typeof t=="string"){if(t.indexOf(",")!==-1)throw"Invalid CSS selector";i=eh(t).specificityArray}else if(Array.isArray(t)){if(t.filter(function(a){return typeof a=="number"}).length!==4)throw"Invalid specificity array";i=t}else throw"Invalid CSS selector or specificity array";for(s=0;s<4;s+=1){if(e[s]<i[s])return-1;if(e[s]>i[s])return 1}return 0},El=function(n,t){return El=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])},El(n,t)};function De(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}El(n,t),n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var go=function(){return go=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var s in t=arguments[e])Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s]);return n},go.apply(this,arguments)};function je(n,t,e,i){return new(e||(e=Promise))(function(s,a){function l(d){try{f(i.next(d))}catch(y){a(y)}}function h(d){try{f(i.throw(d))}catch(y){a(y)}}function f(d){var y;d.done?s(d.value):(y=d.value,y instanceof e?y:new e(function(w){w(y)})).then(l,h)}f((i=i.apply(n,t||[])).next())})}function Xe(n,t){var e,i,s,a,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function h(f){return function(d){return function(y){if(e)throw new TypeError("Generator is already executing.");for(;l;)try{if(e=1,i&&(s=2&y[0]?i.return:y[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,y[1])).done)return s;switch(i=0,s&&(y=[2&y[0],s.value]),y[0]){case 0:case 1:s=y;break;case 4:return l.label++,{value:y[1],done:!1};case 5:l.label++,i=y[1],y=[0];continue;case 7:y=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!((s=s.length>0&&s[s.length-1])||y[0]!==6&&y[0]!==2)){l=0;continue}if(y[0]===3&&(!s||y[1]>s[0]&&y[1]<s[3])){l.label=y[1];break}if(y[0]===6&&l.label<s[1]){l.label=s[1],s=y;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(y);break}s[2]&&l.ops.pop(),l.trys.pop();continue}y=t.call(n,l)}catch(w){y=[6,w],i=0}finally{e=s=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([f,d])}}}var Li=function(){function n(t){if(this.a=void 0,this.r=0,this.g=0,this.b=0,this.simpleColors={},this.colorDefs=[],this.ok=!1,t){for(var e in t.charAt(0)=="#"&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase(),this.simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},this.simpleColors)t==e&&(t=this.simpleColors[e]);this.colorDefs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(f){return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])]}},{re:/^rgb\(([0-9.]+)%,\s*([0-9.]+)%,\s*([0-9.]+)%\)$/,example:["rgb(50.5%, 25.75%, 75.5%)","rgb(100%,0%,0%)"],process:function(f){return[Math.round(2.55*parseFloat(f[1])),Math.round(2.55*parseFloat(f[2])),Math.round(2.55*parseFloat(f[3]))]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(f){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(f){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}}];for(var i=0;i<this.colorDefs.length;i++){var s=this.colorDefs[i].re,a=this.colorDefs[i].process,l=s.exec(t);if(l){var h=a(l);this.r=h[0],this.g=h[1],this.b=h[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b}}return n.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},n.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+(this.a||"1")+")"},n.prototype.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return t.length==1&&(t="0"+t),e.length==1&&(e="0"+e),i.length==1&&(i="0"+i),"#"+t+e+i},n.prototype.getHelpXML=function(){for(var t=[],e=0;e<this.colorDefs.length;e++)for(var i=this.colorDefs[e].example,s=0;s<i.length;s++)t[t.length]=i[s];for(var a in this.simpleColors)t[t.length]=a;var l=document.createElement("ul");for(l.setAttribute("id","rgbcolor-examples"),e=0;e<t.length;e++)try{var h=document.createElement("li"),f=new n(t[e]),d=document.createElement("div");d.style.cssText="margin: 3px; border: 1px solid black; background:"+f.toHex()+"; color:"+f.toHex(),d.appendChild(document.createTextNode("test"));var y=document.createTextNode(" "+t[e]+" -> "+f.toRGB()+" -> "+f.toHex());h.appendChild(d),h.appendChild(y),l.appendChild(h)}catch{}return l},n}(),Lr=function(){function n(t){this.color=t}return n.prototype.getFillData=function(t,e){return je(this,void 0,void 0,function(){return Xe(this,function(i){return[2,void 0]})})},n}(),Is=function(){function n(){this.xmlSpace="",this.fill=null,this.fillOpacity=1,this.fontFamily="",this.fontSize=16,this.fontStyle="",this.fontWeight="",this.opacity=1,this.stroke=null,this.strokeDasharray=null,this.strokeDashoffset=0,this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit=4,this.strokeOpacity=1,this.strokeWidth=1,this.alignmentBaseline="",this.textAnchor="",this.visibility="",this.color=null,this.contextFill=null,this.contextStroke=null,this.fillRule=null}return n.prototype.clone=function(){var t=new n;return t.xmlSpace=this.xmlSpace,t.fill=this.fill,t.fillOpacity=this.fillOpacity,t.fontFamily=this.fontFamily,t.fontSize=this.fontSize,t.fontStyle=this.fontStyle,t.fontWeight=this.fontWeight,t.opacity=this.opacity,t.stroke=this.stroke,t.strokeDasharray=this.strokeDasharray,t.strokeDashoffset=this.strokeDashoffset,t.strokeLinecap=this.strokeLinecap,t.strokeLinejoin=this.strokeLinejoin,t.strokeMiterlimit=this.strokeMiterlimit,t.strokeOpacity=this.strokeOpacity,t.strokeWidth=this.strokeWidth,t.textAnchor=this.textAnchor,t.alignmentBaseline=this.alignmentBaseline,t.visibility=this.visibility,t.color=this.color,t.fillRule=this.fillRule,t.contextFill=this.contextFill,t.contextStroke=this.contextStroke,t},n.default=function(){var t=new n;return t.xmlSpace="default",t.fill=new Lr(new Li("rgb(0, 0, 0)")),t.fillOpacity=1,t.fontFamily="times",t.fontSize=16,t.fontStyle="normal",t.fontWeight="normal",t.opacity=1,t.stroke=null,t.strokeDasharray=null,t.strokeDashoffset=0,t.strokeLinecap="butt",t.strokeLinejoin="miter",t.strokeMiterlimit=4,t.strokeOpacity=1,t.strokeWidth=1,t.alignmentBaseline="baseline",t.textAnchor="start",t.visibility="visible",t.color=new Li("rgb(0, 0, 0)"),t.fillRule="nonzero",t.contextFill=null,t.contextStroke=null,t},n.getContextColors=function(t,e){e===void 0&&(e=!1);var i={};return t.attributeState.contextFill&&(i.contextFill=t.attributeState.contextFill),t.attributeState.contextStroke&&(i.contextStroke=t.attributeState.contextStroke),e&&t.attributeState.color&&(i.color=t.attributeState.color),i},n}(),In=function(){function n(t,e){var i,s,a;this.pdf=t,this.svg2pdfParameters=e.svg2pdfParameters,this.attributeState=e.attributeState?e.attributeState.clone():Is.default(),this.viewport=e.viewport,this.refsHandler=e.refsHandler,this.styleSheets=e.styleSheets,this.textMeasure=e.textMeasure,this.transform=(i=e.transform)!==null&&i!==void 0?i:this.pdf.unitMatrix,this.withinClipPath=(s=e.withinClipPath)!==null&&s!==void 0&&s,this.withinUse=(a=e.withinUse)!==null&&a!==void 0&&a}return n.prototype.clone=function(t){var e,i,s,a;return t===void 0&&(t={}),new n(this.pdf,{svg2pdfParameters:this.svg2pdfParameters,attributeState:t.attributeState?t.attributeState.clone():this.attributeState.clone(),viewport:(e=t.viewport)!==null&&e!==void 0?e:this.viewport,refsHandler:this.refsHandler,styleSheets:this.styleSheets,textMeasure:this.textMeasure,transform:(i=t.transform)!==null&&i!==void 0?i:this.transform,withinClipPath:(s=t.withinClipPath)!==null&&s!==void 0?s:this.withinClipPath,withinUse:(a=t.withinUse)!==null&&a!==void 0?a:this.withinUse})},n}(),Rh=function(){function n(t){this.renderedElements={},this.idMap=t,this.idPrefix=String(n.instanceCounter++)}return n.prototype.getRendered=function(t,e,i){return je(this,void 0,void 0,function(){var s,a;return Xe(this,function(l){switch(l.label){case 0:return s=this.generateKey(t,e),this.renderedElements.hasOwnProperty(s)?[2,this.renderedElements[t]]:(a=this.get(t),this.renderedElements[s]=a,[4,i(a)]);case 1:return l.sent(),[2,a]}})})},n.prototype.get=function(t){return this.idMap[Dh(t,{isIdentifier:!0})]},n.prototype.generateKey=function(t,e){var i="";return e&&(i=["color","contextFill","contextStroke"].map(function(s){var a,l;return(l=(a=e[s])===null||a===void 0?void 0:a.toRGBA())!==null&&l!==void 0?l:""}).join("|")),this.idPrefix+"|"+t+"|"+i},n.instanceCounter=0,n}();function rh(n,t){return Math.atan2(t[1]-n[1],t[0]-n[0])}var ih=2/3;function nh(n,t){return[ih*(t[0]-n[0])+n[0],ih*(t[1]-n[1])+n[1]]}function da(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return[n[0]/t,n[1]/t]}function ws(n,t){return da([t[0]-n[0],t[1]-n[1]])}function lo(n,t){return[n[0]+t[0],n[1]+t[1]]}function ml(n,t){var e=n[0],i=n[1];return[t.a*e+t.c*i+t.e,t.b*e+t.d*i+t.f]}var Ts=function(){function n(){this.segments=[]}return n.prototype.moveTo=function(t,e){return this.segments.push(new wr(t,e)),this},n.prototype.lineTo=function(t,e){return this.segments.push(new An(t,e)),this},n.prototype.curveTo=function(t,e,i,s,a,l){return this.segments.push(new Ei(t,e,i,s,a,l)),this},n.prototype.close=function(){return this.segments.push(new Ml),this},n.prototype.transform=function(t){this.segments.forEach(function(e){if(e instanceof wr||e instanceof An||e instanceof Ei){var i=ml([e.x,e.y],t);e.x=i[0],e.y=i[1]}if(e instanceof Ei){var s=ml([e.x1,e.y1],t),a=ml([e.x2,e.y2],t);e.x1=s[0],e.y1=s[1],e.x2=a[0],e.y2=a[1]}})},n.prototype.draw=function(t){var e=t.pdf;this.segments.forEach(function(i){i instanceof wr?e.moveTo(i.x,i.y):i instanceof An?e.lineTo(i.x,i.y):i instanceof Ei?e.curveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y):e.close()})},n}(),wr=function(n,t){this.x=n,this.y=t},An=function(n,t){this.x=n,this.y=t},Ei=function(n,t,e,i,s,a){this.x1=n,this.y1=t,this.x2=e,this.y2=i,this.x=s,this.y=a},Ml=function(){};function Cn(n,t){return t.split(",").indexOf((n.nodeName||n.tagName).toLowerCase())>=0}function Ot(n,t,e,i){var s;i===void 0&&(i=e);var a=(s=n.style)===null||s===void 0?void 0:s.getPropertyValue(i);if(a)return a;var l=t.getPropertyValue(n,i);return l||n.hasAttribute(e)&&n.getAttribute(e)||void 0}function Zi(n,t,e){if(Ot(n.element,e.styleSheets,"display")==="none")return!1;var i=t,s=Ot(n.element,e.styleSheets,"visibility");return s&&(i=s!=="hidden"),i}function Tn(n,t,e){var i=Zi(n,t,e);return n.element.childNodes.length!==0&&(n.children.forEach(function(s){s.isVisible(i,e)&&(i=!0)}),i)}var Pp=function(){function n(){this.markers=[]}return n.prototype.addMarker=function(t){this.markers.push(t)},n.prototype.draw=function(t){return je(this,void 0,void 0,function(){var e,i,s,a,l,h,f,d;return Xe(this,function(y){switch(y.label){case 0:e=0,y.label=1;case 1:return e<this.markers.length?(i=this.markers[e],s=void 0,a=i.angle,l=i.anchor,h=Math.cos(a),f=Math.sin(a),s=t.pdf.Matrix(h,f,-f,h,l[0],l[1]),s=t.pdf.matrixMult(t.pdf.Matrix(t.attributeState.strokeWidth,0,0,t.attributeState.strokeWidth,0,0),s),s=t.pdf.matrixMult(s,t.transform),t.pdf.saveGraphicsState(),d=Is.getContextColors(t),[4,t.refsHandler.getRendered(i.id,d,function(w){return w.apply(t)})]):[3,4];case 2:y.sent(),t.pdf.doFormObject(t.refsHandler.generateKey(i.id,d),s),t.pdf.restoreGraphicsState(),y.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},n}(),Pn=function(n,t,e,i){i===void 0&&(i=!1),this.id=n,this.anchor=t,this.angle=e,this.isStartMarker=i},Xl=/url\(["']?#([^"']+)["']?\)/,Sp={bottom:"bottom","text-bottom":"bottom",top:"top","text-top":"top",hanging:"hanging",middle:"middle",central:"middle",center:"middle",mathematical:"middle",ideographic:"ideographic",alphabetic:"alphabetic",baseline:"alphabetic"},sh="http://www.w3.org/2000/svg";function Gi(n,t){var e;return(e=n&&n.toString().match(/^([\-0-9.]+)em$/))?parseFloat(e[1])*t:(e=n&&n.toString().match(/^([\-0-9.]+)(px|)$/))?parseFloat(e[1]):0}function jh(n){return Sp[n]||"alphabetic"}function di(n){for(var t,e=[],i=/[+-]?(?:(?:\d+\.?\d*)|(?:\d*\.?\d+))(?:[eE][+-]?\d+)?/g;t=i.exec(n);)e.push(parseFloat(t[0]));return e}function Cs(n,t){if(n==="transparent"){var e=new Li("rgb(0,0,0)");return e.a=0,e}if(t&&n.toLowerCase()==="currentcolor")return t.color||new Li("rgb(0,0,0)");if(t&&n.toLowerCase()==="context-stroke")return t.contextStroke||new Li("rgb(0,0,0)");if(t&&n.toLowerCase()==="context-fill")return t.contextFill||new Li("rgb(0,0,0)");var i=/\s*rgba\(((?:[^,\)]*,){3}[^,\)]*)\)\s*/.exec(n);if(i){var s=di(i[1]),a=new Li("rgb("+s.slice(0,3).join(",")+")");return a.a=s[3],a}return new Li(n)}var $i={"sans-serif":"helvetica",verdana:"helvetica",arial:"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",serif:"times",cursive:"times",fantasy:"times"},gl,Ap=(gl=ne.version.split("."),parseFloat(gl[0])===2&&parseFloat(gl[1])===3);function Xh(n,t){return Ap?t==400?n=="italic"?"italic":"normal":t==700&&n!=="italic"?"bold":n+""+t:t==400||t==="normal"?n==="italic"?"italic":"normal":t!=700&&t!=="bold"||n!=="normal"?(t==700?"bold":t)+""+n:"bold"}function Yl(n,t){if(Ot(t.element,n.styleSheets,"display")==="none")return[0,0,0,0];var e=[];return t.children.forEach(function(i){var s=i.getBoundingBox(n);if(s[0]!==0||s[1]!==0||s[2]!==0||s[3]!==0){var a=i.computeNodeTransform(n);s[0]=s[0]*a.sx+a.tx,s[1]=s[1]*a.sy+a.ty,s[2]=s[2]*a.sx,s[3]=s[3]*a.sy,e=e.length===0?s:[Math.min(e[0],s[0]),Math.min(e[1],s[1]),Math.max(e[0]+e[2],s[0]+s[2])-Math.min(e[0],s[0]),Math.max(e[1]+e[3],s[1]+s[3])-Math.min(e[1],s[1])]}}),e.length===0?[0,0,0,0]:e}function ba(n,t){var e=parseFloat,i=e(n.getAttribute("x1"))||e(Ot(n,t.styleSheets,"x"))||e(Ot(n,t.styleSheets,"cx"))-e(Ot(n,t.styleSheets,"r"))||0,s=e(n.getAttribute("x2"))||i+e(Ot(n,t.styleSheets,"width"))||e(Ot(n,t.styleSheets,"cx"))+e(Ot(n,t.styleSheets,"r"))||0,a=e(n.getAttribute("y1"))||e(Ot(n,t.styleSheets,"y"))||e(Ot(n,t.styleSheets,"cy"))-e(Ot(n,t.styleSheets,"r"))||0,l=e(n.getAttribute("y2"))||a+e(Ot(n,t.styleSheets,"height"))||e(Ot(n,t.styleSheets,"cy"))+e(Ot(n,t.styleSheets,"r"))||0;return[Math.min(i,s),Math.min(a,l),Math.max(i,s)-Math.min(i,s),Math.max(a,l)-Math.min(a,l)]}function wa(n,t,e,i,s,a,l,h){h===void 0&&(h=!1);var f,d,y=t[0],w=t[1],P=t[2],g=t[3],N=s/P,A=a/g,T=n.getAttribute("preserveAspectRatio");if(T){var L=T.split(" ");L[0]==="defer"&&(L=L.slice(1)),f=L[0],d=L[1]||"meet"}else f="xMidYMid",d="meet";if(f!=="none"&&(d==="meet"?N=A=Math.min(N,A):d==="slice"&&(N=A=Math.max(N,A))),h)return l.pdf.Matrix(N,0,0,A,0,0);var F=e-y*N,Y=i-w*A;f.indexOf("xMid")>=0?F+=(s-P*N)/2:f.indexOf("xMax")>=0&&(F+=s-P*N),f.indexOf("YMid")>=0?Y+=(a-g*A)/2:f.indexOf("YMax")>=0&&(Y+=a-g*A);var it=l.pdf.Matrix(1,0,0,1,F,Y),$=l.pdf.Matrix(N,0,0,A,0,0);return l.pdf.matrixMult($,it)}function xo(n,t){if(!n||n==="none")return t.pdf.unitMatrix;for(var e,i,s=/^[\s,]*matrix\(([^)]+)\)\s*/,a=/^[\s,]*translate\(([^)]+)\)\s*/,l=/^[\s,]*rotate\(([^)]+)\)\s*/,h=/^[\s,]*scale\(([^)]+)\)\s*/,f=/^[\s,]*skewX\(([^)]+)\)\s*/,d=/^[\s,]*skewY\(([^)]+)\)\s*/,y=t.pdf.unitMatrix;n.length>0&&n.length!==i;){i=n.length;var w=s.exec(n);if(w&&(e=di(w[1]),y=t.pdf.matrixMult(t.pdf.Matrix(e[0],e[1],e[2],e[3],e[4],e[5]),y),n=n.substr(w[0].length)),w=l.exec(n)){e=di(w[1]);var P=Math.PI*e[0]/180;if(y=t.pdf.matrixMult(t.pdf.Matrix(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0),y),e[1]||e[2]){var g=t.pdf.Matrix(1,0,0,1,e[1],e[2]),N=t.pdf.Matrix(1,0,0,1,-e[1],-e[2]);y=t.pdf.matrixMult(N,t.pdf.matrixMult(y,g))}n=n.substr(w[0].length)}(w=a.exec(n))&&(e=di(w[1]),y=t.pdf.matrixMult(t.pdf.Matrix(1,0,0,1,e[0],e[1]||0),y),n=n.substr(w[0].length)),(w=h.exec(n))&&((e=di(w[1]))[1]||(e[1]=e[0]),y=t.pdf.matrixMult(t.pdf.Matrix(e[0],0,0,e[1],0,0),y),n=n.substr(w[0].length)),(w=f.exec(n))&&(e=parseFloat(w[1]),e*=Math.PI/180,y=t.pdf.matrixMult(t.pdf.Matrix(1,0,Math.tan(e),1,0,0),y),n=n.substr(w[0].length)),(w=d.exec(n))&&(e=parseFloat(w[1]),e*=Math.PI/180,y=t.pdf.matrixMult(t.pdf.Matrix(1,Math.tan(e),0,1,0,0),y),n=n.substr(w[0].length))}return y}var zl=function(){function n(t,e){this.element=t,this.children=e,this.parent=null}return n.prototype.setParent=function(t){this.parent=t},n.prototype.getParent=function(){return this.parent},n.prototype.getBoundingBox=function(t){return Ot(this.element,t.styleSheets,"display")==="none"?[0,0,0,0]:this.getBoundingBoxCore(t)},n.prototype.computeNodeTransform=function(t){var e=this.computeNodeTransformCore(t),i=Ot(this.element,t.styleSheets,"transform");return i?t.pdf.matrixMult(e,xo(i,t)):e},n}(),xa=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return De(t,n),t.prototype.render=function(e){return Promise.resolve()},t.prototype.getBoundingBoxCore=function(e){return[]},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t}(zl),Yh=function(n){function t(e,i,s){var a=n.call(this,i,s)||this;return a.pdfGradientType=e,a.contextColor=void 0,a}return De(t,n),t.prototype.apply=function(e){return je(this,void 0,void 0,function(){var i,s,a,l,h,f;return Xe(this,function(d){return(i=this.element.getAttribute("id"))?(s=this.getStops(e.styleSheets),a=0,l=!1,s.forEach(function(y){var w=y.opacity;w&&w!==1&&(a+=w,l=!0)}),l&&(h=new Gn({opacity:a/s.length})),f=new Sn(this.pdfGradientType,this.getCoordinates(),s,h),e.pdf.addShadingPattern(i,f),[2]):[2]})})},t.prototype.getStops=function(e){var i=this;if(this.stops)return this.stops;if(this.contextColor===void 0){this.contextColor=null;for(var s=this;s;){var a=Ot(s.element,e,"color");if(a){this.contextColor=Cs(a,null);break}s=s.getParent()}}var l=[];return this.children.forEach(function(h){if(h.element.tagName.toLowerCase()==="stop"){var f=Ot(h.element,e,"color"),d=Cs(Ot(h.element,e,"stop-color")||"",f?{color:Cs(f,null)}:{color:i.contextColor}),y=parseFloat(Ot(h.element,e,"stop-opacity")||"1");l.push({offset:t.parseGradientOffset(h.element.getAttribute("offset")||"0"),color:[d.r,d.g,d.b],opacity:y})}}),this.stops=l},t.prototype.getBoundingBoxCore=function(e){return ba(this.element,e)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return Tn(this,e,i)},t.parseGradientOffset=function(e){var i=parseFloat(e);return!isNaN(i)&&e.indexOf("%")>=0?i/100:i},t}(xa),zh=function(n){function t(e,i){return n.call(this,"axial",e,i)||this}return De(t,n),t.prototype.getCoordinates=function(){return[parseFloat(this.element.getAttribute("x1")||"0"),parseFloat(this.element.getAttribute("y1")||"0"),parseFloat(this.element.getAttribute("x2")||"1"),parseFloat(this.element.getAttribute("y2")||"0")]},t}(Yh),Uh=function(n){function t(e,i){return n.call(this,"radial",e,i)||this}return De(t,n),t.prototype.getCoordinates=function(){var e=this.element.getAttribute("cx"),i=this.element.getAttribute("cy"),s=this.element.getAttribute("fx"),a=this.element.getAttribute("fy");return[parseFloat(s||e||"0.5"),parseFloat(a||i||"0.5"),0,parseFloat(e||"0.5"),parseFloat(i||"0.5"),parseFloat(this.element.getAttribute("r")||"0.5")]},t}(Yh),Lp=function(){function n(t,e){this.key=t,this.gradient=e}return n.prototype.getFillData=function(t,e){return je(this,void 0,void 0,function(){var i,s,a;return Xe(this,function(l){switch(l.label){case 0:return[4,e.refsHandler.getRendered(this.key,null,function(h){return h.apply(new In(e.pdf,{refsHandler:e.refsHandler,textMeasure:e.textMeasure,styleSheets:e.styleSheets,viewport:e.viewport,svg2pdfParameters:e.svg2pdfParameters}))})];case 1:return l.sent(),this.gradient.element.hasAttribute("gradientUnits")&&this.gradient.element.getAttribute("gradientUnits").toLowerCase()!=="objectboundingbox"?i=e.pdf.unitMatrix:(s=t.getBoundingBox(e),i=e.pdf.Matrix(s[2],0,0,s[3],s[0],s[1])),a=xo(Ot(this.gradient.element,e.styleSheets,"gradientTransform","transform"),e),[2,{key:this.key,matrix:e.pdf.matrixMult(a,i)}]}})})},n}(),Wh=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return De(t,n),t.prototype.apply=function(e){return je(this,void 0,void 0,function(){var i,s,a,l,h;return Xe(this,function(f){switch(f.label){case 0:if(!(i=this.element.getAttribute("id")))return[2];s=this.getBoundingBox(e),a=new Wn([s[0],s[1],s[0]+s[2],s[1]+s[3]],s[2],s[3]),e.pdf.beginTilingPattern(a),l=0,h=this.children,f.label=1;case 1:return l<h.length?[4,h[l].render(new In(e.pdf,{attributeState:e.attributeState,refsHandler:e.refsHandler,styleSheets:e.styleSheets,viewport:e.viewport,svg2pdfParameters:e.svg2pdfParameters,textMeasure:e.textMeasure}))]:[3,4];case 2:f.sent(),f.label=3;case 3:return l++,[3,1];case 4:return e.pdf.endTilingPattern(i,a),[2]}})})},t.prototype.getBoundingBoxCore=function(e){return ba(this.element,e)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return Tn(this,e,i)},t}(xa),Np=function(){function n(t,e){this.key=t,this.pattern=e}return n.prototype.getFillData=function(t,e){return je(this,void 0,void 0,function(){var i,s,a,l,h,f,d,y,w,P,g,N;return Xe(this,function(A){switch(A.label){case 0:return[4,e.refsHandler.getRendered(this.key,null,function(T){return T.apply(new In(e.pdf,{refsHandler:e.refsHandler,textMeasure:e.textMeasure,styleSheets:e.styleSheets,viewport:e.viewport,svg2pdfParameters:e.svg2pdfParameters}))})];case 1:return A.sent(),i={key:this.key,boundingBox:void 0,xStep:0,yStep:0,matrix:void 0},a=e.pdf.unitMatrix,this.pattern.element.hasAttribute("patternUnits")&&this.pattern.element.getAttribute("patternUnits").toLowerCase()!=="objectboundingbox"||(s=t.getBoundingBox(e),a=e.pdf.Matrix(1,0,0,1,s[0],s[1]),h=this.pattern.getBoundingBox(e),f=h[0]*s[0]||0,d=h[1]*s[1]||0,y=h[2]*s[2]||0,w=h[3]*s[3]||0,i.boundingBox=[f,d,f+y,d+w],i.xStep=y,i.yStep=w),l=e.pdf.unitMatrix,this.pattern.element.hasAttribute("patternContentUnits")&&this.pattern.element.getAttribute("patternContentUnits").toLowerCase()==="objectboundingbox"&&(s||(s=t.getBoundingBox(e)),l=e.pdf.Matrix(s[2],0,0,s[3],0,0),h=i.boundingBox||this.pattern.getBoundingBox(e),f=h[0]/s[0]||0,d=h[1]/s[1]||0,y=h[2]/s[2]||0,w=h[3]/s[3]||0,i.boundingBox=[f,d,f+y,d+w],i.xStep=y,i.yStep=w),P=e.pdf.unitMatrix,(g=Ot(this.pattern.element,e.styleSheets,"patternTransform","transform"))&&(P=xo(g,e)),N=l,N=e.pdf.matrixMult(N,a),N=e.pdf.matrixMult(N,P),N=e.pdf.matrixMult(N,e.transform),i.matrix=N,[2,i]}})})},n}();function _p(n,t){var e=Xl.exec(n);if(e){var i=e[1],s=t.refsHandler.get(i);return s&&(s instanceof zh||s instanceof Uh)?function(l,h,f){var d=h.getStops(f.styleSheets);if(d.length===0)return null;if(d.length===1){var y=d[0].color,w=new Li;return w.ok=!0,w.r=y[0],w.g=y[1],w.b=y[2],w.a=d[0].opacity,new Lr(w)}return new Lp(l,h)}(i,s,t):s&&s instanceof Wh?new Np(i,s):new Lr(new Li("rgb(0, 0, 0)"))}var a=Cs(n,t.attributeState);return a.ok?new Lr(a):null}function Ul(n,t,e){var i=e||t.element,s=Ot(i,n.styleSheets,"color");if(s){var a=Cs(s,n.attributeState);a.ok?n.attributeState.color=a:n.attributeState.color=new Li("rgb(0,0,0)")}var l=Ot(i,n.styleSheets,"visibility");l&&(n.attributeState.visibility=l);var h=Ot(i,n.styleSheets,"fill");h&&(n.attributeState.fill=_p(h,n));var f=Ot(i,n.styleSheets,"fill-opacity");f&&(n.attributeState.fillOpacity=parseFloat(f));var d=Ot(i,n.styleSheets,"stroke-opacity");d&&(n.attributeState.strokeOpacity=parseFloat(d));var y=Ot(i,n.styleSheets,"opacity");y&&(n.attributeState.opacity=parseFloat(y));var w=Ot(i,n.styleSheets,"stroke-width");w!==void 0&&w!==""&&(n.attributeState.strokeWidth=Math.abs(parseFloat(w)));var P=Ot(i,n.styleSheets,"stroke");if(P)if(P==="none")n.attributeState.stroke=null;else{var g=Cs(P,n.attributeState);g.ok&&(n.attributeState.stroke=new Lr(g))}P&&n.attributeState.stroke instanceof Lr&&(n.attributeState.contextStroke=n.attributeState.stroke.color),h&&n.attributeState.fill instanceof Lr&&(n.attributeState.contextFill=n.attributeState.fill.color);var N=Ot(i,n.styleSheets,"stroke-linecap");N&&(n.attributeState.strokeLinecap=N);var A=Ot(i,n.styleSheets,"stroke-linejoin");A&&(n.attributeState.strokeLinejoin=A);var T=Ot(i,n.styleSheets,"stroke-dasharray");if(T){var L=parseInt(Ot(i,n.styleSheets,"stroke-dashoffset")||"0");n.attributeState.strokeDasharray=di(T),n.attributeState.strokeDashoffset=L}var F=Ot(i,n.styleSheets,"stroke-miterlimit");F!==void 0&&F!==""&&(n.attributeState.strokeMiterlimit=parseFloat(F));var Y=i.getAttribute("xml:space");Y&&(n.attributeState.xmlSpace=Y);var it=Ot(i,n.styleSheets,"font-weight");it&&(n.attributeState.fontWeight=it);var $=Ot(i,n.styleSheets,"font-style");$&&(n.attributeState.fontStyle=$);var vt=Ot(i,n.styleSheets,"font-family");if(vt){var ot=cp.parse(vt);n.attributeState.fontFamily=function(G,bt,gt){var St=Xh(G.fontStyle,G.fontWeight),ut=gt.pdf.getFontList(),wt="";return bt.some(function(Pt){var Yt=ut[Pt];return Yt&&Yt.indexOf(St)>=0?(wt=Pt,!0):(Pt=Pt.toLowerCase(),!!$i.hasOwnProperty(Pt)&&(wt=Pt,!0))})||(wt="times"),wt}(n.attributeState,ot,n)}var J=Ot(i,n.styleSheets,"font-size");if(J){var lt=n.pdf.getFontSize();n.attributeState.fontSize=Gi(J,lt)}var yt=Ot(i,n.styleSheets,"vertical-align")||Ot(i,n.styleSheets,"alignment-baseline");if(yt){var q=yt.match(/(baseline|text-bottom|alphabetic|ideographic|middle|central|mathematical|text-top|bottom|center|top|hanging)/);q&&(n.attributeState.alignmentBaseline=q[0])}var R=Ot(i,n.styleSheets,"text-anchor");R&&(n.attributeState.textAnchor=R);var Z=Ot(i,n.styleSheets,"fill-rule");Z&&(n.attributeState.fillRule=Z)}function Wl(n,t,e){var i=1,s=1;i*=n.attributeState.fillOpacity,i*=n.attributeState.opacity,n.attributeState.fill instanceof Lr&&n.attributeState.fill.color.a!==void 0&&(i*=n.attributeState.fill.color.a),s*=n.attributeState.strokeOpacity,s*=n.attributeState.opacity,n.attributeState.stroke instanceof Lr&&n.attributeState.stroke.color.a!==void 0&&(s*=n.attributeState.stroke.color.a);var a,l,h=i<1,f=s<1;if(Cn(e,"use")?(h=!0,f=!0,i*=n.attributeState.fill?1:0,s*=n.attributeState.stroke?1:0):n.withinUse&&(n.attributeState.fill!==t.attributeState.fill?(h=!0,i*=n.attributeState.fill?1:0):h&&!n.attributeState.fill&&(i=0),n.attributeState.stroke!==t.attributeState.stroke?(f=!0,s*=n.attributeState.stroke?1:0):f&&!n.attributeState.stroke&&(s=0)),h||f){var d={};h&&(d.opacity=i),f&&(d["stroke-opacity"]=s),n.pdf.setGState(new Gn(d))}if(n.attributeState.fill&&n.attributeState.fill!==t.attributeState.fill&&n.attributeState.fill instanceof Lr&&n.attributeState.fill.color.ok&&!Cn(e,"text")&&n.pdf.setFillColor(n.attributeState.fill.color.r,n.attributeState.fill.color.g,n.attributeState.fill.color.b),n.attributeState.strokeWidth!==t.attributeState.strokeWidth&&n.pdf.setLineWidth(n.attributeState.strokeWidth),n.attributeState.stroke!==t.attributeState.stroke&&n.attributeState.stroke instanceof Lr&&n.pdf.setDrawColor(n.attributeState.stroke.color.r,n.attributeState.stroke.color.g,n.attributeState.stroke.color.b),n.attributeState.strokeLinecap!==t.attributeState.strokeLinecap&&n.pdf.setLineCap(n.attributeState.strokeLinecap),n.attributeState.strokeLinejoin!==t.attributeState.strokeLinejoin&&n.pdf.setLineJoin(n.attributeState.strokeLinejoin),n.attributeState.strokeDasharray===t.attributeState.strokeDasharray&&n.attributeState.strokeDashoffset===t.attributeState.strokeDashoffset||!n.attributeState.strokeDasharray||n.pdf.setLineDashPattern(n.attributeState.strokeDasharray,n.attributeState.strokeDashoffset),n.attributeState.strokeMiterlimit!==t.attributeState.strokeMiterlimit&&n.pdf.setLineMiterLimit(n.attributeState.strokeMiterlimit),n.attributeState.fontFamily!==t.attributeState.fontFamily&&(a=$i.hasOwnProperty(n.attributeState.fontFamily)?$i[n.attributeState.fontFamily]:n.attributeState.fontFamily),n.attributeState.fill&&n.attributeState.fill!==t.attributeState.fill&&n.attributeState.fill instanceof Lr&&n.attributeState.fill.color.ok){var y=n.attributeState.fill.color;n.pdf.setTextColor(y.r,y.g,y.b)}n.attributeState.fontWeight===t.attributeState.fontWeight&&n.attributeState.fontStyle===t.attributeState.fontStyle||(l=Xh(n.attributeState.fontStyle,n.attributeState.fontWeight)),a===void 0&&l===void 0||(a===void 0&&(a=$i.hasOwnProperty(n.attributeState.fontFamily)?$i[n.attributeState.fontFamily]:n.attributeState.fontFamily),n.pdf.setFont(a,l)),n.attributeState.fontSize!==t.attributeState.fontSize&&n.pdf.setFontSize(n.attributeState.fontSize*n.pdf.internal.scaleFactor)}function Hh(n,t,e){var i=Xl.exec(n);if(i){var s=i[1];return e.refsHandler.get(s)||void 0}}function Vh(n,t,e){return je(this,void 0,void 0,function(){var i,s;return Xe(this,function(a){switch(a.label){case 0:return i=e.clone(),t.element.hasAttribute("clipPathUnits")&&t.element.getAttribute("clipPathUnits").toLowerCase()==="objectboundingbox"&&(s=n.getBoundingBox(e),i.transform=e.pdf.matrixMult(e.pdf.Matrix(s[2],0,0,s[3],s[0],s[1]),e.transform)),[4,t.apply(i)];case 1:return a.sent(),[2]}})})}var Gh=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return De(t,n),t.prototype.render=function(e){return je(this,void 0,void 0,function(){var i,s,a,l;return Xe(this,function(h){switch(h.label){case 0:return this.isVisible(e.attributeState.visibility!=="hidden",e)?((i=e.clone()).transform=i.pdf.matrixMult(this.computeNodeTransform(i),e.transform),Ul(i,this),s=Ot(this.element,i.styleSheets,"clip-path"),(a=s&&s!=="none")?(l=Hh(s,0,i))?l.isVisible(!0,i)?(i.pdf.saveGraphicsState(),[4,Vh(this,l,i)]):[3,2]:[3,4]:[3,5]):[2];case 1:return h.sent(),[3,3];case 2:return[2];case 3:return[3,5];case 4:a=!1,h.label=5;case 5:return i.withinClipPath||i.pdf.saveGraphicsState(),Wl(i,e,this.element),[4,this.renderCore(i)];case 6:return h.sent(),i.withinClipPath||i.pdf.restoreGraphicsState(),a&&i.pdf.restoreGraphicsState(),[2]}})})},t}(zl),Po=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return De(t,n),t}(Gh),Pa=function(n){function t(e,i,s){var a=n.call(this,i,s)||this;return a.cachedPath=null,a.hasMarkers=e,a}return De(t,n),t.prototype.renderCore=function(e){return je(this,void 0,void 0,function(){var i;return Xe(this,function(s){switch(s.label){case 0:return(i=this.getCachedPath(e))===null||i.segments.length===0?[2]:(e.withinClipPath?i.transform(e.transform):e.pdf.setCurrentTransformationMatrix(e.transform),i.draw(e),[4,this.fillOrStroke(e)]);case 1:return s.sent(),this.hasMarkers?[4,this.drawMarkers(e,i)]:[3,3];case 2:s.sent(),s.label=3;case 3:return[2]}})})},t.prototype.getCachedPath=function(e){return this.cachedPath||(this.cachedPath=this.getPath(e))},t.prototype.drawMarkers=function(e,i){return je(this,void 0,void 0,function(){return Xe(this,function(s){switch(s.label){case 0:return[4,this.getMarkers(i,e).draw(e.clone({transform:e.pdf.unitMatrix}))];case 1:return s.sent(),[2]}})})},t.prototype.fillOrStroke=function(e){return je(this,void 0,void 0,function(){var i,s,a,l,h;return Xe(this,function(f){switch(f.label){case 0:return e.withinClipPath?[2]:(i=e.attributeState.fill,s=e.attributeState.stroke&&e.attributeState.strokeWidth!==0,i?[4,i.getFillData(this,e)]:[3,2]);case 1:return l=f.sent(),[3,3];case 2:l=void 0,f.label=3;case 3:return a=l,h=e.attributeState.fillRule==="evenodd",i&&s||e.withinUse?h?e.pdf.fillStrokeEvenOdd(a):e.pdf.fillStroke(a):i?h?e.pdf.fillEvenOdd(a):e.pdf.fill(a):s?e.pdf.stroke():e.pdf.discardPath(),[2]}})})},t.prototype.getBoundingBoxCore=function(e){var i=this.getCachedPath(e);if(!i||!i.segments.length)return[0,0,0,0];for(var s=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,f=0,d=0,y=0;y<i.segments.length;y++){var w=i.segments[y];(w instanceof wr||w instanceof An||w instanceof Ei)&&(f=w.x,d=w.y),w instanceof Ei?(s=Math.min(s,f,w.x1,w.x2,w.x),l=Math.max(l,f,w.x1,w.x2,w.x),a=Math.min(a,d,w.y1,w.y2,w.y),h=Math.max(h,d,w.y1,w.y2,w.y)):(s=Math.min(s,f),l=Math.max(l,f),a=Math.min(a,d),h=Math.max(h,d))}return[s,a,l-s,h-a]},t.prototype.getMarkers=function(e,i){var s=Ot(this.element,i.styleSheets,"marker-start"),a=Ot(this.element,i.styleSheets,"marker-mid"),l=Ot(this.element,i.styleSheets,"marker-end"),h=new Pp;if(s||a||l){l&&(l=vl(l)),s&&(s=vl(s)),a&&(a=vl(a));for(var f=e.segments,d=[1,0],y=void 0,w=!1,P=[1,0],g=!1,N=function(T){var L=f[T],F=s&&(T===1||!(f[T]instanceof wr)&&f[T-1]instanceof wr);F&&f.forEach(function(J,lt){if(!g&&J instanceof Ml&&lt>T){var yt=f[lt-1];g=(yt instanceof wr||yt instanceof An||yt instanceof Ei)&&yt}});var Y=l&&(T===f.length-1||!(f[T]instanceof wr)&&f[T+1]instanceof wr),it=a&&T>0&&!(T===1&&f[T-1]instanceof wr),$=f[T-1]||null;if($ instanceof wr||$ instanceof An||$ instanceof Ei)if(L instanceof Ei)F&&h.addMarker(new Pn(s,[$.x,$.y],rh(g?[g.x,g.y]:[$.x,$.y],[L.x1,L.y1]),!0)),Y&&h.addMarker(new Pn(l,[L.x,L.y],rh([L.x2,L.y2],[L.x,L.y]))),it&&(y=ws([$.x,$.y],[L.x1,L.y1]),y=$ instanceof wr?y:da(lo(d,y)),h.addMarker(new Pn(a,[$.x,$.y],Math.atan2(y[1],y[0])))),d=ws([L.x2,L.y2],[L.x,L.y]);else if(L instanceof wr||L instanceof An){if(y=ws([$.x,$.y],[L.x,L.y]),F){var vt=g?ws([g.x,g.y],[L.x,L.y]):y;h.addMarker(new Pn(s,[$.x,$.y],Math.atan2(vt[1],vt[0]),!0))}Y&&h.addMarker(new Pn(l,[L.x,L.y],Math.atan2(y[1],y[0]))),it&&(vt=L instanceof wr?d:$ instanceof wr?y:da(lo(d,y)),h.addMarker(new Pn(a,[$.x,$.y],Math.atan2(vt[1],vt[0])))),d=y}else L instanceof Ml&&(y=ws([$.x,$.y],[w.x,w.y]),it&&(vt=$ instanceof wr?y:da(lo(d,y)),h.addMarker(new Pn(a,[$.x,$.y],Math.atan2(vt[1],vt[0])))),Y&&(vt=da(lo(y,P)),h.addMarker(new Pn(l,[w.x,w.y],Math.atan2(vt[1],vt[0])))),d=y);else{w=L instanceof wr&&L;var ot=f[T+1];(ot instanceof wr||ot instanceof An||ot instanceof Ei)&&(P=ws([w.x,w.y],[ot.x,ot.y]))}},A=0;A<f.length;A++)N(A)}return h.markers.forEach(function(T){var L=i.refsHandler.get(T.id);if(L){var F=Ot(L.element,i.styleSheets,"orient");F!=null&&(T.isStartMarker&&F==="auto-start-reverse"&&(T.angle+=Math.PI),isNaN(Number(F))||(T.angle=parseFloat(F)/180*Math.PI))}}),h},t}(Po);function vl(n){var t=Xl.exec(n);return t&&t[1]||void 0}var Cp=function(n){function t(e,i){return n.call(this,!0,e,i)||this}return De(t,n),t.prototype.getPath=function(e){if(e.withinClipPath||e.attributeState.stroke===null)return null;var i=parseFloat(this.element.getAttribute("x1")||"0"),s=parseFloat(this.element.getAttribute("y1")||"0"),a=parseFloat(this.element.getAttribute("x2")||"0"),l=parseFloat(this.element.getAttribute("y2")||"0");return i||a||s||l?new Ts().moveTo(i,s).lineTo(a,l):null},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return Zi(this,e,i)},t.prototype.fillOrStroke=function(e){return je(this,void 0,void 0,function(){return Xe(this,function(i){switch(i.label){case 0:return e.attributeState.fill=null,[4,n.prototype.fillOrStroke.call(this,e)];case 1:return i.sent(),[2]}})})},t}(Pa),$h=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return De(t,n),t.prototype.apply=function(e){return je(this,void 0,void 0,function(){var i,s,a,l,h;return Xe(this,function(f){switch(f.label){case 0:return this.isVisible(e.attributeState.visibility!=="hidden",e)?((i=e.clone()).transform=i.pdf.unitMatrix,Ul(i,this),s=Ot(this.element,i.styleSheets,"clip-path"),s&&s!=="none"&&(a=Hh(s,0,i))?a.isVisible(!0,i)?[4,Vh(this,a,i)]:[3,2]:[3,3]):[2];case 1:return f.sent(),[3,3];case 2:return[2];case 3:Wl(i,e,this.element),l=0,h=this.children,f.label=4;case 4:return l<h.length?[4,h[l].render(i)]:[3,7];case 5:f.sent(),f.label=6;case 6:return l++,[3,4];case 7:return[2]}})})},t.prototype.getBoundingBoxCore=function(e){return Yl(e,this)},t.prototype.isVisible=function(e,i){return Tn(this,e,i)},t.prototype.computeNodeTransformCore=function(e){var i=parseFloat(Ot(this.element,e.styleSheets,"x")||"0"),s=parseFloat(Ot(this.element,e.styleSheets,"y")||"0"),a=this.element.getAttribute("viewBox");if(a){var l=di(a),h=parseFloat(Ot(this.element,e.styleSheets,"width")||Ot(this.element.ownerSVGElement,e.styleSheets,"width")||a[2]),f=parseFloat(Ot(this.element,e.styleSheets,"height")||Ot(this.element.ownerSVGElement,e.styleSheets,"height")||a[3]);return wa(this.element,l,i,s,h,f,e)}return e.pdf.Matrix(1,0,0,1,i,s)},t}(xa),So=function(n,t){this.width=n,this.height=t},Ip=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return De(t,n),t.prototype.renderCore=function(e){return je(this,void 0,void 0,function(){var i,s,a,l,h,f,d,y,w,P,g,N,A;return Xe(this,function(T){switch(T.label){case 0:return i=parseFloat,(s=this.element.getAttribute("href")||this.element.getAttribute("xlink:href"))?(a=s.substring(1),l=e.refsHandler.get(a),h=Cn(l.element,"symbol,svg")&&l.element.hasAttribute("viewBox"),f=i(Ot(this.element,e.styleSheets,"x")||"0"),d=i(Ot(this.element,e.styleSheets,"y")||"0"),y=void 0,w=void 0,h?(y=i(Ot(this.element,e.styleSheets,"width")||Ot(l.element,e.styleSheets,"width")||"0"),w=i(Ot(this.element,e.styleSheets,"height")||Ot(l.element,e.styleSheets,"height")||"0"),f+=i(Ot(l.element,e.styleSheets,"x")||"0"),d+=i(Ot(l.element,e.styleSheets,"y")||"0"),g=di(l.element.getAttribute("viewBox")),P=wa(l.element,g,f,d,y,w,e)):P=e.pdf.Matrix(1,0,0,1,f,d),N=Is.getContextColors(e,!0),A=new In(e.pdf,{refsHandler:e.refsHandler,styleSheets:e.styleSheets,withinUse:!0,viewport:h?new So(y,w):e.viewport,svg2pdfParameters:e.svg2pdfParameters,textMeasure:e.textMeasure,attributeState:Object.assign(Is.default(),N)}),[4,e.refsHandler.getRendered(a,N,function(L){return t.renderReferencedNode(L,a,A)})]):[2];case 1:return T.sent(),e.pdf.saveGraphicsState(),e.pdf.setCurrentTransformationMatrix(e.transform),h&&Ot(l.element,e.styleSheets,"overflow")!=="visible"&&(e.pdf.rect(f,d,y,w),e.pdf.clip().discardPath()),e.pdf.doFormObject(e.refsHandler.generateKey(a,N),P),e.pdf.restoreGraphicsState(),[2]}})})},t.renderReferencedNode=function(e,i,s){return je(this,void 0,void 0,function(){var a;return Xe(this,function(l){switch(l.label){case 0:return a=[(a=e.getBoundingBox(s))[0]-.5*a[2],a[1]-.5*a[3],2*a[2],2*a[3]],s.pdf.beginFormObject(a[0],a[1],a[2],a[3],s.pdf.unitMatrix),e instanceof $h?[4,e.apply(s)]:[3,2];case 1:return l.sent(),[3,4];case 2:return[4,e.render(s)];case 3:l.sent(),l.label=4;case 4:return s.pdf.endFormObject(s.refsHandler.generateKey(i,s.attributeState)),[2]}})})},t.prototype.getBoundingBoxCore=function(e){return ba(this.element,e)},t.prototype.isVisible=function(e,i){return Zi(this,e,i)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t}(Po),Tp=function(n){function t(e,i){return n.call(this,!1,e,i)||this}return De(t,n),t.prototype.getPath=function(e){var i=parseFloat(Ot(this.element,e.styleSheets,"width")||"0"),s=parseFloat(Ot(this.element,e.styleSheets,"height")||"0");if(!isFinite(i)||i<=0||!isFinite(s)||s<=0)return null;var a=Ot(this.element,e.styleSheets,"rx"),l=Ot(this.element,e.styleSheets,"ry"),h=Math.min(parseFloat(a||l||"0"),.5*i),f=Math.min(parseFloat(l||a||"0"),.5*s),d=parseFloat(Ot(this.element,e.styleSheets,"x")||"0"),y=parseFloat(Ot(this.element,e.styleSheets,"y")||"0"),w=4/3*(Math.SQRT2-1);return h===0&&f===0?new Ts().moveTo(d,y).lineTo(d+i,y).lineTo(d+i,y+s).lineTo(d,y+s).close():new Ts().moveTo(d+=h,y).lineTo(d+=i-2*h,y).curveTo(d+h*w,y,d+h,y+(f-f*w),d+=h,y+=f).lineTo(d,y+=s-2*f).curveTo(d,y+f*w,d-h*w,y+f,d-=h,y+=f).lineTo(d+=2*h-i,y).curveTo(d-h*w,y,d-h,y-f*w,d-=h,y-=f).lineTo(d,y+=2*f-s).curveTo(d,y-f*w,d+h*w,y-f,d+=h,y-=f).close()},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return Zi(this,e,i)},t}(Pa),Jh=function(n){function t(e,i){return n.call(this,!1,e,i)||this}return De(t,n),t.prototype.getPath=function(e){var i=this.getRx(e),s=this.getRy(e);if(!isFinite(i)||s<=0||!isFinite(s)||s<=0)return null;var a=parseFloat(Ot(this.element,e.styleSheets,"cx")||"0"),l=parseFloat(Ot(this.element,e.styleSheets,"cy")||"0"),h=4/3*(Math.SQRT2-1)*i,f=4/3*(Math.SQRT2-1)*s;return new Ts().moveTo(a+i,l).curveTo(a+i,l-f,a+h,l-s,a,l-s).curveTo(a-h,l-s,a-i,l-f,a-i,l).curveTo(a-i,l+f,a-h,l+s,a,l+s).curveTo(a+h,l+s,a+i,l+f,a+i,l)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return Zi(this,e,i)},t}(Pa),Fp=function(n){function t(e,i){return n.call(this,e,i)||this}return De(t,n),t.prototype.getRx=function(e){return parseFloat(Ot(this.element,e.styleSheets,"rx")||"0")},t.prototype.getRy=function(e){return parseFloat(Ot(this.element,e.styleSheets,"ry")||"0")},t}(Jh);function Zh(n){var t="invisible",e=n.stroke&&n.strokeWidth!==0,i=n.fill;return i&&e?t="fillThenStroke":i?t="fill":e&&(t="stroke"),t}function ah(n){return n.replace(/[\n\r]/g,"")}function oh(n){return n.replace(/[\t]/g," ")}function lh(n){return n.replace(/ +/g," ")}function uh(n,t,e){switch(Ot(n,e.styleSheets,"text-transform")){case"uppercase":return t.toUpperCase();case"lowercase":return t.toLowerCase();default:return t}}var yl=function(){function n(t,e,i,s){this.textNode=t,this.texts=[],this.textNodes=[],this.contexts=[],this.textAnchor=e,this.originX=i,this.originY=s,this.textMeasures=[]}return n.prototype.setX=function(t){this.originX=t},n.prototype.setY=function(t){this.originY=t},n.prototype.add=function(t,e,i){this.texts.push(e),this.textNodes.push(t),this.contexts.push(i)},n.prototype.rightTrimText=function(){for(var t=this.texts.length-1;t>=0;t--)if(this.contexts[t].attributeState.xmlSpace==="default"&&(this.texts[t]=this.texts[t].replace(/\s+$/,"")),this.texts[t].match(/[^\s]/))return!1;return!0},n.prototype.measureText=function(t){for(var e=0;e<this.texts.length;e++)this.textMeasures.push({width:t.textMeasure.measureTextWidth(this.texts[e],this.contexts[e].attributeState),length:this.texts[e].length})},n.prototype.put=function(t,e){var i,s,a,l,h=[],f=[],d=[],y=this.originX,w=this.originY,P=y,g=y;for(i=0;i<this.textNodes.length;i++){s=this.textNodes[i],a=this.contexts[i],l=this.textMeasures[i]||{width:t.textMeasure.measureTextWidth(this.texts[i],this.contexts[i].attributeState),length:this.texts[i].length};var N=y,A=w;if(s.nodeName!=="#text"&&!h.includes(s)){h.push(s);var T=n.resolveRelativePositionAttribute(s,"dx");T!==null&&(N+=Gi(T,a.attributeState.fontSize));var L=n.resolveRelativePositionAttribute(s,"dy");L!==null&&(A+=Gi(L,a.attributeState.fontSize))}f[i]=N,d[i]=A,y=N+l.width+l.length*e,w=A,P=Math.min(P,N),g=Math.max(g,y)}var F=0;switch(this.textAnchor){case"start":F=0;break;case"middle":F=(g-P)/2;break;case"end":F=g-P}for(i=0;i<this.textNodes.length;i++)if(s=this.textNodes[i],a=this.contexts[i],s.nodeName==="#text"||a.attributeState.visibility!=="hidden"){t.pdf.saveGraphicsState(),Wl(a,t,s);var Y=a.attributeState.alignmentBaseline,it=Zh(a.attributeState);t.pdf.text(this.texts[i],f[i]-F,d[i],{baseline:jh(Y),angle:t.transform,renderingMode:it==="fill"?void 0:it,charSpace:e===0?void 0:e}),t.pdf.restoreGraphicsState()}return[y,w]},n.resolveRelativePositionAttribute=function(t,e){for(var i,s=t;s&&Cn(s,"tspan");){if(s.hasAttribute(e))return s.getAttribute(e);if(((i=t.parentElement)===null||i===void 0?void 0:i.firstChild)!==t)break;s=s.parentElement}return null},n}(),kp=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.boundingBox=[],e}return De(t,n),t.prototype.processTSpans=function(e,i,s,a,l,h){for(var f=s.pdf.getFontSize(),d=s.attributeState.xmlSpace,y=!0,w=!1,P=0;P<i.childNodes.length;P++){var g=i.childNodes[P];if(g.textContent){var N=g.textContent;if(g.nodeName==="#text"){var A=ah(N);A=oh(A),d==="default"&&(A=lh(A),y&&A.match(/^\s/)&&(w=!0),A.match(/[^\s]/)&&(y=!1),h.prevText.match(/\s$/)&&(A=A.replace(/^\s+/,"")));var T=uh(i,A,s);l.add(i,T,s),h.prevText=N,h.prevContext=s}else if(!Cn(g,"title")){if(Cn(g,"tspan")){var L=g,F=L.getAttribute("x");if(F!==null){var Y=Gi(F,f);l=new yl(this,Ot(L,s.styleSheets,"text-anchor")||s.attributeState.textAnchor,Y,0),a.push({type:"y",chunk:l})}var it=L.getAttribute("y");if(it!==null){var $=Gi(it,f);l=new yl(this,Ot(L,s.styleSheets,"text-anchor")||s.attributeState.textAnchor,0,$),a.push({type:"x",chunk:l})}var vt=s.clone();Ul(vt,e,L),this.processTSpans(e,L,vt,a,l,h)}}}}return w},t.prototype.renderCore=function(e){return je(this,void 0,void 0,function(){var i,s,a,l,h,f,d,y,w,P,g,N,A,T,L,F,Y,it,$,vt,ot,J,lt;return Xe(this,function(yt){if(e.pdf.saveGraphicsState(),i=0,s=0,a=1,l=e.pdf.getFontSize(),h=Gi(this.element.getAttribute("x"),l),f=Gi(this.element.getAttribute("y"),l),d=Gi(this.element.getAttribute("dx"),l),y=Gi(this.element.getAttribute("dy"),l),w=parseFloat(this.element.getAttribute("textLength")||"0"),P=e.attributeState.visibility,this.element.childElementCount===0)g=this.element.textContent||"",N=function(q,R){return q=oh(q=ah(q)),R.xmlSpace==="default"&&(q=lh(q=q.trim())),q}(g,e.attributeState),A=uh(this.element,N,e),i=e.textMeasure.getTextOffset(A,e.attributeState),w>0&&(T=e.textMeasure.measureTextWidth(A,e.attributeState),e.attributeState.xmlSpace==="default"&&g.match(/^\s/)&&(a=0),s=(w-T)/(A.length-a)||0),P==="visible"&&(L=e.attributeState.alignmentBaseline,F=Zh(e.attributeState),e.pdf.text(A,h+d-i,f+y,{baseline:jh(L),angle:e.transform,renderingMode:F==="fill"?void 0:F,charSpace:s===0?void 0:s}),this.boundingBox=[h+d-i,f+y+.1*l,e.textMeasure.measureTextWidth(A,e.attributeState),l]);else{for(Y=[],it=new yl(this,e.attributeState.textAnchor,h+d,f+y),Y.push({type:"",chunk:it}),$=this.processTSpans(this,this.element,e,Y,it,{prevText:" ",prevContext:e}),a=$?0:1,vt=!0,ot=Y.length-1;ot>=0;ot--)vt&&(vt=Y[ot].chunk.rightTrimText());w>0&&(J=0,lt=0,Y.forEach(function(q){var R=q.chunk;R.measureText(e),R.textMeasures.forEach(function(Z){var G=Z.width,bt=Z.length;J+=G,lt+=bt})}),s=(w-J)/(lt-a)),Y.reduce(function(q,R){var Z=R.type,G=R.chunk;return Z==="x"?G.setX(q[0]):Z==="y"&&G.setY(q[1]),G.put(e,s)},[0,0])}return e.pdf.restoreGraphicsState(),[2]})})},t.prototype.isVisible=function(e,i){return Tn(this,e,i)},t.prototype.getBoundingBoxCore=function(e){return this.boundingBox.length>0?this.boundingBox:ba(this.element,e)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t}(Po),Ep=function(n){function t(e,i){return n.call(this,!0,e,i)||this}return De(t,n),t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return Zi(this,e,i)},t.prototype.getPath=function(e){var i,s,a=new wp(Ot(this.element,e.styleSheets,"d")||"").unshort().unarc().abs(),l=new Ts;return a.iterate(function(h){switch(h[0]){case"M":l.moveTo(h[1],h[2]);break;case"L":l.lineTo(h[1],h[2]);break;case"H":l.lineTo(h[1],s);break;case"V":l.lineTo(i,h[1]);break;case"C":l.curveTo(h[1],h[2],h[3],h[4],h[5],h[6]);break;case"Q":var f=nh([i,s],[h[1],h[2]]),d=nh([h[3],h[4]],[h[1],h[2]]);l.curveTo(f[0],f[1],d[0],d[1],h[3],h[4]);break;case"Z":l.close()}switch(h[0]){case"M":case"L":i=h[1],s=h[2];break;case"H":i=h[1];break;case"V":s=h[1];break;case"C":i=h[5],s=h[6];break;case"Q":i=h[3],s=h[4]}}),l},t}(Pa),Mp=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,((?:.|\s)*)$/i,Op=function(n){function t(e,i){var s=n.call(this,e,i)||this;return s.imageLoadingPromise=null,s.imageUrl=s.element.getAttribute("xlink:href")||s.element.getAttribute("href"),s.imageUrl&&(s.imageLoadingPromise=t.fetchImageData(s.imageUrl)),s}return De(t,n),t.prototype.renderCore=function(e){return je(this,void 0,void 0,function(){var i,s,a,l,h,f,d,y,w,P,g,N,A,T,L,F,Y,it;return Xe(this,function($){switch($.label){case 0:return this.imageLoadingPromise?(e.pdf.setCurrentTransformationMatrix(e.transform),i=parseFloat(Ot(this.element,e.styleSheets,"width")||"0"),s=parseFloat(Ot(this.element,e.styleSheets,"height")||"0"),a=parseFloat(Ot(this.element,e.styleSheets,"x")||"0"),l=parseFloat(Ot(this.element,e.styleSheets,"y")||"0"),!isFinite(i)||i<=0||!isFinite(s)||s<=0?[2]:[4,this.imageLoadingPromise]):[2];case 1:return h=$.sent(),f=h.data,(d=h.format).indexOf("svg")!==0?[3,3]:(y=new DOMParser,w=y.parseFromString(f,"image/svg+xml").firstElementChild,(!(P=this.element.getAttribute("preserveAspectRatio"))||P.indexOf("defer")<0||!w.getAttribute("preserveAspectRatio"))&&w.setAttribute("preserveAspectRatio",P||""),w.setAttribute("x",String(a)),w.setAttribute("y",String(l)),w.setAttribute("width",String(i)),w.setAttribute("height",String(s)),[4,Hl(w,g={}).render(new In(e.pdf,{refsHandler:new Rh(g),styleSheets:e.styleSheets,viewport:new So(i,s),svg2pdfParameters:e.svg2pdfParameters,textMeasure:e.textMeasure}))]);case 2:return $.sent(),[2];case 3:N="data:image/".concat(d,";base64,").concat(btoa(f)),$.label=4;case 4:return $.trys.push([4,6,,7]),[4,t.getImageDimensions(N)];case 5:return A=$.sent(),T=A[0],L=A[1],F=[0,0,T,L],Y=wa(this.element,F,a,l,i,s,e),e.pdf.setCurrentTransformationMatrix(Y),e.pdf.addImage(N,"",0,0,T,L),[3,7];case 6:return it=$.sent(),typeof console=="object"&&console.warn&&console.warn("Could not load image ".concat(this.imageUrl,`. 
`).concat(it)),[3,7];case 7:return[2]}})})},t.prototype.getBoundingBoxCore=function(e){return ba(this.element,e)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return Zi(this,e,i)},t.fetchImageData=function(e){return je(this,void 0,void 0,function(){var i,s,a,l,h;return Xe(this,function(f){switch(f.label){case 0:if(!(a=e.match(Mp)))return[3,1];if(l=a[2],(h=l.split("/"))[0]!=="image")throw new Error("Unsupported image URL: ".concat(e));return s=h[1],i=a[5],a[4]==="base64"?(i=i.replace(/\s/g,""),i=atob(i)):i=decodeURIComponent(i),[3,3];case 1:return[4,t.fetchImage(e)];case 2:i=f.sent(),s=e.substring(e.lastIndexOf(".")+1),f.label=3;case 3:return[2,{data:i,format:s}]}})})},t.fetchImage=function(e){return new Promise(function(i,s){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){if(a.status!==200)throw new Error("Error ".concat(a.status,": Failed to load image '").concat(e,"'"));for(var l=new Uint8Array(a.response),h="",f=0;f<l.length;f++)h+=String.fromCharCode(l[f]);i(h)},a.onerror=s,a.onabort=s,a.send(null)})},t.getMimeType=function(e){switch(e=e.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";default:return"image/".concat(e)}},t.getImageDimensions=function(e){return new Promise(function(i,s){var a=new Image;a.onload=function(){i([a.width,a.height])},a.onerror=s,a.src=e})},t}(Po),Kh=function(n){function t(e,i,s){var a=n.call(this,!0,i,s)||this;return a.closed=e,a}return De(t,n),t.prototype.getPath=function(e){if(!this.element.hasAttribute("points")||this.element.getAttribute("points")==="")return null;var i=t.parsePointsString(this.element.getAttribute("points")),s=new Ts;if(i.length<1)return s;s.moveTo(i[0][0],i[0][1]);for(var a=1;a<i.length;a++)s.lineTo(i[a][0],i[a][1]);return this.closed&&s.close(),s},t.prototype.isVisible=function(e,i){return Zi(this,e,i)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.parsePointsString=function(e){for(var i=di(e),s=[],a=0;a<i.length-1;a+=2){var l=i[a],h=i[a+1];s.push([l,h])}return s},t}(Pa),Bp=function(n){function t(e,i){return n.call(this,!0,e,i)||this}return De(t,n),t}(Kh),Dp=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return De(t,n),t.prototype.render=function(e){return Promise.resolve()},t.prototype.getBoundingBoxCore=function(e){return[0,0,0,0]},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return Zi(this,e,i)},t}(zl),qp=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return De(t,n),t.prototype.apply=function(e){return je(this,void 0,void 0,function(){var i,s,a,l,h,f;return Xe(this,function(d){switch(d.label){case 0:i=this.computeNodeTransform(e),s=this.getBoundingBox(e),e.pdf.beginFormObject(s[0],s[1],s[2],s[3],i),a=Is.getContextColors(e),function(y){var w=y.attributeState,P=y.pdf,g=1,N=1;g*=w.fillOpacity,g*=w.opacity,w.fill instanceof Lr&&w.fill.color.a!==void 0&&(g*=w.fill.color.a),N*=w.strokeOpacity,N*=w.opacity,w.stroke instanceof Lr&&w.stroke.color.a!==void 0&&(N*=w.stroke.color.a);var A,T={};if(T.opacity=g,T["stroke-opacity"]=N,P.setGState(new Gn(T)),w.fill&&w.fill instanceof Lr&&w.fill.color.ok?P.setFillColor(w.fill.color.r,w.fill.color.g,w.fill.color.b):P.setFillColor(0,0,0),P.setLineWidth(w.strokeWidth),w.stroke instanceof Lr?P.setDrawColor(w.stroke.color.r,w.stroke.color.g,w.stroke.color.b):P.setDrawColor(0,0,0),P.setLineCap(w.strokeLinecap),P.setLineJoin(w.strokeLinejoin),w.strokeDasharray?P.setLineDashPattern(w.strokeDasharray,w.strokeDashoffset):P.setLineDashPattern([],0),P.setLineMiterLimit(w.strokeMiterlimit),A=$i.hasOwnProperty(w.fontFamily)?$i[w.fontFamily]:w.fontFamily,w.fill&&w.fill instanceof Lr&&w.fill.color.ok){var L=w.fill.color;P.setTextColor(L.r,L.g,L.b)}else P.setTextColor(0,0,0);var F="";w.fontWeight==="bold"&&(F="bold"),w.fontStyle==="italic"&&(F+="italic"),F===""&&(F="normal"),A!==void 0||F!==void 0?(A===void 0&&(A=$i.hasOwnProperty(w.fontFamily)?$i[w.fontFamily]:w.fontFamily),P.setFont(A,F)):P.setFont("helvetica",F),P.setFontSize(w.fontSize*P.internal.scaleFactor)}(l=new In(e.pdf,{refsHandler:e.refsHandler,styleSheets:e.styleSheets,viewport:e.viewport,svg2pdfParameters:e.svg2pdfParameters,textMeasure:e.textMeasure,attributeState:Object.assign(Is.default(),a)})),h=0,f=this.children,d.label=1;case 1:return h<f.length?[4,f[h].render(l)]:[3,4];case 2:d.sent(),d.label=3;case 3:return h++,[3,1];case 4:return e.pdf.endFormObject(l.refsHandler.generateKey(this.element.getAttribute("id"),a)),[2]}})})},t.prototype.getBoundingBoxCore=function(e){var i,s=this.element.getAttribute("viewBox");return s&&(i=di(s)),[i&&i[0]||0,i&&i[1]||0,i&&i[2]||parseFloat(this.element.getAttribute("markerWidth")||"3"),i&&i[3]||parseFloat(this.element.getAttribute("markerHeight")||"3")]},t.prototype.computeNodeTransformCore=function(e){var i,s=parseFloat(this.element.getAttribute("refX")||"0"),a=parseFloat(this.element.getAttribute("refY")||"0"),l=this.element.getAttribute("viewBox");if(l){var h=di(l);i=wa(this.element,h,0,0,parseFloat(this.element.getAttribute("markerWidth")||"3"),parseFloat(this.element.getAttribute("markerHeight")||"3"),e,!0),i=e.pdf.matrixMult(e.pdf.Matrix(1,0,0,1,-s,-a),i)}else i=e.pdf.Matrix(1,0,0,1,-s,-a);return i},t.prototype.isVisible=function(e,i){return Tn(this,e,i)},t}(xa),Rp=function(n){function t(e,i){return n.call(this,e,i)||this}return De(t,n),t.prototype.getR=function(e){var i;return(i=this.r)!==null&&i!==void 0?i:this.r=parseFloat(Ot(this.element,e.styleSheets,"r")||"0")},t.prototype.getRx=function(e){return this.getR(e)},t.prototype.getRy=function(e){return this.getR(e)},t}(Jh),jp=function(n){function t(e,i){return n.call(this,!1,e,i)||this}return De(t,n),t}(Kh),Qh=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return De(t,n),t.prototype.renderCore=function(e){return je(this,void 0,void 0,function(){var i,s;return Xe(this,function(a){switch(a.label){case 0:i=0,s=this.children,a.label=1;case 1:return i<s.length?[4,s[i].render(e)]:[3,4];case 2:a.sent(),a.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.getBoundingBoxCore=function(e){return Yl(e,this)},t}(Gh),Xp=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return De(t,n),t.prototype.isVisible=function(e,i){return Tn(this,e,i)},t.prototype.render=function(e){return je(this,void 0,void 0,function(){var i,s,a,l,h;return Xe(this,function(f){switch(f.label){case 0:return this.isVisible(e.attributeState.visibility!=="hidden",e)?(i=this.getX(e),s=this.getY(e),a=this.getWidth(e),l=this.getHeight(e),e.pdf.saveGraphicsState(),h=e.transform,this.element.hasAttribute("transform")&&(h=e.pdf.matrixMult(xo(this.element.getAttribute("transform"),e),h)),e.pdf.setCurrentTransformationMatrix(h),e.withinUse||Ot(this.element,e.styleSheets,"overflow")==="visible"||e.pdf.rect(i,s,a,l).clip().discardPath(),[4,n.prototype.render.call(this,e.clone({transform:e.pdf.unitMatrix,viewport:e.withinUse?e.viewport:new So(a,l)}))]):[2];case 1:return f.sent(),e.pdf.restoreGraphicsState(),[2]}})})},t.prototype.computeNodeTransform=function(e){return this.computeNodeTransformCore(e)},t.prototype.computeNodeTransformCore=function(e){if(e.withinUse)return e.pdf.unitMatrix;var i,s=this.getX(e),a=this.getY(e),l=this.getViewBox();if(l){var h=this.getWidth(e),f=this.getHeight(e);i=wa(this.element,l,s,a,h,f,e)}else i=e.pdf.Matrix(1,0,0,1,s,a);return i},t.prototype.getWidth=function(e){if(this.width!==void 0)return this.width;var i,s,a=e.svg2pdfParameters;if(this.isOutermostSvg(e))if(a.width!=null)i=a.width;else if(s=Ot(this.element,e.styleSheets,"width"))i=parseFloat(s);else{var l=this.getViewBox();if(l&&(a.height!=null||Ot(this.element,e.styleSheets,"height"))){var h=l[2]/l[3];i=this.getHeight(e)*h}else i=Math.min(300,e.viewport.width,2*e.viewport.height)}else i=(s=Ot(this.element,e.styleSheets,"width"))?parseFloat(s):e.viewport.width;return this.width=i},t.prototype.getHeight=function(e){if(this.height!==void 0)return this.height;var i,s,a=e.svg2pdfParameters;if(this.isOutermostSvg(e))if(a.height!=null)i=a.height;else if(s=Ot(this.element,e.styleSheets,"height"))i=parseFloat(s);else{var l=this.getViewBox();if(l){var h=l[2]/l[3];i=this.getWidth(e)/h}else i=Math.min(150,e.viewport.width/2,e.viewport.height)}else i=(s=Ot(this.element,e.styleSheets,"height"))?parseFloat(s):e.viewport.height;return this.height=i},t.prototype.getX=function(e){if(this.x!==void 0)return this.x;if(this.isOutermostSvg(e))return this.x=0;var i=Ot(this.element,e.styleSheets,"x");return this.x=i?parseFloat(i):0},t.prototype.getY=function(e){if(this.y!==void 0)return this.y;if(this.isOutermostSvg(e))return this.y=0;var i=Ot(this.element,e.styleSheets,"y");return this.y=i?parseFloat(i):0},t.prototype.getViewBox=function(){if(this.viewBox!==void 0)return this.viewBox;var e=this.element.getAttribute("viewBox");return this.viewBox=e?di(e):void 0},t.prototype.isOutermostSvg=function(e){return e.svg2pdfParameters.element===this.element},t}(Qh),tf=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return De(t,n),t.prototype.isVisible=function(e,i){return Tn(this,e,i)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t}(Qh),Yp=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return De(t,n),t.prototype.renderCore=function(e){return je(this,void 0,void 0,function(){var i,s,a,l;return Xe(this,function(h){switch(h.label){case 0:return[4,n.prototype.renderCore.call(this,e)];case 1:return h.sent(),(i=Ot(this.element,e.styleSheets,"href"))&&(s=this.getBoundingBox(e),a=e.pdf.internal.scaleFactor,l=e.pdf.internal.pageSize.getHeight(),e.pdf.link(a*(s[0]*e.transform.sx+e.transform.tx),l-a*(s[1]*e.transform.sy+e.transform.ty),a*s[2],a*s[3],{url:i})),[2]}})})},t}(tf),zp=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return De(t,n),t.prototype.apply=function(e){return je(this,void 0,void 0,function(){var i,s,a,l,h;return Xe(this,function(f){switch(f.label){case 0:if(!this.isVisible(!0,e))return[2];i=e.pdf.matrixMult(this.computeNodeTransform(e),e.transform),e.pdf.setCurrentTransformationMatrix(i),s=0,a=this.children,f.label=1;case 1:return s<a.length?[4,a[s].render(new In(e.pdf,{refsHandler:e.refsHandler,styleSheets:e.styleSheets,viewport:e.viewport,withinClipPath:!0,svg2pdfParameters:e.svg2pdfParameters,textMeasure:e.textMeasure}))]:[3,4];case 2:f.sent(),f.label=3;case 3:return s++,[3,1];case 4:return l=this.children.length>0&&!!Ot(this.children[0].element,e.styleSheets,"clip-rule"),h=l?this.getClipRuleAttr(this.children[0].element,e.styleSheets):this.getClipRuleAttr(this.element,e.styleSheets),e.pdf.clip(h).discardPath(),e.pdf.setCurrentTransformationMatrix(i.inversed()),[2]}})})},t.prototype.getBoundingBoxCore=function(e){return Yl(e,this)},t.prototype.isVisible=function(e,i){return Tn(this,e,i)},t.prototype.getClipRuleAttr=function(e,i){return Ot(e,i,"clip-rule")==="evenodd"?"evenodd":void 0},t}(xa);function Hl(n,t){var e,i=[];switch(function(a,l){for(var h=[],f=0;f<a.childNodes.length;f++){var d=a.childNodes[f];d.nodeName.charAt(0)!=="#"&&h.push(d)}for(f=0;f<h.length;f++)l(f,h[f])}(n,function(a,l){return i.push(Hl(l,t))}),n.tagName.toLowerCase()){case"a":e=new Yp(n,i);break;case"g":e=new tf(n,i);break;case"circle":e=new Rp(n,i);break;case"clippath":e=new zp(n,i);break;case"ellipse":e=new Fp(n,i);break;case"lineargradient":e=new zh(n,i);break;case"image":e=new Op(n,i);break;case"line":e=new Cp(n,i);break;case"marker":e=new qp(n,i);break;case"path":e=new Ep(n,i);break;case"pattern":e=new Wh(n,i);break;case"polygon":e=new Bp(n,i);break;case"polyline":e=new jp(n,i);break;case"radialgradient":e=new Uh(n,i);break;case"rect":e=new Tp(n,i);break;case"svg":e=new Xp(n,i);break;case"symbol":e=new $h(n,i);break;case"text":e=new kp(n,i);break;case"use":e=new Ip(n,i);break;default:e=new Dp(n,i)}if(t!=null&&e.element.hasAttribute("id")){var s=Dh(e.element.id,{isIdentifier:!0});t[s]=t[s]||e}return e.children.forEach(function(a){return a.setParent(e)}),e}var Up=function(){function n(t,e){this.rootSvg=t,this.loadExternalSheets=e,this.styleSheets=[]}return n.prototype.load=function(){return je(this,void 0,void 0,function(){var t;return Xe(this,function(e){switch(e.label){case 0:return[4,this.collectStyleSheetTexts()];case 1:return t=e.sent(),this.parseCssSheets(t),[2]}})})},n.prototype.collectStyleSheetTexts=function(){return je(this,void 0,void 0,function(){var t,e,i,s,a;return Xe(this,function(l){switch(l.label){case 0:if(t=[],this.loadExternalSheets&&this.rootSvg.ownerDocument)for(s=0;s<this.rootSvg.ownerDocument.childNodes.length;s++)(e=this.rootSvg.ownerDocument.childNodes[s]).nodeName==="xml-stylesheet"&&typeof e.data=="string"&&t.push(n.loadSheet(e.data.match(/href=["'].*?["']/)[0].split("=")[1].slice(1,-1)));for(i=this.rootSvg.querySelectorAll("style,link"),s=0;s<i.length;s++)Cn(a=i[s],"style")?t.push(a.textContent):this.loadExternalSheets&&Cn(a,"link")&&a.getAttribute("rel")==="stylesheet"&&a.hasAttribute("href")&&t.push(n.loadSheet(a.getAttribute("href")));return[4,Promise.all(t)];case 1:return[2,l.sent().filter(function(h){return h!==null})]}})})},n.prototype.parseCssSheets=function(t){for(var e=document.implementation.createHTMLDocument(""),i=0,s=t;i<s.length;i++){var a=s[i],l=e.createElement("style");l.textContent=a,e.body.appendChild(l);var h=l.sheet;if(h instanceof CSSStyleSheet){for(var f=h.cssRules.length-1;f>=0;f--){var d=h.cssRules[f];if(d instanceof CSSStyleRule){var y=d;if(y.selectorText.indexOf(",")>=0){h.deleteRule(f);for(var w=y.cssText.substring(y.selectorText.length),P=n.splitSelectorAtCommas(y.selectorText),g=0;g<P.length;g++)h.insertRule(P[g]+w,f+g)}}else h.deleteRule(f)}this.styleSheets.push(h)}}},n.splitSelectorAtCommas=function(t){for(var e,i=/,|["']/g,s=/[^\\]["]/g,a=/[^\\][']/g,l=[],h="initial",f=-1,d=s,y=0;y<t.length;)switch(h){case"initial":i.lastIndex=y,(e=i.exec(t))?(e[0]===","?(l.push(t.substring(f+1,i.lastIndex-1).trim()),f=i.lastIndex-1):(h="withinQuotes",d=e[0]==='"'?s:a),y=i.lastIndex):(l.push(t.substring(f+1).trim()),y=t.length);break;case"withinQuotes":d.lastIndex=y,(e=d.exec(t))&&(y=d.lastIndex,h="initial")}return l},n.loadSheet=function(t){return new Promise(function(e,i){var s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="text",s.onload=function(){s.status!==200&&i(new Error("Error ".concat(s.status,": Failed to load '").concat(t,"'"))),e(s.responseText)},s.onerror=i,s.onabort=i,s.send(null)}).catch(function(){return null})},n.prototype.getPropertyValue=function(t,e){for(var i=[],s=0,a=this.styleSheets;s<a.length;s++)for(var l=a[s],h=0;h<l.cssRules.length;h++){var f=l.cssRules[h];f.style.getPropertyValue(e)&&t.matches(f.selectorText)&&i.push(f)}if(i.length!==0)return i.reduce(function(d,y){return P=y,((g=(w=d).style.getPropertyPriority(e))!==P.style.getPropertyPriority(e)?g==="important"?1:-1:xp(w.selectorText,P.selectorText))===1?d:y;var w,P,g}).style.getPropertyValue(e)||void 0},n}(),Wp=function(){function n(){this.measureMethods={}}return n.prototype.getTextOffset=function(t,e){var i=e.textAnchor;if(i==="start")return 0;var s=this.measureTextWidth(t,e),a=0;switch(i){case"end":a=s;break;case"middle":a=s/2}return a},n.prototype.measureTextWidth=function(t,e){if(t.length===0)return 0;var i=e.fontFamily;return this.getMeasureFunction(i).call(this,t,e.fontFamily,e.fontSize+"px",e.fontStyle,e.fontWeight)},n.prototype.getMeasurementTextNode=function(){if(!this.textMeasuringTextElement){this.textMeasuringTextElement=document.createElementNS(sh,"text");var t=document.createElementNS(sh,"svg");t.appendChild(this.textMeasuringTextElement),t.style.setProperty("position","absolute"),t.style.setProperty("visibility","hidden"),document.body.appendChild(t)}return this.textMeasuringTextElement},n.prototype.canvasTextMeasure=function(t,e,i,s,a){var l=document.createElement("canvas").getContext("2d");return l!=null?(l.font=[s,a,i,e].join(" "),l.measureText(t).width):0},n.prototype.svgTextMeasure=function(t,e,i,s,a,l){l===void 0&&(l=this.getMeasurementTextNode());var h=l;return h.setAttribute("font-family",e),h.setAttribute("font-size",i),h.setAttribute("font-style",s),h.setAttribute("font-weight",a),h.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),h.textContent=t,h.getBBox().width},n.prototype.getMeasureFunction=function(t){var e=this.measureMethods[t];if(!e){var i="16px",s="normal",a="normal",l=this.canvasTextMeasure(n.testString,t,i,s,a),h=this.svgTextMeasure(n.testString,t,i,s,a);e=Math.abs(l-h)<n.epsilon?this.canvasTextMeasure:this.svgTextMeasure,this.measureMethods[t]=e}return e},n.prototype.cleanupTextMeasuring=function(){if(this.textMeasuringTextElement){var t=this.textMeasuringTextElement.parentNode;t&&document.body.removeChild(t),this.textMeasuringTextElement=void 0}},n.testString=`abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789!"$%&/()=?'\\+*-_.:,;^}][{#~|<>`,n.epsilon=.1,n}();function ef(n,t){return je(this,arguments,void 0,function(e,i,s){var a,l,h,f,d,y,w,P,g,N,A,T,L,F;return s===void 0&&(s={}),Xe(this,function(Y){switch(Y.label){case 0:return a=(T=s.x)!==null&&T!==void 0?T:0,l=(L=s.y)!==null&&L!==void 0?L:0,h=(F=s.loadExternalStyleSheets)!==null&&F!==void 0&&F,d=new Rh(f={}),[4,(y=new Up(e,h)).load()];case 1:return Y.sent(),w=new So(i.internal.pageSize.getWidth(),i.internal.pageSize.getHeight()),P=go(go({},s),{element:e}),g=new Wp,N=new In(i,{refsHandler:d,styleSheets:y,viewport:w,svg2pdfParameters:P,textMeasure:g}),i.advancedAPI(),i.saveGraphicsState(),i.setCurrentTransformationMatrix(i.Matrix(1,0,0,1,a,l)),i.setLineWidth(N.attributeState.strokeWidth),A=N.attributeState.fill.color,i.setFillColor(A.r,A.g,A.b),i.setFont(N.attributeState.fontFamily),i.setFontSize(N.attributeState.fontSize*i.internal.scaleFactor),[4,Hl(e,f).render(N)];case 2:return Y.sent(),i.restoreGraphicsState(),i.compatAPI(),N.textMeasure.cleanupTextMeasuring(),[2,i]}})})}ne.API.svg=function(n,t){return t===void 0&&(t={}),ef(n,this,t)};async function rf(n){n.querySelectorAll(".texture-image").forEach(i=>{i.removeAttribute("clip-path")}),n.querySelectorAll(".seam, .seam-allowance").forEach(i=>{i.style.fill="transparent",i.setAttribute("fill","transparent"),!i.style.stroke&&!i.getAttribute("stroke")&&(i.style.stroke="#000")}),await Hp(n)}async function Hp(n){const t=n.querySelectorAll('g[id^="pattern-piece"], g.pattern-unit');for(const e of t){const i=e.querySelector(".texture-image");if(!i)continue;const s=i.getAttribute("clip-path");let a=null,l=null;if(s){const h=s.match(/url\(#([^)]+)\)/);h&&(a=n.querySelector(`#${h[1]}`),a&&(l=a.querySelector("path")))}if(!l&&(l=e.querySelector(".seam-allowance")||e.querySelector(".seam"),!l))throw new Error(`No clipping path available for texture in group ${e.id}. Group must contain clip-path reference or seam/seam-allowance paths.`);if(l)try{const h=await Gp(i,l,e);i.setAttribute("href",h)}catch(h){throw console.error(`Failed to clip texture for ${e.id}:`,h),h}}}function Vp(n){if(!n)throw new Error("Invalid path data: empty or null");const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.style.position="absolute",t.style.visibility="hidden",document.body.appendChild(t);const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",n),t.appendChild(e);const i=e.getBBox();return document.body.removeChild(t),i}async function Gp(n,t,e){return new Promise((i,s)=>{const a=new Image;a.onload=()=>{try{const h=document.createElement("canvas"),f=h.getContext("2d");let d;try{const Y=e.querySelector(".seam-allowance")||e.querySelector(".seam");Y&&Y.getBBox?(d=Y.getBBox(),(d.width===0||d.height===0)&&(d=Vp(t.getAttribute("d")))):d=t.getBBox()}catch(Y){throw console.error("Failed to get bounding box:",Y),new Error(`Failed to calculate bounding box for texture clipping: ${Y.message}`)}const y=parseFloat(n.getAttribute("x")||0),w=parseFloat(n.getAttribute("y")||0),P=parseFloat(n.getAttribute("width")),g=parseFloat(n.getAttribute("height"));if(!d||d.width<=0||d.height<=0)throw new Error(`Invalid bounding box for pattern shape in group ${e.id}: ${d?.width||"undefined"}x${d?.height||"undefined"}. This indicates corrupted pattern geometry.`);if(h.width=Math.ceil(d.width),h.height=Math.ceil(d.height),h.width<=0||h.height<=0)throw new Error(`Invalid canvas size: ${h.width}x${h.height} for group ${e.id}`);f.fillStyle="white",f.fillRect(0,0,h.width,h.height),f.translate(-d.x,-d.y);const N=t.getAttribute("d"),A=t.getAttribute("transform");if(f.save(),A){const Y=A.match(/rotate\(([^)]+)\)/);if(Y){const[it,$,vt]=Y[1].split(/\s+/).map(Number);f.translate($,vt),f.rotate(it*Math.PI/180),f.translate(-$,-vt)}}const T=new Path2D(N);f.clip(T),A&&(f.restore(),f.save());const L=n.getAttribute("transform");if(L){const Y=L.match(/rotate\(([^)]+)\)/);if(Y){const[it,$,vt]=Y[1].split(/\s+/).map(Number);f.translate($,vt),f.rotate(it*Math.PI/180),f.translate(-$,-vt)}}f.drawImage(a,y,w,P,g),f.restore();const F=h.toDataURL("image/png");if(!F||!F.startsWith("data:image/png;base64,"))throw new Error(`Invalid data URL generated: ${F}`);n.setAttribute("x",d.x),n.setAttribute("y",d.y),n.setAttribute("width",d.width),n.setAttribute("height",d.height),n.removeAttribute("transform"),n.setAttribute("href",F),n.hasAttributeNS("http://www.w3.org/1999/xlink","href")&&n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",F),i(F)}catch(h){s(h)}},a.onerror=h=>{const f=n.getAttribute("href")||n.getAttribute("xlink:href");s(new Error(`Failed to load texture image: ${f?.substring(0,50)}...`))};const l=n.getAttribute("href")||n.getAttribute("xlink:href");if(!l){s(new Error("No image source found"));return}l.startsWith("data:")||(a.crossOrigin="anonymous"),a.src=l})}async function $p(n,t){const i=n.cloneNode(!0);return await rf(i),i.querySelectorAll("path.seam-allowance").forEach(a=>{a.setAttribute("stroke-width","2")}),await Jp(i,t)}async function Jp(n,t){const e=Sa(t),i=Ol(n,e);if(i.pages.length===0&&i.unplacedUnits.length===0)throw new Error("");if(i.unplacedUnits.length>0){const a=i.unplacedUnits.map(h=>`- ${h.id||` ${h.index+1}`}: ${h.width.toFixed(1)}mm  ${h.height.toFixed(1)}mm`).join(`
`),l=`${e.printableWidth}mm  ${e.printableHeight}mm`;throw new Error(`PDF: 

:
${a}
: ${l}

`)}const s=new ne({orientation:t.orientation,unit:"mm",format:t.paperSize});try{for(let l=0;l<i.pages.length;l++){const h=i.pages[l];l>0&&s.addPage();const f=mh(n,h,e);await rf(f),t.addMarks&&Zp(f,l,i.pages.length,e),f.style.position="absolute",f.style.top="-9999px",f.style.left="-9999px",document.body.appendChild(f),Bl(f),Dl(f);try{window.getComputedStyle(f).display,await ef(f,s,{x:e.margin,y:e.margin,width:e.printableWidth,height:e.printableHeight})}finally{f.parentNode&&f.parentNode.removeChild(f)}}const a=`sewing-pattern-${i.pages.length}pages.pdf`;s.save(a)}catch(a){throw console.error("PDF:",a),a}}function Zp(n,t,e,i){const s=document.createElementNS("http://www.w3.org/2000/svg","g");s.setAttribute("class","page-marks");const a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("x",i.printableWidth/2),a.setAttribute("y",i.printableHeight-5),a.setAttribute("text-anchor","middle"),a.setAttribute("font-size","8"),a.setAttribute("fill","black"),a.textContent=`Page ${t+1} / ${e}`,s.appendChild(a);const l=5;[{x:0,y:0},{x:i.printableWidth,y:0},{x:0,y:i.printableHeight},{x:i.printableWidth,y:i.printableHeight}].forEach(f=>{const d=document.createElementNS("http://www.w3.org/2000/svg","line");d.setAttribute("x1",f.x-l),d.setAttribute("y1",f.y),d.setAttribute("x2",f.x+l),d.setAttribute("y2",f.y),d.setAttribute("stroke","black"),d.setAttribute("stroke-width","0.5"),s.appendChild(d);const y=document.createElementNS("http://www.w3.org/2000/svg","line");y.setAttribute("x1",f.x),y.setAttribute("y1",f.y-l),y.setAttribute("x2",f.x),y.setAttribute("y2",f.y+l),y.setAttribute("stroke","black"),y.setAttribute("stroke-width","0.5"),s.appendChild(y)}),n.appendChild(s)}function Sa(n){const t={a4:{width:210,height:297},a3:{width:297,height:420},b4:{width:257,height:364},b5:{width:182,height:257}},e=t[n.paperSize]||t.a4,i=n.orientation==="landscape",s=i?e.height:e.width,a=i?e.width:e.height,l=10,h=n.overlap||0;return{pageWidth:s,pageHeight:a,margin:l,overlap:h,printableWidth:s-l*2,printableHeight:a-l*2,effectiveWidth:s-l*2-h,effectiveHeight:a-l*2-h,seamAllowance:n.seamAllowance||0}}function Kp(n,t){if(!n)return null;const e=n.viewBox.baseVal,i=e.width,s=e.height,a=Sa(t),h=Ol(n,a).pages.length||1;return{width:i.toFixed(1),height:s.toFixed(1),pageCount:h}}async function Qp(n){return new Promise((t,e)=>{const i=new FileReader;i.onload=s=>{try{const l=new DOMParser().parseFromString(s.target.result,"image/svg+xml");if(l.querySelector("parsererror")){e(new Error("Failed to parse SVG file"));return}const f=l.querySelector("svg");if(!f){e(new Error("No valid SVG element found"));return}t(f)}catch(a){e(a)}},i.onerror=()=>e(new Error("Failed to read file")),i.readAsText(n)})}function td(n,t,e){t.addEventListener("change",i=>{const s=i.target.files[0];s&&e(s)}),n.addEventListener("dragover",i=>{i.preventDefault(),n.classList.add("drag-over")}),n.addEventListener("dragleave",()=>{n.classList.remove("drag-over")}),n.addEventListener("drop",i=>{i.preventDefault(),n.classList.remove("drag-over");const s=i.dataTransfer.files[0];s&&e(s)}),n.addEventListener("click",i=>{(i.target===n||i.target.closest(".upload-icon"))&&t.click()})}function ed(n,t=.001){if(t===1)return;const e=n.viewBox.baseVal;n.setAttribute("viewBox",`${e.x*t} ${e.y*t} ${e.width*t} ${e.height*t}`);const i=n.getAttribute("width"),s=n.getAttribute("height");if(i&&i.endsWith("mm")){const l=parseFloat(i);n.setAttribute("width",`${l*t}mm`)}if(s&&s.endsWith("mm")){const l=parseFloat(s);n.setAttribute("height",`${l*t}mm`)}n.querySelectorAll("*").forEach(l=>{const h=l.getAttribute("stroke-width");if(h&&!isNaN(parseFloat(h))&&l.setAttribute("stroke-width",parseFloat(h)*t),l.tagName==="path"){const f=l.getAttribute("d");if(f){const d=rd(f,t);l.setAttribute("d",d)}}if(l.tagName==="circle"&&["cx","cy","r"].forEach(f=>{const d=l.getAttribute(f);d&&!isNaN(parseFloat(d))&&l.setAttribute(f,parseFloat(d)*t)}),l.tagName==="rect"&&["x","y","width","height","rx","ry"].forEach(f=>{const d=l.getAttribute(f);d&&!isNaN(parseFloat(d))&&l.setAttribute(f,parseFloat(d)*t)}),l.tagName==="line"&&["x1","y1","x2","y2"].forEach(f=>{const d=l.getAttribute(f);d&&!isNaN(parseFloat(d))&&l.setAttribute(f,parseFloat(d)*t)}),l.tagName==="text"&&["x","y","font-size"].forEach(f=>{const d=l.getAttribute(f);d&&!isNaN(parseFloat(d))&&l.setAttribute(f,parseFloat(d)*t)}),l.tagName==="ellipse"&&["cx","cy","rx","ry"].forEach(f=>{const d=l.getAttribute(f);d&&!isNaN(parseFloat(d))&&l.setAttribute(f,parseFloat(d)*t)}),l.tagName==="polygon"||l.tagName==="polyline"){const f=l.getAttribute("points");if(f){const d=id(f,t);l.setAttribute("points",d)}}})}function rd(n,t){return n.replace(/(-?\d+(?:\.\d+)?)/g,e=>(parseFloat(e)*t).toString())}function id(n,t){return n.replace(/(-?\d+(?:\.\d+)?)/g,e=>(parseFloat(e)*t).toString())}function nf(n){const t=[];return n.querySelectorAll("g").forEach((i,s)=>{if(i.parentElement.tagName==="g")return;const a=sf(i);a&&a.width>0&&a.height>0&&t.push({index:s,element:i,className:i.getAttribute("class")||"",id:i.getAttribute("id")||"",boundingBox:a,width:a.width,height:a.height})}),t}function sf(n){try{let t=!1,e=null;if(!n.ownerDocument||!n.isConnected){e=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.style.position="absolute",e.style.visibility="hidden",e.style.width="10000px",e.style.height="10000px";const f=n.cloneNode(!0);e.appendChild(f),document.body.appendChild(e),n=f,t=!0}const i=n.getBBox(),s=n.getAttribute("transform");let a=0,l=0;if(s){const f=s.match(/translate\s*\(\s*(-?\d+(?:\.\d+)?)\s*,\s*(-?\d+(?:\.\d+)?)\s*\)/);f&&(a=parseFloat(f[1]),l=parseFloat(f[2]))}const h={x:i.x+a,y:i.y+l,width:i.width,height:i.height,minX:i.x+a,minY:i.y+l,maxX:i.x+i.width+a,maxY:i.y+i.height+l};return t&&e&&document.body.removeChild(e),h}catch(t){throw console.error("Failed to calculate bounding box for element:",t),new Error(`Failed to calculate bounding box for element: ${t.message}`)}}function nd(n,t){const e=n.cloneNode(!0),i=nf(e),s=Sa(t),a=[];return i.forEach(h=>{const f=h.width,d=h.height;if(f>s.printableWidth||d>s.printableHeight){const y={unitIndex:h.index,unitClass:h.className,unitId:h.id,unitSize:{width:f,height:d},pageSize:{width:s.printableWidth,height:s.printableHeight},exceedsWidth:f>s.printableWidth,exceedsHeight:d>s.printableHeight};a.push(y)}}),{isValid:a.length===0,violations:a,totalUnits:i.length,pageConstraints:{printableWidth:s.printableWidth,printableHeight:s.printableHeight,paperSize:t.paperSize,orientation:t.orientation}}}const hh={en:{title:"Sewing SVG to PDF Converter",subtitle:"Convert SVG files from Blender Seams to Sewing Pattern plugin to printable PDFs",uploadText:"Drag & drop SVG file<br>or",selectFileButton:"Select File",loadedFile:"Loaded file:",settingsTitle:"Settings",scaleCorrection:"Scale Correction",scaleFactor:"Scaling:",seamAllowanceSettings:"Seam Allowance",seamAllowance:"Seam allowance width:",seamAllowanceUnit:"mm",paperSettings:"Paper Settings",paperSize:"Paper size:",orientation:"Orientation:",portrait:"Portrait",landscape:"Landscape",printOptions:"Print Options",splitPages:"Split into multiple pages",overlapMargin:"Overlap margin (mm):",addMarks:"Add alignment marks",paperSizes:{a4:"A4 (210297mm)",a3:"A3 (297420mm)",b4:"B4 (257364mm)",b5:"B5 (182257mm)"},previewTitle:"Preview",sizeLabel:"Size:",pagesLabel:"Pages:",pagesUnit:"pages",generateButton:"Generate PDF",selectSvgFile:"Please select an SVG file",failedToLoad:"Failed to load file:",noSvgLoaded:"No SVG file loaded",generatingPdf:"Generating PDF...",pdfGenerated:"PDF generated successfully!",failedToGenerate:"Failed to generate PDF:",unitConstraintWarning:"Pattern Unit Size Warning",unitTooLarge:"The following pattern units exceed the printable page size:",unitExceedsWidth:"Width exceeds page limit",unitExceedsHeight:"Height exceeds page limit",unitExceedsBoth:"Width and height exceed page limits",unitSizeFormat:"Unit size: {width}mm  {height}mm",pageSizeFormat:"Max page size: {width}mm  {height}mm",unitSuggestion:"Try using a larger paper size (A3 instead of A4) or reduce the scaling to make the units smaller.",seamAllowanceError:"Seam allowance error ({pathId}): {error}",pathHasTooFewPoints:"Path has too few points for offset: {points}",offsetAlgorithmFailed:"Offset algorithm returned no polygons",copyright:" 2024 Sewing SVG to PDF Converter"},ja:{title:"Sewing SVG to PDF Converter",subtitle:"Blender Seams to Sewing Pattern SVGPDF",uploadText:"SVG&<br>",selectFileButton:"",loadedFile:":",settingsTitle:"",scaleCorrection:"",scaleFactor:":",seamAllowanceSettings:"",seamAllowance:":",seamAllowanceUnit:"mm",paperSettings:"",paperSize:":",orientation:":",portrait:"",landscape:"",printOptions:"",splitPages:"",overlapMargin:" (mm):",addMarks:"",paperSizes:{a4:"A4 (210297mm)",a3:"A3 (297420mm)",b4:"B4 (257364mm)",b5:"B5 (182257mm)"},previewTitle:"",sizeLabel:":",pagesLabel:":",pagesUnit:"",generateButton:"PDF",selectSvgFile:"SVG",failedToLoad:":",noSvgLoaded:"SVG",generatingPdf:"PDF...",pdfGenerated:"PDF",failedToGenerate:"PDF:",unitConstraintWarning:"",unitTooLarge:":",unitExceedsWidth:"",unitExceedsHeight:"",unitExceedsBoth:"",unitSizeFormat:": {width}mm  {height}mm",pageSizeFormat:": {width}mm  {height}mm",unitSuggestion:"A4A3",seamAllowanceError:" ({pathId}): {error}",pathHasTooFewPoints:": {points}",offsetAlgorithmFailed:"",copyright:" 2024 Sewing SVG to PDF Converter"}};function sd(){return(navigator.language||navigator.userLanguage).startsWith("ja")?"ja":"en"}let fh=sd();function Be(n){const t=n.split(".");let e=hh[fh];for(const i of t)if(e&&typeof e=="object")e=e[i];else break;if(e===void 0&&fh!=="en"){e=hh.en;for(const i of t)if(e&&typeof e=="object")e=e[i];else break}return e||n}function ad(){const n=document.querySelector("h1");n&&(n.textContent=Be("title"));const t=document.querySelector("header p");t&&(t.textContent=Be("subtitle"));const e=document.querySelector(".upload-area p");e&&(e.innerHTML=Be("uploadText"));const i=document.querySelector(".file-label");i&&(i.textContent=Be("selectFileButton"));const s=document.querySelector(".settings-section h2");s&&(s.textContent=Be("settingsTitle")),bl("scaleFactor",Be("scaleFactor")),bl("paperSize",Be("paperSize")),bl("orientation",Be("orientation"));const a=document.querySelectorAll(".setting-group h3");a[0]&&(a[0].textContent=Be("scaleCorrection")),a[1]&&(a[1].textContent=Be("paperSettings"));const l=document.getElementById("paperSize");l&&l.querySelectorAll("option").forEach(P=>{const g=P.value;P.textContent=Be(`paperSizes.${g}`)});const h=document.getElementById("orientation");if(h){const w=h.querySelectorAll("option");w[0].textContent=Be("portrait"),w[1].textContent=Be("landscape")}const f=document.querySelector(".preview-section h2");f&&(f.textContent=Be("previewTitle"));const d=document.getElementById("generatePdf");d&&(d.textContent=Be("generateButton"));const y=document.querySelector("footer p");y&&(y.textContent=Be("copyright"))}function bl(n,t){if(document.getElementById(n)){const i=document.querySelector(`label[for="${n}"]`);i&&(i.textContent=t)}}function od(){ad()}const ld={fileLoaded:(n,t)=>{n.fileInfo.innerHTML=`<strong>${Be("loadedFile")}</strong> ${t}`,n.fileInfo.classList.add("show"),n.settingsSection.style.display="block",n.previewSection.style.display="block",n.actionSection.style.display="block"},reset:n=>{n.fileInfo.classList.remove("show"),n.settingsSection.style.display="none",n.previewSection.style.display="none",n.actionSection.style.display="none",n.svgPreview.innerHTML="",n.pageInfo.innerHTML=""}};function ya(n){alert(n)}function ch(n,t,e="info"){n.innerHTML=t,n.classList.add("show"),e==="success"?n.style.backgroundColor="#c6f6d5":e==="error"?n.style.backgroundColor="#fed7d7":n.style.backgroundColor="#bee3f8"}function ud(n,t,e){const{violations:i,pageConstraints:s}=t;let a="";i.forEach((h,f)=>{const d=h.unitClass||h.unitId||`Unit ${h.unitIndex+1}`,y=e("unitSizeFormat").replace("{width}",h.unitSize.width.toFixed(1)).replace("{height}",h.unitSize.height.toFixed(1));let w="";h.exceedsWidth&&h.exceedsHeight?w=e("unitExceedsBoth"):h.exceedsWidth?w=e("unitExceedsWidth"):h.exceedsHeight&&(w=e("unitExceedsHeight")),a+=`
            <li>
                ${d}
                <div class="violation-details">
                    ${y}<br>
                    ${w}
                </div>
            </li>
        `});const l=e("pageSizeFormat").replace("{width}",s.printableWidth.toFixed(0)).replace("{height}",s.printableHeight.toFixed(0));n.unitWarning.innerHTML=`
        <h4>${e("unitConstraintWarning")}</h4>
        <p>${e("unitTooLarge")}</p>
        <ul>${a}</ul>
        <div class="violation-details">${l}</div>
        <div class="suggestion">${e("unitSuggestion")}</div>
    `,n.unitWarning.classList.add("show")}function hd(n){n.unitWarning.classList.remove("show")}class fd{constructor(){this.textures=new Map,this.selectedPiece=null,this.svgElement=null,this.syncCallback=null,this.isDragging=!1,this.dragStartPoint=null,this.dragStartOffset=null,this.activeTextureImage=null,this.isResizing=!1,this.resizeHandle=null,this.resizeStartPoint=null,this.resizeStartScale=null,this.resizeStartDimensions=null,this.isRotating=!1,this.rotateStartPoint=null,this.rotateStartAngle=null,this.rotateCenter=null,this.manipulationHandles=null}initialize(t){this.svgElement=t,this.removeSeamFills(),this.setupPatternPieceSelection(),this.rebuildTextureMap(),this.ensureAllTexturesClipped(),this.setupTextureManipulation()}removeSeamFills(){if(!this.svgElement)return;this.svgElement.querySelectorAll(".seam, .seam-allowance").forEach(e=>{e.style.fill="transparent",e.setAttribute("fill","transparent"),e.style.pointerEvents="all"})}setupPatternPieceSelection(){if(!this.svgElement)return;this.svgElement.addEventListener("mouseover",i=>{if(i.target.classList.contains("seam")||i.target.classList.contains("seam-allowance")){const s=this.findPatternPiece(i.target);s&&s.classList.add("hover")}}),this.svgElement.addEventListener("mouseout",i=>{if(i.target.classList.contains("seam")||i.target.classList.contains("seam-allowance")){const s=this.findPatternPiece(i.target);s&&s.classList.remove("hover")}}),this.svgElement.addEventListener("click",i=>{let s=i.target.closest(".pattern-unit");!s&&(i.target.classList.contains("seam")||i.target.classList.contains("seam-allowance"))&&(s=i.target.parentElement,s&&s.tagName==="g"&&s.classList.add("pattern-piece")),s||(s=i.target.closest(".pattern-piece")),s?this.selectPiece(s):i.target.closest(".texture-image")||this.deselectPiece()}),this.svgElement.querySelectorAll(".pattern-unit").forEach(i=>{i.style.cursor="pointer"}),this.svgElement.querySelectorAll(".seam, .seam-allowance").forEach(i=>{i.style.cursor="pointer"})}findPatternPiece(t){if(t.classList.contains("pattern-unit")||t.classList.contains("pattern-piece"))return t;let e=t.closest(".pattern-unit");if(e||(e=t.closest(".pattern-piece"),e))return e;if(t.classList.contains("seam")||t.classList.contains("seam-allowance")){const i=t.parentElement;if(i&&i.tagName==="g")return i.classList.add("pattern-piece"),i}return null}selectPiece(t){if(this.selectedPiece===t)return;this.deselectPiece(),this.selectedPiece=t,t.classList.add("selected");const e=t.getAttribute("id");if(!e)throw console.error("Pattern piece has no ID:",t),new Error("Pattern piece must have an ID");document.getElementById("selectedPieceName").textContent=e,document.getElementById("textureSettings").style.display="block";const i=this.textures.get(e);if(i){this.showTextureControls(i),document.getElementById("removeTextureBtn").style.display="inline-block";const s=t.querySelector(".texture-image");s&&s.removeAttribute("clip-path"),this.updateTextureInteractivity()}else document.getElementById("textureControls").style.display="none",document.getElementById("removeTextureBtn").style.display="none"}deselectPiece(){if(this.selectedPiece){const t=this.selectedPiece.getAttribute("id");if(t){const e=this.selectedPiece.querySelector(".texture-image");if(e){const i=`clip-${t}`;e.setAttribute("clip-path",`url(#${i})`)}}this.selectedPiece.classList.remove("selected"),this.selectedPiece=null}document.getElementById("textureSettings").style.display="none",this.manipulationHandles&&(this.manipulationHandles.remove(),this.manipulationHandles=null),this.updateTextureInteractivity()}applyTexture(t,e,i){if(!this.selectedPiece)throw new Error("No piece selected");const s=this.selectedPiece.getAttribute("id");if(!s)throw new Error("Selected piece has no ID");this.removeTexture();const a=`clip-${s}`;this.createClipPath(this.selectedPiece,a);const h=this.selectedPiece.querySelector(".seam").getBBox(),f=e/i,d=h.width/h.height;let y,w;f>d?(y=h.width,w=y/f):(w=h.height,y=w*f);const P=document.createElementNS("http://www.w3.org/2000/svg","image");P.setAttribute("href",t),P.classList.add("texture-image");const g=h.x+(h.width-y)/2,N=h.y+(h.height-w)/2;P.setAttribute("x",g),P.setAttribute("y",N),P.setAttribute("width",y),P.setAttribute("height",w),P.setAttribute("data-natural-width",e),P.setAttribute("data-natural-height",i),P.setAttribute("data-offset-x","0"),P.setAttribute("data-offset-y","0"),P.setAttribute("data-scale","100"),P.setAttribute("data-rotation","0"),P.setAttribute("clip-path",`url(#${a})`),this.selectedPiece.insertBefore(P,this.selectedPiece.firstChild),P.removeAttribute("clip-path");const A=h.x+h.width/2,T=h.y+h.height/2,L={src:t,naturalWidth:e,naturalHeight:i,pieceCenter:{x:A,y:T},transform:{x:g,y:N,width:y,height:w,scale:100,rotation:0,offsetX:0,offsetY:0}};this.textures.set(s,L),this.showTextureControls(L),document.getElementById("removeTextureBtn").style.display="inline-block",this.updateTextureInteractivity(),this.syncCallback&&this.syncCallback(this.selectedPiece)}createClipPath(t,e,i=0,s=null,a=null){let l=this.svgElement.querySelector(`#${e}`);l&&l.remove();const h=document.createElementNS("http://www.w3.org/2000/svg","clipPath");h.setAttribute("id",e);let f=t.querySelector(".seam-allowance");if(f||(f=t.querySelector(".seam")),f){const y=f.cloneNode(!0);if(y.removeAttribute("class"),y.removeAttribute("style"),y.setAttribute("fill","none"),i!==0){if(s===null||a===null){const w=f.getBBox();s=w.x+w.width/2,a=w.y+w.height/2}y.setAttribute("transform",`rotate(${-i} ${s} ${a})`)}h.appendChild(y)}else console.warn("No clipping path found for piece:",t);let d=this.svgElement.querySelector("defs");d||(d=document.createElementNS("http://www.w3.org/2000/svg","defs"),this.svgElement.insertBefore(d,this.svgElement.firstChild)),d.appendChild(h)}showTextureControls(t){document.getElementById("textureControls").style.display="block",document.getElementById("textureScale").value=t.transform.scale,document.getElementById("textureRotation").value=t.transform.rotation,document.getElementById("textureOffsetX").value=t.transform.offsetX,document.getElementById("textureOffsetY").value=t.transform.offsetY}updateTextureTransform(t){if(!this.selectedPiece)return;const e=this.selectedPiece.getAttribute("id");if(!e){console.error("Selected piece has no ID");return}const i=this.textures.get(e);if(!i)return;const s=this.selectedPiece.querySelector(".texture-image");if(!s)return;const a=parseFloat(document.getElementById("textureScale").value)/100,l=parseFloat(document.getElementById("textureRotation").value),h=parseFloat(document.getElementById("textureOffsetX").value),f=parseFloat(document.getElementById("textureOffsetY").value);i.transform.scale=a*100,i.transform.rotation=l,i.transform.offsetX=h,i.transform.offsetY=f;const d=i.transform.width*a,y=i.transform.height*a;let w,P;if(i.pieceCenter)w=i.pieceCenter.x,P=i.pieceCenter.y;else{const Y=this.selectedPiece.querySelector(".seam").getBBox();w=Y.x+Y.width/2,P=Y.y+Y.height/2,i.pieceCenter={x:w,y:P}}const g=w-d/2+h,N=P-y/2+f;s.setAttribute("x",g),s.setAttribute("y",N),s.setAttribute("width",d),s.setAttribute("height",y),s.setAttribute("data-offset-x",h),s.setAttribute("data-offset-y",f),s.setAttribute("data-scale",a*100),s.setAttribute("data-rotation",l);const A=g+d/2,T=N+y/2;l!==0?s.setAttribute("transform",`rotate(${l} ${A} ${T})`):s.removeAttribute("transform");const L=`clip-${e}`;this.createClipPath(this.selectedPiece,L,l,A,T),t?t(this.selectedPiece):this.syncCallback&&this.syncCallback(this.selectedPiece),this.updateManipulationHandles()}removeTexture(){if(!this.selectedPiece)return;const t=this.selectedPiece.getAttribute("id"),e=this.selectedPiece.querySelector(".texture-image");e&&e.remove(),this.textures.delete(t),document.getElementById("textureControls").style.display="none",document.getElementById("removeTextureBtn").style.display="none",this.syncCallback&&this.syncCallback(this.selectedPiece)}getTextureData(){const t=[];return this.textures.forEach((e,i)=>{t.push({pieceId:i,...e})}),t}loadTextureData(t){t.forEach(e=>{const i=this.svgElement.querySelector(`#${e.pieceId}`);if(i){const s=i.querySelector(".texture-image");if(s){this.textures.set(e.pieceId,e);const a=`clip-${e.pieceId}`;s.setAttribute("clip-path",`url(#${a})`)}else{this.selectedPiece=i,this.applyTexture(e.src,e.naturalWidth,e.naturalHeight);const a=this.textures.get(e.pieceId);a&&(a.transform=e.transform,e.pieceCenter&&(a.pieceCenter=e.pieceCenter),this.updateTextureTransform());const l=i.querySelector(".texture-image");if(l){const h=`clip-${e.pieceId}`;l.setAttribute("clip-path",`url(#${h})`)}}}}),this.deselectPiece()}reapplyTextures(){if(!this.svgElement||this.textures.size===0)return;const t=new Map(this.textures);this.textures.clear(),t.forEach((e,i)=>{const s=this.svgElement.querySelector(`#${i}`);if(s)if(s.querySelector(".texture-image"))this.textures.set(i,e);else{this.selectedPiece=s,this.applyTexture(e.src,e.naturalWidth,e.naturalHeight);const l=this.textures.get(i);l&&(l.transform=e.transform,this.updateTextureTransform())}}),this.selectedPiece=null}rebuildTextureMap(){if(!this.svgElement)throw new Error("SVG element is not initialized");this.textures.clear(),this.svgElement.querySelectorAll(".texture-image").forEach(e=>{const i=e.parentElement;if(!i||i.tagName!=="g"){console.error("Texture image found outside of g element:",e);return}const s=i.getAttribute("id");if(!s){console.error("Pattern piece with texture has no ID:",i);return}const l=i.querySelector(".seam").getBBox(),h=l.x+l.width/2,f=l.y+l.height/2,d={src:e.getAttribute("href")||e.getAttribute("xlink:href"),naturalWidth:parseFloat(e.getAttribute("data-natural-width")||e.getAttribute("width")),naturalHeight:parseFloat(e.getAttribute("data-natural-height")||e.getAttribute("height")),pieceCenter:{x:h,y:f},transform:{x:parseFloat(e.getAttribute("x")||0),y:parseFloat(e.getAttribute("y")||0),width:parseFloat(e.getAttribute("width")||0),height:parseFloat(e.getAttribute("height")||0),scale:100,rotation:0,offsetX:parseFloat(e.getAttribute("data-offset-x")||0),offsetY:parseFloat(e.getAttribute("data-offset-y")||0)}},y=e.getAttribute("data-scale");y&&(d.transform.scale=parseFloat(y));const w=e.getAttribute("data-rotation");if(w)d.transform.rotation=parseFloat(w);else{const P=e.getAttribute("transform");if(P){const g=P.match(/rotate\(([^,]+)/);g&&(d.transform.rotation=parseFloat(g[1]))}}this.textures.set(s,d)})}ensureAllTexturesClipped(){if(!this.svgElement)return;this.svgElement.querySelectorAll(".texture-image").forEach(e=>{const i=e.parentElement;if(!i||i.tagName!=="g")return;const s=i.getAttribute("id");if(!s||i===this.selectedPiece)return;const a=`clip-${s}`;this.svgElement.querySelector(`#${a}`)||this.createClipPath(i,a),e.setAttribute("clip-path",`url(#${a})`)})}setupTextureManipulation(){this.svgElement&&(this.svgElement.addEventListener("mousedown",t=>this.handleTextureMouseDown(t)),this.svgElement.addEventListener("mousemove",t=>this.handleTextureMouseMove(t)),this.svgElement.addEventListener("mouseup",t=>this.handleTextureMouseUp(t)),this.svgElement.addEventListener("mouseleave",t=>this.handleTextureMouseUp(t)),this.updateTextureInteractivity())}updateTextureInteractivity(){this.svgElement.querySelectorAll(".texture-image").forEach(e=>{e.parentElement===this.selectedPiece?(e.style.pointerEvents="all",e.style.cursor="move"):e.style.pointerEvents="none"}),this.updateManipulationHandles()}updateManipulationHandles(){if(this.manipulationHandles&&(this.manipulationHandles.remove(),this.manipulationHandles=null),!this.selectedPiece)return;const t=this.selectedPiece.querySelector(".texture-image");if(!t)return;const e=document.createElementNS("http://www.w3.org/2000/svg","g");e.classList.add("texture-manipulation-handles");const i=parseFloat(t.getAttribute("x")),s=parseFloat(t.getAttribute("y")),a=parseFloat(t.getAttribute("width")),l=parseFloat(t.getAttribute("height"));let h=0,f=i+a/2,d=s+l/2;const y=t.getAttribute("transform");if(y){const A=y.match(/rotate\(([^,]+),?\s*([^,]*),?\s*([^)]*)\)/);A&&(h=parseFloat(A[1]),A[2]&&A[3]&&(f=parseFloat(A[2]),d=parseFloat(A[3])))}const w=10;[{id:"nw",x:i-w/2,y:s-w/2},{id:"ne",x:i+a-w/2,y:s-w/2},{id:"sw",x:i-w/2,y:s+l-w/2},{id:"se",x:i+a-w/2,y:s+l-w/2}].forEach(A=>{const T=document.createElementNS("http://www.w3.org/2000/svg","rect");T.setAttribute("x",A.x),T.setAttribute("y",A.y),T.setAttribute("width",w),T.setAttribute("height",w),T.setAttribute("fill","#4299e1"),T.setAttribute("stroke","#fff"),T.setAttribute("stroke-width","1"),T.setAttribute("class",`resize-handle resize-handle-${A.id}`),T.style.cursor=A.id.includes("n")&&A.id.includes("w")||A.id.includes("s")&&A.id.includes("e")?"nwse-resize":"nesw-resize",T.style.pointerEvents="all",e.appendChild(T)});const g=20;[{id:"top",cx:i+a/2,cy:s-g,lineX1:i+a/2,lineY1:s,lineX2:i+a/2,lineY2:s-g},{id:"bottom",cx:i+a/2,cy:s+l+g,lineX1:i+a/2,lineY1:s+l,lineX2:i+a/2,lineY2:s+l+g},{id:"left",cx:i-g,cy:s+l/2,lineX1:i,lineY1:s+l/2,lineX2:i-g,lineY2:s+l/2},{id:"right",cx:i+a+g,cy:s+l/2,lineX1:i+a,lineY1:s+l/2,lineX2:i+a+g,lineY2:s+l/2}].forEach(A=>{const T=document.createElementNS("http://www.w3.org/2000/svg","line");T.setAttribute("x1",A.lineX1),T.setAttribute("y1",A.lineY1),T.setAttribute("x2",A.lineX2),T.setAttribute("y2",A.lineY2),T.setAttribute("stroke","#48bb78"),T.setAttribute("stroke-width","1"),T.setAttribute("stroke-dasharray","2,2"),T.style.pointerEvents="none",e.appendChild(T);const L=document.createElementNS("http://www.w3.org/2000/svg","circle");L.setAttribute("cx",A.cx),L.setAttribute("cy",A.cy),L.setAttribute("r",6),L.setAttribute("fill","#48bb78"),L.setAttribute("stroke","#fff"),L.setAttribute("stroke-width","1"),L.setAttribute("class",`rotate-handle rotate-handle-${A.id}`),L.style.cursor="crosshair",L.style.pointerEvents="all",e.appendChild(L)}),h!==0&&e.setAttribute("transform",`rotate(${h} ${f} ${d})`),this.selectedPiece.appendChild(e),this.manipulationHandles=e}handleTextureMouseDown(t){if(!this.selectedPiece)return;const e=this.selectedPiece.querySelector(".texture-image"),i=t.target;if(i.classList.contains("resize-handle")){this.startResize(t,i);return}if(i.classList.contains("rotate-handle")){this.startRotation(t);return}if(!e||i!==e)return;this.isDragging=!0,this.activeTextureImage=e,this.dragStartPoint={x:t.clientX,y:t.clientY},e.classList.add("dragging");const s=this.selectedPiece.getAttribute("id"),a=this.textures.get(s);a?this.dragStartOffset={x:a.transform.offsetX||0,y:a.transform.offsetY||0}:this.dragStartOffset={x:0,y:0},t.preventDefault()}startResize(t,e){this.isResizing=!0,this.resizeHandle=e,this.resizeStartPoint={x:t.clientX,y:t.clientY};const i=this.selectedPiece.querySelector(".texture-image"),s=this.selectedPiece.getAttribute("id"),a=this.textures.get(s);a&&(this.resizeStartScale=a.transform.scale||100,this.resizeStartDimensions={width:parseFloat(i.getAttribute("width")),height:parseFloat(i.getAttribute("height"))}),i.classList.add("resizing"),t.preventDefault()}startRotation(t){this.isRotating=!0,this.rotateStartPoint={x:t.clientX,y:t.clientY};const e=this.selectedPiece.querySelector(".texture-image"),i=this.selectedPiece.getAttribute("id"),s=this.textures.get(i),a=parseFloat(e.getAttribute("x")),l=parseFloat(e.getAttribute("y")),h=parseFloat(e.getAttribute("width")),f=parseFloat(e.getAttribute("height"));this.rotateCenter={x:a+h/2,y:l+f/2};const d=this.svgElement.createSVGPoint();d.x=t.clientX,d.y=t.clientY;const y=this.svgElement.getScreenCTM();if(y){const w=d.matrixTransform(y.inverse()),P=w.x-this.rotateCenter.x,g=w.y-this.rotateCenter.y;this.rotateStartAngle=Math.atan2(g,P)*180/Math.PI}s?this.rotateStartRotation=s.transform.rotation||0:this.rotateStartRotation=0,e.classList.add("rotating"),t.preventDefault()}handleTextureMouseMove(t){this.isResizing?this.handleResize(t):this.isRotating?this.handleRotation(t):this.isDragging&&this.activeTextureImage&&this.handleDrag(t)}handleDrag(t){const e=this.selectedPiece.getAttribute("id"),i=this.textures.get(e),s=i?i.transform.scale/100:1,a=this.svgElement.createSVGPoint(),l=this.svgElement.getScreenCTM();if(!l)return;a.x=t.clientX,a.y=t.clientY;const h=a.matrixTransform(l.inverse());a.x=this.dragStartPoint.x,a.y=this.dragStartPoint.y;const f=a.matrixTransform(l.inverse());let d=h.x-f.x,y=h.y-f.y;d=d/s,y=y/s;const w=this.dragStartOffset.x+d,P=this.dragStartOffset.y+y;document.getElementById("textureOffsetX").value=Math.round(w),document.getElementById("textureOffsetY").value=Math.round(P),this.updateTextureTransform(this.syncCallback),t.preventDefault()}handleResize(t){const e=t.clientX-this.resizeStartPoint.x,i=t.clientY-this.resizeStartPoint.y,s=this.resizeHandle.getAttribute("class");if(s.includes("resize-handle-")){const l=s.match(/resize-handle-(\w+)/)?.[1];let h=1;switch(l){case"nw":h=e<0||i<0?1:-1;break;case"ne":h=e>0||i<0?1:-1;break;case"sw":h=e<0||i>0?1:-1;break;case"se":h=e>0||i>0?1:-1;break}const d=Math.max(Math.abs(e),Math.abs(i))*h/300,y=Math.max(10,Math.min(500,this.resizeStartScale+d*100));document.getElementById("textureScale").value=Math.round(y),this.updateTextureTransform(this.syncCallback)}t.preventDefault()}handleRotation(t){const e=this.svgElement.createSVGPoint();e.x=t.clientX,e.y=t.clientY;const i=this.svgElement.getScreenCTM();if(!i)return;const s=e.matrixTransform(i.inverse()),a=s.x-this.rotateCenter.x,l=s.y-this.rotateCenter.y,f=Math.atan2(l,a)*180/Math.PI-this.rotateStartAngle;let d=this.rotateStartRotation+f;for(;d<0;)d+=360;for(;d>=360;)d-=360;document.getElementById("textureRotation").value=Math.round(d),this.updateTextureTransform(this.syncCallback),t.preventDefault()}handleTextureMouseUp(t){const e=this.selectedPiece?.querySelector(".texture-image");this.isDragging&&(this.activeTextureImage&&this.activeTextureImage.classList.remove("dragging"),this.isDragging=!1,this.activeTextureImage=null,this.dragStartPoint=null,this.dragStartOffset=null),this.isResizing&&(e&&e.classList.remove("resizing"),this.isResizing=!1,this.resizeHandle=null,this.resizeStartPoint=null,this.resizeStartScale=null,this.resizeStartDimensions=null),this.isRotating&&(e&&e.classList.remove("rotating"),this.isRotating=!1,this.rotateStartPoint=null,this.rotateStartAngle=null,this.rotateStartRotation=null,this.rotateCenter=null),this.updateManipulationHandles()}}let Ss=null,cr=null,Hn=0,Ji=null,pr=null;const te={fileInput:document.getElementById("fileInput"),uploadArea:document.getElementById("uploadArea"),fileInfo:document.getElementById("fileInfo"),settingsSection:document.getElementById("settingsSection"),previewSection:document.getElementById("previewSection"),actionSection:document.getElementById("actionSection"),svgPreview:document.getElementById("svgPreview"),pageInfo:document.getElementById("pageInfo"),unitWarning:document.getElementById("unitWarning"),generateButton:document.getElementById("generatePdf"),progressInfo:document.getElementById("progressInfo"),scaleFactor:document.getElementById("scaleFactor"),seamAllowance:document.getElementById("seamAllowance"),paperSize:document.getElementById("paperSize"),orientation:document.getElementById("orientation"),pageNavigation:document.getElementById("pageNavigation"),prevPageBtn:document.getElementById("prevPageBtn"),nextPageBtn:document.getElementById("nextPageBtn"),pageIndicator:document.getElementById("pageIndicator"),textureImageInput:document.getElementById("textureImageInput"),removeTextureBtn:document.getElementById("removeTextureBtn"),textureScale:document.getElementById("textureScale"),textureRotation:document.getElementById("textureRotation"),textureOffsetX:document.getElementById("textureOffsetX"),textureOffsetY:document.getElementById("textureOffsetY")};document.addEventListener("DOMContentLoaded",()=>{od(),cd(),td(te.uploadArea,te.fileInput,pd)});function cd(){te.generateButton.addEventListener("click",gd),te.scaleFactor.addEventListener("change",ma),te.seamAllowance.addEventListener("change",ma),te.paperSize.addEventListener("change",ma),te.orientation.addEventListener("change",ma),te.prevPageBtn.addEventListener("click",()=>ph(-1)),te.nextPageBtn.addEventListener("click",()=>ph(1)),te.textureImageInput.addEventListener("change",vd),te.removeTextureBtn.addEventListener("click",yd),te.textureScale.addEventListener("input",uo),te.textureRotation.addEventListener("input",uo),te.textureOffsetX.addEventListener("input",uo),te.textureOffsetY.addEventListener("input",uo)}async function pd(n){if(!n||!n.name.endsWith(".svg")){ya(Be("selectSvgFile"));return}try{Ss=await Qp(n),wd(Ss),rc(Ss),lc(Ss),ld.fileLoaded(te,n.name),ma()}catch(t){ya(Be("failedToLoad")+" "+t.message),console.error(t)}}function ma(){if(!Ss)return;const t=parseFloat(te.scaleFactor.value)/100,e=parseFloat(te.seamAllowance.value);let i=Ss.cloneNode(!0);if(e>0){const l=e/t,h=tc(i,l);if(i=h.svg,h.errors.length>0){const f=h.errors.join(`
`);ya(f)}}ed(i,t),cr=i,cr.querySelectorAll("path.seam-allowance").forEach(l=>{l.setAttribute("stroke-width","2")}),dd(),md(),pr||(pr=new fd,pr.syncCallback=l=>{bd(l)});const a=te.svgPreview.querySelector("svg");a&&(pr.initialize(a),Bl(a),Dl(a))}function dd(){if(!cr)return;const n={paperSize:te.paperSize.value,orientation:te.orientation.value,overlap:0,scaleFactor:parseFloat(te.scaleFactor.value)/100,seamAllowance:parseFloat(te.seamAllowance.value)},t=Sa(n);if(Ji=Ol(cr,t),Hn=0,Ji.pages.length>1)te.pageNavigation.style.display="flex",af();else{te.pageNavigation.style.display="none",te.svgPreview.innerHTML="";const e=cr.cloneNode(!0);if(te.svgPreview.appendChild(e),pr){const i=pr.getTextureData();pr.initialize(e),i.length>0&&pr.loadTextureData(i)}}}function ph(n){if(!Ji||Ji.pages.length<=1)return;const t=Hn+n;t>=0&&t<Ji.pages.length&&(Hn=t,af())}function af(){if(!Ji||!cr)return;const n={paperSize:te.paperSize.value,orientation:te.orientation.value,overlap:0,scaleFactor:parseFloat(te.scaleFactor.value)/100,seamAllowance:parseFloat(te.seamAllowance.value)},t=Sa(n),e=Ji.pages[Hn];te.svgPreview.innerHTML="";const i=mh(cr,e,t);if(te.svgPreview.appendChild(i),pr){const s=pr.getTextureData();pr.initialize(i),s.length>0&&pr.loadTextureData(s)}Bl(i),Dl(i),te.pageIndicator.textContent=` ${Hn+1} / ${Ji.pages.length}`,te.prevPageBtn.disabled=Hn===0,te.nextPageBtn.disabled=Hn===Ji.pages.length-1}function md(){if(!cr)return;const n={paperSize:te.paperSize.value,orientation:te.orientation.value,overlap:0,scaleFactor:parseFloat(te.scaleFactor.value)/100,seamAllowance:parseFloat(te.seamAllowance.value)},t=Kp(cr,n);if(t){let i=`
            ${Be("sizeLabel")} ${t.width}mm  ${t.height}mm<br>
            ${Be("pagesLabel")} ${t.pageCount} ${Be("pagesUnit")}
        `;if(t.pageCount>1){const s=nf(cr);s.length>0&&(i+=`<br>${Be("unitsLabel")||"Pattern pieces:"} ${s.length}`)}te.pageInfo.innerHTML=i}const e=nd(cr,n);e.isValid?(hd(te),te.generateButton.disabled=!1):(ud(te,e,Be),te.generateButton.disabled=!0)}async function gd(){if(!cr){ya(Be("noSvgLoaded"));return}try{te.generateButton.disabled=!0,ch(te.progressInfo,Be("generatingPdf"));const n={paperSize:te.paperSize.value,orientation:te.orientation.value,overlap:0,addMarks:!0,scaleFactor:parseFloat(te.scaleFactor.value)/100,seamAllowance:parseFloat(te.seamAllowance.value)};await $p(cr,n),ch(te.progressInfo,Be("pdfGenerated"),"success")}catch(n){ya(Be("failedToGenerate")+" "+n.message),console.error(n)}finally{te.generateButton.disabled=!1,setTimeout(()=>{te.progressInfo.classList.remove("show")},3e3)}}async function vd(n){const t=n.target.files[0];if(!t||!pr)return;const e=new FileReader;e.onload=i=>{const s=new Image;s.onload=()=>{pr.applyTexture(i.target.result,s.width,s.height)},s.src=i.target.result},e.readAsDataURL(t),n.target.value=""}function yd(){pr&&pr.selectedPiece&&pr.removeTexture()}function uo(){pr&&pr.updateTextureTransform()}function bd(n){if(!n)throw new Error("Preview piece is required");if(!cr)throw new Error("Scaled SVG is not available");const t=n.getAttribute("id");if(!t)throw new Error("Preview piece must have an ID");const e=cr.querySelector(`#${t}`);if(!e)throw new Error(`Source piece with ID ${t} not found in scaled SVG`);const i=e.querySelector(".texture-image");i&&i.remove();const s=n.querySelector(".texture-image");if(s){const h=s.cloneNode(!0);e.insertBefore(h,e.firstChild)}else{const h=e.querySelector(".texture-image");h&&h.remove()}const a=`clip-${t}`;if(!cr.querySelector(`#${a}`)&&s){const h=n.ownerDocument.querySelector(`#${a}`);if(h){let f=cr.querySelector("defs");f||(f=document.createElementNS("http://www.w3.org/2000/svg","defs"),cr.insertBefore(f,cr.firstChild)),f.appendChild(h.cloneNode(!0))}}}function wd(n){const t=n.querySelectorAll("g");let e=0;t.forEach(i=>{i.querySelector(".seam")&&(i.getAttribute("id")||(e++,i.setAttribute("id",`pattern-piece-${e}`)))})}export{Me as _,xd as c,vo as g};
